{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1526914436000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1526914436000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1526914436000},{"_id":"themes/next/.gitignore","hash":"0b5c2ffd41f66eb1849d6426ba8cf9649eeed329","modified":1526914436000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1526914436000},{"_id":"themes/next/.javascript_ignore","hash":"8a224b381155f10e6eb132a4d815c5b52962a9d1","modified":1526914436000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1526914436000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1526914436000},{"_id":"themes/next/.travis.yml","hash":"d60d4a5375fea23d53b2156b764a99b2e56fa660","modified":1526914436000},{"_id":"themes/next/LICENSE.md","hash":"18144d8ed58c75af66cb419d54f3f63374cd5c5b","modified":1583035845000},{"_id":"themes/next/README.md","hash":"d3035c6961280c1b4afb3a07661f5a635ce1eaff","modified":1583035845000},{"_id":"themes/next/_config.yml","hash":"b3147c8bacca06009359c7b076a7e049a031577b","modified":1584773880849},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1583035845000},{"_id":"themes/next/gulpfile.js","hash":"72e6d5a6e32d5f95d82e4c4d0c963d39555bb760","modified":1583035845000},{"_id":"themes/next/package.json","hash":"2941b27b2f62b5fe4821556de8cb90b570fbfb1d","modified":1583035845000},{"_id":"source/_posts/DS-linklist.md","hash":"560a34d0ca3485bd70122a54c95d02d0a9bf417f","modified":1527347304000},{"_id":"source/_posts/android-AndroidManifest.md","hash":"253f8b552c8640b0f6e1cb9f55fade558701a39d","modified":1526819852000},{"_id":"source/_posts/android-adb.md","hash":"ac24893ce96033303d866a3b5b3ee953fbcfb1ca","modified":1526819836000},{"_id":"source/_posts/android-howto-makeapk-cmd.md","hash":"1dee0bca9ef9a69b6271c2ce7749394305ed5fb4","modified":1526819864000},{"_id":"source/_posts/android-jni.md","hash":"1e5e3ff923760b36726bd4471d90df47f448d36f","modified":1526819878000},{"_id":"source/_posts/android-makefirst-app.md","hash":"540c4fc8a25e3849eb25be32268a87ae05533183","modified":1526819892000},{"_id":"source/_posts/android-will-write.md","hash":"ed5d9168d985afa717ed4f1337e43c77542baf4f","modified":1526806796000},{"_id":"source/_posts/DS-string.md","hash":"5e9d4f45d1f50533f335ab6de4e04120a2431a14","modified":1530365422000},{"_id":"source/_posts/code-efficandreadable.md","hash":"cb4eb885ef506ea7255b378e0ddc81ff8e20dcdc","modified":1527345166000},{"_id":"source/_posts/cpp-class-memory.md","hash":"4ed50612f3ae705e27d63e824945f5f172639cb5","modified":1528513232000},{"_id":"source/_posts/cpp-conandde.md","hash":"c6b3c0800a69c27798519ac258636d4a5c541180","modified":1528515420000},{"_id":"source/_posts/cpp-conanddest-semantics.md","hash":"76616d9a9a9e7ade4cc467961d0fd65b4ba78969","modified":1528553058000},{"_id":"source/_posts/cpp-const.md","hash":"18d1e31449dfeca1ab303ab4e42989b7074ce23e","modified":1528468942000},{"_id":"source/_posts/cpp-datamember-memory.md","hash":"cfa44c11beee42efefb54bec15b95075e166bf9d","modified":1528531308000},{"_id":"source/_posts/cpp-debug-layout-dynamic.md","hash":"738679b2efa4889c5a2b64eb221cbd7bdf6757f2","modified":1526918814000},{"_id":"source/_posts/cpp-debug-layout-static.md","hash":"285a3787327ac8bcfc81cd80a31ef9c7e2178c12","modified":1526819758000},{"_id":"source/_posts/cpp-funcmember-memory.md","hash":"daf8c557d245496b4a4e0f2f831154c75e7158d8","modified":1528533990000},{"_id":"source/_posts/cpp-inheritance.md","hash":"7da187a6b5ab931334bf0d3b354d5317a2969422","modified":1528517192000},{"_id":"source/_posts/cpp-polymorphism.md","hash":"1625eddc66584c43198daba8157a88dcdd7c7fbe","modified":1528526124000},{"_id":"source/_posts/cpp-runtime-semantis.md","hash":"6f9876c236a1d72c2734b3096b969db06907dc69","modified":1584771860147},{"_id":"source/_posts/cpp-static.md","hash":"7b470a7101957cd445321805478e1b4ca783608d","modified":1528471422000},{"_id":"source/_posts/cpp-this.md","hash":"0ac44157afff38ea61cdc747964c67844da4141e","modified":1528511912000},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1526742406000},{"_id":"source/_posts/ksance-test-article.md","hash":"3b9a7ec8ad9a2fe4a71c064684e71d369db6d0f2","modified":1526749064000},{"_id":"source/_posts/leetcode-linklist1.md","hash":"5212bcf4eae78ce4119b50fa90bc5a532d3814de","modified":1528033208000},{"_id":"source/_posts/leetcode-linklist2.md","hash":"f1151d45fc42be3868930c7150b0f3de3a223944","modified":1528034268000},{"_id":"source/_posts/leetcode-linklist3.md","hash":"a5bc88a5d9e786da0ecb97fb22499f856e95a50c","modified":1528385726000},{"_id":"source/_posts/leetcode-string.md","hash":"c5690eff8612214c3c7468ba0a5dd4c5fb9d6728","modified":1529833810000},{"_id":"source/_posts/tcpip-ARP.md","hash":"3724a39a51379982c6ffcad14c39636d3e64bdaa","modified":1527696536000},{"_id":"source/_posts/tcpip-IP.md","hash":"d10ffc4e9a1671a349f609e849e87cb51c7fdd2c","modified":1528599516000},{"_id":"source/_posts/tcpip-MAC.md","hash":"97476df982e25560676f77cd85fe89a70ca98093","modified":1528000332000},{"_id":"source/_posts/tcpip-PF-PACKET.md","hash":"98b75437c9b454fd24b7feb7c30a0fb2f1971edb","modified":1527424622000},{"_id":"source/_posts/tcpip-mtu.md","hash":"266608f5b4b8cfcb862bd25b3463ca60f7f8240d","modified":1526827210000},{"_id":"source/_posts/tcpip-pingtraceroute.md","hash":"ebd9969a48e709a674cedaa399f097e4dc9e8db3","modified":1529852126000},{"_id":"source/_posts/tcpip-routeicmp.md","hash":"b13d6a2ee6a7cc7b2aa246f444a742a91570ab87","modified":1529249044000},{"_id":"source/_posts/test-article-picture.md","hash":"731e66290f4b39884029a58b10240e11d6d6966e","modified":1570526334218},{"_id":"source/about/index.md","hash":"db016946b1b65505a284f2d84e7aba23f2cd0b43","modified":1527305322000},{"_id":"source/categories/index.md","hash":"dd3d5d6f7366a53deb0878667c845f3c458b01de","modified":1527093894000},{"_id":"source/tags/index.md","hash":"22a0e0b79bbfd13e3c66bd6fbd2ef264a6c87154","modified":1527093734000},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1526914436000},{"_id":"themes/next/.git/config","hash":"91b6a53b2a7f929b698734717a38d4ac169f0c1f","modified":1526914436000},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1526914306000},{"_id":"themes/next/.git/index","hash":"a902792b20e17cbdcf8427d7f83145341ba6db7d","modified":1526914436000},{"_id":"themes/next/.git/packed-refs","hash":"8e36811256ee380c2c65692f1b8f8e77c5bc33c9","modified":1526914436000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1526914436000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"50d48c47162817a3810a9d9ad51104e83947419a","modified":1526914436000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"902f627155a65099e0a37842ff396a58d0dc306f","modified":1526914436000},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1526914436000},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1583035845000},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"c7a994b9542040317d8f99affa1405c143a94a38","modified":1583035845000},{"_id":"themes/next/docs/AUTHORS.md","hash":"10135a2f78ac40e9f46b3add3e360c025400752f","modified":1583035845000},{"_id":"themes/next/docs/DATA-FILES.md","hash":"40a8089076005e0d26ef7c0db58a2b5b464cda6c","modified":1583035845000},{"_id":"themes/next/docs/INSTALLATION.md","hash":"af88bcce035780aaa061261ed9d0d6c697678618","modified":1583035845000},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"08cda41b4bcf687facfda19ab39718ec7a05ae54","modified":1583035845000},{"_id":"themes/next/docs/LICENSE.txt","hash":"368bf2c29d70f27d8726dd914f1b3211cae4bbab","modified":1583035845000},{"_id":"themes/next/docs/MATH.md","hash":"d645b025ec7fb9fbf799b9bb76af33b9f5b9ed93","modified":1583035845000},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"682937d48bf5d243842a76190921322e26c75247","modified":1583035845000},{"_id":"themes/next/languages/de.yml","hash":"109943f7adcd5cdbe4c6c95c9d279603f07edacb","modified":1583035845000},{"_id":"themes/next/languages/default.yml","hash":"20f951dc4df8602ffdd05a1d5899c5a9bc1759cc","modified":1583035845000},{"_id":"themes/next/languages/en.yml","hash":"20f951dc4df8602ffdd05a1d5899c5a9bc1759cc","modified":1583035845000},{"_id":"themes/next/languages/es.yml","hash":"53ef4a621fd628748b8ed711fe86080e9c9c91c8","modified":1583035845000},{"_id":"themes/next/languages/fa.yml","hash":"a24e0cf28e9f137d0d2219498778693c3c3960b2","modified":1583035845000},{"_id":"themes/next/languages/fr.yml","hash":"578a30a51b9ecbbcb4c200362ad9a37ffd3272db","modified":1583035845000},{"_id":"themes/next/languages/hu.yml","hash":"074d069af9aed5ad34fa809bd058a3b9e2d01051","modified":1583035845000},{"_id":"themes/next/languages/id.yml","hash":"6037450ecd02796e08ca2e98037845b7c30c2807","modified":1583035845000},{"_id":"themes/next/languages/it.yml","hash":"ba2c8f51f2f719dabe71b6053c6fe6866161ec66","modified":1583035845000},{"_id":"themes/next/languages/ja.yml","hash":"5e13b521201944815665bd077b65d7ce69622b81","modified":1583035845000},{"_id":"themes/next/languages/ko.yml","hash":"4aa8f3bf06e02879863b19901476cb23ecd2d709","modified":1583035845000},{"_id":"themes/next/languages/nl.yml","hash":"e27b29c60d88ef4c30de291b595cf8cad639c5d1","modified":1583035845000},{"_id":"themes/next/languages/pt-BR.yml","hash":"0660471e067d01ec80962d5721ae282aafff274d","modified":1583035845000},{"_id":"themes/next/languages/ru.yml","hash":"7dcb2aab65a4b202476856f3e004862334229bcb","modified":1583035845000},{"_id":"themes/next/languages/pt.yml","hash":"f7516b9d86b52c80bf63d3efc7ee6fd985205001","modified":1583035845000},{"_id":"themes/next/languages/tr.yml","hash":"145d28f6f051129dc6393affe8f68cd7ba925078","modified":1583035845000},{"_id":"themes/next/languages/uk.yml","hash":"21a573cdf8e26d87d5e32c5555bc645983268abe","modified":1583035845000},{"_id":"themes/next/languages/vi.yml","hash":"ffc144f606e171fdd8cdb41808ac36e406015a54","modified":1583035845000},{"_id":"themes/next/languages/zh-CN.yml","hash":"038c3a650d2e3a288be9ba6580564172c50b4289","modified":1583035845000},{"_id":"themes/next/languages/zh-HK.yml","hash":"2620632caa3c94022d9513ab1971d15512e737e7","modified":1583035845000},{"_id":"themes/next/languages/zh-TW.yml","hash":"0964e90406bbd495e901d6b9d5f10124c8cad950","modified":1583035845000},{"_id":"themes/next/layout/_layout.swig","hash":"29ee038b0d5ffdb45327598733ea968588367769","modified":1583035845000},{"_id":"themes/next/layout/archive.swig","hash":"26526c09a4334099e2141456697696fcd1f9783f","modified":1583035845000},{"_id":"themes/next/layout/category.swig","hash":"c55debb2588e4746b02d31ec249bf0a84fdea260","modified":1583035845000},{"_id":"themes/next/layout/index.swig","hash":"3bc6fb1e9707d74b96e1346d3f03fe6584f764f4","modified":1583035845000},{"_id":"themes/next/layout/page.swig","hash":"ae6c8549242c1fb2483fd68ce9ae1c083785e2ff","modified":1583035845000},{"_id":"themes/next/layout/post.swig","hash":"382d9f9a9b35e1f369585f7f9f9b5dd6fa58d2f0","modified":1583035845000},{"_id":"themes/next/layout/tag.swig","hash":"7ff6e34d557a3da1c6a29ecd97842bf73ff213dc","modified":1583035845000},{"_id":"themes/next/scripts/renderer.js","hash":"49a65df2028a1bc24814dc72fa50d52231ca4f05","modified":1583035845000},{"_id":"source/_posts/DS-linklist/buildlinklist.png","hash":"2d6ec6bb79c8498e9f32e9b901f4a1447f2d02ae","modified":1458274546000},{"_id":"source/_posts/DS-linklist/delete.png","hash":"a5fe25e468fdcf5dcdcf2f5dfe38bc111c1c6de3","modified":1458274404000},{"_id":"source/_posts/DS-linklist/headbuild.png","hash":"2d6ec6bb79c8498e9f32e9b901f4a1447f2d02ae","modified":1527343878000},{"_id":"source/_posts/DS-linklist/insert.png","hash":"fd8ca5f5983bd23ff63243b870d95d101465637e","modified":1458274210000},{"_id":"source/_posts/DS-linklist/headnode.png","hash":"70f01646899b7c758a033d6fd19261bd65bb59e1","modified":1458274012000},{"_id":"source/_posts/DS-linklist/linklist.png","hash":"4a828bf8974535b3985d4fea98fc03af0677104f","modified":1458273732000},{"_id":"source/_posts/DS-linklist/mergerecycle.png","hash":"5f3e6feb4e0287a2d7fd888d7f53f5b9fe49125b","modified":1527343960000},{"_id":"source/_posts/DS-linklist/sigrecyclelink.png","hash":"3ac39284b6b307ca4bdffa0c1ffeefb2105b0ae6","modified":1527343944000},{"_id":"source/_posts/DS-linklist/tailbuile.png","hash":"b69750dc6ceac67aafe907e74112e21381f484ac","modified":1527343898000},{"_id":"source/_posts/test-article-picture/example.jpg","hash":"f80a55b114352278e8505206068fa6327b93e38d","modified":1526802514000},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1526914306000},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1526914306000},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1526914306000},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1526914306000},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1526914306000},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1526914306000},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"18be3eb275c1decd3614e139f5a311b75f1b0ab8","modified":1526914306000},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1526914306000},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1526914306000},{"_id":"themes/next/.git/logs/HEAD","hash":"c6ea9b0e74455fd32f68796d4ca55fe52297d1e2","modified":1526914436000},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1526914306000},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"0bd2d696f62a997a11a7d84fec0130122234174e","modified":1583035845000},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"9c4fe2873123bf9ceacab5c50d17d8a0f1baef27","modified":1583035845000},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"fe3f5cda1975114884d84bef384a562920d70335","modified":1583035845000},{"_id":"themes/next/docs/ru/README.md","hash":"2b3988e79d96b66640d6a98f0c0e6de9099805e6","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"34b88784ec120dfdc20fa82aadeb5f64ef614d14","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"fb23b85db6f7d8279d73ae1f41631f92f64fc864","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"d3f03be036b75dc71cf3c366cd75aee7c127c874","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"ca1030efdfca5e20f9db2e7a428998e66a24c0d0","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"579c7bd8341873fb8be4732476d412814f1a3df7","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"0b0b9ec6ec4a89e701a3b91f8d7d95752d3e241b","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"b92585d251f1f9ebe401abb5d932cb920f9b8b10","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/README.md","hash":"e5f6668c3a79e4a364931b9b4e5fa92f8c771ec8","modified":1583035845000},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"7f37327bbcae7ed7d04d187fd5e9bc6bbf14926a","modified":1583035845000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"815676d904f92748ddf4f529bed2baf066997bc6","modified":1583035845000},{"_id":"themes/next/layout/_macro/post.swig","hash":"ee01368d65fbb8d387f0956398daf62ae9ba1645","modified":1583035845000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"71655ca21907e9061b6e8ac52d0d8fbf54d0062b","modified":1583035845000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"0c4914a5fd08f15beec71940218c814ad9a89f3f","modified":1583035845000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"1ee6335c12773dc43f8b92136770cb10d460c25c","modified":1583035845000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1583035845000},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"83a40ce83dfd5cada417444fb2d6f5470aae6bb0","modified":1583035845000},{"_id":"themes/next/layout/_scripts/index.swig","hash":"cea942b450bcb0f352da78d76dc6d6f1d23d5029","modified":1583035845000},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"d1f2bfde6f1da51a2b35a7ab9e7e8eb6eefd1c6b","modified":1583035845000},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"a3462c37ab6d7642b1e95860ea5c4cfbac78efab","modified":1583035845000},{"_id":"themes/next/layout/_scripts/three.swig","hash":"a4f42f2301866bd25a784a2281069d8b66836d0b","modified":1583035845000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"ef38c213679e7b6d2a4116f56c9e55d678446069","modified":1583035845000},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"8627c8c8b031ecee16c522433b66fa4d6979b8ea","modified":1583035845000},{"_id":"themes/next/layout/_third-party/index.swig","hash":"70c3c01dd181de81270c57f3d99b6d8f4c723404","modified":1583035845000},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"1574848233f1bb2f45313ca08fef2dd33856a80b","modified":1583035845000},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"2731e262a6b88eaee2a3ca61e6a3583a7f594702","modified":1583035845000},{"_id":"themes/next/scripts/events/index.js","hash":"9047d8ae2670e43429b16a7919a08a0a0a81afe0","modified":1583035845000},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"aec50ed57b9d5d3faf2db3c88374f107203617e0","modified":1583035845000},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"703bdd142a671b4b67d3d9dfb4a19d1dd7e7e8f7","modified":1583035845000},{"_id":"themes/next/scripts/filters/locals.js","hash":"5bbfdc1c373542159660b7a68ed0b57ca18ad10b","modified":1583035845000},{"_id":"themes/next/scripts/filters/minify.js","hash":"19985723b9f677ff775f3b17dcebf314819a76ac","modified":1583035845000},{"_id":"themes/next/scripts/filters/post.js","hash":"f2f566f2577c554377fd704442399acdd14a8118","modified":1583035845000},{"_id":"themes/next/scripts/helpers/engine.js","hash":"cb211b6b50913454b1737782e9e2af96cfa40448","modified":1583035845000},{"_id":"themes/next/scripts/helpers/font.js","hash":"32268fb4c59c5b37c1eb1c9582ab630e09e5cc7d","modified":1583035845000},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"5e11f30ddb5093a88a687446617a46b048fa02e5","modified":1583035845000},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"58347687b02f7ab5e64bef07525c8efa97c9e8fb","modified":1583035845000},{"_id":"themes/next/scripts/tags/button.js","hash":"946dd7beede408d1f090d5e9774d74763828b97c","modified":1583035845000},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"94e0bbc7999b359baa42fa3731bdcf89c79ae2b3","modified":1583035845000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"0f133f27b61e8351cfd0959ba8a1b8551a9a8cc6","modified":1583035845000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"d902fd313e8d35c3cc36f237607c2a0536c9edf1","modified":1583035845000},{"_id":"themes/next/scripts/tags/label.js","hash":"fc5b267d903facb7a35001792db28b801cccb1f8","modified":1583035845000},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"983c6c4adea86160ecc0ba2204bc312aa338121d","modified":1583035845000},{"_id":"themes/next/scripts/tags/note.js","hash":"0a02bb4c15aec41f6d5f1271cdb5c65889e265d9","modified":1583035845000},{"_id":"themes/next/scripts/tags/pdf.js","hash":"f780cc72bff91d2720626e7af69eed25e9c12a29","modified":1583035845000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"00ca6340d4fe0ccdae7525373e4729117775bbfa","modified":1583035845000},{"_id":"themes/next/scripts/tags/video.js","hash":"e5ff4c44faee604dd3ea9db6b222828c4750c227","modified":1583035845000},{"_id":"themes/next/source/css/_colors.styl","hash":"7d07d83cb5c9a5f23751bb46019e853eb4d0cd0a","modified":1583035845000},{"_id":"themes/next/source/css/_mixins.styl","hash":"b79ff3debd5709397b122292fc7e551ae9d40782","modified":1583035845000},{"_id":"themes/next/source/css/main.styl","hash":"a3a3bbb5a973052f0186b3523911cb2539ff7b88","modified":1583035845000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1583035845000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1583035845000},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1583035845000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1583035845000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1583035845000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1583035845000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1583035845000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1583035845000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1583035845000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1583035845000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1583035845000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1583035845000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1583035845000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1583035845000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1583035845000},{"_id":"themes/next/source/js/algolia-search.js","hash":"77cd98b1c790df12dd6cd8119bb3d99f72866635","modified":1583035845000},{"_id":"themes/next/source/js/bookmark.js","hash":"a00945ff886e9f6f835731cdaf29a3a3727c8877","modified":1583035845000},{"_id":"themes/next/source/js/local-search.js","hash":"3f7606d2007dbf3b1bdf08b37bff4312c1c3d7a1","modified":1583035845000},{"_id":"themes/next/source/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1583035845000},{"_id":"themes/next/source/js/next-boot.js","hash":"f7045763e277e685c271bd4b4c37e531d699ac63","modified":1583035845000},{"_id":"themes/next/source/js/utils.js","hash":"8a5d36d029c182f6d299a922e37c9e745f3b141a","modified":1583035845000},{"_id":"themes/next/source/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1583035845000},{"_id":"source/_posts/tcpip-PF-PACKET/pf_packet.jpg","hash":"966238d1fae622b408a900febb6b5f6117280831","modified":1527424346000},{"_id":"themes/next/.git/refs/heads/master","hash":"7999da428ebb87e5a2b27315d8d5123c1ccdfaa5","modified":1526914436000},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"5ff544013e2905138ffeb07bf9a57062faed75b2","modified":1583035845000},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"1ea12d4b9490d9065ebf1b8739b90ce5defd6398","modified":1583035845000},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"d3a16f0f343ea70b59e33e4b9cdecae3c8df91cd","modified":1583035845000},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"30528a8da30994b1ef9355a72b09b2cd85a7c0e9","modified":1583035845000},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"bbf0c8e42491fac70f4f8165224f1d7d92a040d7","modified":1583035845000},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"f609146c43e11e9285d56d10ceb7ccc4a4d017db","modified":1583035845000},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"54ba9508a901c295a02c8e34e9cece7c7dcad518","modified":1583035845000},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"a56e4f6ad95c106f361d354f828d1ef4810b1d76","modified":1583035845000},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"c851717497ca64789f2176c9ecd1dedab237b752","modified":1583035845000},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"94d54b0c65d504f772af1e62424952e092b6c21d","modified":1583035845000},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"14c33bd544903e74388739599fffe3ecb66ed4b0","modified":1583035845000},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"8f14f3f8a1b2998d5114cc56b680fb5c419a6b07","modified":1583035845000},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"f79c44692451db26efce704813f7a8872b7e63a0","modified":1583035845000},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"2b1a73556595c37951e39574df5a3f20b2edeaef","modified":1583035845000},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"48430bd03b8f19c9b8cdb2642005ed67d56c6e0b","modified":1583035845000},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"d6fa9e4432b87004c5678dfe2d4b2c1f4a702b93","modified":1583035845000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"2791a8dc20a276704fc8b03f9822f76578a9152d","modified":1583035845000},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"716b78cd90addc4216413719554721cb362b0c18","modified":1583035845000},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1583035845000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1583035845000},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"a2bb0bec243685e670b60a3d54142950adc03af0","modified":1583035845000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1583035845000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1583035845000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1583035845000},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"5adea065641e8c55994dd2328ddae53215604928","modified":1583035845000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"2fa2b51d56bfac6a1ea76d651c93b9c20b01c09b","modified":1583035845000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"1472cabb0181f60a6a0b7fec8899a4d03dfb2040","modified":1583035845000},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"f910618292c63871ca2e6c6e66c491f344fa7b1f","modified":1583035845000},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"f39a5bf3ce9ee9adad282501235e0c588e4356ec","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b14908644225d78c864cd0a9b60c52407de56183","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"d6ceb70648555338a80ae5724b778c8c58d7060d","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"f7a9eca599a682479e8ca863db59be7c9c7508c8","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"be0a8eccf1f6dc21154af297fc79555343031277","modified":1583035845000},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"6c5976621efd5db5f7c4c6b4f11bc79d6554885f","modified":1583035845000},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"4791c977a730f29c846efcf6c9c15131b9400ead","modified":1583035845000},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"ecf751321e799f0fb3bf94d049e535130e2547aa","modified":1583035845000},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"d35a999d67f4c302f76fdf13744ceef3c6506481","modified":1583035845000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1583035845000},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"ba0dbc06b9d244073a1c681ff7a722dcbf920b51","modified":1583035845000},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"d7258d02bcf0dac6c0fd8377c0909ddecb09d1d4","modified":1583035845000},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"a17ace37876822327a2f9306a472974442c9005d","modified":1583035845000},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"b26ac2bfbe91dd88267f8b96aee6bb222b265b7a","modified":1583035845000},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"5f6a966c509680dbfa70433f9d658cee59c304d7","modified":1583035845000},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"afeeed84b395797429d5a852b70e12fd79f7410b","modified":1583035845000},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"f3c43664a071ff3c0b28bd7e59b5523446829576","modified":1583035845000},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"5adab7380491e9df5c9ada4f4feb204b866ec14b","modified":1583035845000},{"_id":"themes/next/scripts/events/lib/config.js","hash":"b205d72a56b1827681f0a260c266e0c02065fd08","modified":1583035845000},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"82f5b6822aa5ec958aa987b101ef860494c6cf1f","modified":1583035845000},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"6661c1c91c7cbdefc6a5e6a034b443b8811235a1","modified":1583035845000},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"f233d8d0103ae7f9b861344aa65c1a3c1de8a845","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"1f20213af8da3127701e6bb9da995e5c91be2051","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"0803d4f4d3d02c24417c163ad0b27b60fda79250","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"7f2d93af012c1e14b8596fecbfc7febb43d9b7f5","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"19cbd24880d0fbbd4d5698cd54da598f03b942da","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"7f8b92913d21070b489457fa5ed996d2a55f2c32","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"e51dc3072c1ba0ea3008f09ecae8b46242ec6021","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"d5fefc31fba4ab0188305b1af1feb61da49fdeb0","modified":1583035845000},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"6a72b5928cdab9526a288177991e4b2aedd028cf","modified":1583035845000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"f4e694e5db81e57442c7e34505a416d818b3044a","modified":1583035845000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"38597817ede20418e73ae4afc50047ea5088c73e","modified":1583035845000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"62df49459d552bbf73841753da8011a1f5e875c8","modified":1583035845000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"9840998e1a1fbcd419c52a1e38fa54a003eac963","modified":1583035845000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"85c46ac85689e7c5f5398fc8b6b40b7a8e94bafb","modified":1583035845000},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"f068b46f8c305c7436c2767492a6bed42dcd764c","modified":1583035845000},{"_id":"themes/next/source/js/schemes/muse.js","hash":"47c4f60eb7f7dc3303e84914b611dc34827069e1","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1583035845000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1583035845000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1583035845000},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"c6ea9b0e74455fd32f68796d4ca55fe52297d1e2","modified":1526914436000},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1526914436000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"a47725574e1bee3bc3b63b0ff2039cc982b17eff","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"ca5e70662dcfb261c25191cc5db5084dcf661c76","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"e2355c213fc25d635f1179fe317b826e0b9dad17","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/rainbow.styl","hash":"bc87cea0b534f2d75db60f300b069456f6516d1b","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"170c4598cbbe49cd1527f94158d97d2320a6b906","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"990bd301ce2de0a6b936781c58318f3945d81bc2","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"44fe82eadbdbb2f66adda37ac83ebd0f85876bfc","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"38f632dce42481da83a5ffab382c281269885e9c","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"62209da61b4ac49e3a7ff8174e28e075060835ec","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"3fee8cbe5704a04107ff0816db1221edb40dbb9b","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"8f58570a1bbc34c4989a47a1b7d42a8030f38b06","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"b3bea92eef0e1fe2e7e294dac2184d16b5b8d666","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"179e33b8ac7f4d8a8e76736a7e4f965fe9ab8b42","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"4794bd45d5e32ea005c805bcbc65b871e9927d02","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"f6516d0f7d89dc7b6c6e143a5af54b926f585d82","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"41e5a7c567735e780ef9bfdacd4af1ff4b5e1d2a","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"7104b9cef90ca3b140d7a7afcf15540a250218fc","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"a30db9fffd34d522d378aeaeaa400d1a84505b38","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"a717969829fa6ef88225095737df3f8ee86c286b","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"21003fd0b43dc3b3592e916d585f7f78478cbeb3","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"4d1c17345d2d39ef7698f7acf82dfc0f59308c34","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"bb392700f04d956bb5f606efb052453efeade53d","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"2b2e7b5cea7783c9c8bb92655e26a67c266886f0","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"e282df938bd029f391c466168d0e68389978f120","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"70a4324b70501132855b5e59029acfc5d3da1ebd","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"ccb71d732b12acd02ac26ed6bbda4861d027857d","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"e4f958677a75de87ee1caf7e22ba46a0602f22dd","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"82025c3ad7af12e532e2e81be98deb0a74ff23ac","modified":1583035845000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1583035845000},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"c6ea9b0e74455fd32f68796d4ca55fe52297d1e2","modified":1526914436000},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"fafc96c86926b22afba8bb9418c05e6afbc05a57","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"2bd0eb1512415325653b26d62a4463e6de83c5ac","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"c1daeb60c23945f745703ac2c3f4bf99d0ea3d95","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"7ddb7453bf9b85b01bff136e9d10a7f06baac9e8","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"c0944ea35dc2bd3b2da9b64f5d05e7e78b6660f1","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f49ca072b5a800f735e8f01fc3518f885951dd8e","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"e3ade812b5541eca5b863ad3ff234ea95925bf31","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"5d5c022aa3b2f89c2f2a178212338bb64804dd75","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"1e4190c10c9e0c9ce92653b0dbcec21754b0b69d","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"72d495a88f7d6515af425c12cbc67308a57d88ea","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"887aa8de61ae060150a6312d5cb00d4da065db77","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"796eb941ba0ca03fd5ca6d15a1f6a56afd9aa174","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"eca4d80dd0df1c3b1bc06bd39e6a4bd6c56198df","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"f5c2788a78790aca1a2f37f7149d6058afb539e0","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"99e12c9ce3d14d4837e3d3f12fc867ba9c565317","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"5b5649b9749e3fd8b63aef22ceeece0a6e1df605","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"c7939407797acbd1ae0d8bae8e13b2bf045f870e","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8a7fc03a568b95be8d3337195e38bc7ec5ba2b23","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"b49e9fbd3c182b8fc066b8c2caf248e3eb748619","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"e2992846b39bf3857b5104675af02ba73e72eed5","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"705759bdd1649e9aa1caedb82f6432a991ae3e71","modified":1583035845000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"9a878d0119785a2316f42aebcceaa05a120b9a7a","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"f5821481440a0624c8aec5fc85f093de1527095f","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e02b1097a72a7d2ddc45ea8d53aa6d77c25ac407","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"e7a9fdb6478b8674b1cdf94de4f8052843fb71d9","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"a793cfff86ad4af818faef04c18013077873f8f0","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"0caf32492692ba8e854da43697a2ec8a41612194","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"555762730f1f31451113e8fdc84ec438ea738d90","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"0ec7bafed7eec36504df7781207ccd1ce4448536","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b2fc519828fe89a1f8f03ff7b809ad68cd46f3d7","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"2cb1876e9e0c9ac32160888af27b1178dbcb0616","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"fa0222197b5eee47e18ac864cdc6eac75678b8fe","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"44487d9ab290dc97871fa8dd4487016deb56e123","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"a237c290e8934d1a8cbbf22b3f30503d9663021d","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"9b479c2f9a9bfed77885e5093b8245cc5d768ec7","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"a960a2dd587b15d3b3fe1b59525d6fa971c6a6ec","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"a05a4031e799bc864a4536f9ef61fe643cd421af","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"b3220db827e1adbca7880c2bb23e78fa7cbe95cb","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"a9cd93c36bae5af9223e7804963096274e8a4f03","modified":1583035845000},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"2a47f8a6bb589c2fb635e6c1e4a2563c7f63c407","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"796415ae7490e17857e64ffef7e470b65c655a6b","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"d3f73688bb7423e3ab0de1efdf6db46db5e34f80","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"8136f9efe1f018ebe4b4a2d8bd3683bb393ff456","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"3b3acc5caa0b95a2598bef4eeacb21bab21bea56","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"7213e3d0ad7c95717ecd4e701d6ee9248ef2bf9f","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"709d10f763e357e1472d6471f8be384ec9e2d983","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"d7fce4b51b5f4b7c31d93a9edb6c6ce740aa0d6b","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"1a14c1b92d8a4dd8aabb5949333ac0ac79094c6c","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"2dc2a5b7becb11de1d4bdab6b5195588ae878cfc","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"5ac97054b302fe3ce47822a03a3b56aa3d582005","modified":1583035845000},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"9e4c0653cfd3cc6908fa0d97581bcf80861fb1e7","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1583035845000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1583035845000},{"_id":"themes/next/.git/objects/pack/pack-0df40285cfd6ba61cd77b9db468522fa4a3564d9.idx","hash":"9bd7aefeb87914ecfb289a7b609bfefc37dd28e3","modified":1526914436000},{"_id":"themes/next/.git/objects/pack/pack-0df40285cfd6ba61cd77b9db468522fa4a3564d9.pack","hash":"b7b9af2417976ae7eab57dc0584d64df5654085a","modified":1526914436000},{"_id":"public/content.json","hash":"4c362952d80b991f0b001f47f912055c85adb282","modified":1584773897216},{"_id":"public/atom.xml","hash":"d859a603b074e8b7fc9b1cc6dce1c1c1aa8140d4","modified":1584773897225},{"_id":"public/search.xml","hash":"888d711ea76d8814f77e07fb7a922493cb907cb4","modified":1584773897227},{"_id":"public/about/index.html","hash":"9853ca26f4b778f3f74e4cf27dc3bab71b39545e","modified":1584773897261},{"_id":"public/categories/index.html","hash":"91d15fdf511a25713dcdf4b8654bdb901ece566b","modified":1584773897261},{"_id":"public/tags/index.html","hash":"ebc6fb9b14a1d54fd575076b4684a8cb834d639f","modified":1584773897261},{"_id":"public/2019/10/08/hello-world/index.html","hash":"fdea0575e3d61637759e6496e7cedde2c42863b1","modified":1584773897261},{"_id":"public/2018/05/25/code-efficandreadable/index.html","hash":"d61643159d94a5ae85f396ca2e9a372c15017e98","modified":1584773897262},{"_id":"public/2018/05/20/android-adb/index.html","hash":"943e3d6bd2a49f59d30a30b90c65eea9764520b6","modified":1584773897262},{"_id":"public/2018/05/20/android-AndroidManifest/index.html","hash":"59cbab83cc84bab5e83dbcf85dcb8ecb4292cfae","modified":1584773897262},{"_id":"public/2018/05/20/android-will-write/index.html","hash":"7ae8dbdc3f26bed771a291f76418f737af5b34bf","modified":1584773897262},{"_id":"public/2018/05/20/test-article-picture/index.html","hash":"82d2fc79a8c100bf390929afba6273e453dd67f7","modified":1584773897262},{"_id":"public/2018/05/19/ksance-test-article/index.html","hash":"aedff32bfbe7555ff7a0091b322a6e3b87508390","modified":1584773897262},{"_id":"public/archives/2018/07/index.html","hash":"fe34faaf42abc48dcce9a23879580f8ca7006ad6","modified":1584773897263},{"_id":"public/archives/2019/index.html","hash":"64af942b3aeb3f383d83e9e9c87341c5fe608407","modified":1584773897263},{"_id":"public/archives/2019/10/index.html","hash":"a4a66d7d22d4399b868b0594e4a2ccbd6d7475fe","modified":1584773897263},{"_id":"public/categories//index.html","hash":"98cf047d06f88f96a82b34ad977e4b955b5a5391","modified":1584773897263},{"_id":"public/categories/android/index.html","hash":"3a296afee03031e2359a44fb373cf97c816135f2","modified":1584773897263},{"_id":"public/categories//index.html","hash":"01760d19abdc3395f16c5b0565d3c476ed0ba4df","modified":1584773897263},{"_id":"public/categories/c-cpp/index.html","hash":"2e97bb981acd2f66a05f261455abd5392b0940dd","modified":1584773897263},{"_id":"public/categories/c-cpp/page/2/index.html","hash":"84fed1b2a6a620df0c587f54f03cb6a9607b0104","modified":1584773897264},{"_id":"public/categories/leetcode/index.html","hash":"60e6b75ccfd4842ed2d475f8a6237a50c707fe7c","modified":1584773897264},{"_id":"public/categories/tcpip/index.html","hash":"61f23043d98db6b75851773ea3b57ffdd171ee46","modified":1584773897264},{"_id":"public/tags//index.html","hash":"5440f1fc1e3ea87c6dfdb632124a4f206f434d57","modified":1584773897264},{"_id":"public/tags/android-coding/index.html","hash":"5aeb9363a73dfd41f86f9b8a077eb46c4cbd5c88","modified":1584773897264},{"_id":"public/tags/android-make/index.html","hash":"0c60205c1f2fb34b1b1f0589229fbfe0eb9cdb42","modified":1584773897264},{"_id":"public/tags/android-activity/index.html","hash":"93fd87896d70901b46bd150e6c443d7af73ccc4a","modified":1584773897265},{"_id":"public/tags//index.html","hash":"8fb1c4fea374991a951f56bca78b467a05755266","modified":1584773897265},{"_id":"public/tags/cpp-memory/index.html","hash":"137493da8c8e8d6b0af24ac3877f93de11d593d1","modified":1584773897265},{"_id":"public/tags/cpp-class/index.html","hash":"a5bdf9f787e2bf81e416637d5940a9dc9c48c039","modified":1584773897265},{"_id":"public/tags/cpp-keyword/index.html","hash":"7d75558a771899a13d52542f6c52cbacc911e8e2","modified":1584773897265},{"_id":"public/tags/leetcode-linklist/index.html","hash":"6e0880ddb7ece79be7379b179dc19439e2236fb3","modified":1584773897266},{"_id":"public/tags/leetcode-string/index.html","hash":"0aec8d1e911eaa1b498ce14cf1628220d666dc85","modified":1584773897266},{"_id":"public/tags/tcpip-mac/index.html","hash":"67227752c6a9bf789d1b8b681f3894f6a3a6ef75","modified":1584773897266},{"_id":"public/tags/tcpip-ip/index.html","hash":"5f91eaf8db2e0148748c1237468cad6725709530","modified":1584773897266},{"_id":"public/tags/PF-PACKET/index.html","hash":"fe40cbf6d61743297fb45c489b300f7bb34ef39b","modified":1584773897266},{"_id":"public/tags/test/index.html","hash":"e5037cdfbbd3fe1f52048ed0fbbc9008791df3b0","modified":1584773897267},{"_id":"public/2018/07/29/cpp-runtime-semantis/index.html","hash":"d7919d918be1fa517ea7b8bbcddff58af374df9e","modified":1584773897267},{"_id":"public/2018/06/24/tcpip-pingtraceroute/index.html","hash":"2c10c45ace272beb086768c9ccdaf31f0337bae2","modified":1584773897267},{"_id":"public/2018/06/24/leetcode-string/index.html","hash":"da286797629c51cf3c09fdb6292ea2a0f9ff7568","modified":1584773897267},{"_id":"public/2018/06/24/DS-string/index.html","hash":"cbe7f5af80cd8bd6751be66218d233b78eb9daa6","modified":1584773897267},{"_id":"public/2018/06/10/tcpip-routeicmp/index.html","hash":"4b47c4fe99b83e637b7d452a1f7f2820a2d4cf6a","modified":1584773897267},{"_id":"public/2018/06/09/cpp-conanddest-semantics/index.html","hash":"ce7dee792280e90af88c55e13f5bffebbbf9ca78","modified":1584773897267},{"_id":"public/2018/06/09/cpp-funcmember-memory/index.html","hash":"6d11c69edc78d260c899db37d0fa785a26b4e234","modified":1584773897267},{"_id":"public/2018/06/08/cpp-datamember-memory/index.html","hash":"fd6ecc0d2eb5ad810491ddbbe5be4fe899a7a0f8","modified":1584773897268},{"_id":"public/2018/06/08/cpp-polymorphism/index.html","hash":"fdc8bbef1e5fb80d4c6268ebf33361490347e0bb","modified":1584773897268},{"_id":"public/2018/06/08/cpp-inheritance/index.html","hash":"1c58746c505843d96af92536ac85cf44d88be6fe","modified":1584773897268},{"_id":"public/2018/06/08/cpp-conandde/index.html","hash":"0010abb8d07516fd55837adfabfdcfc4bebec363","modified":1584773897268},{"_id":"public/2018/06/08/cpp-class-memory/index.html","hash":"a887aa47dd1ee748f736e3bf4411dcbf48c954be","modified":1584773897268},{"_id":"public/2018/06/08/cpp-this/index.html","hash":"dae046dbb2ebffac9028c1c2be1c0ce6aea6b4fd","modified":1584773897268},{"_id":"public/2018/06/08/cpp-static/index.html","hash":"3e351c424f08a12bec4e096268676a1b292d9fa6","modified":1584773897268},{"_id":"public/2018/06/08/cpp-const/index.html","hash":"ec82d225e3ab7caf079d84dd77bfc051911de008","modified":1584773897268},{"_id":"public/2018/06/07/leetcode-linklist3/index.html","hash":"c0c857b18b37b876d349e4ad02d0cebe3f8fd73e","modified":1584773897269},{"_id":"public/2018/06/03/leetcode-linklist2/index.html","hash":"3b98cc07b3f08c521d625488068d961dfcfbcfbc","modified":1584773897269},{"_id":"public/2018/06/03/leetcode-linklist1/index.html","hash":"cceae898b546420c35d48169bfc86911b45749e1","modified":1584773897269},{"_id":"public/2018/06/03/tcpip-IP/index.html","hash":"0cf1b19c33fcbfa3a9f38ac4a919d7f936c7a346","modified":1584773897269},{"_id":"public/2018/06/02/tcpip-MAC/index.html","hash":"8b4d0294be4079eb5b27ba07742503bbdd2001db","modified":1584773897269},{"_id":"public/2018/05/27/tcpip-ARP/index.html","hash":"5ba848b89e4fdc434b14074a1ab713294cc21aaa","modified":1584773897269},{"_id":"public/2018/05/27/tcpip-PF-PACKET/index.html","hash":"cd24f98a7f7f17966727718d4de758cd20db6635","modified":1584773897269},{"_id":"public/2018/05/26/DS-linklist/index.html","hash":"0c5cf08ca70f48cdfa95ddafe26805db538d296b","modified":1584773897269},{"_id":"public/2018/05/20/tcpip-mtu/index.html","hash":"b5404420c9741e733f167a6799d10c10aa3e0b35","modified":1584773897269},{"_id":"public/2018/05/20/cpp-debug-layout-static/index.html","hash":"4e8d0e243835f91b304fb0ffc58ee777e5d3eb75","modified":1584773897270},{"_id":"public/2018/05/20/cpp-debug-layout-dynamic/index.html","hash":"bb52debffbf7d0008357e67603ad27e28b052060","modified":1584773897271},{"_id":"public/2018/05/20/android-jni/index.html","hash":"c42ab77b37e57e79d2c315537afe89321cbb4b8f","modified":1584773897272},{"_id":"public/2018/05/20/android-makefirst-app/index.html","hash":"2e6bd2b714ac4dc5d1b424b7c9bd0705550cc6ca","modified":1584773897272},{"_id":"public/2018/05/20/android-howto-makeapk-cmd/index.html","hash":"e2d62b33be813574f082c8da1b39b94593a6039f","modified":1584773897272},{"_id":"public/archives/index.html","hash":"aedc780f4fb343cd5829585a961f3e821d1493fc","modified":1584773897272},{"_id":"public/archives/2018/index.html","hash":"2b2aea2aaf899485293a2351b9b580e6bb0e6bcb","modified":1584773897272},{"_id":"public/archives/2018/05/index.html","hash":"456c27338a55ff6cd0b438d3f8b1be0f6a24409d","modified":1584773897272},{"_id":"public/archives/2018/06/index.html","hash":"e10bb9419c39c2b8c836cbb02ac17ee1bd96ac93","modified":1584773897272},{"_id":"public/index.html","hash":"ac5f19f109638b0d8d49333ab1b975046d212f9c","modified":1584773897272},{"_id":"public/page/2/index.html","hash":"f243b9e77df48cf0a2e268d90c7f6bae2888bc16","modified":1584773897272},{"_id":"public/page/3/index.html","hash":"fb2d89c74e3650128dc5c1fe65aabdcfac8500b2","modified":1584773897273},{"_id":"public/page/4/index.html","hash":"072e059f6300bd39d4d1fa56092fc8cc740aa18f","modified":1584773897273},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1584773897289},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1584773897289},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1584773897289},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1584773897289},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1584773897289},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1584773897289},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1584773897289},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1584773897289},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1584773897290},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1584773897290},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1584773897290},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1584773897290},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1584773897290},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1584773897290},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1584773897290},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1584773897290},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1584773897290},{"_id":"public/2018/05/20/test-article-picture/example.jpg","hash":"f80a55b114352278e8505206068fa6327b93e38d","modified":1584773897290},{"_id":"public/2018/05/26/DS-linklist/buildlinklist.png","hash":"2d6ec6bb79c8498e9f32e9b901f4a1447f2d02ae","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/delete.png","hash":"a5fe25e468fdcf5dcdcf2f5dfe38bc111c1c6de3","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/headbuild.png","hash":"2d6ec6bb79c8498e9f32e9b901f4a1447f2d02ae","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/headnode.png","hash":"70f01646899b7c758a033d6fd19261bd65bb59e1","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/insert.png","hash":"fd8ca5f5983bd23ff63243b870d95d101465637e","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/mergerecycle.png","hash":"5f3e6feb4e0287a2d7fd888d7f53f5b9fe49125b","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/sigrecyclelink.png","hash":"3ac39284b6b307ca4bdffa0c1ffeefb2105b0ae6","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/linklist.png","hash":"4a828bf8974535b3985d4fea98fc03af0677104f","modified":1584773897291},{"_id":"public/2018/05/26/DS-linklist/tailbuile.png","hash":"b69750dc6ceac67aafe907e74112e21381f484ac","modified":1584773897291},{"_id":"public/live2dw/lib/L2Dwidget.min.js","hash":"6e013af9c502b2e63ac5e42944e3244f8f515eb7","modified":1584773897291},{"_id":"public/assets/css/DPlayer.min.css","hash":"cb54789e9837b8547cd7675d7fe05f53f97a6423","modified":1584773897292},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1584773897966},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1584773897968},{"_id":"public/2018/05/27/tcpip-PF-PACKET/pf_packet.jpg","hash":"966238d1fae622b408a900febb6b5f6117280831","modified":1584773897968},{"_id":"public/assets/js/DPlayer.min.js","hash":"9e1eb36ea38a848e82d0f6c1c2d957fc28ef6983","modified":1584773897968},{"_id":"public/js/algolia-search.js","hash":"77cd98b1c790df12dd6cd8119bb3d99f72866635","modified":1584773897979},{"_id":"public/js/bookmark.js","hash":"a00945ff886e9f6f835731cdaf29a3a3727c8877","modified":1584773897979},{"_id":"public/js/local-search.js","hash":"3f7606d2007dbf3b1bdf08b37bff4312c1c3d7a1","modified":1584773897979},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1584773897979},{"_id":"public/js/utils.js","hash":"8a5d36d029c182f6d299a922e37c9e745f3b141a","modified":1584773897979},{"_id":"public/js/next-boot.js","hash":"f7045763e277e685c271bd4b4c37e531d699ac63","modified":1584773897980},{"_id":"public/js/schemes/pisces.js","hash":"f068b46f8c305c7436c2767492a6bed42dcd764c","modified":1584773897980},{"_id":"public/js/schemes/muse.js","hash":"47c4f60eb7f7dc3303e84914b611dc34827069e1","modified":1584773897980},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1584773897980},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1584773897980},{"_id":"public/css/main.css","hash":"8b23204df6edf65e5fa3f4daa351c2dd5875b339","modified":1584773897980},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1584773897981},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1584773897981},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1584773897981},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1584773897981},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1584773897983},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js","hash":"7d3a9c937317b9c15f2c3a872f0e26607a729458","modified":1584773897983},{"_id":"public/live2dw/lib/L2Dwidget.min.js.map","hash":"5e7669733ecd0b1bc3881d2cf7fcc01e2990a07d","modified":1584773897992},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js.map","hash":"09521263ecc625a246b3406c385300e99e966a2e","modified":1584773898049}],"Category":[{"name":"","_id":"ck819ghn6000400jxns1ky9f6"},{"name":"android","_id":"ck819ghnn000a00jxpppfqvfe"},{"name":"","_id":"ck819ghom001100jxaons7kxw"},{"name":"c&cpp","_id":"ck819ghoq001800jxcjcfzofh"},{"name":"leetcode","_id":"ck819ghpt002d00jxtwfb4v0u"},{"name":"tcpip","_id":"ck819ghqk003400jxof1g5qgs"}],"Data":[],"Page":[{"title":"","date":"2018-05-23T15:42:30.000Z","_content":"\n###    \n\n\n\n\n\n###  :  \n   c,c++,python,java,balalac/c++\n     \n","source":"about/index.md","raw":"---\ntitle: \ndate: 2018-05-23 23:42:30\n---\n\n###    \n\n\n\n\n\n###  :  \n   c,c++,python,java,balalac/c++\n     \n","updated":"2018-05-26T03:28:42.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"ck819ghmy000100jxjpu8yjmu","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>   c,c++,python,java,balalac/c++</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h3><p>   c,c++,python,java,balalac/c++</p>\n"},{"title":"categories","date":"2018-05-23T16:44:28.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-05-24 00:44:28\ntype: \"categories\"\n---\n","updated":"2018-05-23T16:44:54.000Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ck819ghn3000300jx1wb7xa0h","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2018-05-23T16:38:08.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-05-24 00:38:08\ntype: \"tags\"\n---\n","updated":"2018-05-23T16:42:14.000Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck819ghnb000700jx821iilyy","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"DS_linklist","date":"2018-05-26T13:18:09.000Z","_content":"## \n### \n### \n  <!-- more -->\n{  \n * :  \n * :  \n * next,pre  \n\n}  \n  \n{\n+ InitList(&L);:c/c++  \n+ DestroyList(&L); free  \n+ Length(L);\n+ GetElem(L,i,&e);   \n+ LocateElem(L,e,compare()); \n+ InsertElem(&L,i,e); O(1),\n+ DeleteElem(&L,i,&e); O(1)\n  \n\n}  \neg:  \n```c\ntypedef struct LNode { \n       ElemType data//\n       struct LNode  *next //\n} LNode,  *LinkList;\nLNode  *L;\nLinkList  L;\nL =  (LinkList) malloc( sizeof (LNode) );\n L = new LNode;\nL->data;\nLNode  L;\nL.date\n```\n{% asset_img linklist.png  %}    \n### \n1.   \n2.     \n3. leetcodeReverseLinklist1  \n\n{% asset_img headnode.png  %}  \n\n###  \n+ i  \n```c\nStatus GetElem_L(LinkList L, int i, ElemType &e)\n{//\n    p = L->next;  \n    j = 1;\n    while( p && j < i){\n          p = p->next; \n          ++j;\n    }\n    if (!p || j>i) return ERROR;\n    e = p->data;\n    return OK;\n}\n```\n+ i    \n{% asset_img insert.png  %}    \n```c\nStatus ListInsert_L(LinkList &L, int i, ElemType e)\n{\n  p = L; j = 0;\n     while (p && j < i-1) { p = p->next; ++j }\n     if (!p || j>i-1)  return ERROR;\n  s =  (LinkList) malloc( sizeof (LNode) );\n     s->data = e;  \n  s->next = p->next;  \n  p->next = s;  \n     return OK;\n     }\n ```\n+ :i:  \n{% asset_img delete.png  %}  \n```c\n Status ListDelete_L(LinkList &L, int i, ElemType &e)\n{\n p = L; j = 0;\n     while (p->next && j < i-1) { p = p->next; ++j }\n     if (!(p->next) || j>i-1)  return ERROR;\n q = p->next;\n     e = q->data;  \n p->next = p->next->next;  //(p->next = q->next;)\n free(q);  \n  return OK;\n}\n```\n\n###    \n+   \n{% asset_img headbuild.png  %}  \n```c\nCreateList_L(LinkList &L, int n)\n{\n     L = (LinkList) malloc( sizeof (LNode) );\n     L->next = NULL;\n     for( i=n; i>0; --i){\n         s = (LinkList) malloc( sizeof (LNode) );\n         scanf( &s->data);\n         s->next = L->next; \n         L->next = s; \n     }\n}```\n+   \n{% asset_img tailbuile.png  %}  \n```c\nCreateList_L(LinkList &L, int n)\n{\n     tail = L = (LinkList) malloc( sizeof (LNode) );\n     L->next = NULL;\n     for( i=n; i>0; --i){\n         s = (LinkList) malloc( sizeof (LNode) );\n         scanf( &s->data);\n         tail->next = s; \n         tail = s; \n     }      }\n```\n\n###  \n+ \n```c\nvoid MergeList_L(LinkList &La, LinkList &Lb, LinkList &Lc)\n{\n    pa = La->next; pb = Lb->next;\n    Lc = pc = La;\n    while( pa && pb ){\n        if(pa->data <= pb->data){\n             pc->next = pa; pc = pa; pa = pa->next;\n       }\n       else{\n             pc->next = pb; pc = pb; pb= pb->next;\n       }\n    }\n    pc->next = pa ? pa : pb;\n    free( Lb );\n} \n```\n\n### \n+ \n+   \n{% asset_img sigrecyclelink.png  %}\n{% asset_img mergerecycle.png  %}\n+ \n+ \n```c\ntypedef struct DuLNode{\n     ElemType               data;\n     struct DuLNode    *prior;\n     struct DuLNode    *next;\n}DuLNode,  *DuLinkList;\n```\n\n\n### \n+   \n+ \n+ (emm   \n \n###  \n+ \n+ \n+ 100\n+ githubcbeatifulsoup),~)\n+ \n \n","source":"_posts/DS-linklist.md","raw":"---\ntitle: DS_linklist\ndate: 2018-05-26 21:18:09\ntags: \ncategories: \n---\n## \n### \n### \n  <!-- more -->\n{  \n * :  \n * :  \n * next,pre  \n\n}  \n  \n{\n+ InitList(&L);:c/c++  \n+ DestroyList(&L); free  \n+ Length(L);\n+ GetElem(L,i,&e);   \n+ LocateElem(L,e,compare()); \n+ InsertElem(&L,i,e); O(1),\n+ DeleteElem(&L,i,&e); O(1)\n  \n\n}  \neg:  \n```c\ntypedef struct LNode { \n       ElemType data//\n       struct LNode  *next //\n} LNode,  *LinkList;\nLNode  *L;\nLinkList  L;\nL =  (LinkList) malloc( sizeof (LNode) );\n L = new LNode;\nL->data;\nLNode  L;\nL.date\n```\n{% asset_img linklist.png  %}    \n### \n1.   \n2.     \n3. leetcodeReverseLinklist1  \n\n{% asset_img headnode.png  %}  \n\n###  \n+ i  \n```c\nStatus GetElem_L(LinkList L, int i, ElemType &e)\n{//\n    p = L->next;  \n    j = 1;\n    while( p && j < i){\n          p = p->next; \n          ++j;\n    }\n    if (!p || j>i) return ERROR;\n    e = p->data;\n    return OK;\n}\n```\n+ i    \n{% asset_img insert.png  %}    \n```c\nStatus ListInsert_L(LinkList &L, int i, ElemType e)\n{\n  p = L; j = 0;\n     while (p && j < i-1) { p = p->next; ++j }\n     if (!p || j>i-1)  return ERROR;\n  s =  (LinkList) malloc( sizeof (LNode) );\n     s->data = e;  \n  s->next = p->next;  \n  p->next = s;  \n     return OK;\n     }\n ```\n+ :i:  \n{% asset_img delete.png  %}  \n```c\n Status ListDelete_L(LinkList &L, int i, ElemType &e)\n{\n p = L; j = 0;\n     while (p->next && j < i-1) { p = p->next; ++j }\n     if (!(p->next) || j>i-1)  return ERROR;\n q = p->next;\n     e = q->data;  \n p->next = p->next->next;  //(p->next = q->next;)\n free(q);  \n  return OK;\n}\n```\n\n###    \n+   \n{% asset_img headbuild.png  %}  \n```c\nCreateList_L(LinkList &L, int n)\n{\n     L = (LinkList) malloc( sizeof (LNode) );\n     L->next = NULL;\n     for( i=n; i>0; --i){\n         s = (LinkList) malloc( sizeof (LNode) );\n         scanf( &s->data);\n         s->next = L->next; \n         L->next = s; \n     }\n}```\n+   \n{% asset_img tailbuile.png  %}  \n```c\nCreateList_L(LinkList &L, int n)\n{\n     tail = L = (LinkList) malloc( sizeof (LNode) );\n     L->next = NULL;\n     for( i=n; i>0; --i){\n         s = (LinkList) malloc( sizeof (LNode) );\n         scanf( &s->data);\n         tail->next = s; \n         tail = s; \n     }      }\n```\n\n###  \n+ \n```c\nvoid MergeList_L(LinkList &La, LinkList &Lb, LinkList &Lc)\n{\n    pa = La->next; pb = Lb->next;\n    Lc = pc = La;\n    while( pa && pb ){\n        if(pa->data <= pb->data){\n             pc->next = pa; pc = pa; pa = pa->next;\n       }\n       else{\n             pc->next = pb; pc = pb; pb= pb->next;\n       }\n    }\n    pc->next = pa ? pa : pb;\n    free( Lb );\n} \n```\n\n### \n+ \n+   \n{% asset_img sigrecyclelink.png  %}\n{% asset_img mergerecycle.png  %}\n+ \n+ \n```c\ntypedef struct DuLNode{\n     ElemType               data;\n     struct DuLNode    *prior;\n     struct DuLNode    *next;\n}DuLNode,  *DuLinkList;\n```\n\n\n### \n+   \n+ \n+ (emm   \n \n###  \n+ \n+ \n+ 100\n+ githubcbeatifulsoup),~)\n+ \n \n","slug":"DS-linklist","published":1,"updated":"2018-05-26T15:08:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghmq000000jxn48kg6w7","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>  <a id=\"more\"></a><br>{  </p>\n<ul>\n<li>:  </li>\n<li>:  </li>\n<li>next,pre  </li>\n</ul>\n<p>}<br><br>{</p>\n<ul>\n<li>InitList(&amp;L);:c/c++  </li>\n<li>DestroyList(&amp;L); free  </li>\n<li>Length(L);</li>\n<li>GetElem(L,i,&amp;e);   </li>\n<li>LocateElem(L,e,compare()); </li>\n<li>InsertElem(&amp;L,i,e); O(1),</li>\n<li>DeleteElem(&amp;L,i,&amp;e); O(1)<br>  </li>\n</ul>\n<p>}<br>eg:<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span> &#123;</span> </span><br><span class=\"line\">       ElemType data<span class=\"comment\">//</span></span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span>  *<span class=\"title\">next</span> //</span></span><br><span class=\"line\"><span class=\"class\">&#125; <span class=\"title\">LNode</span>,  *<span class=\"title\">LinkList</span>;</span></span><br><span class=\"line\">LNode  *L;</span><br><span class=\"line\">LinkList  L;</span><br><span class=\"line\">L =  (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\"> L = <span class=\"keyword\">new</span> LNode;</span><br><span class=\"line\">L-&gt;data;</span><br><span class=\"line\">LNode  L;</span><br><span class=\"line\">L.date</span><br></pre></td></tr></table></figure></p>\n<img src=\"/2018/05/26/DS-linklist/linklist.png\" title=\"\">    \n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>  </li>\n<li>    </li>\n<li>leetcodeReverseLinklist1  </li>\n</ol>\n<img src=\"/2018/05/26/DS-linklist/headnode.png\" title=\"\">  \n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>i  </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Status <span class=\"title\">GetElem_L</span><span class=\"params\">(LinkList L, <span class=\"keyword\">int</span> i, ElemType &amp;e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;<span class=\"comment\">//</span></span><br><span class=\"line\">    p = L-&gt;next;  </span><br><span class=\"line\">    j = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>( p &amp;&amp; j &lt; i)&#123;</span><br><span class=\"line\">          p = p-&gt;next; </span><br><span class=\"line\">          ++j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!p || j&gt;i) <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\">    e = p-&gt;data;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>i    </p>\n<img src=\"/2018/05/26/DS-linklist/insert.png\" title=\"\">    \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Status <span class=\"title\">ListInsert_L</span><span class=\"params\">(LinkList &amp;L, <span class=\"keyword\">int</span> i, ElemType e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  p = L; j = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">while</span> (p &amp;&amp; j &lt; i<span class=\"number\">-1</span>) &#123; p = p-&gt;next; ++j &#125;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!p || j&gt;i<span class=\"number\">-1</span>)  <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\">  s =  (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     s-&gt;data = e;  </span><br><span class=\"line\">  s-&gt;next = p-&gt;next;  </span><br><span class=\"line\">  p-&gt;next = s;  </span><br><span class=\"line\">     <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:i:  </p>\n<img src=\"/2018/05/26/DS-linklist/delete.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\">Status <span class=\"title\">ListDelete_L</span><span class=\"params\">(LinkList &amp;L, <span class=\"keyword\">int</span> i, ElemType &amp;e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> p = L; j = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">while</span> (p-&gt;next &amp;&amp; j &lt; i<span class=\"number\">-1</span>) &#123; p = p-&gt;next; ++j &#125;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!(p-&gt;next) || j&gt;i<span class=\"number\">-1</span>)  <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\"> q = p-&gt;next;</span><br><span class=\"line\">     e = q-&gt;data;  </span><br><span class=\"line\"> p-&gt;next = p-&gt;next-&gt;next;  <span class=\"comment\">//(p-&gt;next = q-&gt;next;)</span></span><br><span class=\"line\"> <span class=\"built_in\">free</span>(q);  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>  </p>\n<img src=\"/2018/05/26/DS-linklist/headbuild.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CreateList_L(LinkList &amp;L, <span class=\"keyword\">int</span> n)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     L = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     L-&gt;next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"keyword\">for</span>( i=n; i&gt;<span class=\"number\">0</span>; --i)&#123;</span><br><span class=\"line\">         s = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">         <span class=\"built_in\">scanf</span>( &amp;s-&gt;data);</span><br><span class=\"line\">         s-&gt;next = L-&gt;next; </span><br><span class=\"line\">         L-&gt;next = s; </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>  </p>\n<img src=\"/2018/05/26/DS-linklist/tailbuile.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CreateList_L(LinkList &amp;L, <span class=\"keyword\">int</span> n)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     tail = L = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     L-&gt;next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"keyword\">for</span>( i=n; i&gt;<span class=\"number\">0</span>; --i)&#123;</span><br><span class=\"line\">         s = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">         <span class=\"built_in\">scanf</span>( &amp;s-&gt;data);</span><br><span class=\"line\">         tail-&gt;next = s; </span><br><span class=\"line\">         tail = s; </span><br><span class=\"line\">     &#125;      &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MergeList_L</span><span class=\"params\">(LinkList &amp;La, LinkList &amp;Lb, LinkList &amp;Lc)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    pa = La-&gt;next; pb = Lb-&gt;next;</span><br><span class=\"line\">    Lc = pc = La;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>( pa &amp;&amp; pb )&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pa-&gt;data &lt;= pb-&gt;data)&#123;</span><br><span class=\"line\">             pc-&gt;next = pa; pc = pa; pa = pa-&gt;next;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">             pc-&gt;next = pb; pc = pb; pb= pb-&gt;next;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pc-&gt;next = pa ? pa : pb;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>( Lb );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>  <img src=\"/2018/05/26/DS-linklist/sigrecyclelink.png\" title=\"\">\n<img src=\"/2018/05/26/DS-linklist/mergerecycle.png\" title=\"\"></li>\n<li></li>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>&#123;</span></span><br><span class=\"line\">     ElemType               data;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>    *<span class=\"title\">prior</span>;</span></span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>    *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;DuLNode,  *DuLinkList;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>  </li>\n<li></li>\n<li>(emm   </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li>100</li>\n<li>githubcbeatifulsoup),~)</li>\n<li></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>","more":"<br>{  </p>\n<ul>\n<li>:  </li>\n<li>:  </li>\n<li>next,pre  </li>\n</ul>\n<p>}<br><br>{</p>\n<ul>\n<li>InitList(&amp;L);:c/c++  </li>\n<li>DestroyList(&amp;L); free  </li>\n<li>Length(L);</li>\n<li>GetElem(L,i,&amp;e);   </li>\n<li>LocateElem(L,e,compare()); </li>\n<li>InsertElem(&amp;L,i,e); O(1),</li>\n<li>DeleteElem(&amp;L,i,&amp;e); O(1)<br>  </li>\n</ul>\n<p>}<br>eg:<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span> &#123;</span> </span><br><span class=\"line\">       ElemType data<span class=\"comment\">//</span></span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LNode</span>  *<span class=\"title\">next</span> //</span></span><br><span class=\"line\"><span class=\"class\">&#125; <span class=\"title\">LNode</span>,  *<span class=\"title\">LinkList</span>;</span></span><br><span class=\"line\">LNode  *L;</span><br><span class=\"line\">LinkList  L;</span><br><span class=\"line\">L =  (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\"> L = <span class=\"keyword\">new</span> LNode;</span><br><span class=\"line\">L-&gt;data;</span><br><span class=\"line\">LNode  L;</span><br><span class=\"line\">L.date</span><br></pre></td></tr></table></figure></p>\n<img src=\"/2018/05/26/DS-linklist/linklist.png\" title=\"\">    \n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>  </li>\n<li>    </li>\n<li>leetcodeReverseLinklist1  </li>\n</ol>\n<img src=\"/2018/05/26/DS-linklist/headnode.png\" title=\"\">  \n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>i  </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Status <span class=\"title\">GetElem_L</span><span class=\"params\">(LinkList L, <span class=\"keyword\">int</span> i, ElemType &amp;e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;<span class=\"comment\">//</span></span><br><span class=\"line\">    p = L-&gt;next;  </span><br><span class=\"line\">    j = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>( p &amp;&amp; j &lt; i)&#123;</span><br><span class=\"line\">          p = p-&gt;next; </span><br><span class=\"line\">          ++j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!p || j&gt;i) <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\">    e = p-&gt;data;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>i    </p>\n<img src=\"/2018/05/26/DS-linklist/insert.png\" title=\"\">    \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Status <span class=\"title\">ListInsert_L</span><span class=\"params\">(LinkList &amp;L, <span class=\"keyword\">int</span> i, ElemType e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  p = L; j = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">while</span> (p &amp;&amp; j &lt; i<span class=\"number\">-1</span>) &#123; p = p-&gt;next; ++j &#125;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!p || j&gt;i<span class=\"number\">-1</span>)  <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\">  s =  (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     s-&gt;data = e;  </span><br><span class=\"line\">  s-&gt;next = p-&gt;next;  </span><br><span class=\"line\">  p-&gt;next = s;  </span><br><span class=\"line\">     <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:i:  </p>\n<img src=\"/2018/05/26/DS-linklist/delete.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\">Status <span class=\"title\">ListDelete_L</span><span class=\"params\">(LinkList &amp;L, <span class=\"keyword\">int</span> i, ElemType &amp;e)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> p = L; j = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">while</span> (p-&gt;next &amp;&amp; j &lt; i<span class=\"number\">-1</span>) &#123; p = p-&gt;next; ++j &#125;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!(p-&gt;next) || j&gt;i<span class=\"number\">-1</span>)  <span class=\"keyword\">return</span> ERROR;</span><br><span class=\"line\"> q = p-&gt;next;</span><br><span class=\"line\">     e = q-&gt;data;  </span><br><span class=\"line\"> p-&gt;next = p-&gt;next-&gt;next;  <span class=\"comment\">//(p-&gt;next = q-&gt;next;)</span></span><br><span class=\"line\"> <span class=\"built_in\">free</span>(q);  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> OK;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>  </p>\n<img src=\"/2018/05/26/DS-linklist/headbuild.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CreateList_L(LinkList &amp;L, <span class=\"keyword\">int</span> n)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     L = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     L-&gt;next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"keyword\">for</span>( i=n; i&gt;<span class=\"number\">0</span>; --i)&#123;</span><br><span class=\"line\">         s = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">         <span class=\"built_in\">scanf</span>( &amp;s-&gt;data);</span><br><span class=\"line\">         s-&gt;next = L-&gt;next; </span><br><span class=\"line\">         L-&gt;next = s; </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>  </p>\n<img src=\"/2018/05/26/DS-linklist/tailbuile.png\" title=\"\">  \n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CreateList_L(LinkList &amp;L, <span class=\"keyword\">int</span> n)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">     tail = L = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">     L-&gt;next = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"keyword\">for</span>( i=n; i&gt;<span class=\"number\">0</span>; --i)&#123;</span><br><span class=\"line\">         s = (LinkList) <span class=\"built_in\">malloc</span>( <span class=\"keyword\">sizeof</span> (LNode) );</span><br><span class=\"line\">         <span class=\"built_in\">scanf</span>( &amp;s-&gt;data);</span><br><span class=\"line\">         tail-&gt;next = s; </span><br><span class=\"line\">         tail = s; </span><br><span class=\"line\">     &#125;      &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">MergeList_L</span><span class=\"params\">(LinkList &amp;La, LinkList &amp;Lb, LinkList &amp;Lc)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    pa = La-&gt;next; pb = Lb-&gt;next;</span><br><span class=\"line\">    Lc = pc = La;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>( pa &amp;&amp; pb )&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pa-&gt;data &lt;= pb-&gt;data)&#123;</span><br><span class=\"line\">             pc-&gt;next = pa; pc = pa; pa = pa-&gt;next;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">             pc-&gt;next = pb; pc = pb; pb= pb-&gt;next;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pc-&gt;next = pa ? pa : pb;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>( Lb );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>  <img src=\"/2018/05/26/DS-linklist/sigrecyclelink.png\" title=\"\">\n<img src=\"/2018/05/26/DS-linklist/mergerecycle.png\" title=\"\"></li>\n<li></li>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>&#123;</span></span><br><span class=\"line\">     ElemType               data;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>    *<span class=\"title\">prior</span>;</span></span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">DuLNode</span>    *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;DuLNode,  *DuLinkList;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>  </li>\n<li></li>\n<li>(emm   </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li></li>\n<li>100</li>\n<li>githubcbeatifulsoup),~)</li>\n<li></li>\n</ul>"},{"title":"android_AndroidManifest","date":"2018-05-20T09:46:34.000Z","_content":"#### androidmanifest\n\n\t<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\t    package=\"com.example.ksx.helloworld\">\n\t<!-- more -->\n\t    <application\n\t        android:allowBackup=\"true\"\n\t        android:icon=\"@mipmap/ic_launcher\"\n\t\t\tandroid:label=\"hallo\"//appbar\n\t        android:roundIcon=\"@mipmap/ic_launcher_round\"\n\t        android:supportsRtl=\"true\"\n\t        android:theme=\"@style/AppTheme\">\n\t        <activity android:name=\".MainActivity\">//\n\t\t\t<android:label=\"this is hallo\">//\n\t            <intent-filter>\n\t                <action android:name=\"android.intent.action.MAIN\" />//\n\t\n\t                <category android:name=\"android.intent.category.LAUNCHER\" />\n\t            </intent-filter>\n\t        </activity>\n\t    </application>\n\t\n\t</manifest>","source":"_posts/android-AndroidManifest.md","raw":"---\ntitle: android_AndroidManifest\ndate: 2018-05-20 17:46:34\ntags: android_coding\ncategories: android\n---\n#### androidmanifest\n\n\t<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\t    package=\"com.example.ksx.helloworld\">\n\t<!-- more -->\n\t    <application\n\t        android:allowBackup=\"true\"\n\t        android:icon=\"@mipmap/ic_launcher\"\n\t\t\tandroid:label=\"hallo\"//appbar\n\t        android:roundIcon=\"@mipmap/ic_launcher_round\"\n\t        android:supportsRtl=\"true\"\n\t        android:theme=\"@style/AppTheme\">\n\t        <activity android:name=\".MainActivity\">//\n\t\t\t<android:label=\"this is hallo\">//\n\t            <intent-filter>\n\t                <action android:name=\"android.intent.action.MAIN\" />//\n\t\n\t                <category android:name=\"android.intent.category.LAUNCHER\" />\n\t            </intent-filter>\n\t        </activity>\n\t    </application>\n\t\n\t</manifest>","slug":"android-AndroidManifest","published":1,"updated":"2018-05-20T12:37:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghn0000200jxd4m4al0f","content":"<h4 id=\"androidmanifest\"><a href=\"#androidmanifest\" class=\"headerlink\" title=\"androidmanifest\"></a>androidmanifest</h4><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.ksx.helloworld&quot;&gt;\n&lt;!-- more --&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;hallo&quot;//appbar\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppTheme&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;//\n        &lt;android:label=&quot;this is hallo&quot;&gt;//\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;//\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"androidmanifest\"><a href=\"#androidmanifest\" class=\"headerlink\" title=\"androidmanifest\"></a>androidmanifest</h4><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.ksx.helloworld&quot;&gt;\n&lt;!-- more --&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;hallo&quot;//appbar\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppTheme&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;//\n        &lt;android:label=&quot;this is hallo&quot;&gt;//\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;//\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>"},{"title":"android_adb","date":"2018-05-20T09:50:14.000Z","_content":"#### android adb command\nandroidadb\nadb list targets\nadb install -rxx.apk -r\nadb shell df\n<!-- more -->\nadb shell pm list packages -f\nadb shell input keyevent 3home\nadb shell touchscreen ..\nadb shell dumpsys Activity\nadb shell screenrecord /sdcard/demo.mp4  \nadb shell am start -n /\n\ngoogledevelopandroid studio\n/system/core/toolbox  /frameworks/base/cmdsADBshell\n","source":"_posts/android-adb.md","raw":"---\ntitle: android_adb\ndate: 2018-05-20 17:50:14\ntags: android_make\ncategories: android\n---\n#### android adb command\nandroidadb\nadb list targets\nadb install -rxx.apk -r\nadb shell df\n<!-- more -->\nadb shell pm list packages -f\nadb shell input keyevent 3home\nadb shell touchscreen ..\nadb shell dumpsys Activity\nadb shell screenrecord /sdcard/demo.mp4  \nadb shell am start -n /\n\ngoogledevelopandroid studio\n/system/core/toolbox  /frameworks/base/cmdsADBshell\n","slug":"android-adb","published":1,"updated":"2018-05-20T12:37:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghn8000600jxn6h81wl8","content":"<h4 id=\"android-adb-command\"><a href=\"#android-adb-command\" class=\"headerlink\" title=\"android adb command\"></a>android adb command</h4><p>androidadb<br>adb list targets<br>adb install -rxx.apk -r<br>adb shell df<br><a id=\"more\"></a><br>adb shell pm list packages -f<br>adb shell input keyevent 3home<br>adb shell touchscreen ..<br>adb shell dumpsys Activity<br>adb shell screenrecord /sdcard/demo.mp4  <br>adb shell am start -n /</p>\n<p>googledevelopandroid studio<br>/system/core/toolbox  /frameworks/base/cmdsADBshell</p>\n","site":{"data":{}},"excerpt":"<h4 id=\"android-adb-command\"><a href=\"#android-adb-command\" class=\"headerlink\" title=\"android adb command\"></a>android adb command</h4><p>androidadb<br>adb list targets<br>adb install -rxx.apk -r<br>adb shell df<br>","more":"<br>adb shell pm list packages -f<br>adb shell input keyevent 3home<br>adb shell touchscreen ..<br>adb shell dumpsys Activity<br>adb shell screenrecord /sdcard/demo.mp4  <br>adb shell am start -n /</p>\n<p>googledevelopandroid studio<br>/system/core/toolbox  /frameworks/base/cmdsADBshell</p>"},{"title":"android_howto_makeapk_cmd","date":"2018-05-20T09:08:46.000Z","_content":"### how to make a android by cmd :\n     APKresDalvik,class,AndroidMainifest,resources.arsc,ndkjni\n<!-- more -->\n\n### way 1:\n#### prepare\n     android studio .  direct use andrid create project\n\ncd ~/Desktop/FirstTest/app/src/main\nmkdir gen\nmkdir build\nmkdir out\n\nandroidMakefile\n\tSDK=~/Android/Sdk\n\tBUILD_TOOLS=$(SDK)/build-tools/25.0.3\n\tPLATFORMS=$(SDK)/platforms/android-25\n\taapt=$(BUILD_TOOLS)/aapt \n\tdx=$(BUILD_TOOLS)/dx\n\taidl=$(BUILD_TOOLS)/aidl\n\tapkbuilder=$(SDK)/tools/apkbuilder2 //apkbuilder\n\tadb=$(SDK)/platform-tools/adb\n\n\n####  R.java\n\n\taapt_task:\n\t    $(aapt) package \\\n\t    -f \\ #\n\t    -M  AndroidManifest.xml  \\ # Mainifest.xml \n\t    -I  $(PLATFORMS)/android.jar \\ #  android.jar #::-I xx.jar:xxx.jar:...\n\t    -S  res/ \\ # res \n\t    -J gen/ \\ #  R.java \n\t    -m  # -J \n\n####  .class\n\n\tjavac_task:\n\t    javac -source 1.7 -target 1.7 \\ #  jdk1.8  1.7  .class \n\t    -encoding UTF-8 \\ \n\t    -bootclasspath  $(PLATFORMS)/android.jar \\ # ::-I xx.jar:xxx.jar:...\n\t    -d build/ \\ #\n\t    java/thereisnospon/dextest/*.java \\\n\t    gen/thereisnospon/dextest/*.java \\\n    \n    \n####  .dex\n\n\tdx_task:\n\t\t$(dx) --dex --output=build/classes.dex \\\n\t\tbuild  \n\t\n#### \n\n\tresapk_task:\n\t\t$(aapt) package -f \\\n\t    -M  AndroidManifest.xml  \\\n\t    -I  $(PLATFORMS)/android.jar \\\n\t    -S  res/ \\\n\t    -F  out/resources\n\n\n#### .dex \n\nrf xxx,src\n\n\tapk_task:\t\n\t\tjava -cp $(SDK)/tools/lib/sdklib-25.3.2.jar \\\n\t\t  com.android.sdklib.build.ApkBuilderMain \\\n\t\t  Demo.apk -v -u -z src/main/out/resources\\\n\t\t  -f src/main/build/classes.dex -rf src\n\t\n#### debug\n\n\tsigner:\n\t\tjarsigner -verbose \\\n\t    -keystore ~/.android/debug.keystore \\\n\t    -storepass android \\\n\t    -keypass android \\\n\t    Demo.apk  androiddebugkey\n\t\n#### \n\n\tpkg: \n\t\tmake apk_task\n\t\tmake signer \n\t\n\n#### apk\n\tuninstall:\n\t\t$(adb) uninstall  thereisnospon.dextest\n\t\n\n#### apk\n\n\tinstall: \n\t\t$(adb) install out/app.apk\n\n#### \n\nrun:\n\tmake pkg \n\tmake uninstall\n\tmake install\n\t\n\n\t\t$(adb) shell am start -n thereisnospon.dextest/        thereisnospon.dextest.MainActivity  \n\n### gradle,\n\nAS gradle clean\ngradle build\napk\n   \n\n  ","source":"_posts/android-howto-makeapk-cmd.md","raw":"---\ntitle: android_howto_makeapk_cmd\ndate: 2018-05-20 17:08:46\ntags: android_make\ncategories: android\n---\n### how to make a android by cmd :\n     APKresDalvik,class,AndroidMainifest,resources.arsc,ndkjni\n<!-- more -->\n\n### way 1:\n#### prepare\n     android studio .  direct use andrid create project\n\ncd ~/Desktop/FirstTest/app/src/main\nmkdir gen\nmkdir build\nmkdir out\n\nandroidMakefile\n\tSDK=~/Android/Sdk\n\tBUILD_TOOLS=$(SDK)/build-tools/25.0.3\n\tPLATFORMS=$(SDK)/platforms/android-25\n\taapt=$(BUILD_TOOLS)/aapt \n\tdx=$(BUILD_TOOLS)/dx\n\taidl=$(BUILD_TOOLS)/aidl\n\tapkbuilder=$(SDK)/tools/apkbuilder2 //apkbuilder\n\tadb=$(SDK)/platform-tools/adb\n\n\n####  R.java\n\n\taapt_task:\n\t    $(aapt) package \\\n\t    -f \\ #\n\t    -M  AndroidManifest.xml  \\ # Mainifest.xml \n\t    -I  $(PLATFORMS)/android.jar \\ #  android.jar #::-I xx.jar:xxx.jar:...\n\t    -S  res/ \\ # res \n\t    -J gen/ \\ #  R.java \n\t    -m  # -J \n\n####  .class\n\n\tjavac_task:\n\t    javac -source 1.7 -target 1.7 \\ #  jdk1.8  1.7  .class \n\t    -encoding UTF-8 \\ \n\t    -bootclasspath  $(PLATFORMS)/android.jar \\ # ::-I xx.jar:xxx.jar:...\n\t    -d build/ \\ #\n\t    java/thereisnospon/dextest/*.java \\\n\t    gen/thereisnospon/dextest/*.java \\\n    \n    \n####  .dex\n\n\tdx_task:\n\t\t$(dx) --dex --output=build/classes.dex \\\n\t\tbuild  \n\t\n#### \n\n\tresapk_task:\n\t\t$(aapt) package -f \\\n\t    -M  AndroidManifest.xml  \\\n\t    -I  $(PLATFORMS)/android.jar \\\n\t    -S  res/ \\\n\t    -F  out/resources\n\n\n#### .dex \n\nrf xxx,src\n\n\tapk_task:\t\n\t\tjava -cp $(SDK)/tools/lib/sdklib-25.3.2.jar \\\n\t\t  com.android.sdklib.build.ApkBuilderMain \\\n\t\t  Demo.apk -v -u -z src/main/out/resources\\\n\t\t  -f src/main/build/classes.dex -rf src\n\t\n#### debug\n\n\tsigner:\n\t\tjarsigner -verbose \\\n\t    -keystore ~/.android/debug.keystore \\\n\t    -storepass android \\\n\t    -keypass android \\\n\t    Demo.apk  androiddebugkey\n\t\n#### \n\n\tpkg: \n\t\tmake apk_task\n\t\tmake signer \n\t\n\n#### apk\n\tuninstall:\n\t\t$(adb) uninstall  thereisnospon.dextest\n\t\n\n#### apk\n\n\tinstall: \n\t\t$(adb) install out/app.apk\n\n#### \n\nrun:\n\tmake pkg \n\tmake uninstall\n\tmake install\n\t\n\n\t\t$(adb) shell am start -n thereisnospon.dextest/        thereisnospon.dextest.MainActivity  \n\n### gradle,\n\nAS gradle clean\ngradle build\napk\n   \n\n  ","slug":"android-howto-makeapk-cmd","published":1,"updated":"2018-05-20T12:37:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghnf000800jxn8xnhtc5","content":"<h3 id=\"how-to-make-a-android-by-cmd\"><a href=\"#how-to-make-a-android-by-cmd\" class=\"headerlink\" title=\"how to make a android by cmd :\"></a>how to make a android by cmd :</h3><pre><code>APKresDalvik,class,AndroidMainifest,resources.arsc,ndkjni\n</code></pre><a id=\"more\"></a>\n<h3 id=\"way-1-\"><a href=\"#way-1-\" class=\"headerlink\" title=\"way 1:\"></a>way 1:</h3><h4 id=\"prepare\"><a href=\"#prepare\" class=\"headerlink\" title=\"prepare\"></a>prepare</h4><pre><code>android studio .  direct use andrid create project\n</code></pre><p>cd ~/Desktop/FirstTest/app/src/main<br>mkdir gen<br>mkdir build<br>mkdir out</p>\n<p>androidMakefile<br>    SDK=~/Android/Sdk<br>    BUILD_TOOLS=$(SDK)/build-tools/25.0.3<br>    PLATFORMS=$(SDK)/platforms/android-25<br>    aapt=$(BUILD_TOOLS)/aapt<br>    dx=$(BUILD_TOOLS)/dx<br>    aidl=$(BUILD_TOOLS)/aidl<br>    apkbuilder=$(SDK)/tools/apkbuilder2 //apkbuilder<br>    adb=$(SDK)/platform-tools/adb</p>\n<h4 id=\"-R-java\"><a href=\"#-R-java\" class=\"headerlink\" title=\" R.java\"></a> R.java</h4><pre><code>aapt_task:\n    $(aapt) package \\\n    -f \\ #\n    -M  AndroidManifest.xml  \\ # Mainifest.xml \n    -I  $(PLATFORMS)/android.jar \\ #  android.jar #::-I xx.jar:xxx.jar:...\n    -S  res/ \\ # res \n    -J gen/ \\ #  R.java \n    -m  # -J \n</code></pre><h4 id=\"-class\"><a href=\"#-class\" class=\"headerlink\" title=\" .class\"></a> .class</h4><pre><code>javac_task:\n    javac -source 1.7 -target 1.7 \\ #  jdk1.8  1.7  .class \n    -encoding UTF-8 \\ \n    -bootclasspath  $(PLATFORMS)/android.jar \\ # ::-I xx.jar:xxx.jar:...\n    -d build/ \\ #\n    java/thereisnospon/dextest/*.java \\\n    gen/thereisnospon/dextest/*.java \\\n</code></pre><h4 id=\"-dex\"><a href=\"#-dex\" class=\"headerlink\" title=\" .dex\"></a> .dex</h4><pre><code>dx_task:\n    $(dx) --dex --output=build/classes.dex \\\n    build  \n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>resapk_task:\n    $(aapt) package -f \\\n    -M  AndroidManifest.xml  \\\n    -I  $(PLATFORMS)/android.jar \\\n    -S  res/ \\\n    -F  out/resources\n</code></pre><h4 id=\"-dex-\"><a href=\"#-dex-\" class=\"headerlink\" title=\".dex \"></a>.dex </h4><p><br>rf xxx,src</p>\n<pre><code>apk_task:    \n    java -cp $(SDK)/tools/lib/sdklib-25.3.2.jar \\\n      com.android.sdklib.build.ApkBuilderMain \\\n      Demo.apk -v -u -z src/main/out/resources\\\n      -f src/main/build/classes.dex -rf src\n</code></pre><h4 id=\"debug\"><a href=\"#debug\" class=\"headerlink\" title=\"debug\"></a>debug</h4><pre><code>signer:\n    jarsigner -verbose \\\n    -keystore ~/.android/debug.keystore \\\n    -storepass android \\\n    -keypass android \\\n    Demo.apk  androiddebugkey\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>pkg: \n    make apk_task\n    make signer \n</code></pre><h4 id=\"apk\"><a href=\"#apk\" class=\"headerlink\" title=\"apk\"></a>apk</h4><pre><code>uninstall:\n    $(adb) uninstall  thereisnospon.dextest\n</code></pre><h4 id=\"apk\"><a href=\"#apk\" class=\"headerlink\" title=\"apk\"></a>apk</h4><pre><code>install: \n    $(adb) install out/app.apk\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>run:<br>    make pkg<br>    make uninstall<br>    make install</p>\n<pre><code>$(adb) shell am start -n thereisnospon.dextest/        thereisnospon.dextest.MainActivity  \n</code></pre><h3 id=\"gradle\"><a href=\"#gradle\" class=\"headerlink\" title=\"gradle,\"></a>gradle,</h3><p>AS gradle clean<br>gradle build<br>apk</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"how-to-make-a-android-by-cmd\"><a href=\"#how-to-make-a-android-by-cmd\" class=\"headerlink\" title=\"how to make a android by cmd :\"></a>how to make a android by cmd :</h3><pre><code>APKresDalvik,class,AndroidMainifest,resources.arsc,ndkjni\n</code></pre>","more":"<h3 id=\"way-1-\"><a href=\"#way-1-\" class=\"headerlink\" title=\"way 1:\"></a>way 1:</h3><h4 id=\"prepare\"><a href=\"#prepare\" class=\"headerlink\" title=\"prepare\"></a>prepare</h4><pre><code>android studio .  direct use andrid create project\n</code></pre><p>cd ~/Desktop/FirstTest/app/src/main<br>mkdir gen<br>mkdir build<br>mkdir out</p>\n<p>androidMakefile<br>    SDK=~/Android/Sdk<br>    BUILD_TOOLS=$(SDK)/build-tools/25.0.3<br>    PLATFORMS=$(SDK)/platforms/android-25<br>    aapt=$(BUILD_TOOLS)/aapt<br>    dx=$(BUILD_TOOLS)/dx<br>    aidl=$(BUILD_TOOLS)/aidl<br>    apkbuilder=$(SDK)/tools/apkbuilder2 //apkbuilder<br>    adb=$(SDK)/platform-tools/adb</p>\n<h4 id=\"-R-java\"><a href=\"#-R-java\" class=\"headerlink\" title=\" R.java\"></a> R.java</h4><pre><code>aapt_task:\n    $(aapt) package \\\n    -f \\ #\n    -M  AndroidManifest.xml  \\ # Mainifest.xml \n    -I  $(PLATFORMS)/android.jar \\ #  android.jar #::-I xx.jar:xxx.jar:...\n    -S  res/ \\ # res \n    -J gen/ \\ #  R.java \n    -m  # -J \n</code></pre><h4 id=\"-class\"><a href=\"#-class\" class=\"headerlink\" title=\" .class\"></a> .class</h4><pre><code>javac_task:\n    javac -source 1.7 -target 1.7 \\ #  jdk1.8  1.7  .class \n    -encoding UTF-8 \\ \n    -bootclasspath  $(PLATFORMS)/android.jar \\ # ::-I xx.jar:xxx.jar:...\n    -d build/ \\ #\n    java/thereisnospon/dextest/*.java \\\n    gen/thereisnospon/dextest/*.java \\\n</code></pre><h4 id=\"-dex\"><a href=\"#-dex\" class=\"headerlink\" title=\" .dex\"></a> .dex</h4><pre><code>dx_task:\n    $(dx) --dex --output=build/classes.dex \\\n    build  \n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>resapk_task:\n    $(aapt) package -f \\\n    -M  AndroidManifest.xml  \\\n    -I  $(PLATFORMS)/android.jar \\\n    -S  res/ \\\n    -F  out/resources\n</code></pre><h4 id=\"-dex-\"><a href=\"#-dex-\" class=\"headerlink\" title=\".dex \"></a>.dex </h4><p><br>rf xxx,src</p>\n<pre><code>apk_task:    \n    java -cp $(SDK)/tools/lib/sdklib-25.3.2.jar \\\n      com.android.sdklib.build.ApkBuilderMain \\\n      Demo.apk -v -u -z src/main/out/resources\\\n      -f src/main/build/classes.dex -rf src\n</code></pre><h4 id=\"debug\"><a href=\"#debug\" class=\"headerlink\" title=\"debug\"></a>debug</h4><pre><code>signer:\n    jarsigner -verbose \\\n    -keystore ~/.android/debug.keystore \\\n    -storepass android \\\n    -keypass android \\\n    Demo.apk  androiddebugkey\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>pkg: \n    make apk_task\n    make signer \n</code></pre><h4 id=\"apk\"><a href=\"#apk\" class=\"headerlink\" title=\"apk\"></a>apk</h4><pre><code>uninstall:\n    $(adb) uninstall  thereisnospon.dextest\n</code></pre><h4 id=\"apk\"><a href=\"#apk\" class=\"headerlink\" title=\"apk\"></a>apk</h4><pre><code>install: \n    $(adb) install out/app.apk\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>run:<br>    make pkg<br>    make uninstall<br>    make install</p>\n<pre><code>$(adb) shell am start -n thereisnospon.dextest/        thereisnospon.dextest.MainActivity  \n</code></pre><h3 id=\"gradle\"><a href=\"#gradle\" class=\"headerlink\" title=\"gradle,\"></a>gradle,</h3><p>AS gradle clean<br>gradle build<br>apk</p>"},{"title":"android_jni","date":"2018-05-20T09:53:27.000Z","_content":"\n\n### a example of JNI static way:\n\n#### first step: write a middle java file:\nmkdir jni\ncd jni/<!-- more -->\nvim TestJni.java\n\n\timport java.util.*;\n\tpublic class TestJni\n\t{\n\t\tpublic native void xprint(String content);\n\t\tstatic\n\t\t{\n\t\t\tSystem.loadLibrary(\"TestJni\");\n\t\t}\n\t}\n\n  javac TestJni.java  and make a class\n  \nthen \n  javah -jni TestJni  to make a .h file:\n  \n\t  /* DO NOT EDIT THIS FILE - it is machine generated */\n\t#include <jni.h>\n\t/* Header for class TestJni */\n\t\n\t#ifndef _Included_TestJni\n\t#define _Included_TestJni\n\t#ifdef __cplusplus\n\textern \"C\" {\n\t#endif\n\t/*\n\t * Class:     TestJni\n\t * Method:    xprint\n\t * Signature: (Ljava/lang/String;)V\n\t */\n\tJNIEXPORT void JNICALL Java_TestJni_xprint\n\t  (JNIEnv *, jobject, jstring);\n\t\n\t#ifdef __cplusplus\n\t}\n\t#endif\n\t#endif\n\t\n#### step two write jni file.c:\n\nTestJni.c:\n\n\t#include<jni.h>\n\t#include<stdio.h>\n\t#include \"TestJni.h\"\n\t\n\tJNIEXPORT void JNICALL Java_TestJni_xprint(JNIEnv *env,jobject obj,jstring content)\n\t{\n\t\tconst jbyte *str=(const jbyte*)(*env)->GetStringUTFChars(env,content,JNI_FALSE);\n\t\tprintf(\"hello--wo%s \\n\",str);\n\t\t(*env)->ReleaseStringUTFChars(env,content,(const char*)str);\n\t\treturn;\n\t}\n\t\n#### three build .so lib\n\tcc -I/usr/jdk-8/include/ -I/usr/jdk-8/include/linux/ -I .../jni/ -fPIC -shared -o libTestJni.so TestJni.c\n\t\n#### four write a test:hellow.java\n\timport java.util.*;\n\tpublic class hellow\n\t{\n\t\tpublic static void main(String argc[])\n\t    { \n\t\t    new hellow();\n\t    }\n\t    public hellow()\n\t    { \n\t       new TestJni().xprint(\"hi my name is keee\");\n\t    }\n\t}\n\t\n#### question:\njava.lang.UnsatisfiedLinkError\n\njava -Djava.library.path='.' HelloWorld\n\nexport LD_LIBRARY_PATH=HelloWorld:$LD_LIBRARY_PATH   \n\n java HelloWorld OK\n\t\t\n#### reference\nhttp://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\nhttp://www.cnblogs.com/wzben/p/5733571.html\n\n\n\n### a example of JNI dynamic way:\n\n#### step 1:\nwrite a TestJni.java\n\t\n\tpublic class SimpleJni{\n\t\tstatic {\n\t\t\tSystem.out.println(\"[java] static code block,start load shared library...\");\n\t\t\tSystem.loadLibrary(\"SimpleJni\");\n\t\t\tSystem.out.println(\"[java]load library end...\");\n\t\t}\n\t\tstatic native int add(int a,int b);\n\t\tpublic static void main(String args[])\n\t\t{\n\t\t\tSystem.out.println(\"[java] in main...\");\n\t\t\tSystem.out.println(\"[java] 3+4=\"+SimpleJni.add(3,4));\n\t\t\tSystem.out.println(\"end...\");\n\t\t}\n\t}\n\t\n\n#### step 2:\nwrite a Jni file:\n\t#include <jni.h>\n\t#include<stdio.h>\n\tconst char *classPathName=\"com/bt/jni/SimpleJni\";\n\t\n\tjint myadd(JNIEnv *env,jobject thiz,jint a,jint b)\n\t{\n\t\treturn a+b;\n\t}\n\tstatic JNINativeMethod methods[]={\n\t\t{\"add\",\"(II)I\",(void*)myadd},};\n\tint registerNatives(JNIEnv *env)\n\t{\n\t\tjclass clazz;\n\t\n\t\tclazz=(*env)->FindClass(env,classPathName);\n\t\tif(NULL==clazz){\n\t\t   printf(\"[C] FindClass fail\\n\");\n\t\t   goto failed;\n\t\t}\n\t\t if (0>(*env)->RegisterNatives(env,clazz,methods,sizeof(methods)/sizeof(methods[0]))){\n\t\t\t printf(\"RegisterNatives fail.\\n\");\n\t\t\t goto failed;\n\t\t }\n\t\t return JNI_TRUE;\n\tfailed:\n\t\t return JNI_FALSE;\n\t}\n\t\n\t\n\tjint JNI_OnLoad(JavaVM *vm,void *reserved)\n\t{\n\t\tJNIEnv *env=NULL;\n\t\tjint result=-1;\n\t\tvoid **env_p=NULL;\n\t\n\t\tprintf(\"start register native func\\n\");\n\t\tenv_p=(void**)&env;\n\t\n\t\tif(JNI_OK!=(*vm)->GetEnv(vm,env_p,0x00010006)){\n\t\t\tprintf(\"get env failed..\\n\");\n\t\t\tgoto err;\n\t\t}\n\t\tif(JNI_TRUE!=registerNatives(env)){\n\t\t\tprintf(\"register fail...exit....\\n\");\n\t\t\tgoto err;\n\t\t}\n\t\tresult=0x00010006;\n\terr:\n\t\treturn result;\n\t}\n\t\n\n#### step use:\n1.SimpleJni.javasimpel_jni.c\n    2.javac\n$ java -d .  SimpleJni.java\n$gcc -fPIC -I$JAVA_HOME/include/ -I$JAVA_HOME/include/linux/ -o libsimpleJni.so simple_jni.c\n\n    3.\n    $java -Djava.library.path=. com.bt.jni.SimpleJni\n\n\n\n\n#### other example:\n\njava file:\n\timport java.util.*;\n\tpublic class TestJni\n\t{\n\t\tpublic native void xprint(String content);\n\t\tstatic\n\t\t{\n\t\t\tSystem.loadLibrary(\"TestJni\");\n\t\t}\n\t\tpublic native static String native_hello();\n\t}\n\t\n\t\n\nJNI file:\n\t\n\t#include<jni.h>\n\t#include<stdio.h>\n\t//#include \"TestJni.h\"\n\t#include<iostream>\n\tusing namespace std;\n\t void xprint(JNIEnv *env,jobject obj,jstring content)\n\t{  \n\t//\tconst jbyte *str=(const jbyte*)(env->GetStringUTFChars(env,content,JNI_FALSE));\n\t\t//printf(\"hello--wo%s \\n\",str);\n\t//\tenv->ReleaseStringUTFChars(env,content,(const char*)str);\n\t        cout<<\"here:\"<<content<<endl;\n\t\treturn;\n\t}\n\tstatic jstring  native_hello(JNIEnv *env,jobject object)\n\t{ \n\t\n\t\t\n\t\treturn (env)->NewStringUTF(\"keshixi\");\n\t}\n\t\n\tstatic JNINativeMethod method_table[]={\n\t\t{ \"xprint\",\"(Ljava/lang/String;)V\",(void*)xprint},\n\t\t{\"native_hello\",\"()Ljava/lang/String;\",(void*)native_hello}\n\t//    {,,(void*)xprint},{,,(void*)native_hello}\n\t};\n\t\n\t jint JNI_OnLoad(JavaVM *jvm,void *reserved){\n\t\tJNIEnv *env;\n\t\tif(jvm->GetEnv((void**)&env,JNI_VERSION_1_6)!=JNI_OK){\n\t\t\treturn -1;\n\t\t}\n\t\tjclass clz=env->FindClass(\"TestJni\");\n\t\tif(clz==NULL)\n\t\t{\n\t\t\treturn JNI_FALSE;\n\t\t}\n\t\tif(env->RegisterNatives(clz,method_table,sizeof(method_table)/sizeof(method_table[0]))==JNI_OK){\n\t\t\treturn JNI_VERSION_1_6;\n\t\t}\n\t  }\n\t\n\t\n####reference:\njni\n\ndy\n\nndkandroidandroidstdioso\n\nandroid_jni_ndk:http://www.cnblogs.com/wzben/p/5733571.html\nhttp://www.linuxidc.com/Linux/2017-02/140130.htm\nhttp://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\nhttp://www.linuxidc.com/Linux/2017-02/140129.htm\n\nwww.fer.unizg.hr/_download/repository/jni.pdf\t\n\t\n\t\n\n","source":"_posts/android-jni.md","raw":"---\ntitle: android_jni\ndate: 2018-05-20 17:53:27\ntags: android_coding\ncategories: android\n---\n\n\n### a example of JNI static way:\n\n#### first step: write a middle java file:\nmkdir jni\ncd jni/<!-- more -->\nvim TestJni.java\n\n\timport java.util.*;\n\tpublic class TestJni\n\t{\n\t\tpublic native void xprint(String content);\n\t\tstatic\n\t\t{\n\t\t\tSystem.loadLibrary(\"TestJni\");\n\t\t}\n\t}\n\n  javac TestJni.java  and make a class\n  \nthen \n  javah -jni TestJni  to make a .h file:\n  \n\t  /* DO NOT EDIT THIS FILE - it is machine generated */\n\t#include <jni.h>\n\t/* Header for class TestJni */\n\t\n\t#ifndef _Included_TestJni\n\t#define _Included_TestJni\n\t#ifdef __cplusplus\n\textern \"C\" {\n\t#endif\n\t/*\n\t * Class:     TestJni\n\t * Method:    xprint\n\t * Signature: (Ljava/lang/String;)V\n\t */\n\tJNIEXPORT void JNICALL Java_TestJni_xprint\n\t  (JNIEnv *, jobject, jstring);\n\t\n\t#ifdef __cplusplus\n\t}\n\t#endif\n\t#endif\n\t\n#### step two write jni file.c:\n\nTestJni.c:\n\n\t#include<jni.h>\n\t#include<stdio.h>\n\t#include \"TestJni.h\"\n\t\n\tJNIEXPORT void JNICALL Java_TestJni_xprint(JNIEnv *env,jobject obj,jstring content)\n\t{\n\t\tconst jbyte *str=(const jbyte*)(*env)->GetStringUTFChars(env,content,JNI_FALSE);\n\t\tprintf(\"hello--wo%s \\n\",str);\n\t\t(*env)->ReleaseStringUTFChars(env,content,(const char*)str);\n\t\treturn;\n\t}\n\t\n#### three build .so lib\n\tcc -I/usr/jdk-8/include/ -I/usr/jdk-8/include/linux/ -I .../jni/ -fPIC -shared -o libTestJni.so TestJni.c\n\t\n#### four write a test:hellow.java\n\timport java.util.*;\n\tpublic class hellow\n\t{\n\t\tpublic static void main(String argc[])\n\t    { \n\t\t    new hellow();\n\t    }\n\t    public hellow()\n\t    { \n\t       new TestJni().xprint(\"hi my name is keee\");\n\t    }\n\t}\n\t\n#### question:\njava.lang.UnsatisfiedLinkError\n\njava -Djava.library.path='.' HelloWorld\n\nexport LD_LIBRARY_PATH=HelloWorld:$LD_LIBRARY_PATH   \n\n java HelloWorld OK\n\t\t\n#### reference\nhttp://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\nhttp://www.cnblogs.com/wzben/p/5733571.html\n\n\n\n### a example of JNI dynamic way:\n\n#### step 1:\nwrite a TestJni.java\n\t\n\tpublic class SimpleJni{\n\t\tstatic {\n\t\t\tSystem.out.println(\"[java] static code block,start load shared library...\");\n\t\t\tSystem.loadLibrary(\"SimpleJni\");\n\t\t\tSystem.out.println(\"[java]load library end...\");\n\t\t}\n\t\tstatic native int add(int a,int b);\n\t\tpublic static void main(String args[])\n\t\t{\n\t\t\tSystem.out.println(\"[java] in main...\");\n\t\t\tSystem.out.println(\"[java] 3+4=\"+SimpleJni.add(3,4));\n\t\t\tSystem.out.println(\"end...\");\n\t\t}\n\t}\n\t\n\n#### step 2:\nwrite a Jni file:\n\t#include <jni.h>\n\t#include<stdio.h>\n\tconst char *classPathName=\"com/bt/jni/SimpleJni\";\n\t\n\tjint myadd(JNIEnv *env,jobject thiz,jint a,jint b)\n\t{\n\t\treturn a+b;\n\t}\n\tstatic JNINativeMethod methods[]={\n\t\t{\"add\",\"(II)I\",(void*)myadd},};\n\tint registerNatives(JNIEnv *env)\n\t{\n\t\tjclass clazz;\n\t\n\t\tclazz=(*env)->FindClass(env,classPathName);\n\t\tif(NULL==clazz){\n\t\t   printf(\"[C] FindClass fail\\n\");\n\t\t   goto failed;\n\t\t}\n\t\t if (0>(*env)->RegisterNatives(env,clazz,methods,sizeof(methods)/sizeof(methods[0]))){\n\t\t\t printf(\"RegisterNatives fail.\\n\");\n\t\t\t goto failed;\n\t\t }\n\t\t return JNI_TRUE;\n\tfailed:\n\t\t return JNI_FALSE;\n\t}\n\t\n\t\n\tjint JNI_OnLoad(JavaVM *vm,void *reserved)\n\t{\n\t\tJNIEnv *env=NULL;\n\t\tjint result=-1;\n\t\tvoid **env_p=NULL;\n\t\n\t\tprintf(\"start register native func\\n\");\n\t\tenv_p=(void**)&env;\n\t\n\t\tif(JNI_OK!=(*vm)->GetEnv(vm,env_p,0x00010006)){\n\t\t\tprintf(\"get env failed..\\n\");\n\t\t\tgoto err;\n\t\t}\n\t\tif(JNI_TRUE!=registerNatives(env)){\n\t\t\tprintf(\"register fail...exit....\\n\");\n\t\t\tgoto err;\n\t\t}\n\t\tresult=0x00010006;\n\terr:\n\t\treturn result;\n\t}\n\t\n\n#### step use:\n1.SimpleJni.javasimpel_jni.c\n    2.javac\n$ java -d .  SimpleJni.java\n$gcc -fPIC -I$JAVA_HOME/include/ -I$JAVA_HOME/include/linux/ -o libsimpleJni.so simple_jni.c\n\n    3.\n    $java -Djava.library.path=. com.bt.jni.SimpleJni\n\n\n\n\n#### other example:\n\njava file:\n\timport java.util.*;\n\tpublic class TestJni\n\t{\n\t\tpublic native void xprint(String content);\n\t\tstatic\n\t\t{\n\t\t\tSystem.loadLibrary(\"TestJni\");\n\t\t}\n\t\tpublic native static String native_hello();\n\t}\n\t\n\t\n\nJNI file:\n\t\n\t#include<jni.h>\n\t#include<stdio.h>\n\t//#include \"TestJni.h\"\n\t#include<iostream>\n\tusing namespace std;\n\t void xprint(JNIEnv *env,jobject obj,jstring content)\n\t{  \n\t//\tconst jbyte *str=(const jbyte*)(env->GetStringUTFChars(env,content,JNI_FALSE));\n\t\t//printf(\"hello--wo%s \\n\",str);\n\t//\tenv->ReleaseStringUTFChars(env,content,(const char*)str);\n\t        cout<<\"here:\"<<content<<endl;\n\t\treturn;\n\t}\n\tstatic jstring  native_hello(JNIEnv *env,jobject object)\n\t{ \n\t\n\t\t\n\t\treturn (env)->NewStringUTF(\"keshixi\");\n\t}\n\t\n\tstatic JNINativeMethod method_table[]={\n\t\t{ \"xprint\",\"(Ljava/lang/String;)V\",(void*)xprint},\n\t\t{\"native_hello\",\"()Ljava/lang/String;\",(void*)native_hello}\n\t//    {,,(void*)xprint},{,,(void*)native_hello}\n\t};\n\t\n\t jint JNI_OnLoad(JavaVM *jvm,void *reserved){\n\t\tJNIEnv *env;\n\t\tif(jvm->GetEnv((void**)&env,JNI_VERSION_1_6)!=JNI_OK){\n\t\t\treturn -1;\n\t\t}\n\t\tjclass clz=env->FindClass(\"TestJni\");\n\t\tif(clz==NULL)\n\t\t{\n\t\t\treturn JNI_FALSE;\n\t\t}\n\t\tif(env->RegisterNatives(clz,method_table,sizeof(method_table)/sizeof(method_table[0]))==JNI_OK){\n\t\t\treturn JNI_VERSION_1_6;\n\t\t}\n\t  }\n\t\n\t\n####reference:\njni\n\ndy\n\nndkandroidandroidstdioso\n\nandroid_jni_ndk:http://www.cnblogs.com/wzben/p/5733571.html\nhttp://www.linuxidc.com/Linux/2017-02/140130.htm\nhttp://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\nhttp://www.linuxidc.com/Linux/2017-02/140129.htm\n\nwww.fer.unizg.hr/_download/repository/jni.pdf\t\n\t\n\t\n\n","slug":"android-jni","published":1,"updated":"2018-05-20T12:37:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghnj000900jxtfqf7pyh","content":"<h3 id=\"a-example-of-JNI-static-way\"><a href=\"#a-example-of-JNI-static-way\" class=\"headerlink\" title=\"a example of JNI static way:\"></a>a example of JNI static way:</h3><h4 id=\"first-step-write-a-middle-java-file\"><a href=\"#first-step-write-a-middle-java-file\" class=\"headerlink\" title=\"first step: write a middle java file:\"></a>first step: write a middle java file:</h4><p>mkdir jni<br>cd jni/<a id=\"more\"></a><br>vim TestJni.java</p>\n<pre><code>import java.util.*;\npublic class TestJni\n{\n    public native void xprint(String content);\n    static\n    {\n        System.loadLibrary(&quot;TestJni&quot;);\n    }\n}\n</code></pre><p>  javac TestJni.java  and make a class</p>\n<p>then<br>  javah -jni TestJni  to make a .h file:</p>\n<pre><code>  /* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class TestJni */\n\n#ifndef _Included_TestJni\n#define _Included_TestJni\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n/*\n * Class:     TestJni\n * Method:    xprint\n * Signature: (Ljava/lang/String;)V\n */\nJNIEXPORT void JNICALL Java_TestJni_xprint\n  (JNIEnv *, jobject, jstring);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre><h4 id=\"step-two-write-jni-file-c\"><a href=\"#step-two-write-jni-file-c\" class=\"headerlink\" title=\"step two write jni file.c:\"></a>step two write jni file.c:</h4><p>TestJni.c:</p>\n<pre><code>#include&lt;jni.h&gt;\n#include&lt;stdio.h&gt;\n#include &quot;TestJni.h&quot;\n\nJNIEXPORT void JNICALL Java_TestJni_xprint(JNIEnv *env,jobject obj,jstring content)\n{\n    const jbyte *str=(const jbyte*)(*env)-&gt;GetStringUTFChars(env,content,JNI_FALSE);\n    printf(&quot;hello--wo%s \\n&quot;,str);\n    (*env)-&gt;ReleaseStringUTFChars(env,content,(const char*)str);\n    return;\n}\n</code></pre><h4 id=\"three-build-so-lib\"><a href=\"#three-build-so-lib\" class=\"headerlink\" title=\"three build .so lib\"></a>three build .so lib</h4><pre><code>cc -I/usr/jdk-8/include/ -I/usr/jdk-8/include/linux/ -I .../jni/ -fPIC -shared -o libTestJni.so TestJni.c\n</code></pre><h4 id=\"four-write-a-test-hellow-java\"><a href=\"#four-write-a-test-hellow-java\" class=\"headerlink\" title=\"four write a test:hellow.java\"></a>four write a test:hellow.java</h4><pre><code>import java.util.*;\npublic class hellow\n{\n    public static void main(String argc[])\n    { \n        new hellow();\n    }\n    public hellow()\n    { \n       new TestJni().xprint(&quot;hi my name is keee&quot;);\n    }\n}\n</code></pre><h4 id=\"question\"><a href=\"#question\" class=\"headerlink\" title=\"question:\"></a>question:</h4><p>java.lang.UnsatisfiedLinkError</p>\n<p>java -Djava.library.path=. HelloWorld<br><br>export LD_LIBRARY_PATH=HelloWorld:$LD_LIBRARY_PATH   </p>\n<p> java HelloWorld OK</p>\n<h4 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h4><p><a href=\"http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html</a><br><a href=\"http://www.cnblogs.com/wzben/p/5733571.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/wzben/p/5733571.html</a></p>\n<h3 id=\"a-example-of-JNI-dynamic-way\"><a href=\"#a-example-of-JNI-dynamic-way\" class=\"headerlink\" title=\"a example of JNI dynamic way:\"></a>a example of JNI dynamic way:</h3><h4 id=\"step-1\"><a href=\"#step-1\" class=\"headerlink\" title=\"step 1:\"></a>step 1:</h4><p>write a TestJni.java</p>\n<pre><code>public class SimpleJni{\n    static {\n        System.out.println(&quot;[java] static code block,start load shared library...&quot;);\n        System.loadLibrary(&quot;SimpleJni&quot;);\n        System.out.println(&quot;[java]load library end...&quot;);\n    }\n    static native int add(int a,int b);\n    public static void main(String args[])\n    {\n        System.out.println(&quot;[java] in main...&quot;);\n        System.out.println(&quot;[java] 3+4=&quot;+SimpleJni.add(3,4));\n        System.out.println(&quot;end...&quot;);\n    }\n}\n</code></pre><h4 id=\"step-2\"><a href=\"#step-2\" class=\"headerlink\" title=\"step 2:\"></a>step 2:</h4><p>write a Jni file:</p>\n<pre><code>#include &lt;jni.h&gt;\n#include&lt;stdio.h&gt;\nconst char *classPathName=&quot;com/bt/jni/SimpleJni&quot;;\n\njint myadd(JNIEnv *env,jobject thiz,jint a,jint b)\n{\n    return a+b;\n}\nstatic JNINativeMethod methods[]={\n    {&quot;add&quot;,&quot;(II)I&quot;,(void*)myadd},};\nint registerNatives(JNIEnv *env)\n{\n    jclass clazz;\n\n    clazz=(*env)-&gt;FindClass(env,classPathName);\n    if(NULL==clazz){\n       printf(&quot;[C] FindClass fail\\n&quot;);\n       goto failed;\n    }\n     if (0&gt;(*env)-&gt;RegisterNatives(env,clazz,methods,sizeof(methods)/sizeof(methods[0]))){\n         printf(&quot;RegisterNatives fail.\\n&quot;);\n         goto failed;\n     }\n     return JNI_TRUE;\nfailed:\n     return JNI_FALSE;\n}\n\n\njint JNI_OnLoad(JavaVM *vm,void *reserved)\n{\n    JNIEnv *env=NULL;\n    jint result=-1;\n    void **env_p=NULL;\n\n    printf(&quot;start register native func\\n&quot;);\n    env_p=(void**)&amp;env;\n\n    if(JNI_OK!=(*vm)-&gt;GetEnv(vm,env_p,0x00010006)){\n        printf(&quot;get env failed..\\n&quot;);\n        goto err;\n    }\n    if(JNI_TRUE!=registerNatives(env)){\n        printf(&quot;register fail...exit....\\n&quot;);\n        goto err;\n    }\n    result=0x00010006;\nerr:\n    return result;\n}\n</code></pre><h4 id=\"step-use\"><a href=\"#step-use\" class=\"headerlink\" title=\"step use:\"></a>step use:</h4><p>1.SimpleJni.javasimpel_jni.c<br>    2.javac<br>$ java -d .  SimpleJni.java<br>$gcc -fPIC -I$JAVA_HOME/include/ -I$JAVA_HOME/include/linux/ -o libsimpleJni.so simple_jni.c</p>\n<pre><code>3.\n$java -Djava.library.path=. com.bt.jni.SimpleJni\n</code></pre><h4 id=\"other-example\"><a href=\"#other-example\" class=\"headerlink\" title=\"other example:\"></a>other example:</h4><p>java file:<br>    import java.util.*;<br>    public class TestJni<br>    {<br>        public native void xprint(String content);<br>        static<br>        {<br>            System.loadLibrary(TestJni);<br>        }<br>        public native static String native_hello();<br>    }</p>\n<p>JNI file:</p>\n<pre><code>#include&lt;jni.h&gt;\n#include&lt;stdio.h&gt;\n//#include &quot;TestJni.h&quot;\n#include&lt;iostream&gt;\nusing namespace std;\n void xprint(JNIEnv *env,jobject obj,jstring content)\n{  \n//    const jbyte *str=(const jbyte*)(env-&gt;GetStringUTFChars(env,content,JNI_FALSE));\n    //printf(&quot;hello--wo%s \\n&quot;,str);\n//    env-&gt;ReleaseStringUTFChars(env,content,(const char*)str);\n        cout&lt;&lt;&quot;here:&quot;&lt;&lt;content&lt;&lt;endl;\n    return;\n}\nstatic jstring  native_hello(JNIEnv *env,jobject object)\n{ \n\n\n    return (env)-&gt;NewStringUTF(&quot;keshixi&quot;);\n}\n\nstatic JNINativeMethod method_table[]={\n    { &quot;xprint&quot;,&quot;(Ljava/lang/String;)V&quot;,(void*)xprint},\n    {&quot;native_hello&quot;,&quot;()Ljava/lang/String;&quot;,(void*)native_hello}\n//    {,,(void*)xprint},{,,(void*)native_hello}\n};\n\n jint JNI_OnLoad(JavaVM *jvm,void *reserved){\n    JNIEnv *env;\n    if(jvm-&gt;GetEnv((void**)&amp;env,JNI_VERSION_1_6)!=JNI_OK){\n        return -1;\n    }\n    jclass clz=env-&gt;FindClass(&quot;TestJni&quot;);\n    if(clz==NULL)\n    {\n        return JNI_FALSE;\n    }\n    if(env-&gt;RegisterNatives(clz,method_table,sizeof(method_table)/sizeof(method_table[0]))==JNI_OK){\n        return JNI_VERSION_1_6;\n    }\n  }\n</code></pre><p>####reference:<br>jni</p>\n<p>dy</p>\n<p>ndkandroidandroidstdioso</p>\n<p>android_jni_ndk:<a href=\"http://www.cnblogs.com/wzben/p/5733571.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/wzben/p/5733571.html</a><br><a href=\"http://www.linuxidc.com/Linux/2017-02/140130.htm\" target=\"_blank\" rel=\"noopener\">http://www.linuxidc.com/Linux/2017-02/140130.htm</a><br><a href=\"http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html</a><br><a href=\"http://www.linuxidc.com/Linux/2017-02/140129.htm\" target=\"_blank\" rel=\"noopener\">http://www.linuxidc.com/Linux/2017-02/140129.htm</a></p>\n<p><a href=\"http://www.fer.unizg.hr/_download/repository/jni.pdf\" target=\"_blank\" rel=\"noopener\">www.fer.unizg.hr/_download/repository/jni.pdf</a>    </p>\n","site":{"data":{}},"excerpt":"<h3 id=\"a-example-of-JNI-static-way\"><a href=\"#a-example-of-JNI-static-way\" class=\"headerlink\" title=\"a example of JNI static way:\"></a>a example of JNI static way:</h3><h4 id=\"first-step-write-a-middle-java-file\"><a href=\"#first-step-write-a-middle-java-file\" class=\"headerlink\" title=\"first step: write a middle java file:\"></a>first step: write a middle java file:</h4><p>mkdir jni<br>cd jni/","more":"<br>vim TestJni.java</p>\n<pre><code>import java.util.*;\npublic class TestJni\n{\n    public native void xprint(String content);\n    static\n    {\n        System.loadLibrary(&quot;TestJni&quot;);\n    }\n}\n</code></pre><p>  javac TestJni.java  and make a class</p>\n<p>then<br>  javah -jni TestJni  to make a .h file:</p>\n<pre><code>  /* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class TestJni */\n\n#ifndef _Included_TestJni\n#define _Included_TestJni\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n/*\n * Class:     TestJni\n * Method:    xprint\n * Signature: (Ljava/lang/String;)V\n */\nJNIEXPORT void JNICALL Java_TestJni_xprint\n  (JNIEnv *, jobject, jstring);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre><h4 id=\"step-two-write-jni-file-c\"><a href=\"#step-two-write-jni-file-c\" class=\"headerlink\" title=\"step two write jni file.c:\"></a>step two write jni file.c:</h4><p>TestJni.c:</p>\n<pre><code>#include&lt;jni.h&gt;\n#include&lt;stdio.h&gt;\n#include &quot;TestJni.h&quot;\n\nJNIEXPORT void JNICALL Java_TestJni_xprint(JNIEnv *env,jobject obj,jstring content)\n{\n    const jbyte *str=(const jbyte*)(*env)-&gt;GetStringUTFChars(env,content,JNI_FALSE);\n    printf(&quot;hello--wo%s \\n&quot;,str);\n    (*env)-&gt;ReleaseStringUTFChars(env,content,(const char*)str);\n    return;\n}\n</code></pre><h4 id=\"three-build-so-lib\"><a href=\"#three-build-so-lib\" class=\"headerlink\" title=\"three build .so lib\"></a>three build .so lib</h4><pre><code>cc -I/usr/jdk-8/include/ -I/usr/jdk-8/include/linux/ -I .../jni/ -fPIC -shared -o libTestJni.so TestJni.c\n</code></pre><h4 id=\"four-write-a-test-hellow-java\"><a href=\"#four-write-a-test-hellow-java\" class=\"headerlink\" title=\"four write a test:hellow.java\"></a>four write a test:hellow.java</h4><pre><code>import java.util.*;\npublic class hellow\n{\n    public static void main(String argc[])\n    { \n        new hellow();\n    }\n    public hellow()\n    { \n       new TestJni().xprint(&quot;hi my name is keee&quot;);\n    }\n}\n</code></pre><h4 id=\"question\"><a href=\"#question\" class=\"headerlink\" title=\"question:\"></a>question:</h4><p>java.lang.UnsatisfiedLinkError</p>\n<p>java -Djava.library.path=. HelloWorld<br><br>export LD_LIBRARY_PATH=HelloWorld:$LD_LIBRARY_PATH   </p>\n<p> java HelloWorld OK</p>\n<h4 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h4><p><a href=\"http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html</a><br><a href=\"http://www.cnblogs.com/wzben/p/5733571.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/wzben/p/5733571.html</a></p>\n<h3 id=\"a-example-of-JNI-dynamic-way\"><a href=\"#a-example-of-JNI-dynamic-way\" class=\"headerlink\" title=\"a example of JNI dynamic way:\"></a>a example of JNI dynamic way:</h3><h4 id=\"step-1\"><a href=\"#step-1\" class=\"headerlink\" title=\"step 1:\"></a>step 1:</h4><p>write a TestJni.java</p>\n<pre><code>public class SimpleJni{\n    static {\n        System.out.println(&quot;[java] static code block,start load shared library...&quot;);\n        System.loadLibrary(&quot;SimpleJni&quot;);\n        System.out.println(&quot;[java]load library end...&quot;);\n    }\n    static native int add(int a,int b);\n    public static void main(String args[])\n    {\n        System.out.println(&quot;[java] in main...&quot;);\n        System.out.println(&quot;[java] 3+4=&quot;+SimpleJni.add(3,4));\n        System.out.println(&quot;end...&quot;);\n    }\n}\n</code></pre><h4 id=\"step-2\"><a href=\"#step-2\" class=\"headerlink\" title=\"step 2:\"></a>step 2:</h4><p>write a Jni file:</p>\n<pre><code>#include &lt;jni.h&gt;\n#include&lt;stdio.h&gt;\nconst char *classPathName=&quot;com/bt/jni/SimpleJni&quot;;\n\njint myadd(JNIEnv *env,jobject thiz,jint a,jint b)\n{\n    return a+b;\n}\nstatic JNINativeMethod methods[]={\n    {&quot;add&quot;,&quot;(II)I&quot;,(void*)myadd},};\nint registerNatives(JNIEnv *env)\n{\n    jclass clazz;\n\n    clazz=(*env)-&gt;FindClass(env,classPathName);\n    if(NULL==clazz){\n       printf(&quot;[C] FindClass fail\\n&quot;);\n       goto failed;\n    }\n     if (0&gt;(*env)-&gt;RegisterNatives(env,clazz,methods,sizeof(methods)/sizeof(methods[0]))){\n         printf(&quot;RegisterNatives fail.\\n&quot;);\n         goto failed;\n     }\n     return JNI_TRUE;\nfailed:\n     return JNI_FALSE;\n}\n\n\njint JNI_OnLoad(JavaVM *vm,void *reserved)\n{\n    JNIEnv *env=NULL;\n    jint result=-1;\n    void **env_p=NULL;\n\n    printf(&quot;start register native func\\n&quot;);\n    env_p=(void**)&amp;env;\n\n    if(JNI_OK!=(*vm)-&gt;GetEnv(vm,env_p,0x00010006)){\n        printf(&quot;get env failed..\\n&quot;);\n        goto err;\n    }\n    if(JNI_TRUE!=registerNatives(env)){\n        printf(&quot;register fail...exit....\\n&quot;);\n        goto err;\n    }\n    result=0x00010006;\nerr:\n    return result;\n}\n</code></pre><h4 id=\"step-use\"><a href=\"#step-use\" class=\"headerlink\" title=\"step use:\"></a>step use:</h4><p>1.SimpleJni.javasimpel_jni.c<br>    2.javac<br>$ java -d .  SimpleJni.java<br>$gcc -fPIC -I$JAVA_HOME/include/ -I$JAVA_HOME/include/linux/ -o libsimpleJni.so simple_jni.c</p>\n<pre><code>3.\n$java -Djava.library.path=. com.bt.jni.SimpleJni\n</code></pre><h4 id=\"other-example\"><a href=\"#other-example\" class=\"headerlink\" title=\"other example:\"></a>other example:</h4><p>java file:<br>    import java.util.*;<br>    public class TestJni<br>    {<br>        public native void xprint(String content);<br>        static<br>        {<br>            System.loadLibrary(TestJni);<br>        }<br>        public native static String native_hello();<br>    }</p>\n<p>JNI file:</p>\n<pre><code>#include&lt;jni.h&gt;\n#include&lt;stdio.h&gt;\n//#include &quot;TestJni.h&quot;\n#include&lt;iostream&gt;\nusing namespace std;\n void xprint(JNIEnv *env,jobject obj,jstring content)\n{  \n//    const jbyte *str=(const jbyte*)(env-&gt;GetStringUTFChars(env,content,JNI_FALSE));\n    //printf(&quot;hello--wo%s \\n&quot;,str);\n//    env-&gt;ReleaseStringUTFChars(env,content,(const char*)str);\n        cout&lt;&lt;&quot;here:&quot;&lt;&lt;content&lt;&lt;endl;\n    return;\n}\nstatic jstring  native_hello(JNIEnv *env,jobject object)\n{ \n\n\n    return (env)-&gt;NewStringUTF(&quot;keshixi&quot;);\n}\n\nstatic JNINativeMethod method_table[]={\n    { &quot;xprint&quot;,&quot;(Ljava/lang/String;)V&quot;,(void*)xprint},\n    {&quot;native_hello&quot;,&quot;()Ljava/lang/String;&quot;,(void*)native_hello}\n//    {,,(void*)xprint},{,,(void*)native_hello}\n};\n\n jint JNI_OnLoad(JavaVM *jvm,void *reserved){\n    JNIEnv *env;\n    if(jvm-&gt;GetEnv((void**)&amp;env,JNI_VERSION_1_6)!=JNI_OK){\n        return -1;\n    }\n    jclass clz=env-&gt;FindClass(&quot;TestJni&quot;);\n    if(clz==NULL)\n    {\n        return JNI_FALSE;\n    }\n    if(env-&gt;RegisterNatives(clz,method_table,sizeof(method_table)/sizeof(method_table[0]))==JNI_OK){\n        return JNI_VERSION_1_6;\n    }\n  }\n</code></pre><p>####reference:<br>jni</p>\n<p>dy</p>\n<p>ndkandroidandroidstdioso</p>\n<p>android_jni_ndk:<a href=\"http://www.cnblogs.com/wzben/p/5733571.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/wzben/p/5733571.html</a><br><a href=\"http://www.linuxidc.com/Linux/2017-02/140130.htm\" target=\"_blank\" rel=\"noopener\">http://www.linuxidc.com/Linux/2017-02/140130.htm</a><br><a href=\"http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html</a><br><a href=\"http://www.linuxidc.com/Linux/2017-02/140129.htm\" target=\"_blank\" rel=\"noopener\">http://www.linuxidc.com/Linux/2017-02/140129.htm</a></p>\n<p><a href=\"http://www.fer.unizg.hr/_download/repository/jni.pdf\" target=\"_blank\" rel=\"noopener\">www.fer.unizg.hr/_download/repository/jni.pdf</a>    </p>"},{"title":"android_makefirst_app","date":"2018-05-20T09:38:24.000Z","_content":"###  install and make first app\n20170608\nandroid-studiohelloworld   app ubuntu\n#### 1 java-jdk:<!-- more -->\na  java-jdk:Java SE Development Kit 8 Downloads\nhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n\nb  /usr/jdk-8/\n\nc   \nexport JAVA_HOME=/usr/jdk-8\nexport JRE_HOME=$JAVA_HOME/jre\nexport CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib\nexport PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\n/etc/profile\n\nd source /etc/profile\n\ne java -version\n,java\npublic class test{\n\tpublic static void main(String[] args){\n\t\tSystem.out.println(\"hello world\");\n\t}\n}\ntest.java\njavac test.java\n:java test\n\n\n### 2 android-studio:\na \nb installion/usr/android-studio\nc,bin:./studio.sh\nd \ne \n\n\n3 app helloworld\n\n>->build->make project->run--\n-->-->\n>\n\nx86arm10,linuxkvm\nx86kvm:\ngenymotion\n#### 4 kvm\nAndroidGoogleLinux64UbuntuMacLinux\nkvmKernel-based Virtual MachineintelVTAMDV\ncpu\n\n$ egrep -c '(vmx|svm)' /proc/cpuinfo\n4\n\n0\n\nkvm\n\n$ sudo apt-get install qemu-kvm\n$ sudo adduser linc kvm\n$ sudo apt-get install libvirt-bin ubuntu-vm-builder bridge-utils\n$ sudo adduser linc libvirtd\n\n(linc\n\n\n$ sudo virsh -c qemu:///system list\n Id    Name                           State\n----------------------------------------------------\n\n\n/home/ksx/Android/Sdk/emulator/emulator -avd Nexus_4_API_22 -qemu -m 2047 -enable-kvm\n\nAndroid Studiox86_64armcpu\n\n\nGenymotion,\n\n\n\n#### 5app\nusb\nappapp,Edit Configurations\nusbdeviceok\n\n\n####  \nandroid\nproject\n.gradle.idea \napp\nbuild   \ngradle   gradle wrappergradle wrappergradlegradle\n     .gitignore\n     build.gradle\n     gradle.properties  gradlegradle\n     gradlewgradlew.batgradle\n     local.propertiesandroid sdk\n     setting.gradle\n     \n     \n     app\n     build\n     lib   \n     test \n     proguard-rules.pro  \n\n#### build gradle intruduce\n\n\ngradle  Groovy DSL    Ant Maven \n\napp  build.gradleappbuild.gradle\n  \ngradle c++\nbuildscript {\n    repositories {\n        jcenter()//jcenter\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.2'//android\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\napp\napply plugin: 'com.android.application'//android com.android.library\n\nandroid {//\n    compileSdkVersion 25//25API 25,android 7.1\n    buildToolsVersion \"25.0.3\"   //\n    defaultConfig {\n        applicationId \"org.example.myactivity1\"\n        minSdkVersion 25//android\n        targetSdkVersion 25//2222android5\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {//debugrelease\n        release {\n            minifyEnabled false//\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//.txtsdkpro\n        }\n    }\n}\n\ndependencies {//\n    compile fileTree(dir: 'libs', include: ['*.jar'])//\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.3.1'//\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    testCompile 'junit:junit:4.12'//\n}\n\ngpart,live usbubuntu \n\n","source":"_posts/android-makefirst-app.md","raw":"---\ntitle: android_makefirst_app\ndate: 2018-05-20 17:38:24\ntags: android_make \ncategories: android\n---\n###  install and make first app\n20170608\nandroid-studiohelloworld   app ubuntu\n#### 1 java-jdk:<!-- more -->\na  java-jdk:Java SE Development Kit 8 Downloads\nhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n\nb  /usr/jdk-8/\n\nc   \nexport JAVA_HOME=/usr/jdk-8\nexport JRE_HOME=$JAVA_HOME/jre\nexport CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib\nexport PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\n/etc/profile\n\nd source /etc/profile\n\ne java -version\n,java\npublic class test{\n\tpublic static void main(String[] args){\n\t\tSystem.out.println(\"hello world\");\n\t}\n}\ntest.java\njavac test.java\n:java test\n\n\n### 2 android-studio:\na \nb installion/usr/android-studio\nc,bin:./studio.sh\nd \ne \n\n\n3 app helloworld\n\n>->build->make project->run--\n-->-->\n>\n\nx86arm10,linuxkvm\nx86kvm:\ngenymotion\n#### 4 kvm\nAndroidGoogleLinux64UbuntuMacLinux\nkvmKernel-based Virtual MachineintelVTAMDV\ncpu\n\n$ egrep -c '(vmx|svm)' /proc/cpuinfo\n4\n\n0\n\nkvm\n\n$ sudo apt-get install qemu-kvm\n$ sudo adduser linc kvm\n$ sudo apt-get install libvirt-bin ubuntu-vm-builder bridge-utils\n$ sudo adduser linc libvirtd\n\n(linc\n\n\n$ sudo virsh -c qemu:///system list\n Id    Name                           State\n----------------------------------------------------\n\n\n/home/ksx/Android/Sdk/emulator/emulator -avd Nexus_4_API_22 -qemu -m 2047 -enable-kvm\n\nAndroid Studiox86_64armcpu\n\n\nGenymotion,\n\n\n\n#### 5app\nusb\nappapp,Edit Configurations\nusbdeviceok\n\n\n####  \nandroid\nproject\n.gradle.idea \napp\nbuild   \ngradle   gradle wrappergradle wrappergradlegradle\n     .gitignore\n     build.gradle\n     gradle.properties  gradlegradle\n     gradlewgradlew.batgradle\n     local.propertiesandroid sdk\n     setting.gradle\n     \n     \n     app\n     build\n     lib   \n     test \n     proguard-rules.pro  \n\n#### build gradle intruduce\n\n\ngradle  Groovy DSL    Ant Maven \n\napp  build.gradleappbuild.gradle\n  \ngradle c++\nbuildscript {\n    repositories {\n        jcenter()//jcenter\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.2'//android\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\napp\napply plugin: 'com.android.application'//android com.android.library\n\nandroid {//\n    compileSdkVersion 25//25API 25,android 7.1\n    buildToolsVersion \"25.0.3\"   //\n    defaultConfig {\n        applicationId \"org.example.myactivity1\"\n        minSdkVersion 25//android\n        targetSdkVersion 25//2222android5\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {//debugrelease\n        release {\n            minifyEnabled false//\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//.txtsdkpro\n        }\n    }\n}\n\ndependencies {//\n    compile fileTree(dir: 'libs', include: ['*.jar'])//\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.3.1'//\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    testCompile 'junit:junit:4.12'//\n}\n\ngpart,live usbubuntu \n\n","slug":"android-makefirst-app","published":1,"updated":"2018-05-20T12:38:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghnp000d00jxkirsmowg","content":"<h3 id=\"install-and-make-first-app\"><a href=\"#install-and-make-first-app\" class=\"headerlink\" title=\"install and make first app\"></a>install and make first app</h3><p>20170608<br>android-studiohelloworld   app ubuntu</p>\n<h4 id=\"1-java-jdk\"><a href=\"#1-java-jdk\" class=\"headerlink\" title=\"1 java-jdk:\"></a>1 java-jdk:<a id=\"more\"></a></h4><p>a  java-jdk:Java SE Development Kit 8 Downloads<br><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br></p>\n<p>b  /usr/jdk-8/</p>\n<p>c   <br>export JAVA_HOME=/usr/jdk-8<br>export JRE_HOME=$JAVA_HOME/jre<br>export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib<br>export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin<br>/etc/profile</p>\n<p>d source /etc/profile</p>\n<p>e java -version<br>,java<br>public class test{<br>    public static void main(String[] args){<br>        System.out.println(hello world);<br>    }<br>}<br>test.java<br>javac test.java<br>:java test</p>\n<h3 id=\"2-android-studio\"><a href=\"#2-android-studio\" class=\"headerlink\" title=\"2 android-studio:\"></a>2 android-studio:</h3><p>a <br>b installion/usr/android-studio<br>c,bin:./studio.sh<br>d <br>e </p>\n<p>3 app helloworld<br><br>&gt;-&gt;build-&gt;make project-&gt;run<br>&gt;&gt;<br>&gt;</p>\n<p>x86arm10,linuxkvm<br>x86kvm:<br>genymotion</p>\n<h4 id=\"4-kvm\"><a href=\"#4-kvm\" class=\"headerlink\" title=\"4 kvm\"></a>4 kvm</h4><p>AndroidGoogleLinux64UbuntuMacLinux<br>kvmKernel-based Virtual MachineintelVTAMDV<br>cpu</p>\n<p>$ egrep -c (vmx|svm) /proc/cpuinfo<br>4</p>\n<p>0</p>\n<p>kvm</p>\n<p>$ sudo apt-get install qemu-kvm<br>$ sudo adduser linc kvm<br>$ sudo apt-get install libvirt-bin ubuntu-vm-builder bridge-utils<br>$ sudo adduser linc libvirtd</p>\n<p>(linc<br></p>\n<p>$ sudo virsh -c qemu:///system list</p>\n<h2 id=\"Id-Name-State\"><a href=\"#Id-Name-State\" class=\"headerlink\" title=\" Id    Name                           State\"></a> Id    Name                           State</h2><p><br>/home/ksx/Android/Sdk/emulator/emulator -avd Nexus_4_API_22 -qemu -m 2047 -enable-kvm</p>\n<p>Android Studiox86_64armcpu</p>\n<p>Genymotion,</p>\n<h4 id=\"5app\"><a href=\"#5app\" class=\"headerlink\" title=\"5app\"></a>5app</h4><p>usb<br>appapp,Edit Configurations<br>usbdeviceok</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>android<br>project<br>.gradle.idea <br>app<br>build   <br>gradle   gradle wrappergradle wrappergradlegradle<br>     .gitignore<br>     build.gradle<br>     gradle.properties  gradlegradle<br>     gradlewgradlew.batgradle<br>     local.propertiesandroid sdk<br>     setting.gradle</p>\n<pre><code>app\nbuild\nlib   \ntest \nproguard-rules.pro  \n</code></pre><h4 id=\"build-gradle-intruduce\"><a href=\"#build-gradle-intruduce\" class=\"headerlink\" title=\"build gradle intruduce\"></a>build gradle intruduce</h4><p>gradle  Groovy DSL    Ant Maven </p>\n<p>app  build.gradleappbuild.gradle</p>\n<p>gradle c++<br>buildscript {<br>    repositories {<br>        jcenter()//jcenter</p>\n<pre><code>}\ndependencies {\n    classpath &apos;com.android.tools.build:gradle:2.3.2&apos;//android\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n</code></pre><p>}</p>\n<p>allprojects {<br>    repositories {<br>        jcenter()<br>    }<br>}</p>\n<p>task clean(type: Delete) {<br>    delete rootProject.buildDir<br>}</p>\n<p>app<br>apply plugin: com.android.application//android com.android.library</p>\n<p>android {//<br>    compileSdkVersion 25//25API 25,android 7.1<br>    buildToolsVersion 25.0.3   //<br>    defaultConfig {<br>        applicationId org.example.myactivity1<br>        minSdkVersion 25//android<br>        targetSdkVersion 25//2222android5<br>        versionCode 1<br>        versionName 1.0<br>        testInstrumentationRunner android.support.test.runner.AndroidJUnitRunner<br>    }<br>    buildTypes {//debugrelease<br>        release {<br>            minifyEnabled false//<br>            proguardFiles getDefaultProguardFile(proguard-android.txt), proguard-rules.pro//.txtsdkpro<br>        }<br>    }<br>}</p>\n<p>dependencies {//<br>    compile fileTree(dir: libs, include: [*.jar])//<br>    androidTestCompile(com.android.support.test.espresso:espresso-core:2.2.2, {<br>        exclude group: com.android.support, module: support-annotations<br>    })<br>    compile com.android.support:appcompat-v7:25.3.1//<br>    compile com.android.support.constraint:constraint-layout:1.0.2<br>    testCompile junit:junit:4.12//<br>}</p>\n<p>gpart,live usbubuntu </p>\n","site":{"data":{}},"excerpt":"<h3 id=\"install-and-make-first-app\"><a href=\"#install-and-make-first-app\" class=\"headerlink\" title=\"install and make first app\"></a>install and make first app</h3><p>20170608<br>android-studiohelloworld   app ubuntu</p>\n<h4 id=\"1-java-jdk\"><a href=\"#1-java-jdk\" class=\"headerlink\" title=\"1 java-jdk:\"></a>1 java-jdk:","more":"</h4><p>a  java-jdk:Java SE Development Kit 8 Downloads<br><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br></p>\n<p>b  /usr/jdk-8/</p>\n<p>c   <br>export JAVA_HOME=/usr/jdk-8<br>export JRE_HOME=$JAVA_HOME/jre<br>export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib<br>export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin<br>/etc/profile</p>\n<p>d source /etc/profile</p>\n<p>e java -version<br>,java<br>public class test{<br>    public static void main(String[] args){<br>        System.out.println(hello world);<br>    }<br>}<br>test.java<br>javac test.java<br>:java test</p>\n<h3 id=\"2-android-studio\"><a href=\"#2-android-studio\" class=\"headerlink\" title=\"2 android-studio:\"></a>2 android-studio:</h3><p>a <br>b installion/usr/android-studio<br>c,bin:./studio.sh<br>d <br>e </p>\n<p>3 app helloworld<br><br>&gt;-&gt;build-&gt;make project-&gt;run<br>&gt;&gt;<br>&gt;</p>\n<p>x86arm10,linuxkvm<br>x86kvm:<br>genymotion</p>\n<h4 id=\"4-kvm\"><a href=\"#4-kvm\" class=\"headerlink\" title=\"4 kvm\"></a>4 kvm</h4><p>AndroidGoogleLinux64UbuntuMacLinux<br>kvmKernel-based Virtual MachineintelVTAMDV<br>cpu</p>\n<p>$ egrep -c (vmx|svm) /proc/cpuinfo<br>4</p>\n<p>0</p>\n<p>kvm</p>\n<p>$ sudo apt-get install qemu-kvm<br>$ sudo adduser linc kvm<br>$ sudo apt-get install libvirt-bin ubuntu-vm-builder bridge-utils<br>$ sudo adduser linc libvirtd</p>\n<p>(linc<br></p>\n<p>$ sudo virsh -c qemu:///system list</p>\n<h2 id=\"Id-Name-State\"><a href=\"#Id-Name-State\" class=\"headerlink\" title=\" Id    Name                           State\"></a> Id    Name                           State</h2><p><br>/home/ksx/Android/Sdk/emulator/emulator -avd Nexus_4_API_22 -qemu -m 2047 -enable-kvm</p>\n<p>Android Studiox86_64armcpu</p>\n<p>Genymotion,</p>\n<h4 id=\"5app\"><a href=\"#5app\" class=\"headerlink\" title=\"5app\"></a>5app</h4><p>usb<br>appapp,Edit Configurations<br>usbdeviceok</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>android<br>project<br>.gradle.idea <br>app<br>build   <br>gradle   gradle wrappergradle wrappergradlegradle<br>     .gitignore<br>     build.gradle<br>     gradle.properties  gradlegradle<br>     gradlewgradlew.batgradle<br>     local.propertiesandroid sdk<br>     setting.gradle</p>\n<pre><code>app\nbuild\nlib   \ntest \nproguard-rules.pro  \n</code></pre><h4 id=\"build-gradle-intruduce\"><a href=\"#build-gradle-intruduce\" class=\"headerlink\" title=\"build gradle intruduce\"></a>build gradle intruduce</h4><p>gradle  Groovy DSL    Ant Maven </p>\n<p>app  build.gradleappbuild.gradle</p>\n<p>gradle c++<br>buildscript {<br>    repositories {<br>        jcenter()//jcenter</p>\n<pre><code>}\ndependencies {\n    classpath &apos;com.android.tools.build:gradle:2.3.2&apos;//android\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n</code></pre><p>}</p>\n<p>allprojects {<br>    repositories {<br>        jcenter()<br>    }<br>}</p>\n<p>task clean(type: Delete) {<br>    delete rootProject.buildDir<br>}</p>\n<p>app<br>apply plugin: com.android.application//android com.android.library</p>\n<p>android {//<br>    compileSdkVersion 25//25API 25,android 7.1<br>    buildToolsVersion 25.0.3   //<br>    defaultConfig {<br>        applicationId org.example.myactivity1<br>        minSdkVersion 25//android<br>        targetSdkVersion 25//2222android5<br>        versionCode 1<br>        versionName 1.0<br>        testInstrumentationRunner android.support.test.runner.AndroidJUnitRunner<br>    }<br>    buildTypes {//debugrelease<br>        release {<br>            minifyEnabled false//<br>            proguardFiles getDefaultProguardFile(proguard-android.txt), proguard-rules.pro//.txtsdkpro<br>        }<br>    }<br>}</p>\n<p>dependencies {//<br>    compile fileTree(dir: libs, include: [*.jar])//<br>    androidTestCompile(com.android.support.test.espresso:espresso-core:2.2.2, {<br>        exclude group: com.android.support, module: support-annotations<br>    })<br>    compile com.android.support:appcompat-v7:25.3.1//<br>    compile com.android.support.constraint:constraint-layout:1.0.2<br>    testCompile junit:junit:4.12//<br>}</p>\n<p>gpart,live usbubuntu </p>"},{"title":"android_will_write","date":"2018-05-20T08:58:26.000Z","_content":"#test categories\nthis is the android categories to test ","source":"_posts/android-will-write.md","raw":"---\ntitle: android_will_write\ndate: 2018-05-20 16:58:26\ntags: android_activity\ncategories: android\n---\n#test categories\nthis is the android categories to test ","slug":"android-will-write","published":1,"updated":"2018-05-20T08:59:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghnt000e00jx91ly60o6","content":"<p>#test categories<br>this is the android categories to test </p>\n","site":{"data":{}},"excerpt":"","more":"<p>#test categories<br>this is the android categories to test </p>\n"},{"title":"DS_string","date":"2018-06-24T08:01:32.000Z","_content":"### \n,<!--more-->\n#### \n##### \n+ \"a1a2.....an\",\n+ c/c++'\\0'python'\\0'\n+ -\n+ tab,\n+ :n(n+1)/2--\n##### \n+ --(data)\n```c\n    .file\t\"test.c\"\n\t.section\t.rodata\n.LC0:\n\t.string\t\"kesance\"\n.LC1:\n\t.string\t\"%d\\n\"\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n```\n+ :\n\n+ \n##### \n+ \n+ \n+ \n+ \n+ \n+ \n+ \n+ \n#### \n##### \n+ 10001110008,\n+ https://en.wikipedia.org/wiki/Unicodeunicode\n\n##### \n\n\n##### KMP\nkmpps:\n+ ****  \n  ```\n   a b c a e f g \n   a b d a e f```\n   c,\n   ```\n   a b c a e f g\n     a b d a e f ```\n    \n  ```\n     a b c a e f g\n           a b d a e f ```\n  kmp\n \n ```\n a b c d a b c f g e \n a b c e a b c t\n d,  \n a b c d a b c f g e \n         a b c e a b c t```\n    \n+ \n+  1\n```\na b c d a b c e f g \na b c d a b c t ```\n d abc,nextabcabcabcabcabcd\n+ **2next**  \n  + P,jS,ikP[j]!=S[i]PS[i]next[j]=knextk<j\n  + next:  \n   P[0-k-1]==P[j-k~j-1]==S[i-ki-1] (next[j]=k)  \n   next[j+1]=?  \n   -P[k]==P[j]  \n   P[0-k-1]+P[k]==P[j-k~j-1]+P[j]  \n   P[0 ~ k] == P[j-k ~ j]next[j+1] == k + 1 == next[j] + 1  \n   -P[k]!=P[j]\n  0k-1j-k,j-10k-1\n0next[k]-1k-next[k],k-1j-k,j-10next[k]-1jnext[k],\n\n+ \n```c\n//next[0]=-1,\nnext[1]=0,0.\nint getnext(char *P,int next[]){\n    j=1,next[j]=0,k=0;\n    while(j<sizeof(P){\n      if(k==0||P[j++]==P[k++])\n            next[j]==k;//next[j]=next[j]+1\n      else\n           k=next[k];\n           }\n           }```\n           \n##### \n+ AABXBDHADFBFJD1010011100011101001,HuffmanA00  B001\n\n#### (\n+ Jaccard\n\n+ Cosine\n  \nABnA[A1,A2,...,An],B[B1,B2,B3,...,Bn],AB\n+ ,\n https://www.cnblogs.com/huilixieqi/p/6493089.html\n+ linuxdiff\nwinbeyondcompare\n\n#### \n+ \n\n##### \n+ clexyacc,lex\n+ \n\n##### \n##### \n+ c\n+ \n##### \n+ \n+ \n+ sed,awk\n\n#### \n+ \n+ ","source":"_posts/DS-string.md","raw":"---\ntitle: DS_string\ndate: 2018-06-24 16:01:32\ntags: \ncategories: \n---\n### \n,<!--more-->\n#### \n##### \n+ \"a1a2.....an\",\n+ c/c++'\\0'python'\\0'\n+ -\n+ tab,\n+ :n(n+1)/2--\n##### \n+ --(data)\n```c\n    .file\t\"test.c\"\n\t.section\t.rodata\n.LC0:\n\t.string\t\"kesance\"\n.LC1:\n\t.string\t\"%d\\n\"\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n```\n+ :\n\n+ \n##### \n+ \n+ \n+ \n+ \n+ \n+ \n+ \n+ \n#### \n##### \n+ 10001110008,\n+ https://en.wikipedia.org/wiki/Unicodeunicode\n\n##### \n\n\n##### KMP\nkmpps:\n+ ****  \n  ```\n   a b c a e f g \n   a b d a e f```\n   c,\n   ```\n   a b c a e f g\n     a b d a e f ```\n    \n  ```\n     a b c a e f g\n           a b d a e f ```\n  kmp\n \n ```\n a b c d a b c f g e \n a b c e a b c t\n d,  \n a b c d a b c f g e \n         a b c e a b c t```\n    \n+ \n+  1\n```\na b c d a b c e f g \na b c d a b c t ```\n d abc,nextabcabcabcabcabcd\n+ **2next**  \n  + P,jS,ikP[j]!=S[i]PS[i]next[j]=knextk<j\n  + next:  \n   P[0-k-1]==P[j-k~j-1]==S[i-ki-1] (next[j]=k)  \n   next[j+1]=?  \n   -P[k]==P[j]  \n   P[0-k-1]+P[k]==P[j-k~j-1]+P[j]  \n   P[0 ~ k] == P[j-k ~ j]next[j+1] == k + 1 == next[j] + 1  \n   -P[k]!=P[j]\n  0k-1j-k,j-10k-1\n0next[k]-1k-next[k],k-1j-k,j-10next[k]-1jnext[k],\n\n+ \n```c\n//next[0]=-1,\nnext[1]=0,0.\nint getnext(char *P,int next[]){\n    j=1,next[j]=0,k=0;\n    while(j<sizeof(P){\n      if(k==0||P[j++]==P[k++])\n            next[j]==k;//next[j]=next[j]+1\n      else\n           k=next[k];\n           }\n           }```\n           \n##### \n+ AABXBDHADFBFJD1010011100011101001,HuffmanA00  B001\n\n#### (\n+ Jaccard\n\n+ Cosine\n  \nABnA[A1,A2,...,An],B[B1,B2,B3,...,Bn],AB\n+ ,\n https://www.cnblogs.com/huilixieqi/p/6493089.html\n+ linuxdiff\nwinbeyondcompare\n\n#### \n+ \n\n##### \n+ clexyacc,lex\n+ \n\n##### \n##### \n+ c\n+ \n##### \n+ \n+ \n+ sed,awk\n\n#### \n+ \n+ ","slug":"DS-string","published":1,"updated":"2018-06-30T13:30:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819gho0000i00jxvcqqcn0r","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>,<a id=\"more\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>a1a2..an,</li>\n<li>c/c++\\0python\\0</li>\n<li>-</li>\n<li>tab,</li>\n<li>:n(n+1)/2<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li><p>(data)</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    .file\t<span class=\"string\">\"test.c\"</span></span><br><span class=\"line\">\t.section\t.rodata</span><br><span class=\"line\">.LC0:</span><br><span class=\"line\">\t.<span class=\"built_in\">string</span>\t<span class=\"string\">\"kesance\"</span></span><br><span class=\"line\">.LC1:</span><br><span class=\"line\">\t.<span class=\"built_in\">string</span>\t<span class=\"string\">\"%d\\n\"</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:<br></p>\n</li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li>10001110008,</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Unicode\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Unicode</a>unicode</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h5 id=\"KMP\"><a href=\"#KMP\" class=\"headerlink\" title=\"KMP\"></a>KMP</h5><p>kmpps:</p>\n<ul>\n<li><p><strong></strong>  </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p> c,</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g</span><br><span class=\"line\">      <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p>kmp<br></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c f g e </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br><span class=\"line\">d,  </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c f g e </span><br><span class=\"line\">        <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li></li>\n<li>1<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e f g </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> d abc,nextabcabcabcabcabcd</p>\n<ul>\n<li><p><strong>2next</strong>  </p>\n<ul>\n<li>P,jS,ikP[j]!=S[i]PS[i]next[j]=knextk&lt;j</li>\n<li>next:<br>P[0-k-1]==P[j-k~j-1]==S[i-ki-1] (next[j]=k)<br>next[j+1]=?<br>-P[k]==P[j]<br>P[0-k-1]+P[k]==P[j-k~j-1]+P[j]<br>P[0 ~ k] == P[j-k ~ j]next[j+1] == k + 1 == next[j] + 1<br>-P[k]!=P[j]<br>0k-1j-k,j-10k-1<br>0next[k]-1k-next[k],k-1j-k,j-10next[k]-1jnext[k],</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//next[0]=-1,</span></span><br><span class=\"line\">next[<span class=\"number\">1</span>]=<span class=\"number\">0</span>,<span class=\"number\">0.</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> getnext(<span class=\"keyword\">char</span> *P,<span class=\"keyword\">int</span> next[])&#123;</span><br><span class=\"line\">    j=<span class=\"number\">1</span>,next[j]=<span class=\"number\">0</span>,k=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j&lt;<span class=\"keyword\">sizeof</span>(P)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>||P[j++]==P[k++])</span><br><span class=\"line\">            next[j]==k;<span class=\"comment\">//next[j]=next[j]+1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">           k=next[k];</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>AABXBDHADFBFJD1010011100011101001,HuffmanA00  B001</li>\n</ul>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"(\"></a>(</h4><ul>\n<li>Jaccard<br></li>\n<li>Cosine<br><br>ABnA[A1,A2,,An],B[B1,B2,B3,,Bn],AB</li>\n<li>,<br><a href=\"https://www.cnblogs.com/huilixieqi/p/6493089.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/huilixieqi/p/6493089.html</a></li>\n<li>linuxdiff<br>winbeyondcompare</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>clexyacc,lex</li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>c</li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li></li>\n<li>sed,awk</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>,","more":"</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>a1a2..an,</li>\n<li>c/c++\\0python\\0</li>\n<li>-</li>\n<li>tab,</li>\n<li>:n(n+1)/2<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li><p>(data)</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    .file\t<span class=\"string\">\"test.c\"</span></span><br><span class=\"line\">\t.section\t.rodata</span><br><span class=\"line\">.LC0:</span><br><span class=\"line\">\t.<span class=\"built_in\">string</span>\t<span class=\"string\">\"kesance\"</span></span><br><span class=\"line\">.LC1:</span><br><span class=\"line\">\t.<span class=\"built_in\">string</span>\t<span class=\"string\">\"%d\\n\"</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:<br></p>\n</li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li>10001110008,</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Unicode\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Unicode</a>unicode</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h5 id=\"KMP\"><a href=\"#KMP\" class=\"headerlink\" title=\"KMP\"></a>KMP</h5><p>kmpps:</p>\n<ul>\n<li><p><strong></strong>  </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p> c,</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c <span class=\"selector-tag\">a</span> e f g</span><br><span class=\"line\">      <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> d <span class=\"selector-tag\">a</span> e f</span><br></pre></td></tr></table></figure>\n<p>kmp<br></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c f g e </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br><span class=\"line\">d,  </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c f g e </span><br><span class=\"line\">        <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li></li>\n<li>1<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c e f g </span><br><span class=\"line\"><span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c d <span class=\"selector-tag\">a</span> <span class=\"selector-tag\">b</span> c t</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> d abc,nextabcabcabcabcabcd</p>\n<ul>\n<li><p><strong>2next</strong>  </p>\n<ul>\n<li>P,jS,ikP[j]!=S[i]PS[i]next[j]=knextk&lt;j</li>\n<li>next:<br>P[0-k-1]==P[j-k~j-1]==S[i-ki-1] (next[j]=k)<br>next[j+1]=?<br>-P[k]==P[j]<br>P[0-k-1]+P[k]==P[j-k~j-1]+P[j]<br>P[0 ~ k] == P[j-k ~ j]next[j+1] == k + 1 == next[j] + 1<br>-P[k]!=P[j]<br>0k-1j-k,j-10k-1<br>0next[k]-1k-next[k],k-1j-k,j-10next[k]-1jnext[k],</li>\n</ul>\n</li>\n<li><p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//next[0]=-1,</span></span><br><span class=\"line\">next[<span class=\"number\">1</span>]=<span class=\"number\">0</span>,<span class=\"number\">0.</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> getnext(<span class=\"keyword\">char</span> *P,<span class=\"keyword\">int</span> next[])&#123;</span><br><span class=\"line\">    j=<span class=\"number\">1</span>,next[j]=<span class=\"number\">0</span>,k=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j&lt;<span class=\"keyword\">sizeof</span>(P)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>||P[j++]==P[k++])</span><br><span class=\"line\">            next[j]==k;<span class=\"comment\">//next[j]=next[j]+1</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">           k=next[k];</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>AABXBDHADFBFJD1010011100011101001,HuffmanA00  B001</li>\n</ul>\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"(\"></a>(</h4><ul>\n<li>Jaccard<br></li>\n<li>Cosine<br><br>ABnA[A1,A2,,An],B[B1,B2,B3,,Bn],AB</li>\n<li>,<br><a href=\"https://www.cnblogs.com/huilixieqi/p/6493089.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/huilixieqi/p/6493089.html</a></li>\n<li>linuxdiff<br>winbeyondcompare</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>clexyacc,lex</li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>c</li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li></li>\n<li>sed,awk</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li></li>\n</ul>"},{"title":"code_efficandreadable","date":"2018-05-26T04:44:19.000Z","_content":"##  \n####   \nrun in placeO()  \nleetcode(  \n    reverse a linklist from m to n;   \n    1->3->4->5->null and m,n(ex:2,4);  \n    return 1->5->4->2->null;\n     \n   nextpre\n   ~)\n   \n\n","source":"_posts/code-efficandreadable.md","raw":"---\ntitle: code_efficandreadable\ndate: 2018-05-26 12:44:19\ntags: \ncategories: \n---\n##  \n####   \nrun in placeO()  \nleetcode(  \n    reverse a linklist from m to n;   \n    1->3->4->5->null and m,n(ex:2,4);  \n    return 1->5->4->2->null;\n     \n   nextpre\n   ~)\n   \n\n","slug":"code-efficandreadable","published":1,"updated":"2018-05-26T14:32:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819gho3000k00jx2t0udgsx","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>run in placeO()<br>leetcode(<br>    reverse a linklist from m to n;<br>    1-&gt;3-&gt;4-&gt;5-&gt;null and m,n(ex:2,4);<br>    return 1-&gt;5-&gt;4-&gt;2-&gt;null;<br>   <br>   nextpre<br>   ~)<br>   </p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>run in placeO()<br>leetcode(<br>    reverse a linklist from m to n;<br>    1-&gt;3-&gt;4-&gt;5-&gt;null and m,n(ex:2,4);<br>    return 1-&gt;5-&gt;4-&gt;2-&gt;null;<br>   <br>   nextpre<br>   ~)<br>   </p>\n"},{"title":"cpp_class_memory","date":"2018-06-09T02:44:41.000Z","_content":"### c++\n#### \n<!--more-->\n+ two question:  \n ob:?  \n class?--int  \n+ Cstruct,\n+ \n        \n        vptr\n        vt:vptrwith\"\"\n        obj:         class:\n        _vptr --->   table: ptr1 -->virtual func1\n                            ptr2 -->virtual func2\n        : \n        :,this\n        \n        \n        main\n        \n        \n        something extra depend on compiler~\n+ some rules\n   + virtual funcvtbl;   \n   + objtirtual table ,vptr;\n   +   vptrconstructordestructor,copy assignment\n   + classtype info object(runtime type identification  )virtual tablevptr[0]\n   +  (*px->vtbl[1])(px)\n          c++\n              \n#### ob:?\n+ non static data members\n+ padding\n+ virtual---vptr\n#### class? \ndatamember_memory  \n```cpp\n  size  \nclass T{ };   ---1 char   \nclass X :public virtual T{};--T    virtual base class subobject  \nclass Y :public virtual T{};  --\nclass A:public X,public Y {};--```\nmore seee datamember_memory\n\n\n#### \n\n\n+ \n+ gdb kgdb\n ```cpp\n\tCircle c12;\n\t\tCircle c1(1.2,\"red\");\nprintf(\"getRadius:%x\\n\",&Circle::getRadius);\nprintf(\"%x, %x\\n\",&c12,c12);\n void *cc;\n        cc=(Circle*)(&c12);\n\t\tcout<<*((double*)cc)<<endl;\n```\t\t\n    \t\t\nc++vptr\t\t\n\n\n```cpp\n#include<iostream>\nusing namespace std;\nclass A\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"A\"; }\n\t\t\t\t\tvirtual int getage(){ return 3;}\n};\n \nclass B: public A\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"B\"; }\n\t\t\t\t\tvirtual int getage(){return 5;}\n};\n \nclass C: public B\n{\n\t\tpublic:\n\t\t\t\t    const char* getName() { return \"C\"; }\n\t\t\t\t\tint getage(){return 6;}\n};\n \nclass D: public C\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"D\"; }\n0x400ae8 push   %rbp\n0x400ae9 mov    %rsp,%rbp\n0x400aec mov    %rdi,-0x8(%rbp)\n\t\t\t\t\tint getage() {return 8;}\n0x400af8 push   %rbp\n0x400af9 mov    %rsp,%rbp\n0x400afc mov    %rdi,-0x8(%rbp)\n};\n \nint main()\n{ \n\t\t    A aa;\n\t\t\taa.getName();\n\t\t    D d;\n\t\t\td.getName();\n\t\t\tA &rBase = d;\n\t\t\trBase.getName();\n0x400986 mov    -0x28(%rbp),%rax\n0x40098a mov    (%rax),%rax\n0x40098d mov    (%rax),%rax\n0x400990 mov    -0x28(%rbp),%rdx\n0x400994 mov    %rdx,%rdi\n0x400997 callq  *%rax\n            rBase.getage();\n0x400999 mov    -0x28(%rbp),%rax\n0x40099d mov    (%rax),%rax\n0x4009a0 add    $0x8,%rax\n0x4009a4 mov    (%rax),%rax\n0x4009a7 mov    -0x28(%rbp),%rdx\n0x4009ab mov    %rdx,%rdi\n0x4009ae callq  *%rax\n\t\t    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n\t\t\t\t\t \n\t\t\tD d2;\n            A &rBase2 =d2;\n0x4009f9 lea    -0x30(%rbp),%rax\n0x4009fd mov    %rax,-0x20(%rbp)\n\t\t   rBase2.getName();\t\n0x400a01 mov    -0x20(%rbp),%rax\n0x400a05 mov    (%rax),%rax\n0x400a08 mov    (%rax),%rax\n0x400a0b mov    -0x20(%rbp),%rdx\n0x400a0f mov    %rdx,%rdi\n0x400a12 callq  *%rax\n\n\n\t\t    return 0;\n}\t\t\n```\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\nsomething else:  \n+ .\n+ ?\nthis\n\n\n+  this\n\n","source":"_posts/cpp-class-memory.md","raw":"---\ntitle: cpp_class_memory\ndate: 2018-06-09 10:44:41\ntags: cpp_memory\ncategories: c&cpp\n---\n### c++\n#### \n<!--more-->\n+ two question:  \n ob:?  \n class?--int  \n+ Cstruct,\n+ \n        \n        vptr\n        vt:vptrwith\"\"\n        obj:         class:\n        _vptr --->   table: ptr1 -->virtual func1\n                            ptr2 -->virtual func2\n        : \n        :,this\n        \n        \n        main\n        \n        \n        something extra depend on compiler~\n+ some rules\n   + virtual funcvtbl;   \n   + objtirtual table ,vptr;\n   +   vptrconstructordestructor,copy assignment\n   + classtype info object(runtime type identification  )virtual tablevptr[0]\n   +  (*px->vtbl[1])(px)\n          c++\n              \n#### ob:?\n+ non static data members\n+ padding\n+ virtual---vptr\n#### class? \ndatamember_memory  \n```cpp\n  size  \nclass T{ };   ---1 char   \nclass X :public virtual T{};--T    virtual base class subobject  \nclass Y :public virtual T{};  --\nclass A:public X,public Y {};--```\nmore seee datamember_memory\n\n\n#### \n\n\n+ \n+ gdb kgdb\n ```cpp\n\tCircle c12;\n\t\tCircle c1(1.2,\"red\");\nprintf(\"getRadius:%x\\n\",&Circle::getRadius);\nprintf(\"%x, %x\\n\",&c12,c12);\n void *cc;\n        cc=(Circle*)(&c12);\n\t\tcout<<*((double*)cc)<<endl;\n```\t\t\n    \t\t\nc++vptr\t\t\n\n\n```cpp\n#include<iostream>\nusing namespace std;\nclass A\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"A\"; }\n\t\t\t\t\tvirtual int getage(){ return 3;}\n};\n \nclass B: public A\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"B\"; }\n\t\t\t\t\tvirtual int getage(){return 5;}\n};\n \nclass C: public B\n{\n\t\tpublic:\n\t\t\t\t    const char* getName() { return \"C\"; }\n\t\t\t\t\tint getage(){return 6;}\n};\n \nclass D: public C\n{\n\t\tpublic:\n\t\t\t\t    virtual const char* getName() { return \"D\"; }\n0x400ae8 push   %rbp\n0x400ae9 mov    %rsp,%rbp\n0x400aec mov    %rdi,-0x8(%rbp)\n\t\t\t\t\tint getage() {return 8;}\n0x400af8 push   %rbp\n0x400af9 mov    %rsp,%rbp\n0x400afc mov    %rdi,-0x8(%rbp)\n};\n \nint main()\n{ \n\t\t    A aa;\n\t\t\taa.getName();\n\t\t    D d;\n\t\t\td.getName();\n\t\t\tA &rBase = d;\n\t\t\trBase.getName();\n0x400986 mov    -0x28(%rbp),%rax\n0x40098a mov    (%rax),%rax\n0x40098d mov    (%rax),%rax\n0x400990 mov    -0x28(%rbp),%rdx\n0x400994 mov    %rdx,%rdi\n0x400997 callq  *%rax\n            rBase.getage();\n0x400999 mov    -0x28(%rbp),%rax\n0x40099d mov    (%rax),%rax\n0x4009a0 add    $0x8,%rax\n0x4009a4 mov    (%rax),%rax\n0x4009a7 mov    -0x28(%rbp),%rdx\n0x4009ab mov    %rdx,%rdi\n0x4009ae callq  *%rax\n\t\t    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n\t\t\t\t\t \n\t\t\tD d2;\n            A &rBase2 =d2;\n0x4009f9 lea    -0x30(%rbp),%rax\n0x4009fd mov    %rax,-0x20(%rbp)\n\t\t   rBase2.getName();\t\n0x400a01 mov    -0x20(%rbp),%rax\n0x400a05 mov    (%rax),%rax\n0x400a08 mov    (%rax),%rax\n0x400a0b mov    -0x20(%rbp),%rdx\n0x400a0f mov    %rdx,%rdi\n0x400a12 callq  *%rax\n\n\n\t\t    return 0;\n}\t\t\n```\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\nsomething else:  \n+ .\n+ ?\nthis\n\n\n+  this\n\n","slug":"cpp-class-memory","published":1,"updated":"2018-06-09T03:00:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghoc000p00jxgrpes8hw","content":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a id=\"more\"></a></p>\n<ul>\n<li>two question:<br>ob:?<br>class?int  </li>\n<li>Cstruct,</li>\n<li><pre><code>\nvptr\nvt:vptrwith&quot;&quot;\nobj:         class:\n_vptr ---&gt;   table: ptr1 --&gt;virtual func1\n                    ptr2 --&gt;virtual func2\n: \n:,this\n\n\nmain\n\n\nsomething extra depend on compiler~\n</code></pre></li>\n<li>some rules<ul>\n<li>virtual funcvtbl;   </li>\n<li>objtirtual table ,vptr;</li>\n<li>vptrconstructordestructor,copy assignment</li>\n<li>classtype info object(runtime type identification  )virtual tablevptr[0]</li>\n<li>(*px-&gt;vtbl[1])(px)<pre><code>c++\n</code></pre></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ob\"><a href=\"#ob\" class=\"headerlink\" title=\"ob:?\"></a>ob:?</h4><ul>\n<li>non static data members</li>\n<li>padding</li>\n<li>virtualvptr<h4 id=\"class\"><a href=\"#class\" class=\"headerlink\" title=\"class?\"></a>class?</h4>datamember_memory  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  size  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span>&#123;</span> &#125;;   --<span class=\"number\">-1</span> <span class=\"keyword\">char</span>   </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;--T    <span class=\"keyword\">virtual</span> base <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">subobject</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Y</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;  --</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y &#123;&#125;;--</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>more seee datamember_memory</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li></li>\n<li>gdb kgdb<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\tCircle c12;</span><br><span class=\"line\">\t\t<span class=\"function\">Circle <span class=\"title\">c1</span><span class=\"params\">(<span class=\"number\">1.2</span>,<span class=\"string\">\"red\"</span>)</span></span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">\"getRadius:%x\\n\"</span>,&amp;Circle::getRadius);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">\"%x, %x\\n\"</span>,&amp;c12,c12);</span><br><span class=\"line\"> <span class=\"keyword\">void</span> *cc;</span><br><span class=\"line\">        cc=(Circle*)(&amp;c12);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;*((<span class=\"keyword\">double</span>*)cc)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">```\t\t</span><br><span class=\"line\">    \t\t</span><br><span class=\"line\">c++vptr\t\t</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123; <span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span>:</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">5</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">6</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D</span>:</span> <span class=\"keyword\">public</span> C</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"D\"</span>; &#125;</span><br><span class=\"line\"><span class=\"number\">0x400ae8</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400ae9</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400aec</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">8</span>;&#125;</span><br><span class=\"line\"><span class=\"number\">0x400af8</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400af9</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400afc</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">\t\t    A aa;</span><br><span class=\"line\">\t\t\taa.getName();</span><br><span class=\"line\">\t\t    D d;</span><br><span class=\"line\">\t\t\td.getName();</span><br><span class=\"line\">\t\t\tA &amp;rBase = d;</span><br><span class=\"line\">\t\t\trBase.getName();</span><br><span class=\"line\"><span class=\"number\">0x400986</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x40098a</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x40098d</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400990</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x400994</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x400997</span> callq  *%rax</span><br><span class=\"line\">            rBase.getage();</span><br><span class=\"line\"><span class=\"number\">0x400999</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x40099d</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a0</span> add    $<span class=\"number\">0x8</span>,%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a4</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a7</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x4009ab</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x4009ae</span> callq  *%rax</span><br><span class=\"line\">\t\t    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">\t\t\t\t\t </span><br><span class=\"line\">\t\t\tD d2;</span><br><span class=\"line\">            A &amp;rBase2 =d2;</span><br><span class=\"line\"><span class=\"number\">0x4009f9</span> lea    <span class=\"number\">-0x30</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009fd</span> mov    %rax,<span class=\"number\">-0x20</span>(%rbp)</span><br><span class=\"line\">\t\t   rBase2.getName();\t</span><br><span class=\"line\"><span class=\"number\">0x400a01</span> mov    <span class=\"number\">-0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a05</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a08</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a0b</span> mov    <span class=\"number\">-0x20</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x400a0f</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> callq  *%rax</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>something else:  </p>\n<ul>\n<li>.</li>\n<li>?<br>this<br><br></li>\n<li> this</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>","more":"</p>\n<ul>\n<li>two question:<br>ob:?<br>class?int  </li>\n<li>Cstruct,</li>\n<li><pre><code>\nvptr\nvt:vptrwith&quot;&quot;\nobj:         class:\n_vptr ---&gt;   table: ptr1 --&gt;virtual func1\n                    ptr2 --&gt;virtual func2\n: \n:,this\n\n\nmain\n\n\nsomething extra depend on compiler~\n</code></pre></li>\n<li>some rules<ul>\n<li>virtual funcvtbl;   </li>\n<li>objtirtual table ,vptr;</li>\n<li>vptrconstructordestructor,copy assignment</li>\n<li>classtype info object(runtime type identification  )virtual tablevptr[0]</li>\n<li>(*px-&gt;vtbl[1])(px)<pre><code>c++\n</code></pre></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ob\"><a href=\"#ob\" class=\"headerlink\" title=\"ob:?\"></a>ob:?</h4><ul>\n<li>non static data members</li>\n<li>padding</li>\n<li>virtualvptr<h4 id=\"class\"><a href=\"#class\" class=\"headerlink\" title=\"class?\"></a>class?</h4>datamember_memory  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  size  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span>&#123;</span> &#125;;   --<span class=\"number\">-1</span> <span class=\"keyword\">char</span>   </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;--T    <span class=\"keyword\">virtual</span> base <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">subobject</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Y</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;  --</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y &#123;&#125;;--</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>more seee datamember_memory</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li></li>\n<li>gdb kgdb<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\tCircle c12;</span><br><span class=\"line\">\t\t<span class=\"function\">Circle <span class=\"title\">c1</span><span class=\"params\">(<span class=\"number\">1.2</span>,<span class=\"string\">\"red\"</span>)</span></span>;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">\"getRadius:%x\\n\"</span>,&amp;Circle::getRadius);</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">\"%x, %x\\n\"</span>,&amp;c12,c12);</span><br><span class=\"line\"> <span class=\"keyword\">void</span> *cc;</span><br><span class=\"line\">        cc=(Circle*)(&amp;c12);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;*((<span class=\"keyword\">double</span>*)cc)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">```\t\t</span><br><span class=\"line\">    \t\t</span><br><span class=\"line\">c++vptr\t\t</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123; <span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span>:</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">5</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">6</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D</span>:</span> <span class=\"keyword\">public</span> C</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"D\"</span>; &#125;</span><br><span class=\"line\"><span class=\"number\">0x400ae8</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400ae9</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400aec</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getage</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">8</span>;&#125;</span><br><span class=\"line\"><span class=\"number\">0x400af8</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400af9</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400afc</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">\t\t    A aa;</span><br><span class=\"line\">\t\t\taa.getName();</span><br><span class=\"line\">\t\t    D d;</span><br><span class=\"line\">\t\t\td.getName();</span><br><span class=\"line\">\t\t\tA &amp;rBase = d;</span><br><span class=\"line\">\t\t\trBase.getName();</span><br><span class=\"line\"><span class=\"number\">0x400986</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x40098a</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x40098d</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400990</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x400994</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x400997</span> callq  *%rax</span><br><span class=\"line\">            rBase.getage();</span><br><span class=\"line\"><span class=\"number\">0x400999</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x40099d</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a0</span> add    $<span class=\"number\">0x8</span>,%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a4</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009a7</span> mov    <span class=\"number\">-0x28</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x4009ab</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x4009ae</span> callq  *%rax</span><br><span class=\"line\">\t\t    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">\t\t\t\t\t </span><br><span class=\"line\">\t\t\tD d2;</span><br><span class=\"line\">            A &amp;rBase2 =d2;</span><br><span class=\"line\"><span class=\"number\">0x4009f9</span> lea    <span class=\"number\">-0x30</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x4009fd</span> mov    %rax,<span class=\"number\">-0x20</span>(%rbp)</span><br><span class=\"line\">\t\t   rBase2.getName();\t</span><br><span class=\"line\"><span class=\"number\">0x400a01</span> mov    <span class=\"number\">-0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a05</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a08</span> mov    (%rax),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a0b</span> mov    <span class=\"number\">-0x20</span>(%rbp),%rdx</span><br><span class=\"line\"><span class=\"number\">0x400a0f</span> mov    %rdx,%rdi</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> callq  *%rax</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>something else:  </p>\n<ul>\n<li>.</li>\n<li>?<br>this<br><br></li>\n<li> this</li>\n</ul>"},{"title":"cpp_conandde","date":"2018-06-09T03:03:35.000Z","_content":"## c++ class constructor and destructor\n### \n#### \n##### \n\n--<!--more-->\n##### \n```cpp\npublic:classname(arg...):member(arg),mem2(arg),..{xxx}\n    classname(..){..}\n```        \n##### \n+ (nontrivial default constructor)  \n + default constructormember class object  \n \n\n```cpp\nclass Foo {public :Foo(),Foo(int)...}\nclass Bar{public:Foo foo;char *str};\n                          void funv()\n                          {   Bar bar;....\n                          }```\nFoo\nstr,\n\n```cpp\nBar::Bar(){\n   foo.Foo::Foo();\n ```                  \n foo\n\n + Default constructor base class  \n   \n//class_constructor.cpp\n + vcirtualneed to create vptr  \n    virtualfuncclass  \n     1)classvirtua func  \n     2)classvirtual base classes       \n                \n + virtual need to init vptr\n   virtualbase class class  \n   \n   ```cpp\n       class X{  public int i;}  \n       class A :public virtual X {///\n       class B :public virtual X {\n       class C: public A,public B ```\n       \n\n#####   \n-\n##### \n1:5\n\n#### \n##### \nkdbg\n```c\norigin(int ax=3,int bx=4):a(ax),b(bx){}\n0x400bae push   %rbp\n0x400baf mov    %rsp,%rbp\n0x400bb2 mov    %rdi,-0x8(%rbp)\n0x400bb6 mov    %esi,-0xc(%rbp)\n0x400bb9 mov    %edx,-0x10(%rbp)```\n##### \n+ this\n+ c++ class\n### \n#### \n\n+ =\n+ \n+ c++f(T t)f(){T t;return t}\n+ =:origin or1=or2;\"\"or1(or2))\nor2=or3;\n)\n\n#### \n##### \n\n+ member objectclasscopyconstructor\n+ base class\n+ virtual functions\n+ class virtual base classes \n\n#### \n\n+ \n```cpp\n                   X x1(x0);\n                   X x2=x0;\n                   X x3=X(x0);```\n   \n  \n\n        X x1;\n        x1.X::X(x0);\n        X::X(const X& xx) \n        x2,x3\n              \n        classname (const classname &obj)\n+ \n\n       foo(X x)\n\n       X xx;\n       //,..\n       foo(xx);\n       \n \n        X __temp0;\n        _temp0.X::X(xx);//use copy construtor\n         foo(__temp0)\nfoo(X &x)//\n\n+   \n\n       X bar(){\n                      X xx;\n                       //...\n                       return xx;\n            }\n         X xxx=bar();\n         a void bar(X_result)\n         b return copy constructor \n             void bar(X &__result){\n                       X xx;\n                       xx.X::X();\n                       __result.X::XX(xx);\n                       return ;\n               }\n        \n        xx=bar()  --->  X xx ;//bar(xx);\n            ex:bar().memfunc()--->X __temp0;(bar(__temp0),__temp0).memfunc();\n            X (*pf)();pf=bar;--->void (*pf)(X&);pf=bar;\n            \n##### \n)\n##### copy  constructor: \nmemberwise objectNRV\n//    \n##### \n\n### \nX(int f):a(ax),b(bx)..{....}\n+ \n        \n        reference member\n        const member\n        base classconstructor,\n        memberclass consructor\n\n``cpp\n   class world {\n          String _nhame;\n          int cnt;\n          public :world(){_nhame=0;cnt=0;}}```\n//_nhameoperator=....\n   \n```cpp \n          world::world:nhame(0){\n            cnt=0;\n            }\n            nhame\n            world::world{ //\n             _nhame.String::String(0);\n              cnt=0;\n              }```\n+   \n\n\n```cpp \n       class X{\n                    int i; \n                    int j;\n                   public:\n                     X(int cal):i(j){}\n                     ...\n                     i,j,ij```\n                     \n  ---->X::X(int cal):j(cal){i=j;}   \n   ----  \n   j\n        \n        X::X(int cal):i(xfoo(cal)),j(cal){}\n        -->X::X(/*this pointer*/ int cal){\n                      i=this->xfoo(cal);\n                      j=cal;\n                      }\n            X xfoothis->xfoo\n\n#### \n+ \n+ memberwise initialization\nc++http://en.cppreference.com/w/cpp/language/copy_constructor\n","source":"_posts/cpp-conandde.md","raw":"---\ntitle: cpp_conandde\ndate: 2018-06-09 11:03:35\ntags: cpp_class\ncategories: c&cpp\n---\n## c++ class constructor and destructor\n### \n#### \n##### \n\n--<!--more-->\n##### \n```cpp\npublic:classname(arg...):member(arg),mem2(arg),..{xxx}\n    classname(..){..}\n```        \n##### \n+ (nontrivial default constructor)  \n + default constructormember class object  \n \n\n```cpp\nclass Foo {public :Foo(),Foo(int)...}\nclass Bar{public:Foo foo;char *str};\n                          void funv()\n                          {   Bar bar;....\n                          }```\nFoo\nstr,\n\n```cpp\nBar::Bar(){\n   foo.Foo::Foo();\n ```                  \n foo\n\n + Default constructor base class  \n   \n//class_constructor.cpp\n + vcirtualneed to create vptr  \n    virtualfuncclass  \n     1)classvirtua func  \n     2)classvirtual base classes       \n                \n + virtual need to init vptr\n   virtualbase class class  \n   \n   ```cpp\n       class X{  public int i;}  \n       class A :public virtual X {///\n       class B :public virtual X {\n       class C: public A,public B ```\n       \n\n#####   \n-\n##### \n1:5\n\n#### \n##### \nkdbg\n```c\norigin(int ax=3,int bx=4):a(ax),b(bx){}\n0x400bae push   %rbp\n0x400baf mov    %rsp,%rbp\n0x400bb2 mov    %rdi,-0x8(%rbp)\n0x400bb6 mov    %esi,-0xc(%rbp)\n0x400bb9 mov    %edx,-0x10(%rbp)```\n##### \n+ this\n+ c++ class\n### \n#### \n\n+ =\n+ \n+ c++f(T t)f(){T t;return t}\n+ =:origin or1=or2;\"\"or1(or2))\nor2=or3;\n)\n\n#### \n##### \n\n+ member objectclasscopyconstructor\n+ base class\n+ virtual functions\n+ class virtual base classes \n\n#### \n\n+ \n```cpp\n                   X x1(x0);\n                   X x2=x0;\n                   X x3=X(x0);```\n   \n  \n\n        X x1;\n        x1.X::X(x0);\n        X::X(const X& xx) \n        x2,x3\n              \n        classname (const classname &obj)\n+ \n\n       foo(X x)\n\n       X xx;\n       //,..\n       foo(xx);\n       \n \n        X __temp0;\n        _temp0.X::X(xx);//use copy construtor\n         foo(__temp0)\nfoo(X &x)//\n\n+   \n\n       X bar(){\n                      X xx;\n                       //...\n                       return xx;\n            }\n         X xxx=bar();\n         a void bar(X_result)\n         b return copy constructor \n             void bar(X &__result){\n                       X xx;\n                       xx.X::X();\n                       __result.X::XX(xx);\n                       return ;\n               }\n        \n        xx=bar()  --->  X xx ;//bar(xx);\n            ex:bar().memfunc()--->X __temp0;(bar(__temp0),__temp0).memfunc();\n            X (*pf)();pf=bar;--->void (*pf)(X&);pf=bar;\n            \n##### \n)\n##### copy  constructor: \nmemberwise objectNRV\n//    \n##### \n\n### \nX(int f):a(ax),b(bx)..{....}\n+ \n        \n        reference member\n        const member\n        base classconstructor,\n        memberclass consructor\n\n``cpp\n   class world {\n          String _nhame;\n          int cnt;\n          public :world(){_nhame=0;cnt=0;}}```\n//_nhameoperator=....\n   \n```cpp \n          world::world:nhame(0){\n            cnt=0;\n            }\n            nhame\n            world::world{ //\n             _nhame.String::String(0);\n              cnt=0;\n              }```\n+   \n\n\n```cpp \n       class X{\n                    int i; \n                    int j;\n                   public:\n                     X(int cal):i(j){}\n                     ...\n                     i,j,ij```\n                     \n  ---->X::X(int cal):j(cal){i=j;}   \n   ----  \n   j\n        \n        X::X(int cal):i(xfoo(cal)),j(cal){}\n        -->X::X(/*this pointer*/ int cal){\n                      i=this->xfoo(cal);\n                      j=cal;\n                      }\n            X xfoothis->xfoo\n\n#### \n+ \n+ memberwise initialization\nc++http://en.cppreference.com/w/cpp/language/copy_constructor\n","slug":"cpp-conandde","published":1,"updated":"2018-06-09T03:37:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghof000s00jx5ev84zq5","content":"<h2 id=\"c-class-constructor-and-destructor\"><a href=\"#c-class-constructor-and-destructor\" class=\"headerlink\" title=\"c++ class constructor and destructor\"></a>c++ class constructor and destructor</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br><a id=\"more\"></a></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span>:classname(arg...):member(arg),mem2(arg),..&#123;xxx&#125;</span><br><span class=\"line\">    classname(..)&#123;..&#125;</span><br><span class=\"line\">```        </span><br><span class=\"line\">##### </span><br><span class=\"line\">+ (nontrivial <span class=\"keyword\">default</span> constructor)  </span><br><span class=\"line\"> + <span class=\"keyword\">default</span> constructormember <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">object</span>  </span></span><br><span class=\"line\"><span class=\"class\"> </span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Foo</span> &#123;</span><span class=\"keyword\">public</span> :Foo(),Foo(<span class=\"keyword\">int</span>)...&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bar</span>&#123;</span><span class=\"keyword\">public</span>:Foo foo;<span class=\"keyword\">char</span> *str&#125;;</span><br><span class=\"line\">                          <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">funv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">                          </span>&#123;   Bar bar;....</span><br><span class=\"line\">                          &#125;</span><br></pre></td></tr></table></figure>\n<p>Foo<br>str,<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Bar::Bar()&#123;</span><br><span class=\"line\">   foo.Foo::Foo();</span><br><span class=\"line\"> ```                  </span><br><span class=\"line\"> foo</span><br><span class=\"line\"></span><br><span class=\"line\"> + Default constructor base <span class=\"class\"><span class=\"keyword\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">   </span></span><br><span class=\"line\"><span class=\"class\">//<span class=\"title\">class_constructor</span>.<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\"> + <span class=\"title\">vcirtual</span><span class=\"title\">need</span> <span class=\"title\">to</span> <span class=\"title\">create</span> <span class=\"title\">vptr</span>  </span></span><br><span class=\"line\"><span class=\"class\">    <span class=\"title\">virtual</span><span class=\"title\">func</span><span class=\"title\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">     1)<span class=\"title\">class</span><span class=\"title\">virtua</span> <span class=\"title\">func</span>  </span></span><br><span class=\"line\"><span class=\"class\">     2)<span class=\"title\">class</span><span class=\"title\">virtual</span> <span class=\"title\">base</span> <span class=\"title\">classes</span>       </span></span><br><span class=\"line\"><span class=\"class\">                </span></span><br><span class=\"line\"><span class=\"class\"> + <span class=\"title\">virtual</span> <span class=\"title\">need</span> <span class=\"title\">to</span> <span class=\"title\">init</span> <span class=\"title\">vptr</span></span></span><br><span class=\"line\"><span class=\"class\">   <span class=\"title\">virtual</span><span class=\"title\">base</span> <span class=\"title\">class</span> <span class=\"title\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">   </span></span><br><span class=\"line\"><span class=\"class\">   ```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\">       <span class=\"title\">class</span> <span class=\"title\">X</span>&#123;</span>  <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> i;&#125;  </span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> X &#123;<span class=\"comment\">///</span></span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> X &#123;</span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> A,<span class=\"keyword\">public</span> B</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>-</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>1:5</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>kdbg<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">origin(<span class=\"keyword\">int</span> ax=<span class=\"number\">3</span>,<span class=\"keyword\">int</span> bx=<span class=\"number\">4</span>):a(ax),b(bx)&#123;&#125;</span><br><span class=\"line\"><span class=\"number\">0x400bae</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400baf</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400bb2</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400bb6</span> mov    %esi,<span class=\"number\">-0xc</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400bb9</span> mov    %edx,<span class=\"number\">-0x10</span>(%rbp)</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>this</li>\n<li>c++ class<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4></li>\n<li>=</li>\n<li></li>\n<li>c++f(T t)f(){T t;return t}</li>\n<li>=:origin or1=or2;or1(or2))<br>or2=or3;<br>)</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<ul>\n<li>member objectclasscopyconstructor</li>\n<li>base class</li>\n<li>virtual functions</li>\n<li>class virtual base classes </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">X <span class=\"title\">x1</span><span class=\"params\">(x0)</span></span>;</span><br><span class=\"line\">X x2=x0;</span><br><span class=\"line\">X x3=X(x0);</span><br></pre></td></tr></table></figure>\n<p> <br><br></p>\n<pre><code>X x1;\nx1.X::X(x0);\nX::X(const X&amp; xx) \nx2,x3\n      \nclassname (const classname &amp;obj)\n</code></pre></li>\n<li><br><pre><code>foo(X x)\n</code></pre><pre><code>X xx;\n//,..\nfoo(xx);\n\n</code></pre><pre><code>X __temp0;\n_temp0.X::X(xx);//use copy construtor\n foo(__temp0)\n</code></pre>foo(X &amp;x)//<br></li>\n<li><br><pre><code>X bar(){\n               X xx;\n                //...\n                return xx;\n     }\n  X xxx=bar();\n  a void bar(X_result)\n  b return copy constructor \n      void bar(X &amp;__result){\n                X xx;\n                xx.X::X();\n                __result.X::XX(xx);\n                return ;\n        }\n \n xx=bar()  ---&gt;  X xx ;//bar(xx);\n     ex:bar().memfunc()---&gt;X __temp0;(bar(__temp0),__temp0).memfunc();\n     X (*pf)();pf=bar;---&gt;void (*pf)(X&amp;);pf=bar;\n</code></pre></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>)</p>\n<h5 id=\"copy-constructor\"><a href=\"#copy-constructor\" class=\"headerlink\" title=\"copy  constructor:\"></a>copy  constructor:</h5><p>memberwise objectNRV<br>//    </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>X(int f):a(ax),b(bx)..{.}</p>\n<ul>\n<li><p></p>\n<pre><code>\nreference member\nconst member\nbase classconstructor,\nmemberclass consructor\n</code></pre><p><br><code></code>cpp<br> class world {</p>\n<pre><code>String _nhame;\nint cnt;\npublic :world(){_nhame=0;cnt=0;}}<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//_nhameoperator=....</span></span><br><span class=\"line\">   </span><br><span class=\"line\">```cpp </span><br><span class=\"line\">          world::world:nhame(<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            cnt=<span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            nhame</span><br><span class=\"line\">            world::world&#123; <span class=\"comment\">//</span></span><br><span class=\"line\">             _nhame.String::String(<span class=\"number\">0</span>);</span><br><span class=\"line\">              cnt=<span class=\"number\">0</span>;</span><br><span class=\"line\">              &#125;</span><br></pre></td></tr></table></figure>\n</code></pre></li>\n<li><p><br><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span>&#123;</span></span><br><span class=\"line\">             <span class=\"keyword\">int</span> i; </span><br><span class=\"line\">             <span class=\"keyword\">int</span> j;</span><br><span class=\"line\">            <span class=\"keyword\">public</span>:</span><br><span class=\"line\">              X(<span class=\"keyword\">int</span> cal):i(j)&#123;&#125;</span><br><span class=\"line\">              ...</span><br><span class=\"line\">              i,j,ij</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  -&gt;X::X(int cal):j(cal){i=j;}<br>   -<br>   j<br>        <br>        X::X(int cal):i(xfoo(cal)),j(cal){}<br>        &gt;X::X(/<em>this pointer</em>/ int cal){<br>                      i=this-&gt;xfoo(cal);<br>                      j=cal;<br>                      }<br>            X xfoothis-&gt;xfoo</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>memberwise initialization<br>c++<a href=\"http://en.cppreference.com/w/cpp/language/copy_constructor\" target=\"_blank\" rel=\"noopener\">http://en.cppreference.com/w/cpp/language/copy_constructor</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"c-class-constructor-and-destructor\"><a href=\"#c-class-constructor-and-destructor\" class=\"headerlink\" title=\"c++ class constructor and destructor\"></a>c++ class constructor and destructor</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br>","more":"</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span>:classname(arg...):member(arg),mem2(arg),..&#123;xxx&#125;</span><br><span class=\"line\">    classname(..)&#123;..&#125;</span><br><span class=\"line\">```        </span><br><span class=\"line\">##### </span><br><span class=\"line\">+ (nontrivial <span class=\"keyword\">default</span> constructor)  </span><br><span class=\"line\"> + <span class=\"keyword\">default</span> constructormember <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">object</span>  </span></span><br><span class=\"line\"><span class=\"class\"> </span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Foo</span> &#123;</span><span class=\"keyword\">public</span> :Foo(),Foo(<span class=\"keyword\">int</span>)...&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bar</span>&#123;</span><span class=\"keyword\">public</span>:Foo foo;<span class=\"keyword\">char</span> *str&#125;;</span><br><span class=\"line\">                          <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">funv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">                          </span>&#123;   Bar bar;....</span><br><span class=\"line\">                          &#125;</span><br></pre></td></tr></table></figure>\n<p>Foo<br>str,<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Bar::Bar()&#123;</span><br><span class=\"line\">   foo.Foo::Foo();</span><br><span class=\"line\"> ```                  </span><br><span class=\"line\"> foo</span><br><span class=\"line\"></span><br><span class=\"line\"> + Default constructor base <span class=\"class\"><span class=\"keyword\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">   </span></span><br><span class=\"line\"><span class=\"class\">//<span class=\"title\">class_constructor</span>.<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\"> + <span class=\"title\">vcirtual</span><span class=\"title\">need</span> <span class=\"title\">to</span> <span class=\"title\">create</span> <span class=\"title\">vptr</span>  </span></span><br><span class=\"line\"><span class=\"class\">    <span class=\"title\">virtual</span><span class=\"title\">func</span><span class=\"title\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">     1)<span class=\"title\">class</span><span class=\"title\">virtua</span> <span class=\"title\">func</span>  </span></span><br><span class=\"line\"><span class=\"class\">     2)<span class=\"title\">class</span><span class=\"title\">virtual</span> <span class=\"title\">base</span> <span class=\"title\">classes</span>       </span></span><br><span class=\"line\"><span class=\"class\">                </span></span><br><span class=\"line\"><span class=\"class\"> + <span class=\"title\">virtual</span> <span class=\"title\">need</span> <span class=\"title\">to</span> <span class=\"title\">init</span> <span class=\"title\">vptr</span></span></span><br><span class=\"line\"><span class=\"class\">   <span class=\"title\">virtual</span><span class=\"title\">base</span> <span class=\"title\">class</span> <span class=\"title\">class</span>  </span></span><br><span class=\"line\"><span class=\"class\">   </span></span><br><span class=\"line\"><span class=\"class\">   ```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\">       <span class=\"title\">class</span> <span class=\"title\">X</span>&#123;</span>  <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> i;&#125;  </span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> X &#123;<span class=\"comment\">///</span></span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> X &#123;</span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> A,<span class=\"keyword\">public</span> B</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>-</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>1:5</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>kdbg<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">origin(<span class=\"keyword\">int</span> ax=<span class=\"number\">3</span>,<span class=\"keyword\">int</span> bx=<span class=\"number\">4</span>):a(ax),b(bx)&#123;&#125;</span><br><span class=\"line\"><span class=\"number\">0x400bae</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400baf</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x400bb2</span> mov    %rdi,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400bb6</span> mov    %esi,<span class=\"number\">-0xc</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400bb9</span> mov    %edx,<span class=\"number\">-0x10</span>(%rbp)</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>this</li>\n<li>c++ class<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4></li>\n<li>=</li>\n<li></li>\n<li>c++f(T t)f(){T t;return t}</li>\n<li>=:origin or1=or2;or1(or2))<br>or2=or3;<br>)</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<ul>\n<li>member objectclasscopyconstructor</li>\n<li>base class</li>\n<li>virtual functions</li>\n<li>class virtual base classes </li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">X <span class=\"title\">x1</span><span class=\"params\">(x0)</span></span>;</span><br><span class=\"line\">X x2=x0;</span><br><span class=\"line\">X x3=X(x0);</span><br></pre></td></tr></table></figure>\n<p> <br><br></p>\n<pre><code>X x1;\nx1.X::X(x0);\nX::X(const X&amp; xx) \nx2,x3\n      \nclassname (const classname &amp;obj)\n</code></pre></li>\n<li><br><pre><code>foo(X x)\n</code></pre><pre><code>X xx;\n//,..\nfoo(xx);\n\n</code></pre><pre><code>X __temp0;\n_temp0.X::X(xx);//use copy construtor\n foo(__temp0)\n</code></pre>foo(X &amp;x)//<br></li>\n<li><br><pre><code>X bar(){\n               X xx;\n                //...\n                return xx;\n     }\n  X xxx=bar();\n  a void bar(X_result)\n  b return copy constructor \n      void bar(X &amp;__result){\n                X xx;\n                xx.X::X();\n                __result.X::XX(xx);\n                return ;\n        }\n \n xx=bar()  ---&gt;  X xx ;//bar(xx);\n     ex:bar().memfunc()---&gt;X __temp0;(bar(__temp0),__temp0).memfunc();\n     X (*pf)();pf=bar;---&gt;void (*pf)(X&amp;);pf=bar;\n</code></pre></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>)</p>\n<h5 id=\"copy-constructor\"><a href=\"#copy-constructor\" class=\"headerlink\" title=\"copy  constructor:\"></a>copy  constructor:</h5><p>memberwise objectNRV<br>//    </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>X(int f):a(ax),b(bx)..{.}</p>\n<ul>\n<li><p></p>\n<pre><code>\nreference member\nconst member\nbase classconstructor,\nmemberclass consructor\n</code></pre><p><br><code></code>cpp<br> class world {</p>\n<pre><code>String _nhame;\nint cnt;\npublic :world(){_nhame=0;cnt=0;}}<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//_nhameoperator=....</span></span><br><span class=\"line\">   </span><br><span class=\"line\">```cpp </span><br><span class=\"line\">          world::world:nhame(<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            cnt=<span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            nhame</span><br><span class=\"line\">            world::world&#123; <span class=\"comment\">//</span></span><br><span class=\"line\">             _nhame.String::String(<span class=\"number\">0</span>);</span><br><span class=\"line\">              cnt=<span class=\"number\">0</span>;</span><br><span class=\"line\">              &#125;</span><br></pre></td></tr></table></figure>\n</code></pre></li>\n<li><p><br><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span>&#123;</span></span><br><span class=\"line\">             <span class=\"keyword\">int</span> i; </span><br><span class=\"line\">             <span class=\"keyword\">int</span> j;</span><br><span class=\"line\">            <span class=\"keyword\">public</span>:</span><br><span class=\"line\">              X(<span class=\"keyword\">int</span> cal):i(j)&#123;&#125;</span><br><span class=\"line\">              ...</span><br><span class=\"line\">              i,j,ij</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  -&gt;X::X(int cal):j(cal){i=j;}<br>   -<br>   j<br>        <br>        X::X(int cal):i(xfoo(cal)),j(cal){}<br>        &gt;X::X(/<em>this pointer</em>/ int cal){<br>                      i=this-&gt;xfoo(cal);<br>                      j=cal;<br>                      }<br>            X xfoothis-&gt;xfoo</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n<li>memberwise initialization<br>c++<a href=\"http://en.cppreference.com/w/cpp/language/copy_constructor\" target=\"_blank\" rel=\"noopener\">http://en.cppreference.com/w/cpp/language/copy_constructor</a></li>\n</ul>"},{"title":"cpp_conanddest_semantics","date":"2018-06-09T14:03:32.000Z","_content":"\n###   \n#### 1. \nabstract base classconstructor,de...,non satic data member  <!--more-->\n:  \n```cpp\n  class Abstract_class {\n      public:\n         virtual ~Abstract_base() = 0;\n         virtual void interface() const=0;\n         virtual const char * mumble() const {\n             return _mumble;\n         }\n      protected:\n         char *_mumble;\n    };```\n   mumble,   \n  \n#### 2.  \n```cpp\n#include<iostream>\nusing namespace std;\nclass Abstra_class {\n\tpublic :\n\t   // virtual ~Abstra_class() =0;\n\t\tvirtual ~Abstra_class() { delete _mumble;cout<<\"use ~abstra_class\";}\n\t\t//virtual void interface() const=0;\n\t\tvirtual void interface() const { cout<<\"use interface Abstra_class:\";}\n\t\tvirtual const char* mumble() const{\n\t\t\t\treturn _mumble;\n\t\t}\n\t\tAbstra_class(){_mumble=new char[4];cout<<\"construct:Abs..\";}\n\tprotected:\n\t\tchar* _mumble;\n};\nclass dev : public Abstra_class {\n\t\tpublic:\n\t\t\t\t~dev() {dd=0;}\n\t\t\t\tdev(){dd=3;}\n\t\t\t\tvoid useA (){\n               Abstra_class::interface();//=0,pureok\n\t\t\t\t}\n\t\t\t\tvirtual void interface() const {if(dd==4)cout<<\"re\";}\n\t\tprotected:\n\t\t\t\tint dd;\n};\nint main ()\n{\n\t  dev ddd;\n\t\tddd.useA();\n\t\tddd.interface();\n\t  //  Abstra_class::interface();\n\t\treturn 0;\n}\n```\nconstruct:Abs..use interface Abstra_class:use ~Abstra_class: \n\n\"pure virtual func , \"g++\n```cpp\n#include<iostream>\nusing namespace std;\nclass Abstra_class {\n\tpublic :\n\t   // virtual ~Abstra_class() =0;\n\t\tvirtual ~Abstra_class() { delete _mumble;cout<<\"use ~Abstra_class:\";}\n\t\tvirtual void interface() const=0;\n\t\t//virtual void interface() const { cout<<\"use interface Abstra_class:\";}\n\t\tvirtual const char* mumble() const{\n\t\t\t\treturn _mumble;\n\t\t}\n\t\tvirtual void  ii() const=0;//ensure is a abstra class\n\t\tAbstra_class(){_mumble=new char[4];cout<<\"construct:Abs..\";}\n\tprotected:\n\t\tchar* _mumble;\n};\ninline void Abstra_class::interface() const {\n}\nclass dev : public Abstra_class {\n\t\tpublic:\n\t\t\t\t~dev() {dd=0;}\n\t\t\t\tdev(){dd=3;}\n\t\t\t\tvoid useA (){\n                Abstra_class::interface();//0\n\t\t           dd=4;\n\t\t\t\t}\n\t\t\t\tvirtual void interface() const {\n\t\t\t\t\t\tif(dd==4)cout<<\"\\nre\\n\";\n\t\t\t\t\t\t//Abstra_class::interface();\n\t\t\t\t}\n\t\t\t\tvirtual void ii() const {cout<<\"is implenment\";}\n\t\tprotected:\n\t\t\t\tint dd;\n};\nint main ()\n{\n\t  dev ddd;\n\t\tddd.useA();\n\t\tddd.interface();\n\tAbstra_class *pt=&ddd;\n\tpt->interface();\n\t  //  Abstra_class::interface();\n\t\treturn 0;\n}\n```\n  re,interfacepure  \nderived classdestructorvirtual base class desturctor,\n      base destructorpure virtual destructor\n      vitual dect~pure\n      virtual\n      \n3)\nvirtual funcconst ,date member\npure,virtual const,\n\n#### \n#####   \n```cpp\nPoint global;//exit\n \nPoint foobar(){\n   Point local;//\n   Point *heap=new Point;//delete \n   *heap=local;//localwarning,maybe \n   delete heap;//\n   return local;//maybe\n   }\n ```\n+ \n+ cglobalbssc++constructor\n+ c++default constructor,destructor,copy constructor,copy assignment operator\n```cpp\n#include<iostream>\nusing namespace std;\nclass Point {\n\tpublic:\n\t\t\tPoint (){cout<<\"in constructor \"<<endl;}\n\t\t\t~Point() {cout<<\"in destructor\"<<endl;}\n};\nPoint glo;\nint main ()\n{\n\t\treturn 0;\n}```\nPoint glo\n\n\nconstructor destructor\nglobal\ninline\n```cpp\n#include<iostream>  \nusing namespace std;  \n  \nclass Point{  \npublic:  \n    Point(double x = 0.0, double y = 0.0, double z = 0.0) :_x(x), _y(y), _z(z){}  \n    void print(){ cout << _x << endl << _y << endl << _z << endl; };  \nprivate:  \n    double _x, _y, _z;  \n};  \n  \nint main(){  \n    Point local1 = { 1.1, 1.2, 1.3 };//g++ --std=c++11double a=1.5; ..={a,...}c++11 \n    local1.print();  \n  \n    system(\"pause\");  \n    return 0;  \n} ``` \nexplicit initialization list)->xxx={yyy};  \nactivation record initializatioin list local1;  \nexplicit initialization list\n+ class member publicprivate  \n+ { }\n+   \n\n```cpp\nclass Point{  \npublic:  \n    Point(int x = 0, int  y = 0, int z = 0) :_x(x), _y(y), _z(z){}  \n ```\n ```\n0x400938 push   %rbp\n0x400939 mov    %rsp,%rbp\n0x40093c mov    %rdi,-0x8(%rbp)\n0x400940 mov    %esi,-0xc(%rbp)\n0x400943 mov    %edx,-0x10(%rbp)\n0x400946 mov    %ecx,-0x14(%rbp)\n```\n\n```cpp\n    void print(){ cout << _x << endl << _y << endl << _z << endl; };  \nprivate:  \n    int _x, _y, _z;  \n};   \n  \nint main(){ \n\tint  a=1;\t\n    Point local1 = { a, 4, 5};```\n    \n```\n0x4008a4 mov    -0x24(%rbp),%esi\n0x4008a7 lea    -0x20(%rbp),%rax\n0x4008ab mov    $0x5,%ecx\n0x4008b0 mov    $0x4,%edx\n0x4008b5 mov    %rax,%rdi\n0x4008b8 callq  0x400938 <Point::Point(int, int, int)>\n```\nactivation record  \n+ Locals to the callee\n+ Return address to the caller\n+ Parameters of the callee  \necxPoint local2;g++ c++11    \n#####   \nvirtual ,constructorvptrcopy constructor\nc++nontrivial members trivialtrivialnon-trivial\n\n    (ctor)  \n    (copy)  \n    (assignment)  \n    (dtor)  \n\n3\n\n    (explict)\n    POD\n    \n\nnon-trivialnon-trivial ctornon-trivial copy   \n\n#####   \nconstructor  \n1.   \n2. member,member\n3. vptr1,2vtable   \n4. base class constructor  1,2,3member initialization list1,2,3this\n5. virtual base class constructor 4list  \n\n\n```cpp\n class Point{\n   public:\n    Point (float x=0.0,float y=0.0);  \n    Point(const Point&);\n    Point& operator=(const Point&);\n    virtual ~Point();\n    virtual float z() {return 0.0;}\n   protected:\n   float _x,_y;\n   };\n   class line {\n    Point _begin,_end;\n    public:\n      Line(....);\n      Line(...);\n      };```\nlinemember\n\n##### \n+ \n```cpp\nclass Point3d:public virtual Point{\n    public:\n       Point3d(float x=0.0,float y=0.0,float z=0.0):Point(x,y),_z(z){}\n       Point3d(const Point3d& rhs):point(rhs),_z(rhs._z){}\n       ~Point3d();\n       Point3d& operator=...\n       //..\n      proteced:\n      float _z;\n      }```\n  \n  ```cpp\n  this->Point(:Point(x,y);\n  this->_vptr_Point3d = vtbl_Point3d;\n  this->_vptr_point3d_point=_vtbl_point3d_point;\n  this->_z=rhs_z;\n  return this```\n  \n  \n  ```cpp\n  class Vertex:virtual public Point;\n  class Vertex3d:public Point3d,public Vertex{;};\n  class Pvertex:public Vertex3d{;};'```\n  \n  Point subobjectVertex3d\n  Point3dvertex,Point\n    \n  ```cpp\n  Vertex3d::Vertex3d(Vertex3d *this,bool __most_derived,float x,float y,float z){\n  if(__most_derived!=false)//\n     this->Point::Point(x,y);//\n     //base classes\n     //__most_derivedfalse\n  this->Point3d::Ponint3d(..);\n  ...\n  ```\n   \n```cpp\nPoint3d::Point3d(Point3d* this,...)\n{\n   if(___most_derived!=false)\n      this->Point::Point(x,y);\n      ....\n      }```\n\n+ \n+ objobjobjvirtual base class constructor:,\n+ objsubobj,obj\n\n#### vptr\n+ 222\n+ vptr\n+ constructor\n  ```cpp\n  class Vertex:virtual public Point;\n  class Vertex3d:public Point3d,public Vertex{;};\n  class Pvertex:public Vertex3d{;};'```\n  PVertex  \n  Point    \n  Point3d  \n  Vertex  \n  Vertex3d  \n  Pvertex  \n+ virtual func size()class  \n  Pvertex pv;  \n  Point3d p3d;  \n  Point  *pt=&pv;  \n  pt->size()PVertex  \n  pt=&p3d; pt->size()p3d\n+ \npoint3dclasssize,point3d,point3d\n + ?\n + Point3d::size()bnalalla\n + vptrsizeclassvptr\n + vptrbase class constructor size),member\n + constructorobjsubobj\n \n ### \n #### \n+   \n +   \n + \n + private \n+ \n + bitwise copybitwise copy\n + copy assignment operator\n\t1. classmem objobjcopy ass operaator\n\t2. copy assi opera..\n\t3. virtual func\n\t4. virtual base class  \n+   \n  + \n  + PointPoint3dVertexcopy assignment operatorpointcopy assignment operator?\n  + \n### \n\n### \n+ \n+ member objectbase classdestructor\n+ \n+ \n  + \n  + vprt\n  + classmember class object ,destructor,\n  + objectvptr,virtual table\n  + \n  + \n+ ","source":"_posts/cpp-conanddest-semantics.md","raw":"---\ntitle: cpp_conanddest_semantics\ndate: 2018-06-09 22:03:32\ntags: cpp_class\ncategories: c&cpp\n---\n\n###   \n#### 1. \nabstract base classconstructor,de...,non satic data member  <!--more-->\n:  \n```cpp\n  class Abstract_class {\n      public:\n         virtual ~Abstract_base() = 0;\n         virtual void interface() const=0;\n         virtual const char * mumble() const {\n             return _mumble;\n         }\n      protected:\n         char *_mumble;\n    };```\n   mumble,   \n  \n#### 2.  \n```cpp\n#include<iostream>\nusing namespace std;\nclass Abstra_class {\n\tpublic :\n\t   // virtual ~Abstra_class() =0;\n\t\tvirtual ~Abstra_class() { delete _mumble;cout<<\"use ~abstra_class\";}\n\t\t//virtual void interface() const=0;\n\t\tvirtual void interface() const { cout<<\"use interface Abstra_class:\";}\n\t\tvirtual const char* mumble() const{\n\t\t\t\treturn _mumble;\n\t\t}\n\t\tAbstra_class(){_mumble=new char[4];cout<<\"construct:Abs..\";}\n\tprotected:\n\t\tchar* _mumble;\n};\nclass dev : public Abstra_class {\n\t\tpublic:\n\t\t\t\t~dev() {dd=0;}\n\t\t\t\tdev(){dd=3;}\n\t\t\t\tvoid useA (){\n               Abstra_class::interface();//=0,pureok\n\t\t\t\t}\n\t\t\t\tvirtual void interface() const {if(dd==4)cout<<\"re\";}\n\t\tprotected:\n\t\t\t\tint dd;\n};\nint main ()\n{\n\t  dev ddd;\n\t\tddd.useA();\n\t\tddd.interface();\n\t  //  Abstra_class::interface();\n\t\treturn 0;\n}\n```\nconstruct:Abs..use interface Abstra_class:use ~Abstra_class: \n\n\"pure virtual func , \"g++\n```cpp\n#include<iostream>\nusing namespace std;\nclass Abstra_class {\n\tpublic :\n\t   // virtual ~Abstra_class() =0;\n\t\tvirtual ~Abstra_class() { delete _mumble;cout<<\"use ~Abstra_class:\";}\n\t\tvirtual void interface() const=0;\n\t\t//virtual void interface() const { cout<<\"use interface Abstra_class:\";}\n\t\tvirtual const char* mumble() const{\n\t\t\t\treturn _mumble;\n\t\t}\n\t\tvirtual void  ii() const=0;//ensure is a abstra class\n\t\tAbstra_class(){_mumble=new char[4];cout<<\"construct:Abs..\";}\n\tprotected:\n\t\tchar* _mumble;\n};\ninline void Abstra_class::interface() const {\n}\nclass dev : public Abstra_class {\n\t\tpublic:\n\t\t\t\t~dev() {dd=0;}\n\t\t\t\tdev(){dd=3;}\n\t\t\t\tvoid useA (){\n                Abstra_class::interface();//0\n\t\t           dd=4;\n\t\t\t\t}\n\t\t\t\tvirtual void interface() const {\n\t\t\t\t\t\tif(dd==4)cout<<\"\\nre\\n\";\n\t\t\t\t\t\t//Abstra_class::interface();\n\t\t\t\t}\n\t\t\t\tvirtual void ii() const {cout<<\"is implenment\";}\n\t\tprotected:\n\t\t\t\tint dd;\n};\nint main ()\n{\n\t  dev ddd;\n\t\tddd.useA();\n\t\tddd.interface();\n\tAbstra_class *pt=&ddd;\n\tpt->interface();\n\t  //  Abstra_class::interface();\n\t\treturn 0;\n}\n```\n  re,interfacepure  \nderived classdestructorvirtual base class desturctor,\n      base destructorpure virtual destructor\n      vitual dect~pure\n      virtual\n      \n3)\nvirtual funcconst ,date member\npure,virtual const,\n\n#### \n#####   \n```cpp\nPoint global;//exit\n \nPoint foobar(){\n   Point local;//\n   Point *heap=new Point;//delete \n   *heap=local;//localwarning,maybe \n   delete heap;//\n   return local;//maybe\n   }\n ```\n+ \n+ cglobalbssc++constructor\n+ c++default constructor,destructor,copy constructor,copy assignment operator\n```cpp\n#include<iostream>\nusing namespace std;\nclass Point {\n\tpublic:\n\t\t\tPoint (){cout<<\"in constructor \"<<endl;}\n\t\t\t~Point() {cout<<\"in destructor\"<<endl;}\n};\nPoint glo;\nint main ()\n{\n\t\treturn 0;\n}```\nPoint glo\n\n\nconstructor destructor\nglobal\ninline\n```cpp\n#include<iostream>  \nusing namespace std;  \n  \nclass Point{  \npublic:  \n    Point(double x = 0.0, double y = 0.0, double z = 0.0) :_x(x), _y(y), _z(z){}  \n    void print(){ cout << _x << endl << _y << endl << _z << endl; };  \nprivate:  \n    double _x, _y, _z;  \n};  \n  \nint main(){  \n    Point local1 = { 1.1, 1.2, 1.3 };//g++ --std=c++11double a=1.5; ..={a,...}c++11 \n    local1.print();  \n  \n    system(\"pause\");  \n    return 0;  \n} ``` \nexplicit initialization list)->xxx={yyy};  \nactivation record initializatioin list local1;  \nexplicit initialization list\n+ class member publicprivate  \n+ { }\n+   \n\n```cpp\nclass Point{  \npublic:  \n    Point(int x = 0, int  y = 0, int z = 0) :_x(x), _y(y), _z(z){}  \n ```\n ```\n0x400938 push   %rbp\n0x400939 mov    %rsp,%rbp\n0x40093c mov    %rdi,-0x8(%rbp)\n0x400940 mov    %esi,-0xc(%rbp)\n0x400943 mov    %edx,-0x10(%rbp)\n0x400946 mov    %ecx,-0x14(%rbp)\n```\n\n```cpp\n    void print(){ cout << _x << endl << _y << endl << _z << endl; };  \nprivate:  \n    int _x, _y, _z;  \n};   \n  \nint main(){ \n\tint  a=1;\t\n    Point local1 = { a, 4, 5};```\n    \n```\n0x4008a4 mov    -0x24(%rbp),%esi\n0x4008a7 lea    -0x20(%rbp),%rax\n0x4008ab mov    $0x5,%ecx\n0x4008b0 mov    $0x4,%edx\n0x4008b5 mov    %rax,%rdi\n0x4008b8 callq  0x400938 <Point::Point(int, int, int)>\n```\nactivation record  \n+ Locals to the callee\n+ Return address to the caller\n+ Parameters of the callee  \necxPoint local2;g++ c++11    \n#####   \nvirtual ,constructorvptrcopy constructor\nc++nontrivial members trivialtrivialnon-trivial\n\n    (ctor)  \n    (copy)  \n    (assignment)  \n    (dtor)  \n\n3\n\n    (explict)\n    POD\n    \n\nnon-trivialnon-trivial ctornon-trivial copy   \n\n#####   \nconstructor  \n1.   \n2. member,member\n3. vptr1,2vtable   \n4. base class constructor  1,2,3member initialization list1,2,3this\n5. virtual base class constructor 4list  \n\n\n```cpp\n class Point{\n   public:\n    Point (float x=0.0,float y=0.0);  \n    Point(const Point&);\n    Point& operator=(const Point&);\n    virtual ~Point();\n    virtual float z() {return 0.0;}\n   protected:\n   float _x,_y;\n   };\n   class line {\n    Point _begin,_end;\n    public:\n      Line(....);\n      Line(...);\n      };```\nlinemember\n\n##### \n+ \n```cpp\nclass Point3d:public virtual Point{\n    public:\n       Point3d(float x=0.0,float y=0.0,float z=0.0):Point(x,y),_z(z){}\n       Point3d(const Point3d& rhs):point(rhs),_z(rhs._z){}\n       ~Point3d();\n       Point3d& operator=...\n       //..\n      proteced:\n      float _z;\n      }```\n  \n  ```cpp\n  this->Point(:Point(x,y);\n  this->_vptr_Point3d = vtbl_Point3d;\n  this->_vptr_point3d_point=_vtbl_point3d_point;\n  this->_z=rhs_z;\n  return this```\n  \n  \n  ```cpp\n  class Vertex:virtual public Point;\n  class Vertex3d:public Point3d,public Vertex{;};\n  class Pvertex:public Vertex3d{;};'```\n  \n  Point subobjectVertex3d\n  Point3dvertex,Point\n    \n  ```cpp\n  Vertex3d::Vertex3d(Vertex3d *this,bool __most_derived,float x,float y,float z){\n  if(__most_derived!=false)//\n     this->Point::Point(x,y);//\n     //base classes\n     //__most_derivedfalse\n  this->Point3d::Ponint3d(..);\n  ...\n  ```\n   \n```cpp\nPoint3d::Point3d(Point3d* this,...)\n{\n   if(___most_derived!=false)\n      this->Point::Point(x,y);\n      ....\n      }```\n\n+ \n+ objobjobjvirtual base class constructor:,\n+ objsubobj,obj\n\n#### vptr\n+ 222\n+ vptr\n+ constructor\n  ```cpp\n  class Vertex:virtual public Point;\n  class Vertex3d:public Point3d,public Vertex{;};\n  class Pvertex:public Vertex3d{;};'```\n  PVertex  \n  Point    \n  Point3d  \n  Vertex  \n  Vertex3d  \n  Pvertex  \n+ virtual func size()class  \n  Pvertex pv;  \n  Point3d p3d;  \n  Point  *pt=&pv;  \n  pt->size()PVertex  \n  pt=&p3d; pt->size()p3d\n+ \npoint3dclasssize,point3d,point3d\n + ?\n + Point3d::size()bnalalla\n + vptrsizeclassvptr\n + vptrbase class constructor size),member\n + constructorobjsubobj\n \n ### \n #### \n+   \n +   \n + \n + private \n+ \n + bitwise copybitwise copy\n + copy assignment operator\n\t1. classmem objobjcopy ass operaator\n\t2. copy assi opera..\n\t3. virtual func\n\t4. virtual base class  \n+   \n  + \n  + PointPoint3dVertexcopy assignment operatorpointcopy assignment operator?\n  + \n### \n\n### \n+ \n+ member objectbase classdestructor\n+ \n+ \n  + \n  + vprt\n  + classmember class object ,destructor,\n  + objectvptr,virtual table\n  + \n  + \n+ ","slug":"cpp-conanddest-semantics","published":1,"updated":"2018-06-09T14:04:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghoi000w00jx4kszh5o0","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p>abstract base classconstructor,de,non satic data member  <a id=\"more\"></a><br>:<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstract_class</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">       <span class=\"keyword\">virtual</span> ~Abstract_base() = <span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span> * <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">       <span class=\"keyword\">char</span> *_mumble;</span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>   mumble,   </p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstra_class</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> :</span><br><span class=\"line\">\t   <span class=\"comment\">// virtual ~Abstra_class() =0;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">virtual</span> ~Abstra_class() &#123; <span class=\"keyword\">delete</span> _mumble;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use ~abstra_class\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//virtual void interface() const=0;</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use interface Abstra_class:\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tAbstra_class()&#123;_mumble=<span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"number\">4</span>];<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"construct:Abs..\"</span>;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span>* _mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">dev</span> :</span> <span class=\"keyword\">public</span> Abstra_class &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t~dev() &#123;dd=<span class=\"number\">0</span>;&#125;</span><br><span class=\"line\">\t\t\t\tdev()&#123;dd=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useA</span> <span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">               Abstra_class::interface();<span class=\"comment\">//=0,pureok</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">if</span>(dd==<span class=\"number\">4</span>)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"re\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> dd;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t  dev ddd;</span><br><span class=\"line\">\t\tddd.useA();</span><br><span class=\"line\">\t\tddd.interface();</span><br><span class=\"line\">\t  <span class=\"comment\">//  Abstra_class::interface();</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>construct:Abs..use interface Abstra_class:use ~Abstra_class: </p>\n<p>pure virtual func , g++<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstra_class</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> :</span><br><span class=\"line\">\t   <span class=\"comment\">// virtual ~Abstra_class() =0;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">virtual</span> ~Abstra_class() &#123; <span class=\"keyword\">delete</span> _mumble;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use ~Abstra_class:\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">//virtual void interface() const &#123; cout&lt;&lt;\"use interface Abstra_class:\";&#125;</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span>  <span class=\"title\">ii</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;<span class=\"comment\">//ensure is a abstra class</span></span><br><span class=\"line\">\t\tAbstra_class()&#123;_mumble=<span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"number\">4</span>];<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"construct:Abs..\"</span>;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span>* _mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"keyword\">void</span> Abstra_class::interface() <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">dev</span> :</span> <span class=\"keyword\">public</span> Abstra_class &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t~dev() &#123;dd=<span class=\"number\">0</span>;&#125;</span><br><span class=\"line\">\t\t\t\tdev()&#123;dd=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useA</span> <span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">                Abstra_class::interface();<span class=\"comment\">//0</span></span><br><span class=\"line\">\t\t           dd=<span class=\"number\">4</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span>(dd==<span class=\"number\">4</span>)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"\\nre\\n\"</span>;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"comment\">//Abstra_class::interface();</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">ii</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"is implenment\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> dd;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t  dev ddd;</span><br><span class=\"line\">\t\tddd.useA();</span><br><span class=\"line\">\t\tddd.interface();</span><br><span class=\"line\">\tAbstra_class *pt=&amp;ddd;</span><br><span class=\"line\">\tpt-&gt;interface();</span><br><span class=\"line\">\t  <span class=\"comment\">//  Abstra_class::interface();</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>  re,interfacepure<br>derived classdestructorvirtual base class desturctor,<br>      base destructorpure virtual destructor<br>      vitual dect~pure<br>      virtual</p>\n<p>3)<br>virtual funcconst ,date member<br>pure,virtual const,</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point global;<span class=\"comment\">//exit</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\">Point <span class=\"title\">foobar</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   Point local;<span class=\"comment\">//</span></span><br><span class=\"line\">   Point *heap=<span class=\"keyword\">new</span> Point;<span class=\"comment\">//delete </span></span><br><span class=\"line\">   *heap=local;<span class=\"comment\">//localwarning,maybe </span></span><br><span class=\"line\">   <span class=\"keyword\">delete</span> heap;<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">return</span> local;<span class=\"comment\">//maybe</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n<li>cglobalbssc++constructor</li>\n<li>c++default constructor,destructor,copy constructor,copy assignment operator<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\tPoint ()&#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"in constructor \"</span>&lt;&lt;<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">\t\t\t~Point() &#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"in destructor\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">Point glo;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Point glo</p>\n<p><br>constructor destructor<br>global<br>inline<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;  </span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span>:  </span><br><span class=\"line\">    Point(<span class=\"keyword\">double</span> x = <span class=\"number\">0.0</span>, <span class=\"keyword\">double</span> y = <span class=\"number\">0.0</span>, <span class=\"keyword\">double</span> z = <span class=\"number\">0.0</span>) :_x(x), _y(y), _z(z)&#123;&#125;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>&#123; <span class=\"built_in\">cout</span> &lt;&lt; _x &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _y &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _z &lt;&lt; <span class=\"built_in\">endl</span>; &#125;;  </span><br><span class=\"line\"><span class=\"keyword\">private</span>:  </span><br><span class=\"line\">    <span class=\"keyword\">double</span> _x, _y, _z;  </span><br><span class=\"line\">&#125;;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;  </span><br><span class=\"line\">    Point local1 = &#123; <span class=\"number\">1.1</span>, <span class=\"number\">1.2</span>, <span class=\"number\">1.3</span> &#125;;<span class=\"comment\">//g++ --std=c++11double a=1.5; ..=&#123;a,...&#125;c++11 </span></span><br><span class=\"line\">    local1.print();  </span><br><span class=\"line\">  </span><br><span class=\"line\">    system(<span class=\"string\">\"pause\"</span>);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">&#125; ``` </span><br><span class=\"line\"><span class=\"keyword\">explicit</span> initialization <span class=\"built_in\">list</span>)-&gt;xxx=&#123;yyy&#125;;  </span><br><span class=\"line\">activation record initializatioin <span class=\"built_in\">list</span> local1;  </span><br><span class=\"line\"><span class=\"keyword\">explicit</span> initialization <span class=\"built_in\">list</span></span><br><span class=\"line\">+ <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">member</span> <span class=\"title\">public</span><span class=\"title\">private</span>  </span></span><br><span class=\"line\"><span class=\"class\">+ &#123;</span> &#125;</span><br><span class=\"line\">+   </span><br><span class=\"line\"></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span>:  </span><br><span class=\"line\">    Point(<span class=\"keyword\">int</span> x = <span class=\"number\">0</span>, <span class=\"keyword\">int</span>  y = <span class=\"number\">0</span>, <span class=\"keyword\">int</span> z = <span class=\"number\">0</span>) :_x(x), _y(y), _z(z)&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n <figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0x400938</span> push   <span class=\"symbol\">%rbp</span></span><br><span class=\"line\"><span class=\"number\">0x400939</span> mov    <span class=\"symbol\">%rsp</span>,<span class=\"symbol\">%rbp</span></span><br><span class=\"line\"><span class=\"number\">0x40093c</span> mov    <span class=\"symbol\">%rdi</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">8</span>(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400940</span> mov    <span class=\"symbol\">%esi</span>,<span class=\"number\">-0</span>xc(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400943</span> mov    <span class=\"symbol\">%edx</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">10</span>(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400946</span> mov    <span class=\"symbol\">%ecx</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">14</span>(<span class=\"symbol\">%rbp</span>)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>&#123; <span class=\"built_in\">cout</span> &lt;&lt; _x &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _y &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _z &lt;&lt; <span class=\"built_in\">endl</span>; &#125;;  </span><br><span class=\"line\"><span class=\"keyword\">private</span>:  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> _x, _y, _z;  </span><br><span class=\"line\">&#125;;   </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123; </span><br><span class=\"line\">\t<span class=\"keyword\">int</span>  a=<span class=\"number\">1</span>;\t</span><br><span class=\"line\">    Point local1 = &#123; a, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0x4008a4</span> <span class=\"keyword\">mov</span>    -<span class=\"number\">0x24</span>(%rbp),%esi</span><br><span class=\"line\"><span class=\"number\">0x4008a7</span> <span class=\"keyword\">lea</span>    -<span class=\"number\">0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x4008ab</span> <span class=\"keyword\">mov</span>    <span class=\"number\">$0</span>x5,%ecx</span><br><span class=\"line\"><span class=\"number\">0x4008b0</span> <span class=\"keyword\">mov</span>    <span class=\"number\">$0</span>x4,%edx</span><br><span class=\"line\"><span class=\"number\">0x4008b5</span> <span class=\"keyword\">mov</span>    %rax,%rdi</span><br><span class=\"line\"><span class=\"number\">0x4008b8</span> callq  <span class=\"number\">0x400938</span> &lt;Point::Point(<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>)&gt;</span><br></pre></td></tr></table></figure>\n<p>activation record  </p>\n<ul>\n<li>Locals to the callee</li>\n<li>Return address to the caller</li>\n<li><p>Parameters of the callee<br>ecxPoint local2;g++ c++11    </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>virtual ,constructorvptrcopy constructor<br>c++nontrivial members trivialtrivialnon-trivial</p>\n<p>  (ctor)<br>  (copy)<br>  (assignment)<br>  (dtor)  </p>\n</li>\n</ul>\n<p>3</p>\n<pre><code>(explict)\nPOD\n\n</code></pre><p>non-trivialnon-trivial ctornon-trivial copy   </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>constructor  </p>\n<ol>\n<li>  </li>\n<li>member,member</li>\n<li>vptr1,2vtable   </li>\n<li>base class constructor  1,2,3member initialization list1,2,3this</li>\n<li>virtual base class constructor 4list  </li>\n</ol>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   Point (<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>);  </span><br><span class=\"line\">   Point(<span class=\"keyword\">const</span> Point&amp;);</span><br><span class=\"line\">   Point&amp; <span class=\"keyword\">operator</span>=(<span class=\"keyword\">const</span> Point&amp;);</span><br><span class=\"line\">   <span class=\"keyword\">virtual</span> ~Point();</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">0.0</span>;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">  <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">line</span> &#123;</span></span><br><span class=\"line\">   Point _begin,_end;</span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">     Line(....);</span><br><span class=\"line\">     Line(...);</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>linemember</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">       Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point(x,y),_z(z)&#123;&#125;</span><br><span class=\"line\">       Point3d(<span class=\"keyword\">const</span> Point3d&amp; rhs):point(rhs),_z(rhs._z)&#123;&#125;</span><br><span class=\"line\">       ~Point3d();</span><br><span class=\"line\">       Point3d&amp; <span class=\"keyword\">operator</span>=...</span><br><span class=\"line\">       <span class=\"comment\">//..</span></span><br><span class=\"line\">      proteced:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>-&gt;Point(:Point(x,y);</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_vptr_Point3d = vtbl_Point3d;</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_vptr_point3d_point=_vtbl_point3d_point;</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_z=rhs_z;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br></pre></td></tr></table></figure>\n<p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> Point;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex&#123;;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pvertex</span>:</span><span class=\"keyword\">public</span> Vertex3d&#123;;&#125;;'</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  Point subobjectVertex3d<br>  Point3dvertex,Point<br>  <br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vertex3d::Vertex3d(Vertex3d *<span class=\"keyword\">this</span>,<span class=\"keyword\">bool</span> __most_derived,<span class=\"keyword\">float</span> x,<span class=\"keyword\">float</span> y,<span class=\"keyword\">float</span> z)&#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(__most_derived!=<span class=\"literal\">false</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">this</span>-&gt;Point::Point(x,y);<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"comment\">//base classes</span></span><br><span class=\"line\">   <span class=\"comment\">//__most_derivedfalse</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;Point3d::Ponint3d(..);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point3d::Point3d(Point3d* <span class=\"keyword\">this</span>,...)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(___most_derived!=<span class=\"literal\">false</span>)</span><br><span class=\"line\">      <span class=\"keyword\">this</span>-&gt;Point::Point(x,y);</span><br><span class=\"line\">      ....</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li>objobjobjvirtual base class constructor:,</li>\n<li>objsubobj,obj</li>\n</ul>\n<h4 id=\"vptr\"><a href=\"#vptr\" class=\"headerlink\" title=\"vptr\"></a>vptr</h4><ul>\n<li>222</li>\n<li>vptr</li>\n<li><p>constructor</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> Point;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex&#123;;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pvertex</span>:</span><span class=\"keyword\">public</span> Vertex3d&#123;;&#125;;'</span><br></pre></td></tr></table></figure>\n<p>PVertex<br>Point<br>Point3d<br>Vertex<br>Vertex3d<br>Pvertex  </p>\n</li>\n<li>virtual func size()class<br>Pvertex pv;<br>Point3d p3d;<br>Point  *pt=&pv;<br>pt-&gt;size()PVertex<br>pt=&p3d; pt-&gt;size()p3d</li>\n<li><p><br>point3dclasssize,point3d,point3d</p>\n<ul>\n<li>?</li>\n<li>Point3d::size()bnalalla</li>\n<li>vptrsizeclassvptr</li>\n<li>vptrbase class constructor size),member</li>\n<li>constructorobjsubobj</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4></li>\n<li>  <ul>\n<li>  </li>\n<li></li>\n<li>private </li>\n</ul>\n</li>\n<li><ul>\n<li>bitwise copybitwise copy</li>\n<li>copy assignment operator<ol>\n<li>classmem objobjcopy ass operaator</li>\n<li>copy assi opera..</li>\n<li>virtual func</li>\n<li>virtual base class  </li>\n</ol>\n</li>\n</ul>\n</li>\n<li>  <ul>\n<li></li>\n<li>PointPoint3dVertexcopy assignment operatorpointcopy assignment operator?</li>\n<li><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3></li>\n</ul>\n</li>\n<li></li>\n<li>member objectbase classdestructor</li>\n<li></li>\n<li><ul>\n<li></li>\n<li>vprt</li>\n<li>classmember class object ,destructor,</li>\n<li>objectvptr,virtual table</li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p>abstract base classconstructor,de,non satic data member","more":"<br>:<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstract_class</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">       <span class=\"keyword\">virtual</span> ~Abstract_base() = <span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span> * <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">       <span class=\"keyword\">char</span> *_mumble;</span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>   mumble,   </p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstra_class</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> :</span><br><span class=\"line\">\t   <span class=\"comment\">// virtual ~Abstra_class() =0;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">virtual</span> ~Abstra_class() &#123; <span class=\"keyword\">delete</span> _mumble;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use ~abstra_class\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//virtual void interface() const=0;</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use interface Abstra_class:\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tAbstra_class()&#123;_mumble=<span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"number\">4</span>];<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"construct:Abs..\"</span>;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span>* _mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">dev</span> :</span> <span class=\"keyword\">public</span> Abstra_class &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t~dev() &#123;dd=<span class=\"number\">0</span>;&#125;</span><br><span class=\"line\">\t\t\t\tdev()&#123;dd=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useA</span> <span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">               Abstra_class::interface();<span class=\"comment\">//=0,pureok</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">if</span>(dd==<span class=\"number\">4</span>)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"re\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> dd;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t  dev ddd;</span><br><span class=\"line\">\t\tddd.useA();</span><br><span class=\"line\">\t\tddd.interface();</span><br><span class=\"line\">\t  <span class=\"comment\">//  Abstra_class::interface();</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>construct:Abs..use interface Abstra_class:use ~Abstra_class: </p>\n<p>pure virtual func , g++<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Abstra_class</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> :</span><br><span class=\"line\">\t   <span class=\"comment\">// virtual ~Abstra_class() =0;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">virtual</span> ~Abstra_class() &#123; <span class=\"keyword\">delete</span> _mumble;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"use ~Abstra_class:\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">//virtual void interface() const &#123; cout&lt;&lt;\"use interface Abstra_class:\";&#125;</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">mumble</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> _mumble;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span>  <span class=\"title\">ii</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>=<span class=\"number\">0</span>;<span class=\"comment\">//ensure is a abstra class</span></span><br><span class=\"line\">\t\tAbstra_class()&#123;_mumble=<span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"number\">4</span>];<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"construct:Abs..\"</span>;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span>* _mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"keyword\">void</span> Abstra_class::interface() <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">dev</span> :</span> <span class=\"keyword\">public</span> Abstra_class &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t~dev() &#123;dd=<span class=\"number\">0</span>;&#125;</span><br><span class=\"line\">\t\t\t\tdev()&#123;dd=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useA</span> <span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">                Abstra_class::interface();<span class=\"comment\">//0</span></span><br><span class=\"line\">\t\t           dd=<span class=\"number\">4</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">interface</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span>(dd==<span class=\"number\">4</span>)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"\\nre\\n\"</span>;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"comment\">//Abstra_class::interface();</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">ii</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"is implenment\"</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> dd;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t  dev ddd;</span><br><span class=\"line\">\t\tddd.useA();</span><br><span class=\"line\">\t\tddd.interface();</span><br><span class=\"line\">\tAbstra_class *pt=&amp;ddd;</span><br><span class=\"line\">\tpt-&gt;interface();</span><br><span class=\"line\">\t  <span class=\"comment\">//  Abstra_class::interface();</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>  re,interfacepure<br>derived classdestructorvirtual base class desturctor,<br>      base destructorpure virtual destructor<br>      vitual dect~pure<br>      virtual</p>\n<p>3)<br>virtual funcconst ,date member<br>pure,virtual const,</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point global;<span class=\"comment\">//exit</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\">Point <span class=\"title\">foobar</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   Point local;<span class=\"comment\">//</span></span><br><span class=\"line\">   Point *heap=<span class=\"keyword\">new</span> Point;<span class=\"comment\">//delete </span></span><br><span class=\"line\">   *heap=local;<span class=\"comment\">//localwarning,maybe </span></span><br><span class=\"line\">   <span class=\"keyword\">delete</span> heap;<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">return</span> local;<span class=\"comment\">//maybe</span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n<li>cglobalbssc++constructor</li>\n<li>c++default constructor,destructor,copy constructor,copy assignment operator<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\tPoint ()&#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"in constructor \"</span>&lt;&lt;<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">\t\t\t~Point() &#123;<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"in destructor\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">Point glo;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Point glo</p>\n<p><br>constructor destructor<br>global<br>inline<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;  </span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span>:  </span><br><span class=\"line\">    Point(<span class=\"keyword\">double</span> x = <span class=\"number\">0.0</span>, <span class=\"keyword\">double</span> y = <span class=\"number\">0.0</span>, <span class=\"keyword\">double</span> z = <span class=\"number\">0.0</span>) :_x(x), _y(y), _z(z)&#123;&#125;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>&#123; <span class=\"built_in\">cout</span> &lt;&lt; _x &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _y &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _z &lt;&lt; <span class=\"built_in\">endl</span>; &#125;;  </span><br><span class=\"line\"><span class=\"keyword\">private</span>:  </span><br><span class=\"line\">    <span class=\"keyword\">double</span> _x, _y, _z;  </span><br><span class=\"line\">&#125;;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;  </span><br><span class=\"line\">    Point local1 = &#123; <span class=\"number\">1.1</span>, <span class=\"number\">1.2</span>, <span class=\"number\">1.3</span> &#125;;<span class=\"comment\">//g++ --std=c++11double a=1.5; ..=&#123;a,...&#125;c++11 </span></span><br><span class=\"line\">    local1.print();  </span><br><span class=\"line\">  </span><br><span class=\"line\">    system(<span class=\"string\">\"pause\"</span>);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">&#125; ``` </span><br><span class=\"line\"><span class=\"keyword\">explicit</span> initialization <span class=\"built_in\">list</span>)-&gt;xxx=&#123;yyy&#125;;  </span><br><span class=\"line\">activation record initializatioin <span class=\"built_in\">list</span> local1;  </span><br><span class=\"line\"><span class=\"keyword\">explicit</span> initialization <span class=\"built_in\">list</span></span><br><span class=\"line\">+ <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">member</span> <span class=\"title\">public</span><span class=\"title\">private</span>  </span></span><br><span class=\"line\"><span class=\"class\">+ &#123;</span> &#125;</span><br><span class=\"line\">+   </span><br><span class=\"line\"></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span>:  </span><br><span class=\"line\">    Point(<span class=\"keyword\">int</span> x = <span class=\"number\">0</span>, <span class=\"keyword\">int</span>  y = <span class=\"number\">0</span>, <span class=\"keyword\">int</span> z = <span class=\"number\">0</span>) :_x(x), _y(y), _z(z)&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n <figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0x400938</span> push   <span class=\"symbol\">%rbp</span></span><br><span class=\"line\"><span class=\"number\">0x400939</span> mov    <span class=\"symbol\">%rsp</span>,<span class=\"symbol\">%rbp</span></span><br><span class=\"line\"><span class=\"number\">0x40093c</span> mov    <span class=\"symbol\">%rdi</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">8</span>(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400940</span> mov    <span class=\"symbol\">%esi</span>,<span class=\"number\">-0</span>xc(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400943</span> mov    <span class=\"symbol\">%edx</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">10</span>(<span class=\"symbol\">%rbp</span>)</span><br><span class=\"line\"><span class=\"number\">0x400946</span> mov    <span class=\"symbol\">%ecx</span>,<span class=\"number\">-0</span><span class=\"keyword\">x</span><span class=\"number\">14</span>(<span class=\"symbol\">%rbp</span>)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>&#123; <span class=\"built_in\">cout</span> &lt;&lt; _x &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _y &lt;&lt; <span class=\"built_in\">endl</span> &lt;&lt; _z &lt;&lt; <span class=\"built_in\">endl</span>; &#125;;  </span><br><span class=\"line\"><span class=\"keyword\">private</span>:  </span><br><span class=\"line\">    <span class=\"keyword\">int</span> _x, _y, _z;  </span><br><span class=\"line\">&#125;;   </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123; </span><br><span class=\"line\">\t<span class=\"keyword\">int</span>  a=<span class=\"number\">1</span>;\t</span><br><span class=\"line\">    Point local1 = &#123; a, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0x4008a4</span> <span class=\"keyword\">mov</span>    -<span class=\"number\">0x24</span>(%rbp),%esi</span><br><span class=\"line\"><span class=\"number\">0x4008a7</span> <span class=\"keyword\">lea</span>    -<span class=\"number\">0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x4008ab</span> <span class=\"keyword\">mov</span>    <span class=\"number\">$0</span>x5,%ecx</span><br><span class=\"line\"><span class=\"number\">0x4008b0</span> <span class=\"keyword\">mov</span>    <span class=\"number\">$0</span>x4,%edx</span><br><span class=\"line\"><span class=\"number\">0x4008b5</span> <span class=\"keyword\">mov</span>    %rax,%rdi</span><br><span class=\"line\"><span class=\"number\">0x4008b8</span> callq  <span class=\"number\">0x400938</span> &lt;Point::Point(<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>)&gt;</span><br></pre></td></tr></table></figure>\n<p>activation record  </p>\n<ul>\n<li>Locals to the callee</li>\n<li>Return address to the caller</li>\n<li><p>Parameters of the callee<br>ecxPoint local2;g++ c++11    </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>virtual ,constructorvptrcopy constructor<br>c++nontrivial members trivialtrivialnon-trivial</p>\n<p>  (ctor)<br>  (copy)<br>  (assignment)<br>  (dtor)  </p>\n</li>\n</ul>\n<p>3</p>\n<pre><code>(explict)\nPOD\n\n</code></pre><p>non-trivialnon-trivial ctornon-trivial copy   </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>constructor  </p>\n<ol>\n<li>  </li>\n<li>member,member</li>\n<li>vptr1,2vtable   </li>\n<li>base class constructor  1,2,3member initialization list1,2,3this</li>\n<li>virtual base class constructor 4list  </li>\n</ol>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   Point (<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>);  </span><br><span class=\"line\">   Point(<span class=\"keyword\">const</span> Point&amp;);</span><br><span class=\"line\">   Point&amp; <span class=\"keyword\">operator</span>=(<span class=\"keyword\">const</span> Point&amp;);</span><br><span class=\"line\">   <span class=\"keyword\">virtual</span> ~Point();</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">0.0</span>;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">  <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">line</span> &#123;</span></span><br><span class=\"line\">   Point _begin,_end;</span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">     Line(....);</span><br><span class=\"line\">     Line(...);</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>linemember</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">       Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point(x,y),_z(z)&#123;&#125;</span><br><span class=\"line\">       Point3d(<span class=\"keyword\">const</span> Point3d&amp; rhs):point(rhs),_z(rhs._z)&#123;&#125;</span><br><span class=\"line\">       ~Point3d();</span><br><span class=\"line\">       Point3d&amp; <span class=\"keyword\">operator</span>=...</span><br><span class=\"line\">       <span class=\"comment\">//..</span></span><br><span class=\"line\">      proteced:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>-&gt;Point(:Point(x,y);</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_vptr_Point3d = vtbl_Point3d;</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_vptr_point3d_point=_vtbl_point3d_point;</span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;_z=rhs_z;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br></pre></td></tr></table></figure>\n<p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> Point;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex&#123;;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pvertex</span>:</span><span class=\"keyword\">public</span> Vertex3d&#123;;&#125;;'</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>  Point subobjectVertex3d<br>  Point3dvertex,Point<br>  <br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vertex3d::Vertex3d(Vertex3d *<span class=\"keyword\">this</span>,<span class=\"keyword\">bool</span> __most_derived,<span class=\"keyword\">float</span> x,<span class=\"keyword\">float</span> y,<span class=\"keyword\">float</span> z)&#123;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(__most_derived!=<span class=\"literal\">false</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">this</span>-&gt;Point::Point(x,y);<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"comment\">//base classes</span></span><br><span class=\"line\">   <span class=\"comment\">//__most_derivedfalse</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>-&gt;Point3d::Ponint3d(..);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point3d::Point3d(Point3d* <span class=\"keyword\">this</span>,...)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(___most_derived!=<span class=\"literal\">false</span>)</span><br><span class=\"line\">      <span class=\"keyword\">this</span>-&gt;Point::Point(x,y);</span><br><span class=\"line\">      ....</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li>objobjobjvirtual base class constructor:,</li>\n<li>objsubobj,obj</li>\n</ul>\n<h4 id=\"vptr\"><a href=\"#vptr\" class=\"headerlink\" title=\"vptr\"></a>vptr</h4><ul>\n<li>222</li>\n<li>vptr</li>\n<li><p>constructor</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> Point;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex&#123;;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pvertex</span>:</span><span class=\"keyword\">public</span> Vertex3d&#123;;&#125;;'</span><br></pre></td></tr></table></figure>\n<p>PVertex<br>Point<br>Point3d<br>Vertex<br>Vertex3d<br>Pvertex  </p>\n</li>\n<li>virtual func size()class<br>Pvertex pv;<br>Point3d p3d;<br>Point  *pt=&pv;<br>pt-&gt;size()PVertex<br>pt=&p3d; pt-&gt;size()p3d</li>\n<li><p><br>point3dclasssize,point3d,point3d</p>\n<ul>\n<li>?</li>\n<li>Point3d::size()bnalalla</li>\n<li>vptrsizeclassvptr</li>\n<li>vptrbase class constructor size),member</li>\n<li>constructorobjsubobj</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4></li>\n<li>  <ul>\n<li>  </li>\n<li></li>\n<li>private </li>\n</ul>\n</li>\n<li><ul>\n<li>bitwise copybitwise copy</li>\n<li>copy assignment operator<ol>\n<li>classmem objobjcopy ass operaator</li>\n<li>copy assi opera..</li>\n<li>virtual func</li>\n<li>virtual base class  </li>\n</ol>\n</li>\n</ul>\n</li>\n<li>  <ul>\n<li></li>\n<li>PointPoint3dVertexcopy assignment operatorpointcopy assignment operator?</li>\n<li><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3></li>\n</ul>\n</li>\n<li></li>\n<li>member objectbase classdestructor</li>\n<li></li>\n<li><ul>\n<li></li>\n<li>vprt</li>\n<li>classmember class object ,destructor,</li>\n<li>objectvptr,virtual table</li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n</ul>"},{"title":"cpp_const","date":"2018-06-08T14:07:46.000Z","_content":"### c++const\n#### const\n##### const \nconst  \nconst  \n#####  <!--more-->\nconst\n+ const   \n + const int xx=4; const double xd=3.3;   \n + const int array[3]={3,4,5};\n + const\n+ const  \n + const int *p=&value;   \n  //,  \n  valueint value;/const int value;\n\n```cpp\n          int va=4;\n    6         const int *p=&va ;\n    7         va=5;\n>>  8         *p=6;//error\n    9         cout<<*p<<endl;//5\n   10         return 0;\n```\n\n  + int *const p=&value; //\n  + const int *const p=&value;//\n+ const \n + const int &ref=value;\n\n##### const  c&cpp\n+ CPPcconstcpp\nwhy?see follow \n```c\n    c code:\n    const int cc=8;\n0x4004da movl   $0x8,-0x8(%rbp)\n\t\tint ccc=cc;\n0x4004e1 mov    -0x8(%rbp),%eax\n0x4004e4 mov    %eax,-0x4(%rbp)\n```\n##### const\n+ const  constconst\n```cpp\n       class constobj{\n          public:\n            int ax;\n            int bx;\n            constonj(int a,int b):ax(a),bx(b){};\n            int getax() const {return ax;}\n            int getbx() const {return bx;}\n            void setax(int a){ax=a;}\n        }\n        int main ()\n        {\n            constobj cobj;\n            const constobj ccobj;\n            ccobj.setax(3);//error\n            return 0;\n            }```\n+ const const )\n+ const\n+ constconst\n+ const\n\n```cpp\nclass Something\n{\nprivate:\n    std::string m_value;\npublic:\n    Something(const std::string &value=\"\") { m_value= value; }\n    const std::string& getValue() const { return m_value; } // getValue() for const objects\n    std::string& getValue() { return m_value; } // getValue() for non-const objects\n};\nint main()\n{\n\tSomething something;\n\tsomething.getValue() = \"Hi\"; // calls non-const getValue();\n \n\tconst Something something2;\n\tsomething2.getValue(); // calls const getValue();\n \n\treturn 0;\n}\n```\n\n##### c++11\n+ constexpcv  \n##### c++ const\n+   \nconstconst\n\n\n```\n    const int  co1=3;\n0x4008ed movl   $0x3,-0x14(%rbp)\n\t\t int  nor=co1;\n0x4008f4 movl   $0x3,-0x10(%rbp)```\n\nco1=4;3=4; \n* const *\n\n\n+ :save in stack\n\n```c \n   const int a[3]={2,3,5};\n0x4008fb movl   $0x2,-0x20(%rbp)\n0x400902 movl   $0x3,-0x1c(%rbp)\n0x400909 movl   $0x5,-0x18(%rbp)```\n\n\n+   \nconst  \n\n\n```c\n    const int *p=&value;\n    int xx=*p;//?\n     int pv=4;\n0x400a12 movl   $0x4,-0x58(%rbp)\n      const int *p=&pv;\n0x400a19 lea    -0x58(%rbp),%rax\n0x400a1d mov    %rax,-0x40(%rbp)\n\n\t  int px=*p;\n0x400a69 mov    -0x40(%rbp),%rax\n0x400a6d mov    (%rax),%eax\n0x400a6f mov    %eax,-0x48(%rbp)\n```\n\n```c\n   int pv=4;\n0x400a12 movl   $0x4,-0x70(%rbp)//put 4 in mem(statck)\n\t\t const int *p=&pv;\n0x400a19 lea    -0x70(%rbp),%rax//get its addr\n0x400a1d mov    %rax,-0x58(%rbp)//addr to p\n         int *const pp=&pv; \n0x400a21 lea    -0x70(%rbp),%rax\n0x400a25 mov    %rax,-0x50(%rbp)//adddr to pp\n         int  *ppp=pp;\n0x400a29 mov    -0x50(%rbp),%rax//get pp num\n0x400a2d mov    %rax,-0x48(%rbp)//to ppp\n```\n\n+ \n,same to pointer\n```c       \nfollow above\nconst int &ref=pv;\n0x400aba lea    -0x7c(%rbp),%rax//get pv\n0x400abe mov    %rax,-0x38(%rbp)//to ref\n\t\t int cs=ref;\n0x400ac2 mov    -0x38(%rbp),%rax//get ref\n0x400ac6 mov    (%rax),%eax//get *ref\n0x400ac8 mov    %eax,-0x64(%rbp)//to cs\n```\n\n\n+ const  \n + const  \n   int,char\n   const  \n+ constconst\n +    \n +   \neg:   \n     ```c\n     obj.show();--->\n     show(&obj)  --this\n    const OB obj();\n   obj.show();const OB *this;\n   OB *thisthis\n   const OBOB &```\n\n\n+ conclude:   \nif it can use non const func ,it will change member by non const this pointer;\n\n+ const  \nconstvoid show() constshow(const OB *this);\n\nconstconstconstconst\n","source":"_posts/cpp-const.md","raw":"---\ntitle: cpp_const\ndate: 2018-06-08 22:07:46\ntags: cpp_keyword\ncategories: c&cpp\n---\n### c++const\n#### const\n##### const \nconst  \nconst  \n#####  <!--more-->\nconst\n+ const   \n + const int xx=4; const double xd=3.3;   \n + const int array[3]={3,4,5};\n + const\n+ const  \n + const int *p=&value;   \n  //,  \n  valueint value;/const int value;\n\n```cpp\n          int va=4;\n    6         const int *p=&va ;\n    7         va=5;\n>>  8         *p=6;//error\n    9         cout<<*p<<endl;//5\n   10         return 0;\n```\n\n  + int *const p=&value; //\n  + const int *const p=&value;//\n+ const \n + const int &ref=value;\n\n##### const  c&cpp\n+ CPPcconstcpp\nwhy?see follow \n```c\n    c code:\n    const int cc=8;\n0x4004da movl   $0x8,-0x8(%rbp)\n\t\tint ccc=cc;\n0x4004e1 mov    -0x8(%rbp),%eax\n0x4004e4 mov    %eax,-0x4(%rbp)\n```\n##### const\n+ const  constconst\n```cpp\n       class constobj{\n          public:\n            int ax;\n            int bx;\n            constonj(int a,int b):ax(a),bx(b){};\n            int getax() const {return ax;}\n            int getbx() const {return bx;}\n            void setax(int a){ax=a;}\n        }\n        int main ()\n        {\n            constobj cobj;\n            const constobj ccobj;\n            ccobj.setax(3);//error\n            return 0;\n            }```\n+ const const )\n+ const\n+ constconst\n+ const\n\n```cpp\nclass Something\n{\nprivate:\n    std::string m_value;\npublic:\n    Something(const std::string &value=\"\") { m_value= value; }\n    const std::string& getValue() const { return m_value; } // getValue() for const objects\n    std::string& getValue() { return m_value; } // getValue() for non-const objects\n};\nint main()\n{\n\tSomething something;\n\tsomething.getValue() = \"Hi\"; // calls non-const getValue();\n \n\tconst Something something2;\n\tsomething2.getValue(); // calls const getValue();\n \n\treturn 0;\n}\n```\n\n##### c++11\n+ constexpcv  \n##### c++ const\n+   \nconstconst\n\n\n```\n    const int  co1=3;\n0x4008ed movl   $0x3,-0x14(%rbp)\n\t\t int  nor=co1;\n0x4008f4 movl   $0x3,-0x10(%rbp)```\n\nco1=4;3=4; \n* const *\n\n\n+ :save in stack\n\n```c \n   const int a[3]={2,3,5};\n0x4008fb movl   $0x2,-0x20(%rbp)\n0x400902 movl   $0x3,-0x1c(%rbp)\n0x400909 movl   $0x5,-0x18(%rbp)```\n\n\n+   \nconst  \n\n\n```c\n    const int *p=&value;\n    int xx=*p;//?\n     int pv=4;\n0x400a12 movl   $0x4,-0x58(%rbp)\n      const int *p=&pv;\n0x400a19 lea    -0x58(%rbp),%rax\n0x400a1d mov    %rax,-0x40(%rbp)\n\n\t  int px=*p;\n0x400a69 mov    -0x40(%rbp),%rax\n0x400a6d mov    (%rax),%eax\n0x400a6f mov    %eax,-0x48(%rbp)\n```\n\n```c\n   int pv=4;\n0x400a12 movl   $0x4,-0x70(%rbp)//put 4 in mem(statck)\n\t\t const int *p=&pv;\n0x400a19 lea    -0x70(%rbp),%rax//get its addr\n0x400a1d mov    %rax,-0x58(%rbp)//addr to p\n         int *const pp=&pv; \n0x400a21 lea    -0x70(%rbp),%rax\n0x400a25 mov    %rax,-0x50(%rbp)//adddr to pp\n         int  *ppp=pp;\n0x400a29 mov    -0x50(%rbp),%rax//get pp num\n0x400a2d mov    %rax,-0x48(%rbp)//to ppp\n```\n\n+ \n,same to pointer\n```c       \nfollow above\nconst int &ref=pv;\n0x400aba lea    -0x7c(%rbp),%rax//get pv\n0x400abe mov    %rax,-0x38(%rbp)//to ref\n\t\t int cs=ref;\n0x400ac2 mov    -0x38(%rbp),%rax//get ref\n0x400ac6 mov    (%rax),%eax//get *ref\n0x400ac8 mov    %eax,-0x64(%rbp)//to cs\n```\n\n\n+ const  \n + const  \n   int,char\n   const  \n+ constconst\n +    \n +   \neg:   \n     ```c\n     obj.show();--->\n     show(&obj)  --this\n    const OB obj();\n   obj.show();const OB *this;\n   OB *thisthis\n   const OBOB &```\n\n\n+ conclude:   \nif it can use non const func ,it will change member by non const this pointer;\n\n+ const  \nconstvoid show() constshow(const OB *this);\n\nconstconstconstconst\n","slug":"cpp-const","published":1,"updated":"2018-06-08T14:42:22.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghok000z00jxp3j1qiuj","content":"<h3 id=\"c-const\"><a href=\"#c-const\" class=\"headerlink\" title=\"c++const\"></a>c++const</h3><h4 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h4><h5 id=\"const-\"><a href=\"#const-\" class=\"headerlink\" title=\"const \"></a>const </h5><p>const<br>const  </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a> <a id=\"more\"></a></h5><p>const</p>\n<ul>\n<li>const   <ul>\n<li>const int xx=4; const double xd=3.3;   </li>\n<li>const int array[3]={3,4,5};</li>\n<li>const</li>\n</ul>\n</li>\n<li>const  <ul>\n<li>const int *p=&value;<br>//,<br>valueint value;/const int value;</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">          <span class=\"keyword\">int</span> va=<span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"number\">6</span>         <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;va ;</span><br><span class=\"line\">    <span class=\"number\">7</span>         va=<span class=\"number\">5</span>;</span><br><span class=\"line\">&gt;&gt;  <span class=\"number\">8</span>         *p=<span class=\"number\">6</span>;<span class=\"comment\">//error</span></span><br><span class=\"line\">    <span class=\"number\">9</span>         <span class=\"built_in\">cout</span>&lt;&lt;*p&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//5</span></span><br><span class=\"line\">   <span class=\"number\">10</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>int *const p=&value; //</li>\n<li>const int *const p=&value;//<ul>\n<li>const </li>\n<li>const int &amp;ref=value;</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"const-c-amp-cpp\"><a href=\"#const-c-amp-cpp\" class=\"headerlink\" title=\"const  c&amp;cpp\"></a>const  c&amp;cpp</h5><ul>\n<li>CPPcconstcpp<br>why?see follow <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    c code:</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> cc=<span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">0x4004da</span> movl   $<span class=\"number\">0x8</span>,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> ccc=cc;</span><br><span class=\"line\"><span class=\"number\">0x4004e1</span> mov    <span class=\"number\">-0x8</span>(%rbp),%eax</span><br><span class=\"line\"><span class=\"number\">0x4004e4</span> mov    %eax,<span class=\"number\">-0x4</span>(%rbp)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h5><ul>\n<li><p>const  constconst</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">constobj</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">     <span class=\"keyword\">int</span> ax;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> bx;</span><br><span class=\"line\">     constonj(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b):ax(a),bx(b)&#123;&#125;;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getax</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">return</span> ax;&#125;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getbx</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">return</span> bx;&#125;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setax</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span></span>&#123;ax=a;&#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"> </span>&#123;</span><br><span class=\"line\">     constobj cobj;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> constobj ccobj;</span><br><span class=\"line\">     ccobj.setax(<span class=\"number\">3</span>);<span class=\"comment\">//error</span></span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>const const )</p>\n</li>\n<li>const</li>\n<li>constconst</li>\n<li>const</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Something</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_value;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Something(<span class=\"keyword\">const</span> <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> &amp;value=<span class=\"string\">\"\"</span>) &#123; m_value= value; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span>&amp; <span class=\"title\">getValue</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125; <span class=\"comment\">// getValue() for const objects</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span>&amp; <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125; <span class=\"comment\">// getValue() for non-const objects</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tSomething something;</span><br><span class=\"line\">\tsomething.getValue() = <span class=\"string\">\"Hi\"</span>; <span class=\"comment\">// calls non-const getValue();</span></span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">const</span> Something something2;</span><br><span class=\"line\">\tsomething2.getValue(); <span class=\"comment\">// calls const getValue();</span></span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"c-11\"><a href=\"#c-11\" class=\"headerlink\" title=\"c++11\"></a>c++11</h5><ul>\n<li>constexpcv  <h5 id=\"c-const\"><a href=\"#c-const\" class=\"headerlink\" title=\"c++ const\"></a>c++ const</h5></li>\n<li><br>constconst<br></li>\n</ul>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    const int  co1=<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">0x4008ed</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x14</span>(%rbp)</span><br><span class=\"line\">\t\t int  nor=co1;</span><br><span class=\"line\"><span class=\"number\">0x4008f4</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x10</span>(%rbp)</span><br></pre></td></tr></table></figure>\n<p>co1=4;3=4; </p>\n<ul>\n<li>const *</li>\n</ul>\n<ul>\n<li>:save in stack</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> a[<span class=\"number\">3</span>]=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"><span class=\"number\">0x4008fb</span> movl   $<span class=\"number\">0x2</span>,<span class=\"number\">-0x20</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400902</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x1c</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400909</span> movl   $<span class=\"number\">0x5</span>,<span class=\"number\">-0x18</span>(%rbp)</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>const  </li>\n</ul>\n<p><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;value;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> xx=*p;<span class=\"comment\">//?</span></span><br><span class=\"line\">     <span class=\"keyword\">int</span> pv=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> movl   $<span class=\"number\">0x4</span>,<span class=\"number\">-0x58</span>(%rbp)</span><br><span class=\"line\">      <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;pv;</span><br><span class=\"line\"><span class=\"number\">0x400a19</span> lea    <span class=\"number\">-0x58</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a1d</span> mov    %rax,<span class=\"number\">-0x40</span>(%rbp)</span><br><span class=\"line\"></span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> px=*p;</span><br><span class=\"line\"><span class=\"number\">0x400a69</span> mov    <span class=\"number\">-0x40</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a6d</span> mov    (%rax),%eax</span><br><span class=\"line\"><span class=\"number\">0x400a6f</span> mov    %eax,<span class=\"number\">-0x48</span>(%rbp)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">int</span> pv=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> movl   $<span class=\"number\">0x4</span>,<span class=\"number\">-0x70</span>(%rbp)<span class=\"comment\">//put 4 in mem(statck)</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;pv;</span><br><span class=\"line\"><span class=\"number\">0x400a19</span> lea    <span class=\"number\">-0x70</span>(%rbp),%rax<span class=\"comment\">//get its addr</span></span><br><span class=\"line\"><span class=\"number\">0x400a1d</span> mov    %rax,<span class=\"number\">-0x58</span>(%rbp)<span class=\"comment\">//addr to p</span></span><br><span class=\"line\">         <span class=\"keyword\">int</span> *<span class=\"keyword\">const</span> pp=&amp;pv; </span><br><span class=\"line\"><span class=\"number\">0x400a21</span> lea    <span class=\"number\">-0x70</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a25</span> mov    %rax,<span class=\"number\">-0x50</span>(%rbp)<span class=\"comment\">//adddr to pp</span></span><br><span class=\"line\">         <span class=\"keyword\">int</span>  *ppp=pp;</span><br><span class=\"line\"><span class=\"number\">0x400a29</span> mov    <span class=\"number\">-0x50</span>(%rbp),%rax<span class=\"comment\">//get pp num</span></span><br><span class=\"line\"><span class=\"number\">0x400a2d</span> mov    %rax,<span class=\"number\">-0x48</span>(%rbp)<span class=\"comment\">//to ppp</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p><br>,same to pointer</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">follow above</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;ref=pv;</span><br><span class=\"line\"><span class=\"number\">0x400aba</span> lea    <span class=\"number\">-0x7c</span>(%rbp),%rax<span class=\"comment\">//get pv</span></span><br><span class=\"line\"><span class=\"number\">0x400abe</span> mov    %rax,<span class=\"number\">-0x38</span>(%rbp)<span class=\"comment\">//to ref</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">int</span> cs=ref;</span><br><span class=\"line\"><span class=\"number\">0x400ac2</span> mov    <span class=\"number\">-0x38</span>(%rbp),%rax<span class=\"comment\">//get ref</span></span><br><span class=\"line\"><span class=\"number\">0x400ac6</span> mov    (%rax),%eax<span class=\"comment\">//get *ref</span></span><br><span class=\"line\"><span class=\"number\">0x400ac8</span> mov    %eax,<span class=\"number\">-0x64</span>(%rbp)<span class=\"comment\">//to cs</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>const  </p>\n<ul>\n<li>const<br>int,char<br>const  </li>\n</ul>\n</li>\n<li>constconst<ul>\n<li>   </li>\n<li><br>eg:    <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  obj.show();---&gt;</span><br><span class=\"line\">  show(&amp;obj)  --<span class=\"keyword\">this</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">const</span> OB <span class=\"title\">obj</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">obj.show();<span class=\"keyword\">const</span> OB *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">OB *<span class=\"keyword\">this</span><span class=\"keyword\">this</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> OBOB &amp;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p>conclude:<br>if it can use non const func ,it will change member by non const this pointer;</p>\n</li>\n<li><p>const<br>constvoid show() constshow(const OB *this);</p>\n</li>\n</ul>\n<p>constconstconstconst</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-const\"><a href=\"#c-const\" class=\"headerlink\" title=\"c++const\"></a>c++const</h3><h4 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h4><h5 id=\"const-\"><a href=\"#const-\" class=\"headerlink\" title=\"const \"></a>const </h5><p>const<br>const  </p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a>","more":"</h5><p>const</p>\n<ul>\n<li>const   <ul>\n<li>const int xx=4; const double xd=3.3;   </li>\n<li>const int array[3]={3,4,5};</li>\n<li>const</li>\n</ul>\n</li>\n<li>const  <ul>\n<li>const int *p=&value;<br>//,<br>valueint value;/const int value;</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">          <span class=\"keyword\">int</span> va=<span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"number\">6</span>         <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;va ;</span><br><span class=\"line\">    <span class=\"number\">7</span>         va=<span class=\"number\">5</span>;</span><br><span class=\"line\">&gt;&gt;  <span class=\"number\">8</span>         *p=<span class=\"number\">6</span>;<span class=\"comment\">//error</span></span><br><span class=\"line\">    <span class=\"number\">9</span>         <span class=\"built_in\">cout</span>&lt;&lt;*p&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//5</span></span><br><span class=\"line\">   <span class=\"number\">10</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>int *const p=&value; //</li>\n<li>const int *const p=&value;//<ul>\n<li>const </li>\n<li>const int &amp;ref=value;</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"const-c-amp-cpp\"><a href=\"#const-c-amp-cpp\" class=\"headerlink\" title=\"const  c&amp;cpp\"></a>const  c&amp;cpp</h5><ul>\n<li>CPPcconstcpp<br>why?see follow <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    c code:</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> cc=<span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">0x4004da</span> movl   $<span class=\"number\">0x8</span>,<span class=\"number\">-0x8</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> ccc=cc;</span><br><span class=\"line\"><span class=\"number\">0x4004e1</span> mov    <span class=\"number\">-0x8</span>(%rbp),%eax</span><br><span class=\"line\"><span class=\"number\">0x4004e4</span> mov    %eax,<span class=\"number\">-0x4</span>(%rbp)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h5><ul>\n<li><p>const  constconst</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">constobj</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">     <span class=\"keyword\">int</span> ax;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> bx;</span><br><span class=\"line\">     constonj(<span class=\"keyword\">int</span> a,<span class=\"keyword\">int</span> b):ax(a),bx(b)&#123;&#125;;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getax</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">return</span> ax;&#125;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getbx</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123;<span class=\"keyword\">return</span> bx;&#125;</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setax</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span></span>&#123;ax=a;&#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"> </span>&#123;</span><br><span class=\"line\">     constobj cobj;</span><br><span class=\"line\">     <span class=\"keyword\">const</span> constobj ccobj;</span><br><span class=\"line\">     ccobj.setax(<span class=\"number\">3</span>);<span class=\"comment\">//error</span></span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>const const )</p>\n</li>\n<li>const</li>\n<li>constconst</li>\n<li>const</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Something</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_value;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Something(<span class=\"keyword\">const</span> <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> &amp;value=<span class=\"string\">\"\"</span>) &#123; m_value= value; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span>&amp; <span class=\"title\">getValue</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125; <span class=\"comment\">// getValue() for const objects</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span>&amp; <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125; <span class=\"comment\">// getValue() for non-const objects</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tSomething something;</span><br><span class=\"line\">\tsomething.getValue() = <span class=\"string\">\"Hi\"</span>; <span class=\"comment\">// calls non-const getValue();</span></span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">const</span> Something something2;</span><br><span class=\"line\">\tsomething2.getValue(); <span class=\"comment\">// calls const getValue();</span></span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"c-11\"><a href=\"#c-11\" class=\"headerlink\" title=\"c++11\"></a>c++11</h5><ul>\n<li>constexpcv  <h5 id=\"c-const\"><a href=\"#c-const\" class=\"headerlink\" title=\"c++ const\"></a>c++ const</h5></li>\n<li><br>constconst<br></li>\n</ul>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    const int  co1=<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">0x4008ed</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x14</span>(%rbp)</span><br><span class=\"line\">\t\t int  nor=co1;</span><br><span class=\"line\"><span class=\"number\">0x4008f4</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x10</span>(%rbp)</span><br></pre></td></tr></table></figure>\n<p>co1=4;3=4; </p>\n<ul>\n<li>const *</li>\n</ul>\n<ul>\n<li>:save in stack</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> a[<span class=\"number\">3</span>]=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"><span class=\"number\">0x4008fb</span> movl   $<span class=\"number\">0x2</span>,<span class=\"number\">-0x20</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400902</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">-0x1c</span>(%rbp)</span><br><span class=\"line\"><span class=\"number\">0x400909</span> movl   $<span class=\"number\">0x5</span>,<span class=\"number\">-0x18</span>(%rbp)</span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>const  </li>\n</ul>\n<p><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;value;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> xx=*p;<span class=\"comment\">//?</span></span><br><span class=\"line\">     <span class=\"keyword\">int</span> pv=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> movl   $<span class=\"number\">0x4</span>,<span class=\"number\">-0x58</span>(%rbp)</span><br><span class=\"line\">      <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;pv;</span><br><span class=\"line\"><span class=\"number\">0x400a19</span> lea    <span class=\"number\">-0x58</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a1d</span> mov    %rax,<span class=\"number\">-0x40</span>(%rbp)</span><br><span class=\"line\"></span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> px=*p;</span><br><span class=\"line\"><span class=\"number\">0x400a69</span> mov    <span class=\"number\">-0x40</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a6d</span> mov    (%rax),%eax</span><br><span class=\"line\"><span class=\"number\">0x400a6f</span> mov    %eax,<span class=\"number\">-0x48</span>(%rbp)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">int</span> pv=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">0x400a12</span> movl   $<span class=\"number\">0x4</span>,<span class=\"number\">-0x70</span>(%rbp)<span class=\"comment\">//put 4 in mem(statck)</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> *p=&amp;pv;</span><br><span class=\"line\"><span class=\"number\">0x400a19</span> lea    <span class=\"number\">-0x70</span>(%rbp),%rax<span class=\"comment\">//get its addr</span></span><br><span class=\"line\"><span class=\"number\">0x400a1d</span> mov    %rax,<span class=\"number\">-0x58</span>(%rbp)<span class=\"comment\">//addr to p</span></span><br><span class=\"line\">         <span class=\"keyword\">int</span> *<span class=\"keyword\">const</span> pp=&amp;pv; </span><br><span class=\"line\"><span class=\"number\">0x400a21</span> lea    <span class=\"number\">-0x70</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400a25</span> mov    %rax,<span class=\"number\">-0x50</span>(%rbp)<span class=\"comment\">//adddr to pp</span></span><br><span class=\"line\">         <span class=\"keyword\">int</span>  *ppp=pp;</span><br><span class=\"line\"><span class=\"number\">0x400a29</span> mov    <span class=\"number\">-0x50</span>(%rbp),%rax<span class=\"comment\">//get pp num</span></span><br><span class=\"line\"><span class=\"number\">0x400a2d</span> mov    %rax,<span class=\"number\">-0x48</span>(%rbp)<span class=\"comment\">//to ppp</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p><br>,same to pointer</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">follow above</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> &amp;ref=pv;</span><br><span class=\"line\"><span class=\"number\">0x400aba</span> lea    <span class=\"number\">-0x7c</span>(%rbp),%rax<span class=\"comment\">//get pv</span></span><br><span class=\"line\"><span class=\"number\">0x400abe</span> mov    %rax,<span class=\"number\">-0x38</span>(%rbp)<span class=\"comment\">//to ref</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">int</span> cs=ref;</span><br><span class=\"line\"><span class=\"number\">0x400ac2</span> mov    <span class=\"number\">-0x38</span>(%rbp),%rax<span class=\"comment\">//get ref</span></span><br><span class=\"line\"><span class=\"number\">0x400ac6</span> mov    (%rax),%eax<span class=\"comment\">//get *ref</span></span><br><span class=\"line\"><span class=\"number\">0x400ac8</span> mov    %eax,<span class=\"number\">-0x64</span>(%rbp)<span class=\"comment\">//to cs</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>const  </p>\n<ul>\n<li>const<br>int,char<br>const  </li>\n</ul>\n</li>\n<li>constconst<ul>\n<li>   </li>\n<li><br>eg:    <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  obj.show();---&gt;</span><br><span class=\"line\">  show(&amp;obj)  --<span class=\"keyword\">this</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">const</span> OB <span class=\"title\">obj</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">obj.show();<span class=\"keyword\">const</span> OB *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">OB *<span class=\"keyword\">this</span><span class=\"keyword\">this</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> OBOB &amp;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p>conclude:<br>if it can use non const func ,it will change member by non const this pointer;</p>\n</li>\n<li><p>const<br>constvoid show() constshow(const OB *this);</p>\n</li>\n</ul>\n<p>constconstconstconst</p>"},{"title":"cpp_datamember_memory","date":"2018-06-09T06:46:49.000Z","_content":"### c++ class  datamemory\nc++\n\n#### \"\"\n+ the simplest \n+ 1.2 class?  \n  size<!--more-->\n\n```c\nclass T{ };   ---1 char \nclass X :public virtual T{};--T  virtual base class subobject\nclass Y :public virtual T{};  --\nclass A:public X,public Y {};--```  \nclassTchar  \nXT  \nchar?  \nnonstatic memberint ,int\nchar\n\n+ intstructstructsizeofc89  \n\n```cpp\n#include<iostream>\n#define _sizeof(T) ((size_t)((T*)0+1))\n#include<stdio.h>\nusing namespace std;\nclass T {};\nclass X:public virtual T{};\nclass Y:public virtual T{};\nclass A :public X,public Y{};\nclass TT{public:int q;int x;};\nint main()\n{\n\t\tT t1,t2;\n\t\tint xx;\n\t\tif (&t1==&t2)\n\t\t\t\tcout<<\"same\"<<endl;\n\t\tprintf(\"%x\\n\",&t1);\n\t\tprintf(\"%x\\n\",&t2);\n        printf(\"%x\\n\",&xx);\n\t//\tint sie=(Y*)0+1;\n\t//\tprintf(\"%x\\n\",X{});\n\t    int s= _sizeof(TT);\n        cout<<_sizeof(T)<<endl;\n\t\tcout<<sizeof(TT)<<endl;\n\t\tcout<<sizeof(T)<<endl;\n\t\tcout<<sizeof(X)<<endl;\n\t\tcout<<sizeof(Y)<<endl;\n\t\tcout<<sizeof(A)<<endl;\n\t\treturn 0;\n}```\nt1,t2\n\n#### \n  \nvirtualvirtual table ,virtual base class subobject  \nAligmnment  \n\n\n8+1+3,8+1+3 ,1(X)+8+8+3(ali)\n\n#### datamember\n+ \nkdbg\n+ \n+ vptr\n\n+ align:C++access section(private,public,protectmember\naccess sections\n+ g++:\n\n```cpp\nclass TT{\n public:\n    int a;\n    char b;\n    };\n   sizeof{TT);   8\nclass TT{\n public:\n    int a;\n    char b;\n protect:\n    int c;\n    char d;\n    };\n   sizeof(TT)=16\nclass TT{\n public:\n    int a;\n    char b;\n protect:\n    int c;\n    char d;\n public:\n    int e;\n    char f;\n    };\n  sizeof(TT)=24 \nclass TT{\n public:\n    int a;\n    char b;\n    int e;\n    char f;\n protect:\n    int c;\n    char d;\n    };\n  sizeof(TT)=24\nclass TT{\n public:\n    int a;\n    int e;\n    char f;\n    char b;\n protect:\n    int c;\n    char d;\n    };\n  sizeof(TT)=20\n ```\n  cstruct \n\n\n#### data member\n+   \n\n```cpp\n        TT tt1;\n\t\tTT *tt2=&tt1;\n0x400b87 lea    -0x20(%rbp),%rax\n0x400b8b mov    %rax,-0x48(%rbp)\n\t\tint d=tt1.d;\n0x400b8f mov    -0x1c(%rbp),%eax\n0x400b92 mov    %eax,-0x68(%rbp)\n\t\tint f=tt2->d;\n0x400b95 mov    -0x48(%rbp),%rax\n0x400b99 mov    0x4(%rax),%eax\n0x400b9c mov    %eax,-0x64(%rbp)\n```\n\n+ static\n\n+ \nthis \n\n### \n\n\n#### \n##### \n```cpp\nclass Point2d{\n   public:\n    Point2d( float x=0.0,float y=0.0):_x(x),_y(y){};\n    float x() {return _x;}\n    float y() {return _y;}\n    void x(float newX) { _x=newX;}\n    void y(float newY) { _y=newY;}\n    void operator+= (const Point2d&  rhs) {\n        _x+=rhs.x();\n        _y+=rhs.y();\n        }\n    ...more member;\n   protected:\n      float _x,_y;\n};\nclass  Point3d: public Point2d{\n     public: \n        Point3d(float x=0.0,float y=0.0,float z=0.0):Point2d(x,y),_z(z){};\n        float z(){return _z;}\n        void z(float newZ){_z=newZ;} \n        void operator+=(const Point3d& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();\n           }\n          ...more member               \n     protected:\n      float _z;\n};\n```\n##### \n\n```cpp\nclass Concrete {\n  public:\n    ...\n  private:\n     int val;\n     char c1;\n     char c2;\n     char c3;\n     };```\nbytes;\n\n\n```cpp\n  class Concrete1{\n    public:\n    private: \n       int val;\n       char bit1;\n   };\n  class Concrete2public Concrete1{\n    public:\n    private:\n         char bit2;\n   };\n   class  Concrete3:public Concrete2{\n   public:\n   private:\n      char bit3;\n      };\n      ```\n   8+4+4=16\n  \n  + \n  c++\n  Concrete2  *pc2;\n            Concrete1 *pc1_1,*pc1_2;\n            *pc1_2=*pc1_1; -\n            pc1_1 = pc2; //pc1_1pc2;\n            *pc1_2=*pc1_1;//\n            \n            \n            \n\n\n\n##### \n```cpp\n class Point2d{\n   public:\n    Point2d( float x=0.0,float y=0.0):_x(x),_y(y){};\n    float x() {return _x;}\n    float y() {return _y;}\n    virtual float z(){return 0.0;} \n    virtual void z(float){}  \n    void x(float newX) { _x=newX;}\n    void y(float newY) { _y=newY;}\n    virtual void operator+= (const Point2d&  rhs) {\n        _x+=rhs.x();\n        _y+=rhs.y();\n        }\n    ...more member;\n   protected:\n      float _x,_y;\n};\nclass  Point3d: public Point2d{\n     public: \n        Point3d(float x=0.0,float y=0.0,float z=0.0):Point2d(x,y),_z(z){};\n        virtual float z(){return _z;}\n        virtual void z(float newZ){_z=newZ;}\n        \n        virtual void operator+=(const Point3d& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();\n           }\n          ...more member     \n     protected:\n      float _z;\n};```\n\n```cpp\nvoid fool(Point2d &p1,Point2d &p2){\n     p1+=p2;\n     }```\nPoint2dPoint3d \n  \n\n       virtual table\n       vptr\n\t   add constructor vptr setting\n       add destructor vptr virtual table dele\n\n2d&3d\n```cpp\n  virtual void operator+=(const Pointd& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();//\n           }\nPoint2d p2d(...)\nPoint3d p3d(,,,,);\np3d+=p2d\n```\nvptrc\n\n\n\n##### \n\n\n\nvptrbase classvirtual funcderivedclass\nderived class base class+\n\n\n```cpp\nclass Point2d{ virtual \n   public: \n   protected:\n       float _x _y;\n       };\n class Point3d:public Point2d{\n    public:\n    protectd:\n       float _z;\n       }'\n  class Vertex {virtual\n      protected:\n         Vertex *next;\n    };    \n  class Vertex3d:public Point3d,public Vertex {\n    protexted:\n      float mumble;\n      } ```\n\nbase class\nbase class subobject\n```cpp\n  eg:  Vertex3d v3d;\n        Vertex *pv;\n        Pointd *p2d\n        POint3d  *p3d;  \n        pv=&v3d\n     pv=(Vertex*)(((char*)&v3d)+sizeof(Point3d));     \n     p2d=&v3d;\n         p3d=&v3d\n```              \n      Vertex3d*v3d;  pv=v3d;*v3d\n      \noffset\n##### \nios istream ostream\n\n+   \n2314234141\n```cpp\nclass ios{..}\nclass istream:public virtual ios{..}\nclass ostream:public virtual ios{..}\nclass iostream:\npublic istream, public ostream {..}```\n411\n+   \nistream ostream ios subobj iostreamios subobj \nbase class derived classreference)  \n  class virtual base class obj,istream  \n offset(objvirtual base class subject  \n \n istream ios\n```cpp\n  class Point2d _x _y\n class Point3d:public virtual Point2d  _z\n class Vertex:public virtual Point2d\n class Vertex3d:public Point3d public Vertex \n ```\n  istream iostream\n+  cfront derived class obj virtual base class virtual base\nclass member;\nvirtual base class \n                     void Point3d::operator+=(const Point3d &rhs) {\n                      _x+=rhs._x;\n                      _y+=rhs._y;\n                      _z+=rhs._z;\n                      }\n                     _vbcPoint2d->_x+=rhs.__vbcPoint2d->_x;//vbc==virtual base class\n                     ....\n                    \n                    Point2d *2d=3d;\n                    Point2d *2d=3d? 3d->__vbcPoint2d:0;\n                    \n                    \n + microsoft vbtablevirtual base class table virtual base class \n Bjarne: g++\n           virtual base class offset\n           this+__vbtr__point3d[-1])->_x+= (&rhs+rhs.__vptr__point3d[-1])->_x;\n           ...\n           Point2d *2d=3d?3d+3d->__vptr__point3d[-1]:0\n           \n + 1virtual funcvptrvtable. 2,32,3virtual func1\n vptr,point3dvptr,kdbgvptr\n \n+ \n+ 1\n+ virtual funcvptr?\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Point2d {\n                public: virtual float printx(){return _x;}\n\t\tprotected:\n\t\t\t\tfloat _x,_y;\n};\nclass Vertex:public virtual Point2d{\n\t\tprotected:\n\t\t\t\tVertex *next;\n};\nclass Point3d:public virtual Point2d{\n\t\tprotected:\n\t\t\t\tfloat _z;\n};\nclass Vertex3d:public Vertex,public Point3d{\n\t\tprotected:\n\t\t\t\tfloat mumble;\n};\nclass PO{\n\t\tpublic:\n\t\t    // virtual ~PO();\n\t\t\t static int origin;\n\t\t\t float x,y,z;\n};\nint PO::origin =3;\nint main()\n{\n\t\tPoint2d d2d;\n\t\tPoint3d d3d;\n\t\tVertex vx;\n\t\tVertex3d v3x;\n\t\tPO po;\n        printf(\"%d\\n\",& PO::z);\n\t\tprintf(\"%d\\n\",&po);\n\t\tprintf(\"%d\\n\",&po.x);\n\t\tprintf(\"%d\\n\",&po.y);\n//\t\tprintf(\"%d\\n\",&po.origin);\n\t\tfloat PO::*p1=0;\n\t\tfloat PO::*p2=&PO::x;\n\t\tif(p1==p2)\n\t\t\t\tcout<<\"sma\"<<endl;\n\t\treturn 0;\n}          \n```\n##### gdb\n\n-g\ngdb \n\n+ break \ns\nset p obj <on/off>: C++GDBGDBoff show print object\nset p pertty <on/off>: on\n```c\nset p obj on\nset p pertty on\np \np /a ((void ***)d3d)[0]@18 // @18[0]0--\np /a ((void **)vx)[0]@16//\n(gdb) p b\n$1 = {_vptr.Base = 0x400a60 <vtable for Base+16>}\n(gdb) x/16x 0x400a60\n0x400a60 <_ZTV4Base+16>:    0x0040094c  0x00000000  0x72654437  0x64657669\n(gdb) x/16x 0x0040094c\n0x40094c <Base::f()>:   0xe5894855  0x10ec8348  0xf87d8948  0x400a15be\n0x40095c <Base::f()+16>:    0x10c0bf00  0xf9e80060  0xc9fffffd  0x485590c3\n0x40096c <Derived::f()+2>:  0x8348e589  0x894810ec  0x1bbef87d  0xbf00400a\n0x40097c <Derived::f()+18>: 0x006010c0  0xfffddbe8  0x66c3c9ff  0x00841f0f\n  (gdb) set $i = 0\n  (gdb) while $i < 10\n     >print $i\n     >p /a (*(void ***)obj)[$i]\n     >set $i = $i + 1\n     >end\nWhere \"obj\" is the object whose vtable you'd like to print, and 10 is the number of methods.\np /a (*(void ***)obj)[0]@10\ninfo address _ZTV3Bar\n```\n\n\n\n\n\n\n#### \n#### \nvptraccess section \n\n```cpp\nclass Point3d {\n     public :\n        virtual ~Point3d();\n     protected:\n        static Point3d origin\n        float x,y,z;\n}\n```\n\n1)&Point3d::z  --zclass obj\nprintf\n        \n+1,g++\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Point3d{\n\t\tpublic:\n\t//\t\t\tvirtual ~Point3d(){;}\n\t\t\t\tstatic Point3d origin;\n\t\t\t\tfloat x,y,z;\n};\nPoint3d Point3d::origin;\nint main ()\n{\n        Point3d p3d;\n\t\tprintf(\"&Point3d=%p\\n\",&p3d);\n\t\tprintf(\"&Point3d=%p\\n\",&p3d.x);//\n\t\tprintf(\"&Point3d=%p\\n\",&p3d.y);\n\t\tprintf(\"&Point3d::x=%p\\n\",&Point3d::x);//nil,Point3dvirtual func,8\n\t\tprintf(\"&Point3d::y=%p\\n\",&Point3d::y);\n\t\tprintf(\"&Point3d::z=%p\\n\",&Point3d::z);\n\t\tif((float*)&p3d==(float*)&p3d.x)cout<<\"yes\"<<endl; //yes\n\t\tfloat Point3d::*p1=0;\n\t\tfloat Point3d::*p2=&Point3d::x;\n\t\tfloat Point3d::*p3=NULL;\n\t\tif(p1==p2)//\n\t\t{\n\t\t\t\tcout<<\"p1==p2\"<<endl;//no output in g++\n\t\t}\n        if(p2==p3)\n\t\t{\n\t\t\t\tcout<<\"p2==p3\"<<endl;//no output in g++\n\t\t}\n\t\treturn 0;\n}```\nvirtual funcx8vptr\n:  \n```cpp\n                    float *p=origin.z  \n                    struct  Base1{int val1;}\n                    struct Base2 (int val2;}\n                    struct Derved:Base1,Base2{..}\n                    void func1(int Derved::*bmp,Derved *pd)//offset\n                    {\n                       pd->*dmp;.....```\n","source":"_posts/cpp-datamember-memory.md","raw":"---\ntitle: cpp_datamember_memory\ndate: 2018-06-09 14:46:49\ntags: cpp_class\ncategories: c&cpp\n---\n### c++ class  datamemory\nc++\n\n#### \"\"\n+ the simplest \n+ 1.2 class?  \n  size<!--more-->\n\n```c\nclass T{ };   ---1 char \nclass X :public virtual T{};--T  virtual base class subobject\nclass Y :public virtual T{};  --\nclass A:public X,public Y {};--```  \nclassTchar  \nXT  \nchar?  \nnonstatic memberint ,int\nchar\n\n+ intstructstructsizeofc89  \n\n```cpp\n#include<iostream>\n#define _sizeof(T) ((size_t)((T*)0+1))\n#include<stdio.h>\nusing namespace std;\nclass T {};\nclass X:public virtual T{};\nclass Y:public virtual T{};\nclass A :public X,public Y{};\nclass TT{public:int q;int x;};\nint main()\n{\n\t\tT t1,t2;\n\t\tint xx;\n\t\tif (&t1==&t2)\n\t\t\t\tcout<<\"same\"<<endl;\n\t\tprintf(\"%x\\n\",&t1);\n\t\tprintf(\"%x\\n\",&t2);\n        printf(\"%x\\n\",&xx);\n\t//\tint sie=(Y*)0+1;\n\t//\tprintf(\"%x\\n\",X{});\n\t    int s= _sizeof(TT);\n        cout<<_sizeof(T)<<endl;\n\t\tcout<<sizeof(TT)<<endl;\n\t\tcout<<sizeof(T)<<endl;\n\t\tcout<<sizeof(X)<<endl;\n\t\tcout<<sizeof(Y)<<endl;\n\t\tcout<<sizeof(A)<<endl;\n\t\treturn 0;\n}```\nt1,t2\n\n#### \n  \nvirtualvirtual table ,virtual base class subobject  \nAligmnment  \n\n\n8+1+3,8+1+3 ,1(X)+8+8+3(ali)\n\n#### datamember\n+ \nkdbg\n+ \n+ vptr\n\n+ align:C++access section(private,public,protectmember\naccess sections\n+ g++:\n\n```cpp\nclass TT{\n public:\n    int a;\n    char b;\n    };\n   sizeof{TT);   8\nclass TT{\n public:\n    int a;\n    char b;\n protect:\n    int c;\n    char d;\n    };\n   sizeof(TT)=16\nclass TT{\n public:\n    int a;\n    char b;\n protect:\n    int c;\n    char d;\n public:\n    int e;\n    char f;\n    };\n  sizeof(TT)=24 \nclass TT{\n public:\n    int a;\n    char b;\n    int e;\n    char f;\n protect:\n    int c;\n    char d;\n    };\n  sizeof(TT)=24\nclass TT{\n public:\n    int a;\n    int e;\n    char f;\n    char b;\n protect:\n    int c;\n    char d;\n    };\n  sizeof(TT)=20\n ```\n  cstruct \n\n\n#### data member\n+   \n\n```cpp\n        TT tt1;\n\t\tTT *tt2=&tt1;\n0x400b87 lea    -0x20(%rbp),%rax\n0x400b8b mov    %rax,-0x48(%rbp)\n\t\tint d=tt1.d;\n0x400b8f mov    -0x1c(%rbp),%eax\n0x400b92 mov    %eax,-0x68(%rbp)\n\t\tint f=tt2->d;\n0x400b95 mov    -0x48(%rbp),%rax\n0x400b99 mov    0x4(%rax),%eax\n0x400b9c mov    %eax,-0x64(%rbp)\n```\n\n+ static\n\n+ \nthis \n\n### \n\n\n#### \n##### \n```cpp\nclass Point2d{\n   public:\n    Point2d( float x=0.0,float y=0.0):_x(x),_y(y){};\n    float x() {return _x;}\n    float y() {return _y;}\n    void x(float newX) { _x=newX;}\n    void y(float newY) { _y=newY;}\n    void operator+= (const Point2d&  rhs) {\n        _x+=rhs.x();\n        _y+=rhs.y();\n        }\n    ...more member;\n   protected:\n      float _x,_y;\n};\nclass  Point3d: public Point2d{\n     public: \n        Point3d(float x=0.0,float y=0.0,float z=0.0):Point2d(x,y),_z(z){};\n        float z(){return _z;}\n        void z(float newZ){_z=newZ;} \n        void operator+=(const Point3d& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();\n           }\n          ...more member               \n     protected:\n      float _z;\n};\n```\n##### \n\n```cpp\nclass Concrete {\n  public:\n    ...\n  private:\n     int val;\n     char c1;\n     char c2;\n     char c3;\n     };```\nbytes;\n\n\n```cpp\n  class Concrete1{\n    public:\n    private: \n       int val;\n       char bit1;\n   };\n  class Concrete2public Concrete1{\n    public:\n    private:\n         char bit2;\n   };\n   class  Concrete3:public Concrete2{\n   public:\n   private:\n      char bit3;\n      };\n      ```\n   8+4+4=16\n  \n  + \n  c++\n  Concrete2  *pc2;\n            Concrete1 *pc1_1,*pc1_2;\n            *pc1_2=*pc1_1; -\n            pc1_1 = pc2; //pc1_1pc2;\n            *pc1_2=*pc1_1;//\n            \n            \n            \n\n\n\n##### \n```cpp\n class Point2d{\n   public:\n    Point2d( float x=0.0,float y=0.0):_x(x),_y(y){};\n    float x() {return _x;}\n    float y() {return _y;}\n    virtual float z(){return 0.0;} \n    virtual void z(float){}  \n    void x(float newX) { _x=newX;}\n    void y(float newY) { _y=newY;}\n    virtual void operator+= (const Point2d&  rhs) {\n        _x+=rhs.x();\n        _y+=rhs.y();\n        }\n    ...more member;\n   protected:\n      float _x,_y;\n};\nclass  Point3d: public Point2d{\n     public: \n        Point3d(float x=0.0,float y=0.0,float z=0.0):Point2d(x,y),_z(z){};\n        virtual float z(){return _z;}\n        virtual void z(float newZ){_z=newZ;}\n        \n        virtual void operator+=(const Point3d& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();\n           }\n          ...more member     \n     protected:\n      float _z;\n};```\n\n```cpp\nvoid fool(Point2d &p1,Point2d &p2){\n     p1+=p2;\n     }```\nPoint2dPoint3d \n  \n\n       virtual table\n       vptr\n\t   add constructor vptr setting\n       add destructor vptr virtual table dele\n\n2d&3d\n```cpp\n  virtual void operator+=(const Pointd& rhs) {\n           Point2d::operator+=(rhs);\n           _z+=rhs.z();//\n           }\nPoint2d p2d(...)\nPoint3d p3d(,,,,);\np3d+=p2d\n```\nvptrc\n\n\n\n##### \n\n\n\nvptrbase classvirtual funcderivedclass\nderived class base class+\n\n\n```cpp\nclass Point2d{ virtual \n   public: \n   protected:\n       float _x _y;\n       };\n class Point3d:public Point2d{\n    public:\n    protectd:\n       float _z;\n       }'\n  class Vertex {virtual\n      protected:\n         Vertex *next;\n    };    \n  class Vertex3d:public Point3d,public Vertex {\n    protexted:\n      float mumble;\n      } ```\n\nbase class\nbase class subobject\n```cpp\n  eg:  Vertex3d v3d;\n        Vertex *pv;\n        Pointd *p2d\n        POint3d  *p3d;  \n        pv=&v3d\n     pv=(Vertex*)(((char*)&v3d)+sizeof(Point3d));     \n     p2d=&v3d;\n         p3d=&v3d\n```              \n      Vertex3d*v3d;  pv=v3d;*v3d\n      \noffset\n##### \nios istream ostream\n\n+   \n2314234141\n```cpp\nclass ios{..}\nclass istream:public virtual ios{..}\nclass ostream:public virtual ios{..}\nclass iostream:\npublic istream, public ostream {..}```\n411\n+   \nistream ostream ios subobj iostreamios subobj \nbase class derived classreference)  \n  class virtual base class obj,istream  \n offset(objvirtual base class subject  \n \n istream ios\n```cpp\n  class Point2d _x _y\n class Point3d:public virtual Point2d  _z\n class Vertex:public virtual Point2d\n class Vertex3d:public Point3d public Vertex \n ```\n  istream iostream\n+  cfront derived class obj virtual base class virtual base\nclass member;\nvirtual base class \n                     void Point3d::operator+=(const Point3d &rhs) {\n                      _x+=rhs._x;\n                      _y+=rhs._y;\n                      _z+=rhs._z;\n                      }\n                     _vbcPoint2d->_x+=rhs.__vbcPoint2d->_x;//vbc==virtual base class\n                     ....\n                    \n                    Point2d *2d=3d;\n                    Point2d *2d=3d? 3d->__vbcPoint2d:0;\n                    \n                    \n + microsoft vbtablevirtual base class table virtual base class \n Bjarne: g++\n           virtual base class offset\n           this+__vbtr__point3d[-1])->_x+= (&rhs+rhs.__vptr__point3d[-1])->_x;\n           ...\n           Point2d *2d=3d?3d+3d->__vptr__point3d[-1]:0\n           \n + 1virtual funcvptrvtable. 2,32,3virtual func1\n vptr,point3dvptr,kdbgvptr\n \n+ \n+ 1\n+ virtual funcvptr?\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Point2d {\n                public: virtual float printx(){return _x;}\n\t\tprotected:\n\t\t\t\tfloat _x,_y;\n};\nclass Vertex:public virtual Point2d{\n\t\tprotected:\n\t\t\t\tVertex *next;\n};\nclass Point3d:public virtual Point2d{\n\t\tprotected:\n\t\t\t\tfloat _z;\n};\nclass Vertex3d:public Vertex,public Point3d{\n\t\tprotected:\n\t\t\t\tfloat mumble;\n};\nclass PO{\n\t\tpublic:\n\t\t    // virtual ~PO();\n\t\t\t static int origin;\n\t\t\t float x,y,z;\n};\nint PO::origin =3;\nint main()\n{\n\t\tPoint2d d2d;\n\t\tPoint3d d3d;\n\t\tVertex vx;\n\t\tVertex3d v3x;\n\t\tPO po;\n        printf(\"%d\\n\",& PO::z);\n\t\tprintf(\"%d\\n\",&po);\n\t\tprintf(\"%d\\n\",&po.x);\n\t\tprintf(\"%d\\n\",&po.y);\n//\t\tprintf(\"%d\\n\",&po.origin);\n\t\tfloat PO::*p1=0;\n\t\tfloat PO::*p2=&PO::x;\n\t\tif(p1==p2)\n\t\t\t\tcout<<\"sma\"<<endl;\n\t\treturn 0;\n}          \n```\n##### gdb\n\n-g\ngdb \n\n+ break \ns\nset p obj <on/off>: C++GDBGDBoff show print object\nset p pertty <on/off>: on\n```c\nset p obj on\nset p pertty on\np \np /a ((void ***)d3d)[0]@18 // @18[0]0--\np /a ((void **)vx)[0]@16//\n(gdb) p b\n$1 = {_vptr.Base = 0x400a60 <vtable for Base+16>}\n(gdb) x/16x 0x400a60\n0x400a60 <_ZTV4Base+16>:    0x0040094c  0x00000000  0x72654437  0x64657669\n(gdb) x/16x 0x0040094c\n0x40094c <Base::f()>:   0xe5894855  0x10ec8348  0xf87d8948  0x400a15be\n0x40095c <Base::f()+16>:    0x10c0bf00  0xf9e80060  0xc9fffffd  0x485590c3\n0x40096c <Derived::f()+2>:  0x8348e589  0x894810ec  0x1bbef87d  0xbf00400a\n0x40097c <Derived::f()+18>: 0x006010c0  0xfffddbe8  0x66c3c9ff  0x00841f0f\n  (gdb) set $i = 0\n  (gdb) while $i < 10\n     >print $i\n     >p /a (*(void ***)obj)[$i]\n     >set $i = $i + 1\n     >end\nWhere \"obj\" is the object whose vtable you'd like to print, and 10 is the number of methods.\np /a (*(void ***)obj)[0]@10\ninfo address _ZTV3Bar\n```\n\n\n\n\n\n\n#### \n#### \nvptraccess section \n\n```cpp\nclass Point3d {\n     public :\n        virtual ~Point3d();\n     protected:\n        static Point3d origin\n        float x,y,z;\n}\n```\n\n1)&Point3d::z  --zclass obj\nprintf\n        \n+1,g++\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Point3d{\n\t\tpublic:\n\t//\t\t\tvirtual ~Point3d(){;}\n\t\t\t\tstatic Point3d origin;\n\t\t\t\tfloat x,y,z;\n};\nPoint3d Point3d::origin;\nint main ()\n{\n        Point3d p3d;\n\t\tprintf(\"&Point3d=%p\\n\",&p3d);\n\t\tprintf(\"&Point3d=%p\\n\",&p3d.x);//\n\t\tprintf(\"&Point3d=%p\\n\",&p3d.y);\n\t\tprintf(\"&Point3d::x=%p\\n\",&Point3d::x);//nil,Point3dvirtual func,8\n\t\tprintf(\"&Point3d::y=%p\\n\",&Point3d::y);\n\t\tprintf(\"&Point3d::z=%p\\n\",&Point3d::z);\n\t\tif((float*)&p3d==(float*)&p3d.x)cout<<\"yes\"<<endl; //yes\n\t\tfloat Point3d::*p1=0;\n\t\tfloat Point3d::*p2=&Point3d::x;\n\t\tfloat Point3d::*p3=NULL;\n\t\tif(p1==p2)//\n\t\t{\n\t\t\t\tcout<<\"p1==p2\"<<endl;//no output in g++\n\t\t}\n        if(p2==p3)\n\t\t{\n\t\t\t\tcout<<\"p2==p3\"<<endl;//no output in g++\n\t\t}\n\t\treturn 0;\n}```\nvirtual funcx8vptr\n:  \n```cpp\n                    float *p=origin.z  \n                    struct  Base1{int val1;}\n                    struct Base2 (int val2;}\n                    struct Derved:Base1,Base2{..}\n                    void func1(int Derved::*bmp,Derved *pd)//offset\n                    {\n                       pd->*dmp;.....```\n","slug":"cpp-datamember-memory","published":1,"updated":"2018-06-09T08:01:48.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghon001300jxqz9l2sek","content":"<h3 id=\"c-class-datamemory\"><a href=\"#c-class-datamemory\" class=\"headerlink\" title=\"c++ class  datamemory\"></a>c++ class  datamemory</h3><p>c++</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>the simplest </li>\n<li>1.2 class?<br>  size<a id=\"more\"></a></li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span>&#123;</span> &#125;;   --<span class=\"number\">-1</span> <span class=\"keyword\">char</span> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;--T  <span class=\"keyword\">virtual</span> base <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">subobject</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Y</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;  --</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y &#123;&#125;;--```  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">T</span><span class=\"title\">char</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">X</span><span class=\"title\">T</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">char</span>?  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">nonstatic</span> <span class=\"title\">member</span><span class=\"title\">int</span> ,<span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">char</span></span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">+ <span class=\"title\">int</span><span class=\"title\">struct</span><span class=\"title\">struct</span><span class=\"title\">sizeof</span><span class=\"title\">c89</span>  </span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">include</span>&lt;iostream&gt;</span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">define</span> _<span class=\"title\">sizeof</span>(<span class=\"title\">T</span>) ((<span class=\"title\">size_t</span>)((<span class=\"title\">T</span>*)0+1))</span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">include</span>&lt;stdio.h&gt;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">using</span> <span class=\"title\">namespace</span> <span class=\"title\">std</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span> &#123;</span>&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Y</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> :</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span><span class=\"keyword\">public</span>:<span class=\"keyword\">int</span> q;<span class=\"keyword\">int</span> x;&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tT t1,t2;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> xx;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (&amp;t1==&amp;t2)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"same\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;t1);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;t2);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;xx);</span><br><span class=\"line\">\t<span class=\"comment\">//\tint sie=(Y*)0+1;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tprintf(\"%x\\n\",X&#123;&#125;);</span></span><br><span class=\"line\">\t    <span class=\"keyword\">int</span> s= _sizeof(TT);</span><br><span class=\"line\">        <span class=\"built_in\">cout</span>&lt;&lt;_sizeof(T)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(TT)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(T)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(X)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(Y)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(A)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>t1,t2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>virtualvirtual table ,virtual base class subobject<br>Aligmnment<br></p>\n<p>8+1+3,8+1+3 ,1(X)+8+8+3(ali)</p>\n<h4 id=\"datamember\"><a href=\"#datamember\" class=\"headerlink\" title=\"datamember\"></a>datamember</h4><ul>\n<li><br>kdbg</li>\n<li></li>\n<li>vptr<br></li>\n<li>align:C++access section(private,public,protectmember<br>access sections</li>\n<li>g++:</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">   <span class=\"keyword\">sizeof</span>&#123;TT);   <span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">   <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">16</span></span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">24</span> </span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">24</span></span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n<p>  cstruct </p>\n<h4 id=\"data-member\"><a href=\"#data-member\" class=\"headerlink\" title=\"data member\"></a>data member</h4><ul>\n<li><p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        TT tt1;</span><br><span class=\"line\">\t\tTT *tt2=&amp;tt1;</span><br><span class=\"line\"><span class=\"number\">0x400b87</span> lea    <span class=\"number\">-0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400b8b</span> mov    %rax,<span class=\"number\">-0x48</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> d=tt1.d;</span><br><span class=\"line\"><span class=\"number\">0x400b8f</span> mov    <span class=\"number\">-0x1c</span>(%rbp),%eax</span><br><span class=\"line\"><span class=\"number\">0x400b92</span> mov    %eax,<span class=\"number\">-0x68</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> f=tt2-&gt;d;</span><br><span class=\"line\"><span class=\"number\">0x400b95</span> mov    <span class=\"number\">-0x48</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400b99</span> mov    <span class=\"number\">0x4</span>(%rax),%eax</span><br><span class=\"line\"><span class=\"number\">0x400b9c</span> mov    %eax,<span class=\"number\">-0x64</span>(%rbp)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>static<br></p>\n</li>\n<li><br>this </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Point2d( <span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>):_x(x),_y(y)&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">x</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">y</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _y;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">x</span><span class=\"params\">(<span class=\"keyword\">float</span> newX)</span> </span>&#123; _x=newX;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">y</span><span class=\"params\">(<span class=\"keyword\">float</span> newY)</span> </span>&#123; _y=newY;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+= (<span class=\"keyword\">const</span> Point2d&amp;  rhs) &#123;</span><br><span class=\"line\">        _x+=rhs.x();</span><br><span class=\"line\">        _y+=rhs.y();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ...more member;</span><br><span class=\"line\">   <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Point3d</span>:</span> <span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span>: </span><br><span class=\"line\">        Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point2d(x,y),_z(z)&#123;&#125;;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _z;&#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span> newZ)</span></span>&#123;_z=newZ;&#125; </span><br><span class=\"line\">        <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Point3d&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">          ...more member               </span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete</span> &#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  <span class=\"keyword\">private</span>:</span><br><span class=\"line\">     <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c1;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c2;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c3;</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>bytes;</p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete1</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"keyword\">private</span>: </span><br><span class=\"line\">     <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> bit1;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete2</span><span class=\"title\">public</span> <span class=\"title\">Concrete1</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"keyword\">private</span>:</span><br><span class=\"line\">       <span class=\"keyword\">char</span> bit2;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Concrete3</span>:</span><span class=\"keyword\">public</span> Concrete2&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">char</span> bit3;</span><br><span class=\"line\">    &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>   8+4+4=16</p>\n<ul>\n<li><br>c++<br>Concrete2  *pc2;<pre><code>Concrete1 *pc1_1,*pc1_2;\n*pc1_2=*pc1_1; -\npc1_1 = pc2; //pc1_1pc2;\n*pc1_2=*pc1_1;//\n</code></pre></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Point2d( <span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>):_x(x),_y(y)&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">x</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">y</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _y;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">0.0</span>;&#125; </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span></span>&#123;&#125;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">x</span><span class=\"params\">(<span class=\"keyword\">float</span> newX)</span> </span>&#123; _x=newX;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">y</span><span class=\"params\">(<span class=\"keyword\">float</span> newY)</span> </span>&#123; _y=newY;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+= (<span class=\"keyword\">const</span> Point2d&amp;  rhs) &#123;</span><br><span class=\"line\">        _x+=rhs.x();</span><br><span class=\"line\">        _y+=rhs.y();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ...more member;</span><br><span class=\"line\">   <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Point3d</span>:</span> <span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span>: </span><br><span class=\"line\">        Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point2d(x,y),_z(z)&#123;&#125;;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _z;&#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span> newZ)</span></span>&#123;_z=newZ;&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Point3d&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">          ...more member     </span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">fool</span><span class=\"params\">(Point2d &amp;p1,Point2d &amp;p2)</span></span>&#123;</span><br><span class=\"line\">p1+=p2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Point2dPoint3d <br>  </p>\n<pre><code>virtual table\nvptr\nadd constructor vptr setting\nadd destructor vptr virtual table dele\n</code></pre><p>2d&amp;3d<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Pointd&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();<span class=\"comment\">//</span></span><br><span class=\"line\">           &#125;</span><br><span class=\"line\"><span class=\"function\">Point2d <span class=\"title\">p2d</span><span class=\"params\">(...)</span></span></span><br><span class=\"line\"><span class=\"function\">Point3d <span class=\"title\">p3d</span><span class=\"params\">(,,,,)</span></span>;</span><br><span class=\"line\">p3d+=p2d</span><br></pre></td></tr></table></figure></p>\n<p>vptrc<br></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<p>vptrbase classvirtual funcderivedclass<br>derived class base class+</p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span> <span class=\"keyword\">virtual</span> </span><br><span class=\"line\">  <span class=\"keyword\">public</span>: </span><br><span class=\"line\">  <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x _y;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   protectd:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">      &#125;'</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span> &#123;</span><span class=\"keyword\">virtual</span></span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        Vertex *next;</span><br><span class=\"line\">   &#125;;    </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex &#123;</span><br><span class=\"line\">   protexted:</span><br><span class=\"line\">     <span class=\"keyword\">float</span> mumble;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure></p>\n<p>base class<br>base class subobject<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  eg:  Vertex3d v3d;</span><br><span class=\"line\">        Vertex *pv;</span><br><span class=\"line\">        Pointd *p2d</span><br><span class=\"line\">        POint3d  *p3d;  </span><br><span class=\"line\">        pv=&amp;v3d</span><br><span class=\"line\">     pv=(Vertex*)(((<span class=\"keyword\">char</span>*)&amp;v3d)+<span class=\"keyword\">sizeof</span>(Point3d));     </span><br><span class=\"line\">     p2d=&amp;v3d;</span><br><span class=\"line\">         p3d=&amp;v3d</span><br><span class=\"line\">```              </span><br><span class=\"line\">      Vertex3d*v3d;  pv=v3d;*v3d</span><br><span class=\"line\">      </span><br><span class=\"line\">offset</span><br><span class=\"line\">##### </span><br><span class=\"line\">ios istream ostream</span><br><span class=\"line\"></span><br><span class=\"line\">+   </span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"number\">3</span><span class=\"number\">1</span><span class=\"number\">4</span><span class=\"number\">2</span><span class=\"number\">3</span><span class=\"number\">4</span><span class=\"number\">1</span><span class=\"number\">4</span><span class=\"number\">1</span></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ios</span>&#123;</span>..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">istream</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> ios&#123;..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ostream</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> ios&#123;..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">iostream</span>:</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> istream, <span class=\"keyword\">public</span> ostream &#123;..&#125;</span><br></pre></td></tr></table></figure></p>\n<p>411</p>\n<ul>\n<li><p><br>istream ostream ios subobj iostreamios subobj <br>base class derived classreference)<br> class virtual base class obj,istream<br>offset(objvirtual base class subject  </p>\n<p>istream ios</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span> _<span class=\"title\">x</span> _<span class=\"title\">y</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d  _z</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d <span class=\"keyword\">public</span> Vertex</span><br></pre></td></tr></table></figure>\n<p> istream iostream</p>\n</li>\n<li><p>cfront derived class obj virtual base class virtual base<br>class member;<br>virtual base class </p>\n<pre><code> void Point3d::operator+=(const Point3d &amp;rhs) {\n  _x+=rhs._x;\n  _y+=rhs._y;\n  _z+=rhs._z;\n  }\n _vbcPoint2d-&gt;_x+=rhs.__vbcPoint2d-&gt;_x;//vbc==virtual base class\n ....\n\nPoint2d *2d=3d;\nPoint2d *2d=3d? 3d-&gt;__vbcPoint2d:0;\n</code></pre></li>\n</ul>\n<ul>\n<li><p>microsoft vbtablevirtual base class table virtual base class <br>Bjarne: g++</p>\n<pre><code>virtual base class offset\nthis+__vbtr__point3d[-1])-&gt;_x+= (&amp;rhs+rhs.__vptr__point3d[-1])-&gt;_x;\n...\nPoint2d *2d=3d?3d+3d-&gt;__vptr__point3d[-1]:0\n</code></pre></li>\n<li><p>1virtual funcvptrvtable. 2,32,3virtual func1<br>vptr,point3dvptr,kdbgvptr</p>\n</li>\n</ul>\n<ul>\n<li></li>\n<li>1</li>\n<li>virtual funcvptr?<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span> &#123;</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span>: <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">printx</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\tVertex *next;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Vertex,<span class=\"keyword\">public</span> Point3d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PO</span>&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t    <span class=\"comment\">// virtual ~PO();</span></span><br><span class=\"line\">\t\t\t <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> origin;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> PO::origin =<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tPoint2d d2d;</span><br><span class=\"line\">\t\tPoint3d d3d;</span><br><span class=\"line\">\t\tVertex vx;</span><br><span class=\"line\">\t\tVertex3d v3x;</span><br><span class=\"line\">\t\tPO po;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp; PO::z);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po.x);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po.y);</span><br><span class=\"line\"><span class=\"comment\">//\t\tprintf(\"%d\\n\",&amp;po.origin);</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> PO::*p1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> PO::*p2=&amp;PO::x;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(p1==p2)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"sma\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"gdb\"><a href=\"#gdb\" class=\"headerlink\" title=\"gdb\"></a>gdb</h5><p><br>-g<br>gdb </p>\n<ul>\n<li>break <br>s<br>set p obj &lt;on/off&gt;: C++GDBGDBoff show print object<br>set p pertty &lt;on/off&gt;: on<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> p obj on</span><br><span class=\"line\"><span class=\"built_in\">set</span> p pertty on</span><br><span class=\"line\">p </span><br><span class=\"line\">p /a ((<span class=\"keyword\">void</span> ***)d3d)[<span class=\"number\">0</span>]@<span class=\"number\">18</span> <span class=\"comment\">// @18[0]0--</span></span><br><span class=\"line\">p /a ((<span class=\"keyword\">void</span> **)vx)[<span class=\"number\">0</span>]@<span class=\"number\">16</span><span class=\"comment\">//</span></span><br><span class=\"line\">(gdb) p b</span><br><span class=\"line\">$<span class=\"number\">1</span> = &#123;_vptr.Base = <span class=\"number\">0x400a60</span> &lt;vtable <span class=\"keyword\">for</span> Base+<span class=\"number\">16</span>&gt;&#125;</span><br><span class=\"line\">(gdb) x/<span class=\"number\">16</span>x <span class=\"number\">0x400a60</span></span><br><span class=\"line\"><span class=\"number\">0x400a60</span> &lt;_ZTV4Base+<span class=\"number\">16</span>&gt;:    <span class=\"number\">0x0040094c</span>  <span class=\"number\">0x00000000</span>  <span class=\"number\">0x72654437</span>  <span class=\"number\">0x64657669</span></span><br><span class=\"line\">(gdb) x/<span class=\"number\">16</span>x <span class=\"number\">0x0040094c</span></span><br><span class=\"line\"><span class=\"number\">0x40094c</span> &lt;Base::f()&gt;:   <span class=\"number\">0xe5894855</span>  <span class=\"number\">0x10ec8348</span>  <span class=\"number\">0xf87d8948</span>  <span class=\"number\">0x400a15be</span></span><br><span class=\"line\"><span class=\"number\">0x40095c</span> &lt;Base::f()+<span class=\"number\">16</span>&gt;:    <span class=\"number\">0x10c0bf00</span>  <span class=\"number\">0xf9e80060</span>  <span class=\"number\">0xc9fffffd</span>  <span class=\"number\">0x485590c3</span></span><br><span class=\"line\"><span class=\"number\">0x40096c</span> &lt;Derived::f()+<span class=\"number\">2</span>&gt;:  <span class=\"number\">0x8348e589</span>  <span class=\"number\">0x894810ec</span>  <span class=\"number\">0x1bbef87d</span>  <span class=\"number\">0xbf00400a</span></span><br><span class=\"line\"><span class=\"number\">0x40097c</span> &lt;Derived::f()+<span class=\"number\">18</span>&gt;: <span class=\"number\">0x006010c0</span>  <span class=\"number\">0xfffddbe8</span>  <span class=\"number\">0x66c3c9ff</span>  <span class=\"number\">0x00841f0f</span></span><br><span class=\"line\">  (gdb) <span class=\"built_in\">set</span> $i = <span class=\"number\">0</span></span><br><span class=\"line\">  (gdb) <span class=\"keyword\">while</span> $i &lt; <span class=\"number\">10</span></span><br><span class=\"line\">     &gt;print $i</span><br><span class=\"line\">     &gt;p /a (*(<span class=\"keyword\">void</span> ***)obj)[$i]</span><br><span class=\"line\">     &gt;<span class=\"built_in\">set</span> $i = $i + <span class=\"number\">1</span></span><br><span class=\"line\">     &gt;end</span><br><span class=\"line\">Where <span class=\"string\">\"obj\"</span> is the object whose vtable you'd like to print, <span class=\"keyword\">and</span> <span class=\"number\">10</span> is the number of methods.</span><br><span class=\"line\">p /a (*(<span class=\"keyword\">void</span> ***)obj)[<span class=\"number\">0</span>]@<span class=\"number\">10</span></span><br><span class=\"line\">info address _ZTV3Bar</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vptraccess section <br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span> &#123;</span></span><br><span class=\"line\">     <span class=\"keyword\">public</span> :</span><br><span class=\"line\">        <span class=\"keyword\">virtual</span> ~Point3d();</span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"keyword\">static</span> Point3d origin</span><br><span class=\"line\">        <span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>1)&amp;Point3d::z  zclass obj<br>printf</p>\n<p>+1,g++<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"comment\">//\t\t\tvirtual ~Point3d()&#123;;&#125;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">static</span> Point3d origin;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">Point3d Point3d::origin;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">        Point3d p3d;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d.x);<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d.y);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::x=%p\\n\"</span>,&amp;Point3d::x);<span class=\"comment\">//nil,Point3dvirtual func,8</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::y=%p\\n\"</span>,&amp;Point3d::y);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::z=%p\\n\"</span>,&amp;Point3d::z);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>((<span class=\"keyword\">float</span>*)&amp;p3d==(<span class=\"keyword\">float</span>*)&amp;p3d.x)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"yes\"</span>&lt;&lt;<span class=\"built_in\">endl</span>; <span class=\"comment\">//yes</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p2=&amp;Point3d::x;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p3=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(p1==p2)<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p1==p2\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//no output in g++</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(p2==p3)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p2==p3\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//no output in g++</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>virtual funcx8vptr<br>:<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">float</span> *p=origin.z  </span><br><span class=\"line\">struct  Base1&#123;<span class=\"keyword\">int</span> val1;&#125;</span><br><span class=\"line\"><span class=\"function\">struct <span class=\"title\">Base2</span> <span class=\"params\">(<span class=\"keyword\">int</span> val2;&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">struct Derved:Base1,Base2&#123;..&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"><span class=\"keyword\">void</span> func1(<span class=\"keyword\">int</span> Derved::*bmp,Derved *pd)</span><span class=\"comment\">//offset</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   pd-&gt;*dmp;.....</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-class-datamemory\"><a href=\"#c-class-datamemory\" class=\"headerlink\" title=\"c++ class  datamemory\"></a>c++ class  datamemory</h3><p>c++</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>the simplest </li>\n<li>1.2 class?<br>  size","more":"</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span>&#123;</span> &#125;;   --<span class=\"number\">-1</span> <span class=\"keyword\">char</span> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;--T  <span class=\"keyword\">virtual</span> base <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">subobject</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Y</span> :</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;  --</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y &#123;&#125;;--```  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span><span class=\"title\">T</span><span class=\"title\">char</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">X</span><span class=\"title\">T</span>  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">char</span>?  </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">nonstatic</span> <span class=\"title\">member</span><span class=\"title\">int</span> ,<span class=\"title\">int</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">char</span></span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">+ <span class=\"title\">int</span><span class=\"title\">struct</span><span class=\"title\">struct</span><span class=\"title\">sizeof</span><span class=\"title\">c89</span>  </span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">```<span class=\"title\">cpp</span></span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">include</span>&lt;iostream&gt;</span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">define</span> _<span class=\"title\">sizeof</span>(<span class=\"title\">T</span>) ((<span class=\"title\">size_t</span>)((<span class=\"title\">T</span>*)0+1))</span></span><br><span class=\"line\"><span class=\"class\">#<span class=\"title\">include</span>&lt;stdio.h&gt;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">using</span> <span class=\"title\">namespace</span> <span class=\"title\">std</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">T</span> &#123;</span>&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">X</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Y</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> T&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> :</span><span class=\"keyword\">public</span> X,<span class=\"keyword\">public</span> Y&#123;&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span><span class=\"keyword\">public</span>:<span class=\"keyword\">int</span> q;<span class=\"keyword\">int</span> x;&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tT t1,t2;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> xx;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (&amp;t1==&amp;t2)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"same\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;t1);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;t2);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,&amp;xx);</span><br><span class=\"line\">\t<span class=\"comment\">//\tint sie=(Y*)0+1;</span></span><br><span class=\"line\">\t<span class=\"comment\">//\tprintf(\"%x\\n\",X&#123;&#125;);</span></span><br><span class=\"line\">\t    <span class=\"keyword\">int</span> s= _sizeof(TT);</span><br><span class=\"line\">        <span class=\"built_in\">cout</span>&lt;&lt;_sizeof(T)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(TT)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(T)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(X)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(Y)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"keyword\">sizeof</span>(A)&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>t1,t2</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>virtualvirtual table ,virtual base class subobject<br>Aligmnment<br></p>\n<p>8+1+3,8+1+3 ,1(X)+8+8+3(ali)</p>\n<h4 id=\"datamember\"><a href=\"#datamember\" class=\"headerlink\" title=\"datamember\"></a>datamember</h4><ul>\n<li><br>kdbg</li>\n<li></li>\n<li>vptr<br></li>\n<li>align:C++access section(private,public,protectmember<br>access sections</li>\n<li>g++:</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">   <span class=\"keyword\">sizeof</span>&#123;TT);   <span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TT</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">   <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">16</span></span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">24</span> </span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">24</span></span><br><span class=\"line\">class TT&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> e;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> f;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> b;</span><br><span class=\"line\"> protect:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> d;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">sizeof</span>(TT)=<span class=\"number\">20</span></span><br></pre></td></tr></table></figure>\n<p>  cstruct </p>\n<h4 id=\"data-member\"><a href=\"#data-member\" class=\"headerlink\" title=\"data member\"></a>data member</h4><ul>\n<li><p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        TT tt1;</span><br><span class=\"line\">\t\tTT *tt2=&amp;tt1;</span><br><span class=\"line\"><span class=\"number\">0x400b87</span> lea    <span class=\"number\">-0x20</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400b8b</span> mov    %rax,<span class=\"number\">-0x48</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> d=tt1.d;</span><br><span class=\"line\"><span class=\"number\">0x400b8f</span> mov    <span class=\"number\">-0x1c</span>(%rbp),%eax</span><br><span class=\"line\"><span class=\"number\">0x400b92</span> mov    %eax,<span class=\"number\">-0x68</span>(%rbp)</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> f=tt2-&gt;d;</span><br><span class=\"line\"><span class=\"number\">0x400b95</span> mov    <span class=\"number\">-0x48</span>(%rbp),%rax</span><br><span class=\"line\"><span class=\"number\">0x400b99</span> mov    <span class=\"number\">0x4</span>(%rax),%eax</span><br><span class=\"line\"><span class=\"number\">0x400b9c</span> mov    %eax,<span class=\"number\">-0x64</span>(%rbp)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>static<br></p>\n</li>\n<li><br>this </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Point2d( <span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>):_x(x),_y(y)&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">x</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">y</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _y;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">x</span><span class=\"params\">(<span class=\"keyword\">float</span> newX)</span> </span>&#123; _x=newX;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">y</span><span class=\"params\">(<span class=\"keyword\">float</span> newY)</span> </span>&#123; _y=newY;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+= (<span class=\"keyword\">const</span> Point2d&amp;  rhs) &#123;</span><br><span class=\"line\">        _x+=rhs.x();</span><br><span class=\"line\">        _y+=rhs.y();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ...more member;</span><br><span class=\"line\">   <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Point3d</span>:</span> <span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span>: </span><br><span class=\"line\">        Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point2d(x,y),_z(z)&#123;&#125;;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _z;&#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span> newZ)</span></span>&#123;_z=newZ;&#125; </span><br><span class=\"line\">        <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Point3d&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">          ...more member               </span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete</span> &#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  <span class=\"keyword\">private</span>:</span><br><span class=\"line\">     <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c1;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c2;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> c3;</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>bytes;</p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete1</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"keyword\">private</span>: </span><br><span class=\"line\">     <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">     <span class=\"keyword\">char</span> bit1;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Concrete2</span><span class=\"title\">public</span> <span class=\"title\">Concrete1</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"keyword\">private</span>:</span><br><span class=\"line\">       <span class=\"keyword\">char</span> bit2;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Concrete3</span>:</span><span class=\"keyword\">public</span> Concrete2&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">char</span> bit3;</span><br><span class=\"line\">    &#125;;</span><br></pre></td></tr></table></figure></p>\n<p>   8+4+4=16</p>\n<ul>\n<li><br>c++<br>Concrete2  *pc2;<pre><code>Concrete1 *pc1_1,*pc1_2;\n*pc1_2=*pc1_1; -\npc1_1 = pc2; //pc1_1pc2;\n*pc1_2=*pc1_1;//\n</code></pre></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Point2d( <span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>):_x(x),_y(y)&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">x</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">float</span> <span class=\"title\">y</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> _y;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">0.0</span>;&#125; </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span></span>&#123;&#125;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">x</span><span class=\"params\">(<span class=\"keyword\">float</span> newX)</span> </span>&#123; _x=newX;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">y</span><span class=\"params\">(<span class=\"keyword\">float</span> newY)</span> </span>&#123; _y=newY;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+= (<span class=\"keyword\">const</span> Point2d&amp;  rhs) &#123;</span><br><span class=\"line\">        _x+=rhs.x();</span><br><span class=\"line\">        _y+=rhs.y();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ...more member;</span><br><span class=\"line\">   <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span>  <span class=\"title\">Point3d</span>:</span> <span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">     <span class=\"keyword\">public</span>: </span><br><span class=\"line\">        Point3d(<span class=\"keyword\">float</span> x=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> y=<span class=\"number\">0.0</span>,<span class=\"keyword\">float</span> z=<span class=\"number\">0.0</span>):Point2d(x,y),_z(z)&#123;&#125;;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _z;&#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">z</span><span class=\"params\">(<span class=\"keyword\">float</span> newZ)</span></span>&#123;_z=newZ;&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Point3d&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">          ...more member     </span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">fool</span><span class=\"params\">(Point2d &amp;p1,Point2d &amp;p2)</span></span>&#123;</span><br><span class=\"line\">p1+=p2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Point2dPoint3d <br>  </p>\n<pre><code>virtual table\nvptr\nadd constructor vptr setting\nadd destructor vptr virtual table dele\n</code></pre><p>2d&amp;3d<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>+=(<span class=\"keyword\">const</span> Pointd&amp; rhs) &#123;</span><br><span class=\"line\">           Point2d::<span class=\"keyword\">operator</span>+=(rhs);</span><br><span class=\"line\">           _z+=rhs.z();<span class=\"comment\">//</span></span><br><span class=\"line\">           &#125;</span><br><span class=\"line\"><span class=\"function\">Point2d <span class=\"title\">p2d</span><span class=\"params\">(...)</span></span></span><br><span class=\"line\"><span class=\"function\">Point3d <span class=\"title\">p3d</span><span class=\"params\">(,,,,)</span></span>;</span><br><span class=\"line\">p3d+=p2d</span><br></pre></td></tr></table></figure></p>\n<p>vptrc<br></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p><br></p>\n<p>vptrbase classvirtual funcderivedclass<br>derived class base class+</p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span>&#123;</span> <span class=\"keyword\">virtual</span> </span><br><span class=\"line\">  <span class=\"keyword\">public</span>: </span><br><span class=\"line\">  <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _x _y;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> Point2d&#123;</span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   protectd:</span><br><span class=\"line\">      <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">      &#125;'</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span> &#123;</span><span class=\"keyword\">virtual</span></span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        Vertex *next;</span><br><span class=\"line\">   &#125;;    </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d,<span class=\"keyword\">public</span> Vertex &#123;</span><br><span class=\"line\">   protexted:</span><br><span class=\"line\">     <span class=\"keyword\">float</span> mumble;</span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure></p>\n<p>base class<br>base class subobject<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  eg:  Vertex3d v3d;</span><br><span class=\"line\">        Vertex *pv;</span><br><span class=\"line\">        Pointd *p2d</span><br><span class=\"line\">        POint3d  *p3d;  </span><br><span class=\"line\">        pv=&amp;v3d</span><br><span class=\"line\">     pv=(Vertex*)(((<span class=\"keyword\">char</span>*)&amp;v3d)+<span class=\"keyword\">sizeof</span>(Point3d));     </span><br><span class=\"line\">     p2d=&amp;v3d;</span><br><span class=\"line\">         p3d=&amp;v3d</span><br><span class=\"line\">```              </span><br><span class=\"line\">      Vertex3d*v3d;  pv=v3d;*v3d</span><br><span class=\"line\">      </span><br><span class=\"line\">offset</span><br><span class=\"line\">##### </span><br><span class=\"line\">ios istream ostream</span><br><span class=\"line\"></span><br><span class=\"line\">+   </span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"number\">3</span><span class=\"number\">1</span><span class=\"number\">4</span><span class=\"number\">2</span><span class=\"number\">3</span><span class=\"number\">4</span><span class=\"number\">1</span><span class=\"number\">4</span><span class=\"number\">1</span></span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ios</span>&#123;</span>..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">istream</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> ios&#123;..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ostream</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> ios&#123;..&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">iostream</span>:</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> istream, <span class=\"keyword\">public</span> ostream &#123;..&#125;</span><br></pre></td></tr></table></figure></p>\n<p>411</p>\n<ul>\n<li><p><br>istream ostream ios subobj iostreamios subobj <br>base class derived classreference)<br> class virtual base class obj,istream<br>offset(objvirtual base class subject  </p>\n<p>istream ios</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span> _<span class=\"title\">x</span> _<span class=\"title\">y</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d  _z</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Point3d <span class=\"keyword\">public</span> Vertex</span><br></pre></td></tr></table></figure>\n<p> istream iostream</p>\n</li>\n<li><p>cfront derived class obj virtual base class virtual base<br>class member;<br>virtual base class </p>\n<pre><code> void Point3d::operator+=(const Point3d &amp;rhs) {\n  _x+=rhs._x;\n  _y+=rhs._y;\n  _z+=rhs._z;\n  }\n _vbcPoint2d-&gt;_x+=rhs.__vbcPoint2d-&gt;_x;//vbc==virtual base class\n ....\n\nPoint2d *2d=3d;\nPoint2d *2d=3d? 3d-&gt;__vbcPoint2d:0;\n</code></pre></li>\n</ul>\n<ul>\n<li><p>microsoft vbtablevirtual base class table virtual base class <br>Bjarne: g++</p>\n<pre><code>virtual base class offset\nthis+__vbtr__point3d[-1])-&gt;_x+= (&amp;rhs+rhs.__vptr__point3d[-1])-&gt;_x;\n...\nPoint2d *2d=3d?3d+3d-&gt;__vptr__point3d[-1]:0\n</code></pre></li>\n<li><p>1virtual funcvptrvtable. 2,32,3virtual func1<br>vptr,point3dvptr,kdbgvptr</p>\n</li>\n</ul>\n<ul>\n<li></li>\n<li>1</li>\n<li>virtual funcvptr?<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point2d</span> &#123;</span></span><br><span class=\"line\">                <span class=\"keyword\">public</span>: <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">printx</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> _x;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\tVertex *next;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> Point2d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vertex3d</span>:</span><span class=\"keyword\">public</span> Vertex,<span class=\"keyword\">public</span> Point3d&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">protected</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mumble;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PO</span>&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t    <span class=\"comment\">// virtual ~PO();</span></span><br><span class=\"line\">\t\t\t <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> origin;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">int</span> PO::origin =<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tPoint2d d2d;</span><br><span class=\"line\">\t\tPoint3d d3d;</span><br><span class=\"line\">\t\tVertex vx;</span><br><span class=\"line\">\t\tVertex3d v3x;</span><br><span class=\"line\">\t\tPO po;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp; PO::z);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po.x);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,&amp;po.y);</span><br><span class=\"line\"><span class=\"comment\">//\t\tprintf(\"%d\\n\",&amp;po.origin);</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> PO::*p1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> PO::*p2=&amp;PO::x;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(p1==p2)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"sma\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"gdb\"><a href=\"#gdb\" class=\"headerlink\" title=\"gdb\"></a>gdb</h5><p><br>-g<br>gdb </p>\n<ul>\n<li>break <br>s<br>set p obj &lt;on/off&gt;: C++GDBGDBoff show print object<br>set p pertty &lt;on/off&gt;: on<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> p obj on</span><br><span class=\"line\"><span class=\"built_in\">set</span> p pertty on</span><br><span class=\"line\">p </span><br><span class=\"line\">p /a ((<span class=\"keyword\">void</span> ***)d3d)[<span class=\"number\">0</span>]@<span class=\"number\">18</span> <span class=\"comment\">// @18[0]0--</span></span><br><span class=\"line\">p /a ((<span class=\"keyword\">void</span> **)vx)[<span class=\"number\">0</span>]@<span class=\"number\">16</span><span class=\"comment\">//</span></span><br><span class=\"line\">(gdb) p b</span><br><span class=\"line\">$<span class=\"number\">1</span> = &#123;_vptr.Base = <span class=\"number\">0x400a60</span> &lt;vtable <span class=\"keyword\">for</span> Base+<span class=\"number\">16</span>&gt;&#125;</span><br><span class=\"line\">(gdb) x/<span class=\"number\">16</span>x <span class=\"number\">0x400a60</span></span><br><span class=\"line\"><span class=\"number\">0x400a60</span> &lt;_ZTV4Base+<span class=\"number\">16</span>&gt;:    <span class=\"number\">0x0040094c</span>  <span class=\"number\">0x00000000</span>  <span class=\"number\">0x72654437</span>  <span class=\"number\">0x64657669</span></span><br><span class=\"line\">(gdb) x/<span class=\"number\">16</span>x <span class=\"number\">0x0040094c</span></span><br><span class=\"line\"><span class=\"number\">0x40094c</span> &lt;Base::f()&gt;:   <span class=\"number\">0xe5894855</span>  <span class=\"number\">0x10ec8348</span>  <span class=\"number\">0xf87d8948</span>  <span class=\"number\">0x400a15be</span></span><br><span class=\"line\"><span class=\"number\">0x40095c</span> &lt;Base::f()+<span class=\"number\">16</span>&gt;:    <span class=\"number\">0x10c0bf00</span>  <span class=\"number\">0xf9e80060</span>  <span class=\"number\">0xc9fffffd</span>  <span class=\"number\">0x485590c3</span></span><br><span class=\"line\"><span class=\"number\">0x40096c</span> &lt;Derived::f()+<span class=\"number\">2</span>&gt;:  <span class=\"number\">0x8348e589</span>  <span class=\"number\">0x894810ec</span>  <span class=\"number\">0x1bbef87d</span>  <span class=\"number\">0xbf00400a</span></span><br><span class=\"line\"><span class=\"number\">0x40097c</span> &lt;Derived::f()+<span class=\"number\">18</span>&gt;: <span class=\"number\">0x006010c0</span>  <span class=\"number\">0xfffddbe8</span>  <span class=\"number\">0x66c3c9ff</span>  <span class=\"number\">0x00841f0f</span></span><br><span class=\"line\">  (gdb) <span class=\"built_in\">set</span> $i = <span class=\"number\">0</span></span><br><span class=\"line\">  (gdb) <span class=\"keyword\">while</span> $i &lt; <span class=\"number\">10</span></span><br><span class=\"line\">     &gt;print $i</span><br><span class=\"line\">     &gt;p /a (*(<span class=\"keyword\">void</span> ***)obj)[$i]</span><br><span class=\"line\">     &gt;<span class=\"built_in\">set</span> $i = $i + <span class=\"number\">1</span></span><br><span class=\"line\">     &gt;end</span><br><span class=\"line\">Where <span class=\"string\">\"obj\"</span> is the object whose vtable you'd like to print, <span class=\"keyword\">and</span> <span class=\"number\">10</span> is the number of methods.</span><br><span class=\"line\">p /a (*(<span class=\"keyword\">void</span> ***)obj)[<span class=\"number\">0</span>]@<span class=\"number\">10</span></span><br><span class=\"line\">info address _ZTV3Bar</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>vptraccess section <br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span> &#123;</span></span><br><span class=\"line\">     <span class=\"keyword\">public</span> :</span><br><span class=\"line\">        <span class=\"keyword\">virtual</span> ~Point3d();</span><br><span class=\"line\">     <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"keyword\">static</span> Point3d origin</span><br><span class=\"line\">        <span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>1)&amp;Point3d::z  zclass obj<br>printf</p>\n<p>+1,g++<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point3d</span>&#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"comment\">//\t\t\tvirtual ~Point3d()&#123;;&#125;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">static</span> Point3d origin;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> x,y,z;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">Point3d Point3d::origin;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">        Point3d p3d;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d.x);<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d=%p\\n\"</span>,&amp;p3d.y);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::x=%p\\n\"</span>,&amp;Point3d::x);<span class=\"comment\">//nil,Point3dvirtual func,8</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::y=%p\\n\"</span>,&amp;Point3d::y);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"&amp;Point3d::z=%p\\n\"</span>,&amp;Point3d::z);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>((<span class=\"keyword\">float</span>*)&amp;p3d==(<span class=\"keyword\">float</span>*)&amp;p3d.x)<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"yes\"</span>&lt;&lt;<span class=\"built_in\">endl</span>; <span class=\"comment\">//yes</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p2=&amp;Point3d::x;</span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> Point3d::*p3=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(p1==p2)<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p1==p2\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//no output in g++</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(p2==p3)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p2==p3\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//no output in g++</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>virtual funcx8vptr<br>:<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">float</span> *p=origin.z  </span><br><span class=\"line\">struct  Base1&#123;<span class=\"keyword\">int</span> val1;&#125;</span><br><span class=\"line\"><span class=\"function\">struct <span class=\"title\">Base2</span> <span class=\"params\">(<span class=\"keyword\">int</span> val2;&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">struct Derved:Base1,Base2&#123;..&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"><span class=\"keyword\">void</span> func1(<span class=\"keyword\">int</span> Derved::*bmp,Derved *pd)</span><span class=\"comment\">//offset</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   pd-&gt;*dmp;.....</span><br></pre></td></tr></table></figure></p>"},{"title":"cpp_debug_layout_dynamic","date":"2018-05-20T10:33:09.000Z","_content":"\n### c\n\n\n: <!-- more -->\n*\n 2)  *\ngdb\n\n\nfork).\n\n   bss).task_struct\n\n>\n>\n>bss\n>\n>\n     \n     \n     \n \n \n gdb \n \n#### 1gdb\n1)gcc gcc -o gdbtest gdbtest.c -g \n 2)\nb \nb \nb if \neg:\nbreak main  /  b main\n  :delete \n\n3)\nl /list\n\n4)start\n  :c/continue   r/run\n  until   \n5)b\nwatch b  \n\n\np/print  b  \np/print &b\n i  locals\n  \n  \n info registers \n \n print/x $eax   16 \n print/t  2\n print/d ,\nx/nyz  : nyz\n \n\n n/next   /   s/step\n \n 7) \n info b  \n save breakpoint fig.dp \n gdb hello -x fig.dp\n \n quit\n \n http://bbs.chinaunix.net/thread-150524-1-1.html\n \n#### 2 kdbg \n gdb  gcc ... -gkdbg\n \n\t```\n\t#include<stdio.h>\n\t#include<string.h>\n\t#include<sys/types.h>\n\t#include<stdlib.h>\n\t#include<unistd.h>\n\t#define SHW_ADR(ID,I) printf(\"the id %s \\t is at adr:%8X\\n\",ID,&I);\n\textern etext,edata,end;\n\tchar *cptr=\"Hello World\\n\";\n\tchar buffer1[25];\n\tint main(void)\n\t{\n\t\tvoid showit(char *);\n\t\tint i=0;\n\t   \tprintf(\"Adr etext:%8x\\tAdr edata:%8x \\t Adr end :%8x \\n\\n\",&etext,&edata,&end);\n\t\tSHW_ADR(\"main\",main);\n\t\tSHW_ADR(\"showit\",showit);\n\t\tSHW_ADR(\"cptr\",cptr);\n\t\tSHW_ADR(\"buffer1\",buffer1);\n\t\tSHW_ADR(\"i\",i);\n\t\tstrcpy(buffer1,\"A demonstration\\n\");\n\t\twrite(1,buffer1,strlen(buffer1)+1);\n\t\tfor(;i<1;++i)\n\t\t\tshowit(cptr);\n\t\treturn 0;\n\t}\n\t\n\tvoid showit(char *p)\n\t{\n\t\tchar *buffer2;\n\t\tSHW_ADR(\"buffer2\",buffer2);\n\t\tif((buffer2=(char *)malloc((unsigned)(strlen(p)+1)))!=NULL)\n\t\t{\n\t\t\tstrcpy(buffer2,p);\n\t\t\tprintf(\"%s\",buffer2);\n\t\t\tfree(buffer2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprintf(\"Allocation error.\\n\");\n\t\t\texit(1);\n\t\t}\n\t}\n\t\n\t```\n\n\t```cpp\n\t#include <stdio.h>\n\t#include <malloc.h>\n\t#include <unistd.h>\n\t#include <alloca.h>\n\t\n\textern void afunc(void);\n\textern etext,edata,end;\n\t\n\tint bss_var;\t\t\t\t//no init globel data must be in bss\n\t\n\tint data_var=42;\t\t\t//init globel data must be in data\n\t\n\t#define SHW_ADR(ID,I) printf(\"the %8s\\t is at adr:%8x\\n\",ID,&I);\t\t//the macro to printf the addr\n\t\n\tint main(int argc,char *argv[])\n\t{\n\t\tchar *p,*b,*nb;\n\t\n\t\tprintf(\"Adr etext:%8x\\t Adr edata %8x\\t Adr end %8x\\t\\n\",&etext,&edata,&end);\n\t\t\n\t\tprintf(\"\\ntext Location:\\n\");\n\t\tSHW_ADR(\"main\",main);\t\t\t//text section function\n\t\tSHW_ADR(\"afunc\",afunc);\t\t\t//text section function\n\t\n\t\tprintf(\"\\nbss Location:\\n\");\n\t\tSHW_ADR(\"bss_var\",bss_var);\t\t//bss section var\n\t\n\t\tprintf(\"\\ndata location:\\n\");\n\t\tSHW_ADR(\"data_var\",data_var);\t//data section var\n\t\t\n\t\t\n\t\tprintf(\"\\nStack Locations:\\n\");\n\t\tafunc();\n\t\t\n\t\tp=(char *)alloca(32);\t\t\t//alloc memory from statck\n\t\tif(p!=NULL)\n\t\t{\n\t\t\tSHW_ADR(\"start\",p);\n\t\t\tSHW_ADR(\"end\",p+31);\n\t\t}\n\t\t\n\t\tb=(char *)malloc(32*sizeof(char));\t//malloc memory from heap\n\t\tnb=(char *)malloc(16*sizeof(char));\n\t\t\n\t\tprintf(\"\\nHeap Locations:\\n\");\t\n\t\tprintf(\"the Heap start: %p\\n\",b);\n\t\tprintf(\"the Heap end:%p\\n\",(nb+16*sizeof(char)));\n\t\tprintf(\"\\nb and nb in Stack\\n\");\n\t\tSHW_ADR(\"b\",b);\n\t\tSHW_ADR(\"nb\",nb);\n\t\tfree(b);\n\t\tfree(nb);\n\t}\n\t\n\t\n\tvoid afunc(void)\n\t{\n\t\tstatic int long level=0;\t//data section static var\n\t\tint\t stack_var;\t\t\t\t//temp var ,in stack section\n\t\tif(++level==5)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSHW_ADR(\"stack_var in stack section\",stack_var);\n\t\tSHW_ADR(\"Level in data section\",level);\n\t\tafunc();\n\t}\n\t```\n \n \n \n \n \n","source":"_posts/cpp-debug-layout-dynamic.md","raw":"---\ntitle: cpp_debug_layout_dynamic\ndate: 2018-05-20 18:33:09\ntags: cpp_memory\ncategories: c&cpp\n---\n\n### c\n\n\n: <!-- more -->\n*\n 2)  *\ngdb\n\n\nfork).\n\n   bss).task_struct\n\n>\n>\n>bss\n>\n>\n     \n     \n     \n \n \n gdb \n \n#### 1gdb\n1)gcc gcc -o gdbtest gdbtest.c -g \n 2)\nb \nb \nb if \neg:\nbreak main  /  b main\n  :delete \n\n3)\nl /list\n\n4)start\n  :c/continue   r/run\n  until   \n5)b\nwatch b  \n\n\np/print  b  \np/print &b\n i  locals\n  \n  \n info registers \n \n print/x $eax   16 \n print/t  2\n print/d ,\nx/nyz  : nyz\n \n\n n/next   /   s/step\n \n 7) \n info b  \n save breakpoint fig.dp \n gdb hello -x fig.dp\n \n quit\n \n http://bbs.chinaunix.net/thread-150524-1-1.html\n \n#### 2 kdbg \n gdb  gcc ... -gkdbg\n \n\t```\n\t#include<stdio.h>\n\t#include<string.h>\n\t#include<sys/types.h>\n\t#include<stdlib.h>\n\t#include<unistd.h>\n\t#define SHW_ADR(ID,I) printf(\"the id %s \\t is at adr:%8X\\n\",ID,&I);\n\textern etext,edata,end;\n\tchar *cptr=\"Hello World\\n\";\n\tchar buffer1[25];\n\tint main(void)\n\t{\n\t\tvoid showit(char *);\n\t\tint i=0;\n\t   \tprintf(\"Adr etext:%8x\\tAdr edata:%8x \\t Adr end :%8x \\n\\n\",&etext,&edata,&end);\n\t\tSHW_ADR(\"main\",main);\n\t\tSHW_ADR(\"showit\",showit);\n\t\tSHW_ADR(\"cptr\",cptr);\n\t\tSHW_ADR(\"buffer1\",buffer1);\n\t\tSHW_ADR(\"i\",i);\n\t\tstrcpy(buffer1,\"A demonstration\\n\");\n\t\twrite(1,buffer1,strlen(buffer1)+1);\n\t\tfor(;i<1;++i)\n\t\t\tshowit(cptr);\n\t\treturn 0;\n\t}\n\t\n\tvoid showit(char *p)\n\t{\n\t\tchar *buffer2;\n\t\tSHW_ADR(\"buffer2\",buffer2);\n\t\tif((buffer2=(char *)malloc((unsigned)(strlen(p)+1)))!=NULL)\n\t\t{\n\t\t\tstrcpy(buffer2,p);\n\t\t\tprintf(\"%s\",buffer2);\n\t\t\tfree(buffer2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprintf(\"Allocation error.\\n\");\n\t\t\texit(1);\n\t\t}\n\t}\n\t\n\t```\n\n\t```cpp\n\t#include <stdio.h>\n\t#include <malloc.h>\n\t#include <unistd.h>\n\t#include <alloca.h>\n\t\n\textern void afunc(void);\n\textern etext,edata,end;\n\t\n\tint bss_var;\t\t\t\t//no init globel data must be in bss\n\t\n\tint data_var=42;\t\t\t//init globel data must be in data\n\t\n\t#define SHW_ADR(ID,I) printf(\"the %8s\\t is at adr:%8x\\n\",ID,&I);\t\t//the macro to printf the addr\n\t\n\tint main(int argc,char *argv[])\n\t{\n\t\tchar *p,*b,*nb;\n\t\n\t\tprintf(\"Adr etext:%8x\\t Adr edata %8x\\t Adr end %8x\\t\\n\",&etext,&edata,&end);\n\t\t\n\t\tprintf(\"\\ntext Location:\\n\");\n\t\tSHW_ADR(\"main\",main);\t\t\t//text section function\n\t\tSHW_ADR(\"afunc\",afunc);\t\t\t//text section function\n\t\n\t\tprintf(\"\\nbss Location:\\n\");\n\t\tSHW_ADR(\"bss_var\",bss_var);\t\t//bss section var\n\t\n\t\tprintf(\"\\ndata location:\\n\");\n\t\tSHW_ADR(\"data_var\",data_var);\t//data section var\n\t\t\n\t\t\n\t\tprintf(\"\\nStack Locations:\\n\");\n\t\tafunc();\n\t\t\n\t\tp=(char *)alloca(32);\t\t\t//alloc memory from statck\n\t\tif(p!=NULL)\n\t\t{\n\t\t\tSHW_ADR(\"start\",p);\n\t\t\tSHW_ADR(\"end\",p+31);\n\t\t}\n\t\t\n\t\tb=(char *)malloc(32*sizeof(char));\t//malloc memory from heap\n\t\tnb=(char *)malloc(16*sizeof(char));\n\t\t\n\t\tprintf(\"\\nHeap Locations:\\n\");\t\n\t\tprintf(\"the Heap start: %p\\n\",b);\n\t\tprintf(\"the Heap end:%p\\n\",(nb+16*sizeof(char)));\n\t\tprintf(\"\\nb and nb in Stack\\n\");\n\t\tSHW_ADR(\"b\",b);\n\t\tSHW_ADR(\"nb\",nb);\n\t\tfree(b);\n\t\tfree(nb);\n\t}\n\t\n\t\n\tvoid afunc(void)\n\t{\n\t\tstatic int long level=0;\t//data section static var\n\t\tint\t stack_var;\t\t\t\t//temp var ,in stack section\n\t\tif(++level==5)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSHW_ADR(\"stack_var in stack section\",stack_var);\n\t\tSHW_ADR(\"Level in data section\",level);\n\t\tafunc();\n\t}\n\t```\n \n \n \n \n \n","slug":"cpp-debug-layout-dynamic","published":1,"updated":"2018-05-21T16:06:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghop001600jxbimrk4ms","content":"<h3 id=\"c\"><a href=\"#c\" class=\"headerlink\" title=\"c\"></a>c</h3><p><br>: <a id=\"more\"></a><br><em><br> 2)  </em><br>gdb</p>\n<p>fork).<br><br>   bss).task_struct</p>\n<blockquote>\n<p><br><br>bss<br><br></p>\n</blockquote>\n<p> <br> <br> gdb <br> </p>\n<h4 id=\"1gdb-\"><a href=\"#1gdb-\" class=\"headerlink\" title=\"1gdb\"></a>1gdb</h4><p>1)gcc gcc -o gdbtest gdbtest.c -g <br> 2)<br>b <br>b <br>b if <br>eg:<br>break main  /  b main<br>  :delete </p>\n<p>3)<br>l /list</p>\n<p>4)start<br>  :c/continue   r/run<br>  until  <br>5)b<br>watch b  </p>\n<p>p/print  b  <br>p/print &amp;b<br> i  locals</p>\n<p> info registers <br> <br> print/x $eax   16<br> print/t  2<br> print/d ,<br>x/nyz  : nyz</p>\n<p><br> n/next   /   s/step</p>\n<p> 7) <br> info b  <br> save breakpoint fig.dp <br> gdb hello -x fig.dp</p>\n<p> quit</p>\n<p> <a href=\"http://bbs.chinaunix.net/thread-150524-1-1.html\" target=\"_blank\" rel=\"noopener\">http://bbs.chinaunix.net/thread-150524-1-1.html</a></p>\n<h4 id=\"2-kdbg\"><a href=\"#2-kdbg\" class=\"headerlink\" title=\"2 kdbg\"></a>2 kdbg</h4><p> gdb  gcc  -gkdbg<br> <br>    <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHW_ADR(ID,I) printf(<span class=\"meta-string\">\"the id %s \\t is at adr:%8X\\n\"</span>,ID,&amp;I);</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> etext,edata,end;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *cptr=<span class=\"string\">\"Hello World\\n\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> buffer1[<span class=\"number\">25</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showit</span><span class=\"params\">(<span class=\"keyword\">char</span> *)</span></span>;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   \t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Adr etext:%8x\\tAdr edata:%8x \\t Adr end :%8x \\n\\n\"</span>,&amp;etext,&amp;edata,&amp;end);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"main\"</span>,main);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"showit\"</span>,showit);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"cptr\"</span>,cptr);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"buffer1\"</span>,buffer1);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"i\"</span>,i);</span><br><span class=\"line\">\t<span class=\"built_in\">strcpy</span>(buffer1,<span class=\"string\">\"A demonstration\\n\"</span>);</span><br><span class=\"line\">\twrite(<span class=\"number\">1</span>,buffer1,<span class=\"built_in\">strlen</span>(buffer1)+<span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(;i&lt;<span class=\"number\">1</span>;++i)</span><br><span class=\"line\">\t\tshowit(cptr);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showit</span><span class=\"params\">(<span class=\"keyword\">char</span> *p)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> *buffer2;</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"buffer2\"</span>,buffer2);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>((buffer2=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>((<span class=\"keyword\">unsigned</span>)(<span class=\"built_in\">strlen</span>(p)+<span class=\"number\">1</span>)))!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">strcpy</span>(buffer2,p);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\"</span>,buffer2);</span><br><span class=\"line\">\t\t<span class=\"built_in\">free</span>(buffer2);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Allocation error.\\n\"</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br>    <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;malloc.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;alloca.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">void</span> <span class=\"title\">afunc</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> etext,edata,end;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> bss_var;\t\t\t\t<span class=\"comment\">//no init globel data must be in bss</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> data_var=<span class=\"number\">42</span>;\t\t\t<span class=\"comment\">//init globel data must be in data</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHW_ADR(ID,I) printf(<span class=\"meta-string\">\"the %8s\\t is at adr:%8x\\n\"</span>,ID,&amp;I);\t\t<span class=\"comment\">//the macro to printf the addr</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> *p,*b,*nb;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Adr etext:%8x\\t Adr edata %8x\\t Adr end %8x\\t\\n\"</span>,&amp;etext,&amp;edata,&amp;end);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\ntext Location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"main\"</span>,main);\t\t\t<span class=\"comment\">//text section function</span></span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"afunc\"</span>,afunc);\t\t\t<span class=\"comment\">//text section function</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nbss Location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"bss_var\"</span>,bss_var);\t\t<span class=\"comment\">//bss section var</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\ndata location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"data_var\"</span>,data_var);\t<span class=\"comment\">//data section var</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nStack Locations:\\n\"</span>);</span><br><span class=\"line\">\tafunc();</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tp=(<span class=\"keyword\">char</span> *)alloca(<span class=\"number\">32</span>);\t\t\t<span class=\"comment\">//alloc memory from statck</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(p!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tSHW_ADR(<span class=\"string\">\"start\"</span>,p);</span><br><span class=\"line\">\t\tSHW_ADR(<span class=\"string\">\"end\"</span>,p+<span class=\"number\">31</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tb=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>(<span class=\"number\">32</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>));\t<span class=\"comment\">//malloc memory from heap</span></span><br><span class=\"line\">\tnb=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>(<span class=\"number\">16</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>));</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nHeap Locations:\\n\"</span>);\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"the Heap start: %p\\n\"</span>,b);</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"the Heap end:%p\\n\"</span>,(nb+<span class=\"number\">16</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>)));</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nb and nb in Stack\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"b\"</span>,b);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"nb\"</span>,nb);</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(b);</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(nb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">afunc</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"keyword\">long</span> level=<span class=\"number\">0</span>;\t<span class=\"comment\">//data section static var</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span>\t stack_var;\t\t\t\t<span class=\"comment\">//temp var ,in stack section</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(++level==<span class=\"number\">5</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"stack_var in stack section\"</span>,stack_var);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"Level in data section\"</span>,level);</span><br><span class=\"line\">\tafunc();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c\"><a href=\"#c\" class=\"headerlink\" title=\"c\"></a>c</h3><p><br>:","more":"<br><em><br> 2)  </em><br>gdb</p>\n<p>fork).<br><br>   bss).task_struct</p>\n<blockquote>\n<p><br><br>bss<br><br></p>\n</blockquote>\n<p> <br> <br> gdb <br> </p>\n<h4 id=\"1gdb-\"><a href=\"#1gdb-\" class=\"headerlink\" title=\"1gdb\"></a>1gdb</h4><p>1)gcc gcc -o gdbtest gdbtest.c -g <br> 2)<br>b <br>b <br>b if <br>eg:<br>break main  /  b main<br>  :delete </p>\n<p>3)<br>l /list</p>\n<p>4)start<br>  :c/continue   r/run<br>  until  <br>5)b<br>watch b  </p>\n<p>p/print  b  <br>p/print &amp;b<br> i  locals</p>\n<p> info registers <br> <br> print/x $eax   16<br> print/t  2<br> print/d ,<br>x/nyz  : nyz</p>\n<p><br> n/next   /   s/step</p>\n<p> 7) <br> info b  <br> save breakpoint fig.dp <br> gdb hello -x fig.dp</p>\n<p> quit</p>\n<p> <a href=\"http://bbs.chinaunix.net/thread-150524-1-1.html\" target=\"_blank\" rel=\"noopener\">http://bbs.chinaunix.net/thread-150524-1-1.html</a></p>\n<h4 id=\"2-kdbg\"><a href=\"#2-kdbg\" class=\"headerlink\" title=\"2 kdbg\"></a>2 kdbg</h4><p> gdb  gcc  -gkdbg<br> <br>    <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHW_ADR(ID,I) printf(<span class=\"meta-string\">\"the id %s \\t is at adr:%8X\\n\"</span>,ID,&amp;I);</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> etext,edata,end;</span><br><span class=\"line\"><span class=\"keyword\">char</span> *cptr=<span class=\"string\">\"Hello World\\n\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> buffer1[<span class=\"number\">25</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showit</span><span class=\"params\">(<span class=\"keyword\">char</span> *)</span></span>;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   \t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Adr etext:%8x\\tAdr edata:%8x \\t Adr end :%8x \\n\\n\"</span>,&amp;etext,&amp;edata,&amp;end);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"main\"</span>,main);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"showit\"</span>,showit);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"cptr\"</span>,cptr);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"buffer1\"</span>,buffer1);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"i\"</span>,i);</span><br><span class=\"line\">\t<span class=\"built_in\">strcpy</span>(buffer1,<span class=\"string\">\"A demonstration\\n\"</span>);</span><br><span class=\"line\">\twrite(<span class=\"number\">1</span>,buffer1,<span class=\"built_in\">strlen</span>(buffer1)+<span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(;i&lt;<span class=\"number\">1</span>;++i)</span><br><span class=\"line\">\t\tshowit(cptr);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showit</span><span class=\"params\">(<span class=\"keyword\">char</span> *p)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> *buffer2;</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"buffer2\"</span>,buffer2);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>((buffer2=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>((<span class=\"keyword\">unsigned</span>)(<span class=\"built_in\">strlen</span>(p)+<span class=\"number\">1</span>)))!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">strcpy</span>(buffer2,p);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%s\"</span>,buffer2);</span><br><span class=\"line\">\t\t<span class=\"built_in\">free</span>(buffer2);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Allocation error.\\n\"</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br>    <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;malloc.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;alloca.h&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">void</span> <span class=\"title\">afunc</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> etext,edata,end;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> bss_var;\t\t\t\t<span class=\"comment\">//no init globel data must be in bss</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> data_var=<span class=\"number\">42</span>;\t\t\t<span class=\"comment\">//init globel data must be in data</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHW_ADR(ID,I) printf(<span class=\"meta-string\">\"the %8s\\t is at adr:%8x\\n\"</span>,ID,&amp;I);\t\t<span class=\"comment\">//the macro to printf the addr</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> *p,*b,*nb;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"Adr etext:%8x\\t Adr edata %8x\\t Adr end %8x\\t\\n\"</span>,&amp;etext,&amp;edata,&amp;end);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\ntext Location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"main\"</span>,main);\t\t\t<span class=\"comment\">//text section function</span></span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"afunc\"</span>,afunc);\t\t\t<span class=\"comment\">//text section function</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nbss Location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"bss_var\"</span>,bss_var);\t\t<span class=\"comment\">//bss section var</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\ndata location:\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"data_var\"</span>,data_var);\t<span class=\"comment\">//data section var</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nStack Locations:\\n\"</span>);</span><br><span class=\"line\">\tafunc();</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tp=(<span class=\"keyword\">char</span> *)alloca(<span class=\"number\">32</span>);\t\t\t<span class=\"comment\">//alloc memory from statck</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(p!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tSHW_ADR(<span class=\"string\">\"start\"</span>,p);</span><br><span class=\"line\">\t\tSHW_ADR(<span class=\"string\">\"end\"</span>,p+<span class=\"number\">31</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tb=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>(<span class=\"number\">32</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>));\t<span class=\"comment\">//malloc memory from heap</span></span><br><span class=\"line\">\tnb=(<span class=\"keyword\">char</span> *)<span class=\"built_in\">malloc</span>(<span class=\"number\">16</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>));</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nHeap Locations:\\n\"</span>);\t</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"the Heap start: %p\\n\"</span>,b);</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"the Heap end:%p\\n\"</span>,(nb+<span class=\"number\">16</span>*<span class=\"keyword\">sizeof</span>(<span class=\"keyword\">char</span>)));</span><br><span class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\nb and nb in Stack\\n\"</span>);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"b\"</span>,b);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"nb\"</span>,nb);</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(b);</span><br><span class=\"line\">\t<span class=\"built_in\">free</span>(nb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">afunc</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"keyword\">long</span> level=<span class=\"number\">0</span>;\t<span class=\"comment\">//data section static var</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span>\t stack_var;\t\t\t\t<span class=\"comment\">//temp var ,in stack section</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(++level==<span class=\"number\">5</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"stack_var in stack section\"</span>,stack_var);</span><br><span class=\"line\">\tSHW_ADR(<span class=\"string\">\"Level in data section\"</span>,level);</span><br><span class=\"line\">\tafunc();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>"},{"title":"cpp_debug_layout_static","date":"2018-05-20T10:54:58.000Z","_content":"###  c compile time memory layout\ndebugc\n\n<!-- more -->\nlinuxelf,\npcmain \n      cstructclassstructcharASICCstruct\n   \n\nlinuxsize gdbcc\n\n \n\n\n.oelfrelocatable,.oelfexecutable\n.o(elf) objdump -h xx.o\n\n              other data  ...\n              .comment    offset 0x000000c6.\n              .rodata      ...//const & str \n              .data\n              .text\n              .elf header\n\nelfreadelf\n\telfheader/usr/include/elf.h\n\t        .text\n\t        .data\n\t        .bss\n\t        ..\n\t        other sections\n\t        section header table\n\t        string tables\n\t        symbol tables \n cc++\n readelf -sxx.o\n  g\n \n musicelf.\n objcopyobjcopy -I binary -O elf32-i386 -B  i386 image.jpg image.o\n   objdump -ht image.o\n   \n   \n__attribute__((section(\"FOO\"))) int global=24;\n           __attribute__((section(\"BAR\"))) void  foo(){}  BAR FOO\n\n\n\n\n\n#### 0\n1)size filename:elf.o\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      0\t      0\t     74\t     4a\tsimplest.o\n\nint x=3;3const  ,\n\nbss:null\n\n2)\n readelf -a simplest.o\n \n objdump -t simplest\n objdump -h simplest.o   size\n \n\n\nobjdump -s -d xx.o:-s 16-d\nobjdump -s -x -d xx.o:   --rodata\n\n3)relocatable --.o/executable --elf/share object --.so..\n file xxx\n\n\n#### simplest.c\n\tint main()\n\t{\n\t   return 0;\n\t}\n\t\ngcc -E simplest.c \n\t# 1 \"simplest.c\"\n\t# 1 \"<built-in>\"\n\t# 1 \"<command-line>\"\n\t# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n\t# 1 \"<command-line>\" 2\n\t# 1 \"simplest.c\"\n\tint main()\n\t {\n\t  return 0;\n\t }\n\t \ngcc -S simplest.c\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\n\n\n.ogcc -c simplest.c\nfile xx.o\nsimplest.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped\n\nsize \nsize simplest.o:  bss\n\ntext\t   data\t    bss\t    dec\t    hex\tfilename\n     67\t      0\t      0\t     67\t     43\tsimplest.o\n     \nelf:gcc -o simplest simplest.c\nfile simplest\nsimplest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, \ninterpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=\n56beff50d6dfd6d435c9556630737121d59c1cc7, not stripped\n\n\nsize simplest\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    544\t      8\t   1651\t    673\tsimplest\n.o\n\n#### \n\n\t#include<stdio.h>\n\tint main()\n\t{\n\t  int locala;\n\t  int localb=3;\n\t  return 0;\n\t  }\ngcc -E simplest.c\n\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\n.odatabss,\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      0\t      0\t     74\t     4a\tsimplest.o\n\n\nelf:bss\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    544\t      8\t   1651\t    673\tsimplest\n\n\n\n#### \n\tint main()\n\t{\n\t static int statica=3;\n\t..\n\t}\n\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.data\n\t\t.align 4\n\t\t.type\tstatica.2285, @object//\n\t\t.size\tstatica.2285, 4\n\tstatica.2285:\n\t\t.long\t3\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\t\n\t\n.oint\n text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      4\t      0\t     78\t     4e\tsimplest.o\n\nelf:\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    548\t      4\t   1651\t    673\tsimplest\n\n\n\n#### \n\n\t     int golbala=6;\n\t    static long gs=12;\n\n\t\t.file\t\"simplest.c\"\n\t\t.globl\tgolbala\n\t\t.data\n\t\t.align 4\n\t\t.type\tgolbala, @object\n\t\t.size\tgolbala, 4\n\tgolbala://\n\t\t.long\t6\n\t\t.align 8\n\t\t.type\tgs, @object\n\t\t.size\tgs, 8\n\tgs://\n\t\t.quad\t12\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.data\n\t\t.align 4\n\t\t.type\tstatica.2287, @object\n\t\t.size\tstatica.2287, 4\n\tstatica.2287:\n\t\t.long\t3\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\nsize : 20:long int 4+4+8long)+4=20\n      text\t   data\t    bss\t    dec\t    hex\tfilename\n       74\t     20\t      0\t     94\t     5e\tsimplest.o\n\nelf size:548-->564  16\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    564\t      4\t   1667\t    683\tsimplest\n\n\n####  5  int golbala=6;\n    static long gs=12;\n size x.o\n   text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t     16\t      0\t     90\t     5a\tsimplest.o\n\n\t.file\t\"simplest.c\"\n\t.data\n\t.align 8\n\t.type\tgs, @object\n\t.size\tgs, 8\ngs:\n\t.quad\t12\n\t.globl\tgolbala\n\t.align 4\n\t.type\tgolbala, @object\n\t.size\tgolbala, 4\ngolbala:\n\t.long\t6\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\nmain:\n.LFB0:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tmovl\t$3, -4(%rbp)\n\tmovl\t$0, %eax\n\tpopq\t%rbp\n\t.cfi_def_cfa 7, 8\n\tret\n\t.cfi_endproc\n.LFE0:\n\t.size\tmain, .-main\n\t.data\n\t.align 4\n\t.type\tstatica.2287, @object\n\t.size\tstatica.2287, 4\nstatica.2287:\n\t.long\t3\n\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t.section\t.note.GNU-stack,\"\",@progbits\nelfbss\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    560\t      8\t   1667\t    683\tsimplest\n\n#### 6\n\t  1 #include<stdio.h>\n\t    2 static long gs=12;\n\t    3 int golbala=6;\n\t    4      \n\t    5     \n\t    6 static long gsl;\n\t    7 int gi;\n\t    8 int main()\n\t    9 {   \n\t   10      static int staticn;\n\t11      static int statica=3;\n       12      int locala;\n       13      int localb=3;\n\t   14      return 0;\n\t   15 }\n                    \n\t.file\t\"simplest.c\"\n\t.data\n\t.align 8\n\t.type\tgs, @object\n\t.size\tgs, 8\ngs:\n\t.quad\t12\n\t.globl\tgolbala\n\t.align 4\n\t.type\tgolbala, @object\n\t.size\tgolbala, 4\ngolbala:\n\t.long\t6\n\t.local\tgsl\n\t.comm\tgsl,8,8\n\t.comm\tgi,4,4\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\nmain:\n.LFB0:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tmovl\t$3, -4(%rbp)\n\tmovl\t$0, %eax\n\tpopq\t%rbp\n\t.cfi_def_cfa 7, 8\n\tret\n\t.cfi_endproc\n.LFE0:\n\t.size\tmain, .-main\n\t.data\n\t.align 4\n\t.type\tstatica.2290, @object\n\t.size\tstatica.2290, 4\nstatica.2290:\n\t.long\t3\n\t.local\tstaticn.2289\n\t.comm\tstaticn.2289,4,4\n\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t.section\t.note.GNU-stack,\"\",@progbits\n\n\n.o+12 \ntext\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t     16\t     12\t    102\t     66\tsimplest.o\n\n\nelf:+16 \ntext\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    560\t     24\t   1683\t    693\tsimplest\n\nc\n\n\n\n","source":"_posts/cpp-debug-layout-static.md","raw":"---\ntitle: cpp_debug_layout_static\ndate: 2018-05-20 18:54:58\ntags: cpp_memory\ncategories: c&cpp\n---\n###  c compile time memory layout\ndebugc\n\n<!-- more -->\nlinuxelf,\npcmain \n      cstructclassstructcharASICCstruct\n   \n\nlinuxsize gdbcc\n\n \n\n\n.oelfrelocatable,.oelfexecutable\n.o(elf) objdump -h xx.o\n\n              other data  ...\n              .comment    offset 0x000000c6.\n              .rodata      ...//const & str \n              .data\n              .text\n              .elf header\n\nelfreadelf\n\telfheader/usr/include/elf.h\n\t        .text\n\t        .data\n\t        .bss\n\t        ..\n\t        other sections\n\t        section header table\n\t        string tables\n\t        symbol tables \n cc++\n readelf -sxx.o\n  g\n \n musicelf.\n objcopyobjcopy -I binary -O elf32-i386 -B  i386 image.jpg image.o\n   objdump -ht image.o\n   \n   \n__attribute__((section(\"FOO\"))) int global=24;\n           __attribute__((section(\"BAR\"))) void  foo(){}  BAR FOO\n\n\n\n\n\n#### 0\n1)size filename:elf.o\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      0\t      0\t     74\t     4a\tsimplest.o\n\nint x=3;3const  ,\n\nbss:null\n\n2)\n readelf -a simplest.o\n \n objdump -t simplest\n objdump -h simplest.o   size\n \n\n\nobjdump -s -d xx.o:-s 16-d\nobjdump -s -x -d xx.o:   --rodata\n\n3)relocatable --.o/executable --elf/share object --.so..\n file xxx\n\n\n#### simplest.c\n\tint main()\n\t{\n\t   return 0;\n\t}\n\t\ngcc -E simplest.c \n\t# 1 \"simplest.c\"\n\t# 1 \"<built-in>\"\n\t# 1 \"<command-line>\"\n\t# 1 \"/usr/include/stdc-predef.h\" 1 3 4\n\t# 1 \"<command-line>\" 2\n\t# 1 \"simplest.c\"\n\tint main()\n\t {\n\t  return 0;\n\t }\n\t \ngcc -S simplest.c\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\n\n\n.ogcc -c simplest.c\nfile xx.o\nsimplest.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped\n\nsize \nsize simplest.o:  bss\n\ntext\t   data\t    bss\t    dec\t    hex\tfilename\n     67\t      0\t      0\t     67\t     43\tsimplest.o\n     \nelf:gcc -o simplest simplest.c\nfile simplest\nsimplest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, \ninterpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=\n56beff50d6dfd6d435c9556630737121d59c1cc7, not stripped\n\n\nsize simplest\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    544\t      8\t   1651\t    673\tsimplest\n.o\n\n#### \n\n\t#include<stdio.h>\n\tint main()\n\t{\n\t  int locala;\n\t  int localb=3;\n\t  return 0;\n\t  }\ngcc -E simplest.c\n\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\n.odatabss,\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      0\t      0\t     74\t     4a\tsimplest.o\n\n\nelf:bss\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    544\t      8\t   1651\t    673\tsimplest\n\n\n\n#### \n\tint main()\n\t{\n\t static int statica=3;\n\t..\n\t}\n\n\t\t.file\t\"simplest.c\"\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.data\n\t\t.align 4\n\t\t.type\tstatica.2285, @object//\n\t\t.size\tstatica.2285, 4\n\tstatica.2285:\n\t\t.long\t3\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\t\n\t\n.oint\n text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t      4\t      0\t     78\t     4e\tsimplest.o\n\nelf:\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    548\t      4\t   1651\t    673\tsimplest\n\n\n\n#### \n\n\t     int golbala=6;\n\t    static long gs=12;\n\n\t\t.file\t\"simplest.c\"\n\t\t.globl\tgolbala\n\t\t.data\n\t\t.align 4\n\t\t.type\tgolbala, @object\n\t\t.size\tgolbala, 4\n\tgolbala://\n\t\t.long\t6\n\t\t.align 8\n\t\t.type\tgs, @object\n\t\t.size\tgs, 8\n\tgs://\n\t\t.quad\t12\n\t\t.text\n\t\t.globl\tmain\n\t\t.type\tmain, @function\n\tmain:\n\t.LFB0:\n\t\t.cfi_startproc\n\t\tpushq\t%rbp\n\t\t.cfi_def_cfa_offset 16\n\t\t.cfi_offset 6, -16\n\t\tmovq\t%rsp, %rbp\n\t\t.cfi_def_cfa_register 6\n\t\tmovl\t$3, -4(%rbp)\n\t\tmovl\t$0, %eax\n\t\tpopq\t%rbp\n\t\t.cfi_def_cfa 7, 8\n\t\tret\n\t\t.cfi_endproc\n\t.LFE0:\n\t\t.size\tmain, .-main\n\t\t.data\n\t\t.align 4\n\t\t.type\tstatica.2287, @object\n\t\t.size\tstatica.2287, 4\n\tstatica.2287:\n\t\t.long\t3\n\t\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t\t.section\t.note.GNU-stack,\"\",@progbits\n\t\nsize : 20:long int 4+4+8long)+4=20\n      text\t   data\t    bss\t    dec\t    hex\tfilename\n       74\t     20\t      0\t     94\t     5e\tsimplest.o\n\nelf size:548-->564  16\n  text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    564\t      4\t   1667\t    683\tsimplest\n\n\n####  5  int golbala=6;\n    static long gs=12;\n size x.o\n   text\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t     16\t      0\t     90\t     5a\tsimplest.o\n\n\t.file\t\"simplest.c\"\n\t.data\n\t.align 8\n\t.type\tgs, @object\n\t.size\tgs, 8\ngs:\n\t.quad\t12\n\t.globl\tgolbala\n\t.align 4\n\t.type\tgolbala, @object\n\t.size\tgolbala, 4\ngolbala:\n\t.long\t6\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\nmain:\n.LFB0:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tmovl\t$3, -4(%rbp)\n\tmovl\t$0, %eax\n\tpopq\t%rbp\n\t.cfi_def_cfa 7, 8\n\tret\n\t.cfi_endproc\n.LFE0:\n\t.size\tmain, .-main\n\t.data\n\t.align 4\n\t.type\tstatica.2287, @object\n\t.size\tstatica.2287, 4\nstatica.2287:\n\t.long\t3\n\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t.section\t.note.GNU-stack,\"\",@progbits\nelfbss\n text\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    560\t      8\t   1667\t    683\tsimplest\n\n#### 6\n\t  1 #include<stdio.h>\n\t    2 static long gs=12;\n\t    3 int golbala=6;\n\t    4      \n\t    5     \n\t    6 static long gsl;\n\t    7 int gi;\n\t    8 int main()\n\t    9 {   \n\t   10      static int staticn;\n\t11      static int statica=3;\n       12      int locala;\n       13      int localb=3;\n\t   14      return 0;\n\t   15 }\n                    \n\t.file\t\"simplest.c\"\n\t.data\n\t.align 8\n\t.type\tgs, @object\n\t.size\tgs, 8\ngs:\n\t.quad\t12\n\t.globl\tgolbala\n\t.align 4\n\t.type\tgolbala, @object\n\t.size\tgolbala, 4\ngolbala:\n\t.long\t6\n\t.local\tgsl\n\t.comm\tgsl,8,8\n\t.comm\tgi,4,4\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\nmain:\n.LFB0:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tmovl\t$3, -4(%rbp)\n\tmovl\t$0, %eax\n\tpopq\t%rbp\n\t.cfi_def_cfa 7, 8\n\tret\n\t.cfi_endproc\n.LFE0:\n\t.size\tmain, .-main\n\t.data\n\t.align 4\n\t.type\tstatica.2290, @object\n\t.size\tstatica.2290, 4\nstatica.2290:\n\t.long\t3\n\t.local\tstaticn.2289\n\t.comm\tstaticn.2289,4,4\n\t.ident\t\"GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\"\n\t.section\t.note.GNU-stack,\"\",@progbits\n\n\n.o+12 \ntext\t   data\t    bss\t    dec\t    hex\tfilename\n     74\t     16\t     12\t    102\t     66\tsimplest.o\n\n\nelf:+16 \ntext\t   data\t    bss\t    dec\t    hex\tfilename\n   1099\t    560\t     24\t   1683\t    693\tsimplest\n\nc\n\n\n\n","slug":"cpp-debug-layout-static","published":1,"updated":"2018-05-20T12:35:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghor001a00jx9mi93vu9","content":"<h3 id=\"c-compile-time-memory-layout\"><a href=\"#c-compile-time-memory-layout\" class=\"headerlink\" title=\"c compile time memory layout\"></a>c compile time memory layout</h3><p>debugc</p>\n<p><a id=\"more\"></a><br>linuxelf,<br>pcmain<br>      cstructclassstructcharASICCstruct</p>\n<p>linuxsize gdbcc</p>\n<p><br>.oelfrelocatable,.oelfexecutable<br>.o(elf) objdump -h xx.o</p>\n<pre><code>other data  ...\n.comment    offset 0x000000c6.\n.rodata      ...//const &amp; str \n.data\n.text\n.elf header\n</code></pre><p>elfreadelf<br>    elfheader/usr/include/elf.h<br>            .text<br>            .data<br>            .bss<br>            ..<br>            other sections<br>            section header table<br>            string tables<br>            symbol tables <br> cc++<br> readelf -sxx.o<br>  g<br> <br> musicelf.<br> objcopyobjcopy -I binary -O elf32-i386 -B  i386 image.jpg image.o<br>   objdump -ht image.o<br>   <br>   <br><strong>attribute</strong>((section(FOO))) int global=24;<br>           <strong>attribute</strong>((section(BAR))) void  foo(){}  BAR FOO</p>\n<p></p>\n<h4 id=\"0\"><a href=\"#0\" class=\"headerlink\" title=\"0\"></a>0</h4><p>1)size filename:elf.o<br>  text       data        bss        dec        hex    filename<br>     74          0          0         74         4a    simplest.o<br><br>int x=3;3const  ,<br><br>bss:null</p>\n<p>2)<br> readelf -a simplest.o<br> <br> objdump -t simplest<br> objdump -h simplest.o   size</p>\n<p></p>\n<p>objdump -s -d xx.o:-s 16-d<br>objdump -s -x -d xx.o:   rodata</p>\n<p>3)relocatable .o/executable elf/share object .so..<br> file xxx</p>\n<h4 id=\"simplest-c\"><a href=\"#simplest-c\" class=\"headerlink\" title=\"simplest.c\"></a>simplest.c</h4><pre><code>int main()\n{\n   return 0;\n}\n</code></pre><p>gcc -E simplest.c </p>\n<pre><code># 1 &quot;simplest.c&quot;\n# 1 &quot;&lt;built-in&gt;&quot;\n# 1 &quot;&lt;command-line&gt;&quot;\n# 1 &quot;/usr/include/stdc-predef.h&quot; 1 3 4\n# 1 &quot;&lt;command-line&gt;&quot; 2\n# 1 &quot;simplest.c&quot;\nint main()\n {\n  return 0;\n }\n</code></pre><p>gcc -S simplest.c<br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.ogcc -c simplest.c<br>file xx.o<br>simplest.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped</p>\n<p>size <br>size simplest.o:  bss</p>\n<p>text       data        bss        dec        hex    filename<br>     67          0          0         67         43    simplest.o</p>\n<p>elf:gcc -o simplest simplest.c<br>file simplest<br>simplest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,<br>interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=<br>56beff50d6dfd6d435c9556630737121d59c1cc7, not stripped<br></p>\n<p>size simplest<br>  text       data        bss        dec        hex    filename<br>   1099        544          8       1651        673    simplest<br>.o</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int locala;\n  int localb=3;\n  return 0;\n  }\n</code></pre><p>gcc -E simplest.c<br><br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.odatabss,<br>  text       data        bss        dec        hex    filename<br>     74          0          0         74         4a    simplest.o</p>\n<p>elf:bss<br> text       data        bss        dec        hex    filename<br>   1099        544          8       1651        673    simplest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>int main()\n{\n static int statica=3;\n..\n}\n</code></pre><p><br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .data<br>        .align 4<br>        .type    statica.2285, @object//<br>        .size    statica.2285, 4<br>    statica.2285:<br>        .long    3<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.oint<br> text       data        bss        dec        hex    filename<br>     74          4          0         78         4e    simplest.o</p>\n<p>elf:<br> text       data        bss        dec        hex    filename<br>   1099        548          4       1651        673    simplest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>int golbala=6;\n    static long gs=12;\n</code></pre><p><br>        .file    simplest.c<br>        .globl    golbala<br>        .data<br>        .align 4<br>        .type    golbala, @object<br>        .size    golbala, 4<br>    golbala://<br>        .long    6<br>        .align 8<br>        .type    gs, @object<br>        .size    gs, 8<br>    gs://<br>        .quad    12<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .data<br>        .align 4<br>        .type    statica.2287, @object<br>        .size    statica.2287, 4<br>    statica.2287:<br>        .long    3<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>size : 20:long int 4+4+8long)+4=20<br>      text       data        bss        dec        hex    filename<br>       74         20          0         94         5e    simplest.o</p>\n<p>elf size:548&gt;564  16<br>  text       data        bss        dec        hex    filename<br>   1099        564          4       1667        683    simplest</p>\n<h4 id=\"5--int-golbala-6\"><a href=\"#5--int-golbala-6\" class=\"headerlink\" title=\"5  int golbala=6;\"></a>5  int golbala=6;</h4><pre><code>static long gs=12;\n</code></pre><p> size x.o<br>   text       data        bss        dec        hex    filename<br>     74         16          0         90         5a    simplest.o<br><br>    .file    simplest.c<br>    .data<br>    .align 8<br>    .type    gs, @object<br>    .size    gs, 8<br>gs:<br>    .quad    12<br>    .globl    golbala<br>    .align 4<br>    .type    golbala, @object<br>    .size    golbala, 4<br>golbala:<br>    .long    6<br>    .text<br>    .globl    main<br>    .type    main, @function<br>main:<br>.LFB0:<br>    .cfi_startproc<br>    pushq    %rbp<br>    .cfi_def_cfa_offset 16<br>    .cfi_offset 6, -16<br>    movq    %rsp, %rbp<br>    .cfi_def_cfa_register 6<br>    movl    $3, -4(%rbp)<br>    movl    $0, %eax<br>    popq    %rbp<br>    .cfi_def_cfa 7, 8<br>    ret<br>    .cfi_endproc<br>.LFE0:<br>    .size    main, .-main<br>    .data<br>    .align 4<br>    .type    statica.2287, @object<br>    .size    statica.2287, 4<br>statica.2287:<br>    .long    3<br>    .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>    .section    .note.GNU-stack,,@progbits<br>elfbss<br> text       data        bss        dec        hex    filename<br>   1099        560          8       1667        683    simplest</p>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><pre><code>  1 #include&lt;stdio.h&gt;\n    2 static long gs=12;\n    3 int golbala=6;\n    4      \n    5     \n    6 static long gsl;\n    7 int gi;\n    8 int main()\n    9 {   \n   10      static int staticn;\n11      static int statica=3;\n   12      int locala;\n   13      int localb=3;\n   14      return 0;\n   15 }\n</code></pre><p><br>    .file    simplest.c<br>    .data<br>    .align 8<br>    .type    gs, @object<br>    .size    gs, 8<br>gs:<br>    .quad    12<br>    .globl    golbala<br>    .align 4<br>    .type    golbala, @object<br>    .size    golbala, 4<br>golbala:<br>    .long    6<br>    .local    gsl<br>    .comm    gsl,8,8<br>    .comm    gi,4,4<br>    .text<br>    .globl    main<br>    .type    main, @function<br>main:<br>.LFB0:<br>    .cfi_startproc<br>    pushq    %rbp<br>    .cfi_def_cfa_offset 16<br>    .cfi_offset 6, -16<br>    movq    %rsp, %rbp<br>    .cfi_def_cfa_register 6<br>    movl    $3, -4(%rbp)<br>    movl    $0, %eax<br>    popq    %rbp<br>    .cfi_def_cfa 7, 8<br>    ret<br>    .cfi_endproc<br>.LFE0:<br>    .size    main, .-main<br>    .data<br>    .align 4<br>    .type    statica.2290, @object<br>    .size    statica.2290, 4<br>statica.2290:<br>    .long    3<br>    .local    staticn.2289<br>    .comm    staticn.2289,4,4<br>    .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>    .section    .note.GNU-stack,,@progbits</p>\n<p>.o+12 <br>text       data        bss        dec        hex    filename<br>     74         16         12        102         66    simplest.o</p>\n<p>elf:+16 <br>text       data        bss        dec        hex    filename<br>   1099        560         24       1683        693    simplest</p>\n<p>c</p>\n<p></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-compile-time-memory-layout\"><a href=\"#c-compile-time-memory-layout\" class=\"headerlink\" title=\"c compile time memory layout\"></a>c compile time memory layout</h3><p>debugc</p>\n<p>","more":"<br>linuxelf,<br>pcmain<br>      cstructclassstructcharASICCstruct</p>\n<p>linuxsize gdbcc</p>\n<p><br>.oelfrelocatable,.oelfexecutable<br>.o(elf) objdump -h xx.o</p>\n<pre><code>other data  ...\n.comment    offset 0x000000c6.\n.rodata      ...//const &amp; str \n.data\n.text\n.elf header\n</code></pre><p>elfreadelf<br>    elfheader/usr/include/elf.h<br>            .text<br>            .data<br>            .bss<br>            ..<br>            other sections<br>            section header table<br>            string tables<br>            symbol tables <br> cc++<br> readelf -sxx.o<br>  g<br> <br> musicelf.<br> objcopyobjcopy -I binary -O elf32-i386 -B  i386 image.jpg image.o<br>   objdump -ht image.o<br>   <br>   <br><strong>attribute</strong>((section(FOO))) int global=24;<br>           <strong>attribute</strong>((section(BAR))) void  foo(){}  BAR FOO</p>\n<p></p>\n<h4 id=\"0\"><a href=\"#0\" class=\"headerlink\" title=\"0\"></a>0</h4><p>1)size filename:elf.o<br>  text       data        bss        dec        hex    filename<br>     74          0          0         74         4a    simplest.o<br><br>int x=3;3const  ,<br><br>bss:null</p>\n<p>2)<br> readelf -a simplest.o<br> <br> objdump -t simplest<br> objdump -h simplest.o   size</p>\n<p></p>\n<p>objdump -s -d xx.o:-s 16-d<br>objdump -s -x -d xx.o:   rodata</p>\n<p>3)relocatable .o/executable elf/share object .so..<br> file xxx</p>\n<h4 id=\"simplest-c\"><a href=\"#simplest-c\" class=\"headerlink\" title=\"simplest.c\"></a>simplest.c</h4><pre><code>int main()\n{\n   return 0;\n}\n</code></pre><p>gcc -E simplest.c </p>\n<pre><code># 1 &quot;simplest.c&quot;\n# 1 &quot;&lt;built-in&gt;&quot;\n# 1 &quot;&lt;command-line&gt;&quot;\n# 1 &quot;/usr/include/stdc-predef.h&quot; 1 3 4\n# 1 &quot;&lt;command-line&gt;&quot; 2\n# 1 &quot;simplest.c&quot;\nint main()\n {\n  return 0;\n }\n</code></pre><p>gcc -S simplest.c<br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.ogcc -c simplest.c<br>file xx.o<br>simplest.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped</p>\n<p>size <br>size simplest.o:  bss</p>\n<p>text       data        bss        dec        hex    filename<br>     67          0          0         67         43    simplest.o</p>\n<p>elf:gcc -o simplest simplest.c<br>file simplest<br>simplest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked,<br>interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=<br>56beff50d6dfd6d435c9556630737121d59c1cc7, not stripped<br></p>\n<p>size simplest<br>  text       data        bss        dec        hex    filename<br>   1099        544          8       1651        673    simplest<br>.o</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int locala;\n  int localb=3;\n  return 0;\n  }\n</code></pre><p>gcc -E simplest.c<br><br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.odatabss,<br>  text       data        bss        dec        hex    filename<br>     74          0          0         74         4a    simplest.o</p>\n<p>elf:bss<br> text       data        bss        dec        hex    filename<br>   1099        544          8       1651        673    simplest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>int main()\n{\n static int statica=3;\n..\n}\n</code></pre><p><br>        .file    simplest.c<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .data<br>        .align 4<br>        .type    statica.2285, @object//<br>        .size    statica.2285, 4<br>    statica.2285:<br>        .long    3<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>.oint<br> text       data        bss        dec        hex    filename<br>     74          4          0         78         4e    simplest.o</p>\n<p>elf:<br> text       data        bss        dec        hex    filename<br>   1099        548          4       1651        673    simplest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><pre><code>int golbala=6;\n    static long gs=12;\n</code></pre><p><br>        .file    simplest.c<br>        .globl    golbala<br>        .data<br>        .align 4<br>        .type    golbala, @object<br>        .size    golbala, 4<br>    golbala://<br>        .long    6<br>        .align 8<br>        .type    gs, @object<br>        .size    gs, 8<br>    gs://<br>        .quad    12<br>        .text<br>        .globl    main<br>        .type    main, @function<br>    main:<br>    .LFB0:<br>        .cfi_startproc<br>        pushq    %rbp<br>        .cfi_def_cfa_offset 16<br>        .cfi_offset 6, -16<br>        movq    %rsp, %rbp<br>        .cfi_def_cfa_register 6<br>        movl    $3, -4(%rbp)<br>        movl    $0, %eax<br>        popq    %rbp<br>        .cfi_def_cfa 7, 8<br>        ret<br>        .cfi_endproc<br>    .LFE0:<br>        .size    main, .-main<br>        .data<br>        .align 4<br>        .type    statica.2287, @object<br>        .size    statica.2287, 4<br>    statica.2287:<br>        .long    3<br>        .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>        .section    .note.GNU-stack,,@progbits</p>\n<p>size : 20:long int 4+4+8long)+4=20<br>      text       data        bss        dec        hex    filename<br>       74         20          0         94         5e    simplest.o</p>\n<p>elf size:548&gt;564  16<br>  text       data        bss        dec        hex    filename<br>   1099        564          4       1667        683    simplest</p>\n<h4 id=\"5--int-golbala-6\"><a href=\"#5--int-golbala-6\" class=\"headerlink\" title=\"5  int golbala=6;\"></a>5  int golbala=6;</h4><pre><code>static long gs=12;\n</code></pre><p> size x.o<br>   text       data        bss        dec        hex    filename<br>     74         16          0         90         5a    simplest.o<br><br>    .file    simplest.c<br>    .data<br>    .align 8<br>    .type    gs, @object<br>    .size    gs, 8<br>gs:<br>    .quad    12<br>    .globl    golbala<br>    .align 4<br>    .type    golbala, @object<br>    .size    golbala, 4<br>golbala:<br>    .long    6<br>    .text<br>    .globl    main<br>    .type    main, @function<br>main:<br>.LFB0:<br>    .cfi_startproc<br>    pushq    %rbp<br>    .cfi_def_cfa_offset 16<br>    .cfi_offset 6, -16<br>    movq    %rsp, %rbp<br>    .cfi_def_cfa_register 6<br>    movl    $3, -4(%rbp)<br>    movl    $0, %eax<br>    popq    %rbp<br>    .cfi_def_cfa 7, 8<br>    ret<br>    .cfi_endproc<br>.LFE0:<br>    .size    main, .-main<br>    .data<br>    .align 4<br>    .type    statica.2287, @object<br>    .size    statica.2287, 4<br>statica.2287:<br>    .long    3<br>    .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>    .section    .note.GNU-stack,,@progbits<br>elfbss<br> text       data        bss        dec        hex    filename<br>   1099        560          8       1667        683    simplest</p>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><pre><code>  1 #include&lt;stdio.h&gt;\n    2 static long gs=12;\n    3 int golbala=6;\n    4      \n    5     \n    6 static long gsl;\n    7 int gi;\n    8 int main()\n    9 {   \n   10      static int staticn;\n11      static int statica=3;\n   12      int locala;\n   13      int localb=3;\n   14      return 0;\n   15 }\n</code></pre><p><br>    .file    simplest.c<br>    .data<br>    .align 8<br>    .type    gs, @object<br>    .size    gs, 8<br>gs:<br>    .quad    12<br>    .globl    golbala<br>    .align 4<br>    .type    golbala, @object<br>    .size    golbala, 4<br>golbala:<br>    .long    6<br>    .local    gsl<br>    .comm    gsl,8,8<br>    .comm    gi,4,4<br>    .text<br>    .globl    main<br>    .type    main, @function<br>main:<br>.LFB0:<br>    .cfi_startproc<br>    pushq    %rbp<br>    .cfi_def_cfa_offset 16<br>    .cfi_offset 6, -16<br>    movq    %rsp, %rbp<br>    .cfi_def_cfa_register 6<br>    movl    $3, -4(%rbp)<br>    movl    $0, %eax<br>    popq    %rbp<br>    .cfi_def_cfa 7, 8<br>    ret<br>    .cfi_endproc<br>.LFE0:<br>    .size    main, .-main<br>    .data<br>    .align 4<br>    .type    statica.2290, @object<br>    .size    statica.2290, 4<br>statica.2290:<br>    .long    3<br>    .local    staticn.2289<br>    .comm    staticn.2289,4,4<br>    .ident    GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609<br>    .section    .note.GNU-stack,,@progbits</p>\n<p>.o+12 <br>text       data        bss        dec        hex    filename<br>     74         16         12        102         66    simplest.o</p>\n<p>elf:+16 <br>text       data        bss        dec        hex    filename<br>   1099        560         24       1683        693    simplest</p>\n<p>c</p>\n<p></p>"},{"title":"cpp_funcmember_memory","date":"2018-06-09T08:21:29.000Z","_content":"### c++ function\nsomething:  \nc++linux\n <!--more-->\n \n + \n 1struct+ \n 2+thisthisthis \n \n \n+ c++struct--this\n\n\n + c++this\n this\n \n+  c++function\n#### \n   \n   Point3d obj;  \n   Point3d *p=&obj;  \n   \n   \n   this  \n #### \n##### \n   thisc++  \n  +  a;this\n  +  bthis\n  +  c;mangling___ \n + base class &derived class\n      \n      extern C\n      gdb\n   \n   \n+    \n      \n  ```cpp\n  void normalize__Point(register const Point3d *const this,Point3d &_result)\n   {\n      _reuslt.Point3d::Point3d() //\n      _result._x=this->__x/2;\n      ...\n      return ;\n   }\n   \n   Point3d Point3d::normmalize() const{\n       return  Point3d(_x/2 ...) \n    =return Point3d(this->_x/2,...)   \n  ```\n ##### virtual func\n normilaze  \n ptr->normilaze()= *ptr->vptr[1])(ptr);  \n Point3d::xxx  \n --\n \n \n##### \n this  \n this  \n    \n ```cpp\n ((Point3d*)0)->object_count() ;```\n static  \n static  \n+ non static \n+ const volatile virtual\n+   \n this~ unsigned int(*) ();\n \n \n ##### \n + a pz->z()pz\n + b this,\n +  c\n \n+  c\n##### \ndynamic_cast  \n virtual  \n ptrvtable[0]\n\n+   \nclassvtable,virtual func\nvirtual func\n+ \n vptrx=3;  vtable\nxxx->vptr[n](this).. \n+ vptrvirtualvirtual funcslot\n+ slot(n)\n   \n      derived de; //,vptr,    \n      base *p=&de;//int x=3;,\n      x,x,pvptr,\n      p->xx();//xxvirtual (*p->vptr[1])(p)\n     \n##### some question     \n //p->xx()xx()?\n //derivedbasederived,\n pderivederived\n \n \n \n##### virtual func\n \n ```cpp\n class base1{\n    public :\n     int a;\n virtual int a(){return a;}\n    virtual base1* clone() const;\n   }\n class base2{\n  public:\n    int b;\n    virtual int b(){return b;\n    virtual base2* clone() const;\n    }\n class derive:public base1,public base2\n    int c;\n    virtual int c(){return c;}\n    virtual derive* clone() const;\n    }\n    ```\n derivedbase1base2,;\n```\n  (1)virtual destructor (\n b()\n    (3clone \n  a)   base2 *pbase2=new derive;\n  \n   =>  derived *tmp=new derive;\n   base2 *pbase2=tmp?tmp+sizeof(base1):0;```\n      \n pbase2b pbase->b,  base *p=de;pdebase\n+ delete pbase2pbase  \n  avirtual destructor  \n```cpp \n   base2 *pbase2=new derive;  \n  delete pbase2;//invoke derive class's destructor (virtual )```\n  \n vptr,this\n  \n+ offsetpbase2  \n//vtableslotslotfaddrthisoffset  \n //*pbase2->vptr[1])(pbase2);  \n //*pbase2->vptr[1].faddr)(pbase2+pbase2-  >vptr[1].offset);virtual func\n  \n +   \n + []thunk\n  this+=sizeof(base1)\n          Derived::~Derived(this);//\n   virtual table slotslotvirtual functhunk(this)\n  virtual table;,vtable\n  + 1)derivedbase class)this\n  + 2)>=2base class virtual tableslot\n        base1 *pbase1 =new derived;\n        base2 *pbase2=new derived;\n        delete pbase1//this,virtual table slotdestructor\n        \n        delete pbase2//this ,thunk\n        vptrvtable\n        \n+ []  \n   \n   sunvtable offset\n  \n\n```cpp\nbase2 *ptr =new derived;\n       delete ptr;//derived::~deirved,ptrvirtual\n       \n       derived *pder=new derived;\n       pder->b();//bpderbase2 subobj\n       \n       base2 *pb1=new derived;\n       base2 *pb2=pb1->clone()//derived:clone,base2 subobj\n       \n       sunsplit\n       virtual func```\n+ []IBM:  \nthunk;thunkvirtual functhis\n     \n     \n##### virtual func\npoint2d.point3dthis\n```cpp\nclass point2d{\n  public:\n  point2d()\n  virtual ~point2d()\n  virtual void mumble()\n  virutal  float z()\n  protected:\n  float _x,_y;\n  } \n  class point3d:public virtual point2d{\n    public:\n    point3d()\n    ~point3d\n    protected:\n    float _z;\n    }```\n    point2dpoint3d\n    virtual base classvirtual funcnonstatic member\n    \n    \n#### \n  \n  \n  constructor\n  \n#### memeberfunc\n  nonstatic member funcnonvirtual \n  this\n  member funcdouble (Point::*pmf)();\n  double (point::*coord)() =&point::x;\n       :coord=&point::y\n       origin.*coord)()/(ptr->*coord)()\n       (coord)(&origin)/(coord)(ptr)\n       \n##### virtual memeber func\n  g++\n  ```cpp\n  #include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t\tvirtual int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n}; \nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;\n\t\tBase1 *ptr=new Base1;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;//3.2\n\t\tcout<<(ptr->*pmf)()<<endl;//3.2*ptr->vptr[(int)pmf])(ptr)\n\t\tprintf(\"%p\\n\",&Base1::getp);//1\n\t\tprintf(\"%p\\n\",&Base1::setp);//40xxx\n\t\tprintf(\"%p\\n\",&Base1::test);// 9\n\t\tprintf(\"%p\\n\",&Base1::test1);//11\n\t\t\n\t\treturn  0;\n}```\n\n\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t        int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n}; \nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;\n\t\tBase1 *ptr=new Base1;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;\n\t\tcout<<(ptr->*pmf)()<<endl;\n\t\tprintf(\"%p\\n\",&Base1::getp);\n\t\tprintf(\"%p\\n\",&Base1::setp);\n\t\tprintf(\"%p\\n\",&Base1::test);\n\t\tprintf(\"%p\\n\",&Base1::test1);\n                  \n                int (Base1::*pmi)()=&Base1::test1;//or testcfrontmay <127)\n                Base1 *ptr2=new Base1;\n                cout<<(ptr2->*pmi)()<<endl;\n                delete ptr;\n                delete ptr2;\n\t\t\n\t\treturn  0;\n}```\n##### member func\nmem func point\nvirtual non virtual\ngdb\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t        int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n};\nclass Base2 {\n\t\tpublic:\n\t\t\t\tvirtual float get2p(){return m2p;}\n\t\t\t\tvirtual void set2p(float m2pp){m2p=m2pp;}\n\t\t\t\tint test22() {return 5;}\n\t\t\t\tvirtual int test21(){return 6;}\n\t\tprivate:\n\t\t\t\tfloat m2p;\n};\nclass Der:public Base1,public Base2{\n\t\tpublic:\n\t\t\t\tvirtual float get3p(){return m3p;}\n\t\tprivate:\n\t\t\t\tfloat m3p;\n\n};\nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;//\n\t\tBase1 *ptr=new Der;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;\n\t\tcout<<(ptr->*pmf)()<<endl;\n\t\tprintf(\"%p\\n\",&Der::getp);\n\t\tprintf(\"%p\\n\",&Base1::setp);\n\t\tprintf(\"%p\\n\",&Base1::test);\n\t\tprintf(\"%p\\n\",&Base1::test1);\n                  \n                int (Base1::*pmi)()=&Base1::test1;//or test\n                Base1 *ptr2=new Base1;\n                cout<<(ptr2->*pmi)()<<endl;\n                delete ptr;\n                delete ptr2;\n\t\t\n\t\treturn  0;\n}```\n##### \n##### inline func:\n\n\nset,getset get inline\ninlineinline\n\n\ninline\n```cpp\ninline int min (int i,int j){\n                   return i<j?i:j;\n                   }\n         \n         inline int bar() {\n            int minval;\n            int val1=1024;\n            int val2=2048;\n            minval=min(val1,val2); val1<val2?val1:val2;\n            minval=min(1024,2048);1024\n            minval=min(fool(),bar()+1) \n                 int t1,t2; minval=(t1=foo()),(t2=bar()+1),t1<t2?...)\n           \n           \n            return minval}```\n :  \n c\n            \n","source":"_posts/cpp-funcmember-memory.md","raw":"---\ntitle: cpp_funcmember_memory\ndate: 2018-06-09 16:21:29\ntags: cpp_class\ncategories: c&cpp\n---\n### c++ function\nsomething:  \nc++linux\n <!--more-->\n \n + \n 1struct+ \n 2+thisthisthis \n \n \n+ c++struct--this\n\n\n + c++this\n this\n \n+  c++function\n#### \n   \n   Point3d obj;  \n   Point3d *p=&obj;  \n   \n   \n   this  \n #### \n##### \n   thisc++  \n  +  a;this\n  +  bthis\n  +  c;mangling___ \n + base class &derived class\n      \n      extern C\n      gdb\n   \n   \n+    \n      \n  ```cpp\n  void normalize__Point(register const Point3d *const this,Point3d &_result)\n   {\n      _reuslt.Point3d::Point3d() //\n      _result._x=this->__x/2;\n      ...\n      return ;\n   }\n   \n   Point3d Point3d::normmalize() const{\n       return  Point3d(_x/2 ...) \n    =return Point3d(this->_x/2,...)   \n  ```\n ##### virtual func\n normilaze  \n ptr->normilaze()= *ptr->vptr[1])(ptr);  \n Point3d::xxx  \n --\n \n \n##### \n this  \n this  \n    \n ```cpp\n ((Point3d*)0)->object_count() ;```\n static  \n static  \n+ non static \n+ const volatile virtual\n+   \n this~ unsigned int(*) ();\n \n \n ##### \n + a pz->z()pz\n + b this,\n +  c\n \n+  c\n##### \ndynamic_cast  \n virtual  \n ptrvtable[0]\n\n+   \nclassvtable,virtual func\nvirtual func\n+ \n vptrx=3;  vtable\nxxx->vptr[n](this).. \n+ vptrvirtualvirtual funcslot\n+ slot(n)\n   \n      derived de; //,vptr,    \n      base *p=&de;//int x=3;,\n      x,x,pvptr,\n      p->xx();//xxvirtual (*p->vptr[1])(p)\n     \n##### some question     \n //p->xx()xx()?\n //derivedbasederived,\n pderivederived\n \n \n \n##### virtual func\n \n ```cpp\n class base1{\n    public :\n     int a;\n virtual int a(){return a;}\n    virtual base1* clone() const;\n   }\n class base2{\n  public:\n    int b;\n    virtual int b(){return b;\n    virtual base2* clone() const;\n    }\n class derive:public base1,public base2\n    int c;\n    virtual int c(){return c;}\n    virtual derive* clone() const;\n    }\n    ```\n derivedbase1base2,;\n```\n  (1)virtual destructor (\n b()\n    (3clone \n  a)   base2 *pbase2=new derive;\n  \n   =>  derived *tmp=new derive;\n   base2 *pbase2=tmp?tmp+sizeof(base1):0;```\n      \n pbase2b pbase->b,  base *p=de;pdebase\n+ delete pbase2pbase  \n  avirtual destructor  \n```cpp \n   base2 *pbase2=new derive;  \n  delete pbase2;//invoke derive class's destructor (virtual )```\n  \n vptr,this\n  \n+ offsetpbase2  \n//vtableslotslotfaddrthisoffset  \n //*pbase2->vptr[1])(pbase2);  \n //*pbase2->vptr[1].faddr)(pbase2+pbase2-  >vptr[1].offset);virtual func\n  \n +   \n + []thunk\n  this+=sizeof(base1)\n          Derived::~Derived(this);//\n   virtual table slotslotvirtual functhunk(this)\n  virtual table;,vtable\n  + 1)derivedbase class)this\n  + 2)>=2base class virtual tableslot\n        base1 *pbase1 =new derived;\n        base2 *pbase2=new derived;\n        delete pbase1//this,virtual table slotdestructor\n        \n        delete pbase2//this ,thunk\n        vptrvtable\n        \n+ []  \n   \n   sunvtable offset\n  \n\n```cpp\nbase2 *ptr =new derived;\n       delete ptr;//derived::~deirved,ptrvirtual\n       \n       derived *pder=new derived;\n       pder->b();//bpderbase2 subobj\n       \n       base2 *pb1=new derived;\n       base2 *pb2=pb1->clone()//derived:clone,base2 subobj\n       \n       sunsplit\n       virtual func```\n+ []IBM:  \nthunk;thunkvirtual functhis\n     \n     \n##### virtual func\npoint2d.point3dthis\n```cpp\nclass point2d{\n  public:\n  point2d()\n  virtual ~point2d()\n  virtual void mumble()\n  virutal  float z()\n  protected:\n  float _x,_y;\n  } \n  class point3d:public virtual point2d{\n    public:\n    point3d()\n    ~point3d\n    protected:\n    float _z;\n    }```\n    point2dpoint3d\n    virtual base classvirtual funcnonstatic member\n    \n    \n#### \n  \n  \n  constructor\n  \n#### memeberfunc\n  nonstatic member funcnonvirtual \n  this\n  member funcdouble (Point::*pmf)();\n  double (point::*coord)() =&point::x;\n       :coord=&point::y\n       origin.*coord)()/(ptr->*coord)()\n       (coord)(&origin)/(coord)(ptr)\n       \n##### virtual memeber func\n  g++\n  ```cpp\n  #include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t\tvirtual int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n}; \nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;\n\t\tBase1 *ptr=new Base1;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;//3.2\n\t\tcout<<(ptr->*pmf)()<<endl;//3.2*ptr->vptr[(int)pmf])(ptr)\n\t\tprintf(\"%p\\n\",&Base1::getp);//1\n\t\tprintf(\"%p\\n\",&Base1::setp);//40xxx\n\t\tprintf(\"%p\\n\",&Base1::test);// 9\n\t\tprintf(\"%p\\n\",&Base1::test1);//11\n\t\t\n\t\treturn  0;\n}```\n\n\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t        int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n}; \nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;\n\t\tBase1 *ptr=new Base1;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;\n\t\tcout<<(ptr->*pmf)()<<endl;\n\t\tprintf(\"%p\\n\",&Base1::getp);\n\t\tprintf(\"%p\\n\",&Base1::setp);\n\t\tprintf(\"%p\\n\",&Base1::test);\n\t\tprintf(\"%p\\n\",&Base1::test1);\n                  \n                int (Base1::*pmi)()=&Base1::test1;//or testcfrontmay <127)\n                Base1 *ptr2=new Base1;\n                cout<<(ptr2->*pmi)()<<endl;\n                delete ptr;\n                delete ptr2;\n\t\t\n\t\treturn  0;\n}```\n##### member func\nmem func point\nvirtual non virtual\ngdb\n```cpp\n#include<iostream>\n#include<stdio.h>\nusing namespace std;\nclass Base1 {\n\t\tpublic:\n\t\t\t\tvirtual float getp() { return mp;}\n\t\t\t\tvoid setp(float mmp){mp=mmp;}\n\t\t\t        int test(){return 3;}\n\t\t\t\tvirtual int test1(){return 4;}\n\t\tprivate:\n\t\t\t\tfloat mp;\n};\nclass Base2 {\n\t\tpublic:\n\t\t\t\tvirtual float get2p(){return m2p;}\n\t\t\t\tvirtual void set2p(float m2pp){m2p=m2pp;}\n\t\t\t\tint test22() {return 5;}\n\t\t\t\tvirtual int test21(){return 6;}\n\t\tprivate:\n\t\t\t\tfloat m2p;\n};\nclass Der:public Base1,public Base2{\n\t\tpublic:\n\t\t\t\tvirtual float get3p(){return m3p;}\n\t\tprivate:\n\t\t\t\tfloat m3p;\n\n};\nint main()\n{  \n\t\tfloat (Base1::*pmf)()=&Base1::getp;//\n\t\tBase1 *ptr=new Der;\n\t\tptr->setp(3.2);\n\t\tcout<<ptr->getp()<<endl;\n\t\tcout<<(ptr->*pmf)()<<endl;\n\t\tprintf(\"%p\\n\",&Der::getp);\n\t\tprintf(\"%p\\n\",&Base1::setp);\n\t\tprintf(\"%p\\n\",&Base1::test);\n\t\tprintf(\"%p\\n\",&Base1::test1);\n                  \n                int (Base1::*pmi)()=&Base1::test1;//or test\n                Base1 *ptr2=new Base1;\n                cout<<(ptr2->*pmi)()<<endl;\n                delete ptr;\n                delete ptr2;\n\t\t\n\t\treturn  0;\n}```\n##### \n##### inline func:\n\n\nset,getset get inline\ninlineinline\n\n\ninline\n```cpp\ninline int min (int i,int j){\n                   return i<j?i:j;\n                   }\n         \n         inline int bar() {\n            int minval;\n            int val1=1024;\n            int val2=2048;\n            minval=min(val1,val2); val1<val2?val1:val2;\n            minval=min(1024,2048);1024\n            minval=min(fool(),bar()+1) \n                 int t1,t2; minval=(t1=foo()),(t2=bar()+1),t1<t2?...)\n           \n           \n            return minval}```\n :  \n c\n            \n","slug":"cpp-funcmember-memory","published":1,"updated":"2018-06-09T08:46:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghou001c00jxma3nwerh","content":"<h3 id=\"c-function\"><a href=\"#c-function\" class=\"headerlink\" title=\"c++ function\"></a>c++ function</h3><p>something:<br>c++linux<br> <a id=\"more\"></a></p>\n<ul>\n<li><br>1struct+ <br>2+thisthisthis <br></li>\n</ul>\n<ul>\n<li>c++structthis</li>\n</ul>\n<ul>\n<li>c++this<br>this</li>\n</ul>\n<ul>\n<li><p>c++function</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Point3d obj;<br>Point3d *p=&obj;<br></p>\n<p>this  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>thisc++  </p>\n<ul>\n<li>a;this</li>\n<li>bthis</li>\n<li>c;mangling___ </li>\n<li>base class &amp;derived class<br> <br> extern C<br> gdb</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p><br>   </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">normalize__Point</span><span class=\"params\">(<span class=\"keyword\">register</span> <span class=\"keyword\">const</span> Point3d *<span class=\"keyword\">const</span> <span class=\"keyword\">this</span>,Point3d &amp;_result)</span></span></span><br><span class=\"line\"><span class=\"function\"> </span>&#123;</span><br><span class=\"line\">    _reuslt.Point3d::Point3d() <span class=\"comment\">//</span></span><br><span class=\"line\">    _result._x=<span class=\"keyword\">this</span>-&gt;__x/<span class=\"number\">2</span>;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> Point3d Point3d::normmalize() <span class=\"keyword\">const</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span>  Point3d(_x/<span class=\"number\">2</span> ...) </span><br><span class=\"line\">  =<span class=\"keyword\">return</span> Point3d(<span class=\"keyword\">this</span>-&gt;_x/<span class=\"number\">2</span>,...)</span><br></pre></td></tr></table></figure>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p>normilaze<br>ptr-&gt;normilaze()= *ptr-&gt;vptr[1])(ptr);<br>Point3d::xxx  <br></p>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> this<br> this<br> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">((Point3d*)<span class=\"number\">0</span>)-&gt;object_count() ;</span><br></pre></td></tr></table></figure></p>\n<p> static<br> static  </p>\n<ul>\n<li>non static </li>\n<li>const volatile virtual</li>\n<li><p><br>this~ unsigned int(*) ();<br></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>a pz-&gt;z()pz</li>\n<li>b this,</li>\n<li>c</li>\n</ul>\n</li>\n<li><p>c</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>dynamic_cast<br>virtual<br>ptrvtable[0]</p>\n</li>\n<li><p><br>classvtable,virtual func<br>virtual func</p>\n</li>\n<li><br>vptrx=3;  vtable<br>xxx-&gt;vptr<a href=\"this\">n</a>.. </li>\n<li>vptrvirtualvirtual funcslot</li>\n<li>slot(n)<br>  <pre><code>derived de; //,vptr,    \nbase *p=&amp;de;//int x=3;,\nx,x,pvptr,\np-&gt;xx();//xxvirtual (*p-&gt;vptr[1])(p)\n</code></pre></li>\n</ul>\n<h5 id=\"some-question\"><a href=\"#some-question\" class=\"headerlink\" title=\"some question\"></a>some question</h5><p> //p-&gt;xx()xx()?<br> //derivedbasederived,<br> pderivederived<br> </p>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">base1</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> :</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">a</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> a;&#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> base1* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">base2</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">b</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> b;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> base2* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">derive</span>:</span><span class=\"keyword\">public</span> base1,<span class=\"keyword\">public</span> base2</span><br><span class=\"line\">   <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">c</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> c;&#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> derive* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p> derivedbase1base2,;<br><figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">1</span>)<span class=\"keyword\">virtual</span> <span class=\"function\"><span class=\"keyword\">destructor</span> <span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"> b()</span></span></span><br><span class=\"line\"><span class=\"function\">  <span class=\"params\">(3clone </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">a)</span>   <span class=\"title\">base2</span> *<span class=\"title\">pbase2</span>=<span class=\"title\">new</span> <span class=\"title\">derive</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> =&gt;  derived *tmp=new derive;</span><br><span class=\"line\"> base2 *pbase2=tmp?tmp+sizeof(base1):<span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure></p>\n<p> pbase2b pbase-&gt;b,  base *p=de;pdebase</p>\n<ul>\n<li>delete pbase2pbase<br>avirtual destructor  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> base2 *pbase2=<span class=\"keyword\">new</span> derive;  </span><br><span class=\"line\"><span class=\"keyword\">delete</span> pbase2;<span class=\"comment\">//invoke derive class's destructor (virtual )</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> vptr,this<br>  </p>\n<ul>\n<li><p>offsetpbase2<br>//vtableslotslotfaddrthisoffset<br>//<em>pbase2-&gt;vptr[1])(pbase2);<br>//</em>pbase2-&gt;vptr[1].faddr)(pbase2+pbase2-  &gt;vptr[1].offset);virtual func</p>\n<ul>\n<li>  </li>\n<li>[]thunk<br>this+=sizeof(base1)<pre><code>Derived::~Derived(this);//\n</code></pre>virtual table slotslotvirtual functhunk(this)<br>virtual table;,vtable</li>\n<li>1)derivedbase class)this</li>\n<li><p>2)&gt;=2base class virtual tableslot</p>\n<pre><code>base1 *pbase1 =new derived;\nbase2 *pbase2=new derived;\ndelete pbase1//this,virtual table slotdestructor\n\ndelete pbase2//this ,thunk\nvptrvtable\n\n</code></pre></li>\n</ul>\n</li>\n<li><p>[]<br> <br> sunvtable offset<br>  <br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">base2 *ptr =<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> ptr;<span class=\"comment\">//derived::~deirved,ptrvirtual</span></span><br><span class=\"line\"></span><br><span class=\"line\">derived *pder=<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\">pder-&gt;b();<span class=\"comment\">//bpderbase2 subobj</span></span><br><span class=\"line\"></span><br><span class=\"line\">base2 *pb1=<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\">base2 *pb2=pb1-&gt;clone()<span class=\"comment\">//derived:clone,base2 subobj</span></span><br><span class=\"line\"></span><br><span class=\"line\">sunsplit</span><br><span class=\"line\"><span class=\"keyword\">virtual</span> func</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>[]IBM:<br>thunk;thunkvirtual functhis</p>\n</li>\n</ul>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p>point2d.point3dthis<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">point2d</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  point2d()</span><br><span class=\"line\">  <span class=\"keyword\">virtual</span> ~point2d()</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">mumble</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">  virutal  <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  protected:</span><br><span class=\"line\">  <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> point2d&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    point3d()</span><br><span class=\"line\">    ~point3d</span><br><span class=\"line\">    <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<pre><code>point2dpoint3d\nvirtual base classvirtual funcnonstatic member\n\n\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  <br>  <br>  constructor</p>\n<h4 id=\"memeber-func\"><a href=\"#memeber-func\" class=\"headerlink\" title=\"memeberfunc\"></a>memeberfunc</h4><p>  nonstatic member funcnonvirtual <br>  this<br>  member funcdouble (Point::<em>pmf)();<br>  double (point::</em>coord)() =&amp;point::x;<br>       :coord=&amp;point::y<br>       origin.<em>coord)()/(ptr-&gt;</em>coord)()<br>       (coord)(&amp;origin)/(coord)(ptr)</p>\n<h5 id=\"virtual-memeber-func\"><a href=\"#virtual-memeber-func\" class=\"headerlink\" title=\"virtual memeber func\"></a>virtual memeber func</h5><p>  g++<br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;</span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//3.2</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//3.2*ptr-&gt;vptr[(int)pmf])(ptr)</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::getp);<span class=\"comment\">//1</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);<span class=\"comment\">//40xxx</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);<span class=\"comment\">// 9</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);<span class=\"comment\">//11</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t        <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;</span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::getp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);</span><br><span class=\"line\">                  </span><br><span class=\"line\">                <span class=\"keyword\">int</span> (Base1::*pmi)()=&amp;Base1::test1;<span class=\"comment\">//or testcfrontmay &lt;127)</span></span><br><span class=\"line\">                Base1 *ptr2=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">                <span class=\"built_in\">cout</span>&lt;&lt;(ptr2-&gt;*pmi)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr2;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"member-func\"><a href=\"#member-func\" class=\"headerlink\" title=\"member func\"></a>member func</h5><p>mem func point<br>virtual non virtual<br>gdb<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t        <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base2</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">get2p</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> m2p;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">set2p</span><span class=\"params\">(<span class=\"keyword\">float</span> m2pp)</span></span>&#123;m2p=m2pp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test22</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">5</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test21</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">6</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> m2p;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Der</span>:</span><span class=\"keyword\">public</span> Base1,<span class=\"keyword\">public</span> Base2&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">get3p</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> m3p;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> m3p;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;<span class=\"comment\">//</span></span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Der;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Der::getp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);</span><br><span class=\"line\">                  </span><br><span class=\"line\">                <span class=\"keyword\">int</span> (Base1::*pmi)()=&amp;Base1::test1;<span class=\"comment\">//or test</span></span><br><span class=\"line\">                Base1 *ptr2=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">                <span class=\"built_in\">cout</span>&lt;&lt;(ptr2-&gt;*pmi)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr2;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"inline-func\"><a href=\"#inline-func\" class=\"headerlink\" title=\"inline func:\"></a>inline func:</h5><p><br><br>set,getset get inline<br>inlineinline<br><br><br>inline<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"keyword\">int</span> <span class=\"title\">min</span> <span class=\"params\">(<span class=\"keyword\">int</span> i,<span class=\"keyword\">int</span> j)</span></span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> i&lt;j?i:j;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"keyword\">int</span> <span class=\"title\">bar</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> minval;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> val1=<span class=\"number\">1024</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> val2=<span class=\"number\">2048</span>;</span><br><span class=\"line\">   minval=min(val1,val2); val1&lt;val2?val1:val2;</span><br><span class=\"line\">   minval=min(<span class=\"number\">1024</span>,<span class=\"number\">2048</span>);<span class=\"number\">1024</span></span><br><span class=\"line\">   minval=min(fool(),bar()+<span class=\"number\">1</span>) </span><br><span class=\"line\">        <span class=\"keyword\">int</span> t1,t2; minval=(t1=foo()),(t2=bar()+<span class=\"number\">1</span>),t1&lt;t2?...)</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">return</span> minval&#125;</span><br></pre></td></tr></table></figure></p>\n<p> :<br> c</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-function\"><a href=\"#c-function\" class=\"headerlink\" title=\"c++ function\"></a>c++ function</h3><p>something:<br>c++linux<br> ","more":"</p>\n<ul>\n<li><br>1struct+ <br>2+thisthisthis <br></li>\n</ul>\n<ul>\n<li>c++structthis</li>\n</ul>\n<ul>\n<li>c++this<br>this</li>\n</ul>\n<ul>\n<li><p>c++function</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>Point3d obj;<br>Point3d *p=&obj;<br></p>\n<p>this  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>thisc++  </p>\n<ul>\n<li>a;this</li>\n<li>bthis</li>\n<li>c;mangling___ </li>\n<li>base class &amp;derived class<br> <br> extern C<br> gdb</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p><br>   </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">normalize__Point</span><span class=\"params\">(<span class=\"keyword\">register</span> <span class=\"keyword\">const</span> Point3d *<span class=\"keyword\">const</span> <span class=\"keyword\">this</span>,Point3d &amp;_result)</span></span></span><br><span class=\"line\"><span class=\"function\"> </span>&#123;</span><br><span class=\"line\">    _reuslt.Point3d::Point3d() <span class=\"comment\">//</span></span><br><span class=\"line\">    _result._x=<span class=\"keyword\">this</span>-&gt;__x/<span class=\"number\">2</span>;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> Point3d Point3d::normmalize() <span class=\"keyword\">const</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span>  Point3d(_x/<span class=\"number\">2</span> ...) </span><br><span class=\"line\">  =<span class=\"keyword\">return</span> Point3d(<span class=\"keyword\">this</span>-&gt;_x/<span class=\"number\">2</span>,...)</span><br></pre></td></tr></table></figure>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p>normilaze<br>ptr-&gt;normilaze()= *ptr-&gt;vptr[1])(ptr);<br>Point3d::xxx  <br></p>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p> this<br> this<br> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">((Point3d*)<span class=\"number\">0</span>)-&gt;object_count() ;</span><br></pre></td></tr></table></figure></p>\n<p> static<br> static  </p>\n<ul>\n<li>non static </li>\n<li>const volatile virtual</li>\n<li><p><br>this~ unsigned int(*) ();<br></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>a pz-&gt;z()pz</li>\n<li>b this,</li>\n<li>c</li>\n</ul>\n</li>\n<li><p>c</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>dynamic_cast<br>virtual<br>ptrvtable[0]</p>\n</li>\n<li><p><br>classvtable,virtual func<br>virtual func</p>\n</li>\n<li><br>vptrx=3;  vtable<br>xxx-&gt;vptr<a href=\"this\">n</a>.. </li>\n<li>vptrvirtualvirtual funcslot</li>\n<li>slot(n)<br>  <pre><code>derived de; //,vptr,    \nbase *p=&amp;de;//int x=3;,\nx,x,pvptr,\np-&gt;xx();//xxvirtual (*p-&gt;vptr[1])(p)\n</code></pre></li>\n</ul>\n<h5 id=\"some-question\"><a href=\"#some-question\" class=\"headerlink\" title=\"some question\"></a>some question</h5><p> //p-&gt;xx()xx()?<br> //derivedbasederived,<br> pderivederived<br> </p>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">base1</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> :</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">a</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> a;&#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> base1* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">base2</span>&#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">b</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> b;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> base2* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">derive</span>:</span><span class=\"keyword\">public</span> base1,<span class=\"keyword\">public</span> base2</span><br><span class=\"line\">   <span class=\"keyword\">int</span> c;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">c</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> c;&#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> derive* <span class=\"title\">clone</span><span class=\"params\">()</span> <span class=\"keyword\">const</span></span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p> derivedbase1base2,;<br><figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">1</span>)<span class=\"keyword\">virtual</span> <span class=\"function\"><span class=\"keyword\">destructor</span> <span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"> b()</span></span></span><br><span class=\"line\"><span class=\"function\">  <span class=\"params\">(3clone </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">a)</span>   <span class=\"title\">base2</span> *<span class=\"title\">pbase2</span>=<span class=\"title\">new</span> <span class=\"title\">derive</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> =&gt;  derived *tmp=new derive;</span><br><span class=\"line\"> base2 *pbase2=tmp?tmp+sizeof(base1):<span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure></p>\n<p> pbase2b pbase-&gt;b,  base *p=de;pdebase</p>\n<ul>\n<li>delete pbase2pbase<br>avirtual destructor  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> base2 *pbase2=<span class=\"keyword\">new</span> derive;  </span><br><span class=\"line\"><span class=\"keyword\">delete</span> pbase2;<span class=\"comment\">//invoke derive class's destructor (virtual )</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> vptr,this<br>  </p>\n<ul>\n<li><p>offsetpbase2<br>//vtableslotslotfaddrthisoffset<br>//<em>pbase2-&gt;vptr[1])(pbase2);<br>//</em>pbase2-&gt;vptr[1].faddr)(pbase2+pbase2-  &gt;vptr[1].offset);virtual func</p>\n<ul>\n<li>  </li>\n<li>[]thunk<br>this+=sizeof(base1)<pre><code>Derived::~Derived(this);//\n</code></pre>virtual table slotslotvirtual functhunk(this)<br>virtual table;,vtable</li>\n<li>1)derivedbase class)this</li>\n<li><p>2)&gt;=2base class virtual tableslot</p>\n<pre><code>base1 *pbase1 =new derived;\nbase2 *pbase2=new derived;\ndelete pbase1//this,virtual table slotdestructor\n\ndelete pbase2//this ,thunk\nvptrvtable\n\n</code></pre></li>\n</ul>\n</li>\n<li><p>[]<br> <br> sunvtable offset<br>  <br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">base2 *ptr =<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> ptr;<span class=\"comment\">//derived::~deirved,ptrvirtual</span></span><br><span class=\"line\"></span><br><span class=\"line\">derived *pder=<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\">pder-&gt;b();<span class=\"comment\">//bpderbase2 subobj</span></span><br><span class=\"line\"></span><br><span class=\"line\">base2 *pb1=<span class=\"keyword\">new</span> derived;</span><br><span class=\"line\">base2 *pb2=pb1-&gt;clone()<span class=\"comment\">//derived:clone,base2 subobj</span></span><br><span class=\"line\"></span><br><span class=\"line\">sunsplit</span><br><span class=\"line\"><span class=\"keyword\">virtual</span> func</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>[]IBM:<br>thunk;thunkvirtual functhis</p>\n</li>\n</ul>\n<h5 id=\"virtual-func\"><a href=\"#virtual-func\" class=\"headerlink\" title=\"virtual func\"></a>virtual func</h5><p>point2d.point3dthis<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">point2d</span>&#123;</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  point2d()</span><br><span class=\"line\">  <span class=\"keyword\">virtual</span> ~point2d()</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">mumble</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">  virutal  <span class=\"keyword\">float</span> <span class=\"title\">z</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  protected:</span><br><span class=\"line\">  <span class=\"keyword\">float</span> _x,_y;</span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">point3d</span>:</span><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> point2d&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    point3d()</span><br><span class=\"line\">    ~point3d</span><br><span class=\"line\">    <span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"keyword\">float</span> _z;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></p>\n<pre><code>point2dpoint3d\nvirtual base classvirtual funcnonstatic member\n\n\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  <br>  <br>  constructor</p>\n<h4 id=\"memeber-func\"><a href=\"#memeber-func\" class=\"headerlink\" title=\"memeberfunc\"></a>memeberfunc</h4><p>  nonstatic member funcnonvirtual <br>  this<br>  member funcdouble (Point::<em>pmf)();<br>  double (point::</em>coord)() =&amp;point::x;<br>       :coord=&amp;point::y<br>       origin.<em>coord)()/(ptr-&gt;</em>coord)()<br>       (coord)(&amp;origin)/(coord)(ptr)</p>\n<h5 id=\"virtual-memeber-func\"><a href=\"#virtual-memeber-func\" class=\"headerlink\" title=\"virtual memeber func\"></a>virtual memeber func</h5><p>  g++<br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;</span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//3.2</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//3.2*ptr-&gt;vptr[(int)pmf])(ptr)</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::getp);<span class=\"comment\">//1</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);<span class=\"comment\">//40xxx</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);<span class=\"comment\">// 9</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);<span class=\"comment\">//11</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t        <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;</span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::getp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);</span><br><span class=\"line\">                  </span><br><span class=\"line\">                <span class=\"keyword\">int</span> (Base1::*pmi)()=&amp;Base1::test1;<span class=\"comment\">//or testcfrontmay &lt;127)</span></span><br><span class=\"line\">                Base1 *ptr2=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">                <span class=\"built_in\">cout</span>&lt;&lt;(ptr2-&gt;*pmi)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr2;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"member-func\"><a href=\"#member-func\" class=\"headerlink\" title=\"member func\"></a>member func</h5><p>mem func point<br>virtual non virtual<br>gdb<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base1</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">getp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> mp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setp</span><span class=\"params\">(<span class=\"keyword\">float</span> mmp)</span></span>&#123;mp=mmp;&#125;</span><br><span class=\"line\">\t\t\t        <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">3</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> mp;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base2</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">get2p</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> m2p;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">set2p</span><span class=\"params\">(<span class=\"keyword\">float</span> m2pp)</span></span>&#123;m2p=m2pp;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">test22</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">5</span>;&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">int</span> <span class=\"title\">test21</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> <span class=\"number\">6</span>;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> m2p;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Der</span>:</span><span class=\"keyword\">public</span> Base1,<span class=\"keyword\">public</span> Base2&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">float</span> <span class=\"title\">get3p</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> m3p;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">float</span> m3p;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;  </span><br><span class=\"line\">\t\t<span class=\"keyword\">float</span> (Base1::*pmf)()=&amp;Base1::getp;<span class=\"comment\">//</span></span><br><span class=\"line\">\t\tBase1 *ptr=<span class=\"keyword\">new</span> Der;</span><br><span class=\"line\">\t\tptr-&gt;setp(<span class=\"number\">3.2</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;ptr-&gt;getp()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;(ptr-&gt;*pmf)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Der::getp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::setp);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%p\\n\"</span>,&amp;Base1::test1);</span><br><span class=\"line\">                  </span><br><span class=\"line\">                <span class=\"keyword\">int</span> (Base1::*pmi)()=&amp;Base1::test1;<span class=\"comment\">//or test</span></span><br><span class=\"line\">                Base1 *ptr2=<span class=\"keyword\">new</span> Base1;</span><br><span class=\"line\">                <span class=\"built_in\">cout</span>&lt;&lt;(ptr2-&gt;*pmi)()&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr;</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> ptr2;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>  <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"inline-func\"><a href=\"#inline-func\" class=\"headerlink\" title=\"inline func:\"></a>inline func:</h5><p><br><br>set,getset get inline<br>inlineinline<br><br><br>inline<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"keyword\">int</span> <span class=\"title\">min</span> <span class=\"params\">(<span class=\"keyword\">int</span> i,<span class=\"keyword\">int</span> j)</span></span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> i&lt;j?i:j;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"keyword\">int</span> <span class=\"title\">bar</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> minval;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> val1=<span class=\"number\">1024</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> val2=<span class=\"number\">2048</span>;</span><br><span class=\"line\">   minval=min(val1,val2); val1&lt;val2?val1:val2;</span><br><span class=\"line\">   minval=min(<span class=\"number\">1024</span>,<span class=\"number\">2048</span>);<span class=\"number\">1024</span></span><br><span class=\"line\">   minval=min(fool(),bar()+<span class=\"number\">1</span>) </span><br><span class=\"line\">        <span class=\"keyword\">int</span> t1,t2; minval=(t1=foo()),(t2=bar()+<span class=\"number\">1</span>),t1&lt;t2?...)</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">return</span> minval&#125;</span><br></pre></td></tr></table></figure></p>\n<p> :<br> c</p>"},{"title":"cpp_inheritance","date":"2018-06-09T03:44:54.000Z","_content":"### c++ \n#### \nobj is-ahas-a\n<!--more-->\n the class being inherited from is called the parent class, base class, or superclass, and the class doing the inheriting is called the child class, derived class, or subclass.\n\n#### \n\n  \nbase::  \n2)\nlearncpp\n```cpp\n#include <iostream>\n#include <string>\n ```\n \n ```cpp\nclass Person\n{\npublic:\n    std::string m_name;\n    int m_age;\n \n    Person(std::string name = \"\", int age = 0)\n        : m_name(name), m_age(age)\n    {\n    }\n \n    std::string getName() const { return m_name; }\n    int getAge() const { return m_age; }\n \n};\n \n// BaseballPlayer publicly inheriting Person\nclass BaseballPlayer : public Person\n{\npublic:\n    double m_battingAverage;\n    int m_homeRuns;\n \n    BaseballPlayer(double battingAverage = 0.0, int homeRuns = 0)\n       : m_battingAverage(battingAverage), m_homeRuns(homeRuns)\n    {\n    }\n};\n \nint main()\n{\n    // Create a new BaseballPlayer object\n    BaseballPlayer joe;\n    // Assign it a name (we can do this directly because m_name is public)\n    joe.m_name = \"Joe\";\n    // Print out the name\n    std::cout << joe.getName() << '\\n'; // use the getName() function we've acquired from the Person base class\n \n    return 0;\n}```\n#### \nA child class inherits both behaviors (member functions) and properties (member variables) from the parent \npublic\n\n|Access specifier in base class|when inherited publicly|wheninherited privately|when inherited protectedly|\n|:-|:-|:-|:-|\n|Public|Public|Private|Protected|\n|Private|Inaccessible|Inaccessible|Inaccessible|\n|Protected|Protected|Private|Protected|\n\n#### \n+ \nprivate\n\n\n#### \n+   \n+ Because Derived inherits functions and variables from Base, \nyou may assume that the members of Base are copied into Derived. \nHowever, this is not true. Instead, we can consider Derived as a two part class: \none part Derived, and one part Base.\n\n+ //const\n\n```cpp\nclass Derived: public Base\n{\nprivate: // our member is now private\n    double m_cost;\n \npublic:\n    Derived(double cost=0.0, int id=0)\n        : Base(id), // Call Base(int) constructor with value id!\n            m_cost(cost)\n    {\n    }\n    ```\n    \n+ \n+ ovrridewirte  \n + \nWhen a member function is called with a derived class object, \nthe compiler first looks to see if that member exists in the derived class.\n If not, it begins walking up the inheritance chain and checking whether the member \n has been defined in any of the parent classes. It uses the first one it finds.\n \n + private public:  \n \n ```cpp\n class Base\n{\nprivate:\n\tvoid print()\n\t{\n\t\tstd::cout << \"Base\";\n\t}\n};\nclass Derived : public Base\n{\npublic:\n\tvoid print()\n\t{\n\t\tstd::cout << \"Derived \";\n\t}\n};\nint main()\n{\n\tDerived derived;\n\tderived.print(); // calls derived::print(), which is public\n\treturn 0;\n}\n```\n\n+ :\n\n```cpp\nclass Base\n{\nprotected:\n    int m_value;\n \npublic:\n    Base(int value)\n        : m_value(value)\n    {\n    }\n \n    void identify() { std::cout << \"I am a Base\\n\"; }\n};\n\nclass Derived: public Base\n{\npublic:\n    Derived(int value)\n        : Base(value)\n    {\n    }\n \n    int GetValue() { return m_value; }\n \n    void identify()\n    {\n        Base::identify(); // call Base::identify() first\n        std::cout << \"I am a Derived\\n\"; // then identify ourselves\n    }\n};\n```\n+ c++11  \nbasepublic:\n\n```cpp\nclass Base\n{\nprivate:\n    int m_value;\n \npublic:\n    Base(int value)\n        : m_value(value)\n    {\n    }\n \nprotected:\n    void printValue() { std::cout << m_value; }\n};\nclass Derived: public Base\n{\npublic:\n    Derived(int value)\n        : Base(value)\n    {\n    }\n    // Base::printValue was inherited as protected, so the public has no access\n    // But we're changing it to public via a using declaration\n    using Base::printValue; // note: no parenthesis here  //c++11\n};\n\nint main()\n{\n    Derived derived(7);\n \n    // printValue is public in Derived, so this is okay\n    derived.printValue(); // prints 7\n    return 0;\n}\n```\n\n\n```cpp\nclass Base\n{\nprivate:\n\tint m_value;\n \npublic:\n\tBase(int value)\n\t\t: m_value(value)\n\t{\n\t}\n \n\tint getValue() { return m_value; }\n};\n \nclass Derived : public Base\n{\npublic:\n\tDerived(int value)\n\t\t: Base(value)\n\t{\n\t}\n \n \n\tint getValue() = delete; // mark this function as inaccessible\n};\n \nint main()\n{\n\tDerived derived(7);\n \n\t// The following won't work because getValue() has been deleted!\n\tstd::cout << derived.getValue();\n \n\treturn 0;\n}\n```","source":"_posts/cpp-inheritance.md","raw":"---\ntitle: cpp_inheritance\ndate: 2018-06-09 11:44:54\ntags: cpp_class\ncategories: c&cpp\n---\n### c++ \n#### \nobj is-ahas-a\n<!--more-->\n the class being inherited from is called the parent class, base class, or superclass, and the class doing the inheriting is called the child class, derived class, or subclass.\n\n#### \n\n  \nbase::  \n2)\nlearncpp\n```cpp\n#include <iostream>\n#include <string>\n ```\n \n ```cpp\nclass Person\n{\npublic:\n    std::string m_name;\n    int m_age;\n \n    Person(std::string name = \"\", int age = 0)\n        : m_name(name), m_age(age)\n    {\n    }\n \n    std::string getName() const { return m_name; }\n    int getAge() const { return m_age; }\n \n};\n \n// BaseballPlayer publicly inheriting Person\nclass BaseballPlayer : public Person\n{\npublic:\n    double m_battingAverage;\n    int m_homeRuns;\n \n    BaseballPlayer(double battingAverage = 0.0, int homeRuns = 0)\n       : m_battingAverage(battingAverage), m_homeRuns(homeRuns)\n    {\n    }\n};\n \nint main()\n{\n    // Create a new BaseballPlayer object\n    BaseballPlayer joe;\n    // Assign it a name (we can do this directly because m_name is public)\n    joe.m_name = \"Joe\";\n    // Print out the name\n    std::cout << joe.getName() << '\\n'; // use the getName() function we've acquired from the Person base class\n \n    return 0;\n}```\n#### \nA child class inherits both behaviors (member functions) and properties (member variables) from the parent \npublic\n\n|Access specifier in base class|when inherited publicly|wheninherited privately|when inherited protectedly|\n|:-|:-|:-|:-|\n|Public|Public|Private|Protected|\n|Private|Inaccessible|Inaccessible|Inaccessible|\n|Protected|Protected|Private|Protected|\n\n#### \n+ \nprivate\n\n\n#### \n+   \n+ Because Derived inherits functions and variables from Base, \nyou may assume that the members of Base are copied into Derived. \nHowever, this is not true. Instead, we can consider Derived as a two part class: \none part Derived, and one part Base.\n\n+ //const\n\n```cpp\nclass Derived: public Base\n{\nprivate: // our member is now private\n    double m_cost;\n \npublic:\n    Derived(double cost=0.0, int id=0)\n        : Base(id), // Call Base(int) constructor with value id!\n            m_cost(cost)\n    {\n    }\n    ```\n    \n+ \n+ ovrridewirte  \n + \nWhen a member function is called with a derived class object, \nthe compiler first looks to see if that member exists in the derived class.\n If not, it begins walking up the inheritance chain and checking whether the member \n has been defined in any of the parent classes. It uses the first one it finds.\n \n + private public:  \n \n ```cpp\n class Base\n{\nprivate:\n\tvoid print()\n\t{\n\t\tstd::cout << \"Base\";\n\t}\n};\nclass Derived : public Base\n{\npublic:\n\tvoid print()\n\t{\n\t\tstd::cout << \"Derived \";\n\t}\n};\nint main()\n{\n\tDerived derived;\n\tderived.print(); // calls derived::print(), which is public\n\treturn 0;\n}\n```\n\n+ :\n\n```cpp\nclass Base\n{\nprotected:\n    int m_value;\n \npublic:\n    Base(int value)\n        : m_value(value)\n    {\n    }\n \n    void identify() { std::cout << \"I am a Base\\n\"; }\n};\n\nclass Derived: public Base\n{\npublic:\n    Derived(int value)\n        : Base(value)\n    {\n    }\n \n    int GetValue() { return m_value; }\n \n    void identify()\n    {\n        Base::identify(); // call Base::identify() first\n        std::cout << \"I am a Derived\\n\"; // then identify ourselves\n    }\n};\n```\n+ c++11  \nbasepublic:\n\n```cpp\nclass Base\n{\nprivate:\n    int m_value;\n \npublic:\n    Base(int value)\n        : m_value(value)\n    {\n    }\n \nprotected:\n    void printValue() { std::cout << m_value; }\n};\nclass Derived: public Base\n{\npublic:\n    Derived(int value)\n        : Base(value)\n    {\n    }\n    // Base::printValue was inherited as protected, so the public has no access\n    // But we're changing it to public via a using declaration\n    using Base::printValue; // note: no parenthesis here  //c++11\n};\n\nint main()\n{\n    Derived derived(7);\n \n    // printValue is public in Derived, so this is okay\n    derived.printValue(); // prints 7\n    return 0;\n}\n```\n\n\n```cpp\nclass Base\n{\nprivate:\n\tint m_value;\n \npublic:\n\tBase(int value)\n\t\t: m_value(value)\n\t{\n\t}\n \n\tint getValue() { return m_value; }\n};\n \nclass Derived : public Base\n{\npublic:\n\tDerived(int value)\n\t\t: Base(value)\n\t{\n\t}\n \n \n\tint getValue() = delete; // mark this function as inaccessible\n};\n \nint main()\n{\n\tDerived derived(7);\n \n\t// The following won't work because getValue() has been deleted!\n\tstd::cout << derived.getValue();\n \n\treturn 0;\n}\n```","slug":"cpp-inheritance","published":1,"updated":"2018-06-09T04:06:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghow001g00jxz9m6muxm","content":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++ \"></a>c++ </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>obj is-ahas-a<br><a id=\"more\"></a><br> the class being inherited from is called the parent class, base class, or superclass, and the class doing the inheriting is called the child class, derived class, or subclass.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br>base::<br>2)<br>learncpp<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br></pre></td></tr></table></figure></p>\n <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_age;</span><br><span class=\"line\"> </span><br><span class=\"line\">    Person(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name = <span class=\"string\">\"\"</span>, <span class=\"keyword\">int</span> age = <span class=\"number\">0</span>)</span><br><span class=\"line\">        : m_name(name), m_age(age)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_age; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// BaseballPlayer publicly inheriting Person</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseballPlayer</span> :</span> <span class=\"keyword\">public</span> Person</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">double</span> m_battingAverage;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_homeRuns;</span><br><span class=\"line\"> </span><br><span class=\"line\">    BaseballPlayer(<span class=\"keyword\">double</span> battingAverage = <span class=\"number\">0.0</span>, <span class=\"keyword\">int</span> homeRuns = <span class=\"number\">0</span>)</span><br><span class=\"line\">       : m_battingAverage(battingAverage), m_homeRuns(homeRuns)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a new BaseballPlayer object</span></span><br><span class=\"line\">    BaseballPlayer joe;</span><br><span class=\"line\">    <span class=\"comment\">// Assign it a name (we can do this directly because m_name is public)</span></span><br><span class=\"line\">    joe.m_name = <span class=\"string\">\"Joe\"</span>;</span><br><span class=\"line\">    <span class=\"comment\">// Print out the name</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; joe.getName() &lt;&lt; <span class=\"string\">'\\n'</span>; <span class=\"comment\">// use the getName() function we've acquired from the Person base class</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>A child class inherits both behaviors (member functions) and properties (member variables) from the parent <br>public</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Access specifier in base class</th>\n<th style=\"text-align:left\">when inherited publicly</th>\n<th style=\"text-align:left\">wheninherited privately</th>\n<th style=\"text-align:left\">when inherited protectedly</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Public</td>\n<td style=\"text-align:left\">Public</td>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Protected</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Inaccessible</td>\n<td style=\"text-align:left\">Inaccessible</td>\n<td style=\"text-align:left\">Inaccessible</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Protected</td>\n<td style=\"text-align:left\">Protected</td>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Protected</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><br>private<br></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n<li>Because Derived inherits functions and variables from Base,<br>you may assume that the members of Base are copied into Derived.<br>However, this is not true. Instead, we can consider Derived as a two part class:<br>one part Derived, and one part Base.<br></li>\n<li>//const</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>: <span class=\"comment\">// our member is now private</span></span><br><span class=\"line\">    <span class=\"keyword\">double</span> m_cost;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">double</span> cost=<span class=\"number\">0.0</span>, <span class=\"keyword\">int</span> id=<span class=\"number\">0</span>)</span><br><span class=\"line\">        : Base(id), <span class=\"comment\">// Call Base(int) constructor with value id!</span></span><br><span class=\"line\">            m_cost(cost)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n<li><p>ovrridewirte  </p>\n<ul>\n<li><p><br>When a member function is called with a derived class object,<br>the compiler first looks to see if that member exists in the derived class.<br>If not, it begins walking up the inheritance chain and checking whether the member<br>has been defined in any of the parent classes. It uses the first one it finds.</p>\n</li>\n<li><p>private public:  </p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Base\"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span> :</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Derived \"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tDerived derived;</span><br><span class=\"line\">\tderived.print(); <span class=\"comment\">// calls derived::print(), which is public</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Base(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : m_value(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">identify</span><span class=\"params\">()</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a Base\\n\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : Base(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">GetValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">identify</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Base::identify(); <span class=\"comment\">// call Base::identify() first</span></span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a Derived\\n\"</span>; <span class=\"comment\">// then identify ourselves</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>c++11<br>basepublic:</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Base(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : m_value(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : Base(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Base::printValue was inherited as protected, so the public has no access</span></span><br><span class=\"line\">    <span class=\"comment\">// But we're changing it to public via a using declaration</span></span><br><span class=\"line\">    <span class=\"keyword\">using</span> Base::printValue; <span class=\"comment\">// note: no parenthesis here  //c++11</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">7</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// printValue is public in Derived, so this is okay</span></span><br><span class=\"line\">    derived.printValue(); <span class=\"comment\">// prints 7</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tBase(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">\t\t: m_value(value)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span> :</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tDerived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">\t\t: Base(value)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>= <span class=\"keyword\">delete</span>; <span class=\"comment\">// mark this function as inaccessible</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">7</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// The following won't work because getValue() has been deleted!</span></span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; derived.getValue();</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++ \"></a>c++ </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>obj is-ahas-a<br>","more":"<br> the class being inherited from is called the parent class, base class, or superclass, and the class doing the inheriting is called the child class, derived class, or subclass.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br>base::<br>2)<br>learncpp<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br></pre></td></tr></table></figure></p>\n <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_age;</span><br><span class=\"line\"> </span><br><span class=\"line\">    Person(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name = <span class=\"string\">\"\"</span>, <span class=\"keyword\">int</span> age = <span class=\"number\">0</span>)</span><br><span class=\"line\">        : m_name(name), m_age(age)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> m_age; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// BaseballPlayer publicly inheriting Person</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseballPlayer</span> :</span> <span class=\"keyword\">public</span> Person</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">double</span> m_battingAverage;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_homeRuns;</span><br><span class=\"line\"> </span><br><span class=\"line\">    BaseballPlayer(<span class=\"keyword\">double</span> battingAverage = <span class=\"number\">0.0</span>, <span class=\"keyword\">int</span> homeRuns = <span class=\"number\">0</span>)</span><br><span class=\"line\">       : m_battingAverage(battingAverage), m_homeRuns(homeRuns)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a new BaseballPlayer object</span></span><br><span class=\"line\">    BaseballPlayer joe;</span><br><span class=\"line\">    <span class=\"comment\">// Assign it a name (we can do this directly because m_name is public)</span></span><br><span class=\"line\">    joe.m_name = <span class=\"string\">\"Joe\"</span>;</span><br><span class=\"line\">    <span class=\"comment\">// Print out the name</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; joe.getName() &lt;&lt; <span class=\"string\">'\\n'</span>; <span class=\"comment\">// use the getName() function we've acquired from the Person base class</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>A child class inherits both behaviors (member functions) and properties (member variables) from the parent <br>public</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Access specifier in base class</th>\n<th style=\"text-align:left\">when inherited publicly</th>\n<th style=\"text-align:left\">wheninherited privately</th>\n<th style=\"text-align:left\">when inherited protectedly</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Public</td>\n<td style=\"text-align:left\">Public</td>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Protected</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Inaccessible</td>\n<td style=\"text-align:left\">Inaccessible</td>\n<td style=\"text-align:left\">Inaccessible</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Protected</td>\n<td style=\"text-align:left\">Protected</td>\n<td style=\"text-align:left\">Private</td>\n<td style=\"text-align:left\">Protected</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><br>private<br></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n<li>Because Derived inherits functions and variables from Base,<br>you may assume that the members of Base are copied into Derived.<br>However, this is not true. Instead, we can consider Derived as a two part class:<br>one part Derived, and one part Base.<br></li>\n<li>//const</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>: <span class=\"comment\">// our member is now private</span></span><br><span class=\"line\">    <span class=\"keyword\">double</span> m_cost;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">double</span> cost=<span class=\"number\">0.0</span>, <span class=\"keyword\">int</span> id=<span class=\"number\">0</span>)</span><br><span class=\"line\">        : Base(id), <span class=\"comment\">// Call Base(int) constructor with value id!</span></span><br><span class=\"line\">            m_cost(cost)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li></li>\n<li><p>ovrridewirte  </p>\n<ul>\n<li><p><br>When a member function is called with a derived class object,<br>the compiler first looks to see if that member exists in the derived class.<br>If not, it begins walking up the inheritance chain and checking whether the member<br>has been defined in any of the parent classes. It uses the first one it finds.</p>\n</li>\n<li><p>private public:  </p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Base\"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span> :</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">\t</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Derived \"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tDerived derived;</span><br><span class=\"line\">\tderived.print(); <span class=\"comment\">// calls derived::print(), which is public</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:</p>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Base(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : m_value(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">identify</span><span class=\"params\">()</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a Base\\n\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : Base(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">GetValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">identify</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Base::identify(); <span class=\"comment\">// call Base::identify() first</span></span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a Derived\\n\"</span>; <span class=\"comment\">// then identify ourselves</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>c++11<br>basepublic:</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Base(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : m_value(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">        : Base(value)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Base::printValue was inherited as protected, so the public has no access</span></span><br><span class=\"line\">    <span class=\"comment\">// But we're changing it to public via a using declaration</span></span><br><span class=\"line\">    <span class=\"keyword\">using</span> Base::printValue; <span class=\"comment\">// note: no parenthesis here  //c++11</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">7</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// printValue is public in Derived, so this is okay</span></span><br><span class=\"line\">    derived.printValue(); <span class=\"comment\">// prints 7</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tBase(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">\t\t: m_value(value)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span> :</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tDerived(<span class=\"keyword\">int</span> value)</span><br><span class=\"line\">\t\t: Base(value)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>= <span class=\"keyword\">delete</span>; <span class=\"comment\">// mark this function as inaccessible</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">7</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"comment\">// The following won't work because getValue() has been deleted!</span></span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; derived.getValue();</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>"},{"title":"cpp_polymorphism","date":"2018-06-09T06:06:57.000Z","_content":"### \n\n#### \n  \n  \n+ (int char.)value)\n+ intbyte,char1byte;<!--more-->\n+ charint\n\n```cpp\n#include<iostream>\n  3 using namespace std;\n  4 int main()\n  5 {\n  6     int in=2;\n  7     char *pc=(char*)&in;\n  8     cout<<*pc<<endl;//\n  9     return 0;\n 10 }\n```\n\n\n```cpp\nclass Base\n{\npublic:\n    const char* getName() { return \"Base\"; }\n};\n \nclass Derived: public Base\n{\npublic:\n    const char* getName() { return \"Derived\"; }\n};\n \nint main()\n{\n    Derived derived;\n    Base &rBase = derived;\n    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n}\n```\nThis example prints the result:\n\nrBase is a Base\n\n/  \n```cpp\nAnimal *animals[] = { &fred, &garbo, &misty, &pooky, &truffle, &zeke };\n    for (int iii=0; iii < 6; iii++)\n        std::cout << animals[iii]->getName() << \" says \" << animals[iii]->speak() << '\\n';\n ```\n+ \n      \n+ :  \n  A derived function is considered a match if it has the same signature (name, parameter types, and whether it is const) and return type as the base version of the function. Such functions are called overrides.\n\n#### \n```cpp\nclass Base\n{\npublic:\n    virtual const char* getName() { return \"Base\"; } // note addition of virtual keyword\n};\n \nclass Derived: public Base\n{\npublic:\n    virtual const char* getName() { return \"Derived\"; }\n};\n \nint main()\n{\n    Derived derived;\n    Base &rBase = derived;\n    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n \n    return 0;\n}\n```\nThis example prints the result:\n\nrBase is a Derived\n  \n\n```cpp\n#include <string>\nclass Animal\n{\nprotected:\n    std::string m_name;\n \n    // We're making this constructor protected because\n    // we don't want people creating Animal objects directly,\n    // but we still want derived classes to be able to use it.\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n \npublic:\n    std::string getName() { return m_name; }\n    virtual const char* speak() { return \"???\"; }\n};\n \nclass Cat: public Animal\n{\npublic:\n    Cat(std::string name)\n        : Animal(name)\n    {\n    }\n \n    virtual const char* speak() { return \"Meow\"; }\n};\n \nclass Dog: public Animal\n{\npublic:\n    Dog(std::string name)\n        : Animal(name)\n    {\n    }\n \n    virtual const char* speak() { return \"Woof\"; }\n};\n \nvoid report(Animal &animal)\n{\n    std::cout << animal.getName() << \" says \" << animal.speak() << '\\n';\n}\n \nint main()\n{\n    Cat cat(\"Fred\");\n    Dog dog(\"Garbo\");\n \n    report(cat);\n    report(dog);\n}\n```\n#### \nvirtual\n```cpp\n  1 #include<iostream>\n  2 using namespace std;\n  3 class A\n  4 {\n  5         public:\n  6                     virtual const char* getName() { return \"A\"; }\n  7 };\n  8 \n  9 class B: public A\n 10 {\n 11         public:\n 12                     virtual const char* getName() { return \"B\"; }\n 13 };\n 14 \n 15 class C: public B\n 16 {\n 17         public:\n 18                     virtual const char* getName() { return \"C\"; }\n                        //or const char * getName(){..} and default virtual\n 19 };\n 20 \n 21 class D: public C\n 22 {\n 23         public:\n 24                    // virtual const char* getName() { return \"D\"; }\n 25 };\n 26 \n 27 int main()\n 28 {\n 29             D d;\n 30             A &rBase = d;\n 31             std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n 32 \n 33             return 0;\n 34 }```\n     c\n     \n#### \n+ virtual  \nOnly the most base class function needs to be tagged as virtual for all of the derived \nfunctions to work virtually. However, having the keyword virtual on the derived functions\n does not hurt, and it serves as a useful reminder that the function is a virtual function \n rather than a normal one.\n \n \n+ \n \n+ c++11overridefinal  \n override:  \n :\n ```cpp\n class A\n{\npublic:\n\tvirtual const char* getName1(int x) { return \"A\"; }\n\tvirtual const char* getName2(int x) { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\tvirtual const char* getName1(short int x) { return \"B\"; } // note: parameter is a short int\n\tvirtual const char* getName2(int x) const { return \"B\"; } // note: function is const\n}; \nint main()\n{\n\tB b;\n\tA &rBase = b;\n\tstd::cout << rBase.getName1(1) << '\\n';\n\tstd::cout << rBase.getName2(2) << '\\n';\n \n\treturn 0;\n}\n ```\n \n \n A\nA\n```cpp\noverride:\nclass A\n{\npublic:\n\tvirtual const char* getName1(int x) { return \"A\"; }\n\tvirtual const char* getName2(int x) { return \"A\"; }\n\tvirtual const char* getName3(int x) { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\tvirtual const char* getName1(short int x) override { return \"B\"; } // compile error, function is not an override\n\tvirtual const char* getName2(int x) const override { return \"B\"; } // compile error, function is not an override\n\tvirtual const char* getName3(int x) override { return \"B\"; } // okay, function is an override of A::getName3(int) \n};\nint main()\n{\n\treturn 0;\n} \nRule: Apply the override specifier to every intended override function you write.\n ```\n \n+ final:\n ```cpp\n final\n class A\n{\npublic:\n\tvirtual const char* getName() { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\t// note use of final specifier on following line -- that makes this function no longer overridable\n\tvirtual const char* getName() override final { return \"B\"; } // okay, overrides A::getName()\n}; \nclass C : public B\n{\npublic:\n\tvirtual const char* getName() override { return \"C\"; } // compile error: overrides B::getName(), which is final\n};\n final\n class A\n{\npublic:\n\tvirtual const char* getName() { return \"A\"; }\n};\nclass B final : public A // note use of final specifier here\n{\npublic:\n\tvirtual const char* getName() override { return \"B\"; }\n};\nclass C : public B // compile error: cannot inherit from final class\n{\npublic:\n\tvirtual const char* getName() override { return \"C\"; }\n};\n ````\n \n+ covariant return types:\n ```cpp\n class Base\n{\npublic:\n    // This version of getThis() returns a pointer to a Base class\n    virtual Base* getThis() { return this; }\n};\nclass Derived: public Base\n{\n    // Normally override functions have to return objects of the same type as the base function\n    // However, because Derived is derived from Base, it's okay to return Derived* instead of Base*\n    virtual Derived* getThis() { return this; }\n};```\n\nbase=&derive;\n     base.getThis()----base\n \n \n#### \n```cpp\n#include <iostream>\nint main()\n{\n    Derived derived;\n    Base &base = derived;\n    // Calls Base::GetName() instead of the virtualized Derived::GetName()\n    std::cout << base.Base::getName() << std::endl;\n}\n```\n\n \n### \n#### \n \n```cpp\n#include <iostream>\nclass Base\n{\npublic:\n    ~Base() // note: not virtual\n    {\n        std::cout << \"Calling ~Base()\" << std::endl;\n    }\n};\nclass Derived: public Base\n{\nprivate:\n    int* m_array;\npublic:\n    Derived(int length)\n    {\n        m_array = new int[length];\n    }\n    ~Derived() // note: not virtual\n    {\n        std::cout << \"Calling ~Derived()\" << std::endl;\n        delete[] m_array;\n    }\n};\nint main()\n{\n    Derived *derived = new Derived(5);\n    Base *base = derived ;\n    delete base;\n    return 0;\n}```\n Calling ~Base()\n + \n ```cpp\n #include <iostream>\nclass Base\n{\npublic:\n    virtual ~Base() // note: virtual\n    {\n        std::cout << \"Calling ~Base()\" << std::endl;\n    }\n};\nclass Derived: public Base\n{\nprivate:\n    int* m_array;\npublic:\n    Derived(int length)\n    {\n        m_array = new int[length];\n    }\n    virtual ~Derived() // note: virtual\n    {\n        std::cout << \"Calling ~Derived()\" << std::endl;\n        delete[] m_array;\n    }\n};\nint main()\n{\n    Derived *derived = new Derived(5);\n    Base *base = derived;\n    delete base;\n \n    return 0;\n}\nNow this program produces the following result:\nCalling ~Derived()\nCalling ~Base()\nRule: Whenever you are dealing with inheritance, you should make any explicit destructors virtual. ```\n \n \n \n \n ### \n #### Early binding and late binding\n   \n\"\" Early binding (also called static binding) means the compiler (or linker) is able to directly associate the identifier name (such as a function or variable name) with a machine address. \n Remember that all functions have a unique address. So when the compiler (or linker) encounters a function call, \n  it replaces the function call with a machine language instruction that tells the CPU to jump to the address of the function.\"\"\n ```cpp\n #include <iostream>\nint add(int x, int y)\n{\n    return x + y;\n}\nint subtract(int x, int y)\n{\n    return x - y;\n}\nint multiply(int x, int y)\n{\n    return x * y;\n}\nint main()\n{\n    int x;\n    std::cout << \"Enter a number: \";\n    std::cin >> x;\n    int y;\n    std::cout << \"Enter another number: \";\n    std::cin >> y;\n    int op;\n    do\n    {\n        std::cout << \"Enter an operation (0=add, 1=subtract, 2=multiply): \";\n        std::cin >> op;\n    } while (op < 0 || op > 2);\n    int result = 0;\n    switch (op)\n    {\n        // call the target function directly using early binding\n        case 0: result = add(x, y); break;\n        case 1: result = subtract(x, y); break;\n        case 2: result = multiply(x, y); break;\n    }\n    std::cout << \"The answer is: \" << result << std::endl;\n    return 0;\n}```\n \n in some programs, it is not possible to know which function will be called until runtime (when the program is run). \n This is known as late binding (or dynamic binding). In C++, one way to get late binding is to use function pointers. \n ```cpp\n #include <iostream>\nint add(int x, int y)\n{\n    return x + y;\n}\nint main()\n{\n    // Create a function pointer and make it point to the Add function\n    int (*pFcn)(int, int) = add;\n    std::cout << pFcn(5, 3) << std::endl; // add 5 + 3\n    return 0;\n}\n ```\n#### \n   \n , \n```cpp\nclass Base\n{\npublic:\n    virtual void function1() {};\n    virtual void function2() {};\n};\nclass D1: public Base\n{\npublic:\n    virtual void function1() {};\n};\nclass D2: public Base\n{\npublic:\n    virtual void function2() {};\n}; \n \n class Base\n{\npublic:\n    FunctionPointer *__vptr;//\n    virtual void function1() {};\n    virtual void function2() {};\n};\nclass D1: public Base\n{\npublic:\n    virtual void function1() {};\n};\nclass D2: public Base\n{\npublic:\n    virtual void function2() {};\n};\n base\n    *__vptr;-------------------------->base vtable\n   virtual function1()<----------------function1()\n|->virtual function2()<----------------function2()\n-----------------------------------------------------|\n   D1:public base                                    |\n   *__vptr,(inherited) ----------------D1 vtable     |\n   virtual function1(); <--------------function1()   |\n                                       function2()----\n D2D1\n ```\n \n### \n#### \n +   \n  virtual int getValue() = 0; // a pure virtual function  \n    \n    \n```cpp\nint main()\n{\n    Base base; // We can't instantiate an abstract base class, but for the sake of example, pretend this was allowed\n    base.getValue(); // what would this do?\n}```\n#### \n  \n  \n   \n ```cpp\n #include <string>\nclass Animal // This Animal is an abstract base class\n{\nprotected:\n    std::string m_name;\npublic:\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n    std::string getName() { return m_name; }\n    virtual const char* speak() = 0; // note that speak is now a pure virtual function\n};\n#include <iostream>\nclass Cow: public Animal\n{\npublic:\n    Cow(std::string name)\n        : Animal(name)\n    {\n    }\n    // We forgot to redefine speak\n};\nint main()\n{\n    Cow cow(\"Betsy\");\n    std::cout << cow.getName() << \" says \" << cow.speak() << '\\n';\n}\n```\n\n```cpp\n#include <iostream>\nclass Cow: public Animal\n{\npublic:\n    Cow(std::string name)\n        : Animal(name)\n    {\n    }\n    virtual const char* speak() { return \"Moo\"; }\n};\nint main()\n{\n    Cow cow(\"Betsy\");\n    std::cout << cow.getName() << \" says \" << cow.speak() << '\\n';\n}\n```\n\n+ \n```cpp\n#include <string>\n#include <iostream> \nclass Animal // This Animal is an abstract base class\n{\nprotected:\n    std::string m_name;\npublic:\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n    std::string getName() { return m_name; }\n    virtual const char* speak() = 0; // note that speak is a pure virtual function\n}; \nconst char* Animal::speak()\n{\n    return \"buzz\"; // some default implementation\n}\nclass Dragonfly: public Animal\n{\npublic:\n    Dragonfly(std::string name)\n        : Animal(name)\n    {\n    }\n    virtual const char* speak() // this class is no longer abstract because we defined this function\n    {\n        return Animal::speak(); // use Animal's default implementation\n    }\n};\nint main()\n{\n    Dragonfly dfly(\"Sally\");\n    std::cout << dfly.getName() << \" says \" << dfly.speak() << '\\n';\n}\nThe above code prints:\nSally says buzz\n```\n\n#### \nI:IErrorLog,java\n```cpp\nclass IErrorLog\n{\npublic:\n    virtual bool openLog(const char *filename) = 0;\n    virtual bool closeLog() = 0;\n    virtual bool writeError(const char *errorMessage) = 0;\n    virtual ~IErrorLog() {}; // make a virtual destructor in case we delete an IErrorLog pointer, so the proper derived destructor is called\n};```\n#### virtual base class\n\n\n```cpp\nclass PoweredDevice\n{\npublic:\n    PoweredDevice(int power)\n    {\n\t\tcout << \"PoweredDevice: \" << power << '\\n';\n    }\n};\nclass Scanner: public PoweredDevice\n{\npublic:\n    Scanner(int scanner, int power)\n        : PoweredDevice(power)\n    {\n\t\tcout << \"Scanner: \" << scanner << '\\n';\n    }\n};\nclass Printer: public PoweredDevice\n{\npublic:\n    Printer(int printer, int power)\n        : PoweredDevice(power)\n    {\n\t\tcout << \"Printer: \" << printer << '\\n';\n    }\n};\nclass Copier: public Scanner, public Printer\n{\npublic:\n    Copier(int scanner, int printer, int power)\n        : Scanner(scanner, power), Printer(printer, power)\n    {\n    }\n};\nint main()\n{\n    Copier copier(1, 2, 3);\n}\nPoweredDevice: 3\nScanner: 1\nPoweredDevice: 3\nPrinter: 2\n```\n  \nvirtual base class\n```cpp\nclass PoweredDevice\n{\n};\nclass Scanner: virtual public PoweredDevice\n{\n};\nclass Printer: virtual public PoweredDevice\n{\n};\nclass Copier: public Scanner, public Printer\n{\n};\n#include <iostream>\nclass PoweredDevice\n{\npublic:\n    PoweredDevice(int power)\n    {\n\t\tstd::cout << \"PoweredDevice: \" << power << '\\n';\n    }\n};\nclass Scanner: virtual public PoweredDevice // note: PoweredDevice is now a virtual base class\n{\npublic:\n    Scanner(int scanner, int power)\n        : PoweredDevice(power) // this line is required to create Scanner objects, but ignored in this case\n    {\n\t\tstd::cout << \"Scanner: \" << scanner << '\\n';\n    }\n};\nclass Printer: virtual public PoweredDevice // note: PoweredDevice is now a virtual base class\n{\npublic:\n    Printer(int printer, int power)\n        : PoweredDevice(power) // this line is required to create Printer objects, but ignored in this case\n    {\n\t\tstd::cout << \"Printer: \" << printer << '\\n';\n    }\n};\nclass Copier: public Scanner, public Printer\n{\npublic:\n    Copier(int scanner, int printer, int power)\n        : Scanner(scanner, power), Printer(printer, power),\n        PoweredDevice(power) // PoweredDevice is constructed here\n    {\n    }\n};\nThis time, our previous example:\nint main()\n{\n    Copier copier(1, 2, 3);\n}\nproduces the result:\nPoweredDevice: 3\nScanner: 1\nPrinter: 2\n```\n\n+ \n+ virtual base class\n+ if Copier was singly inherited from Printer, and Printer was virtually inherited from PoweredDevice, Copier is still responsible for creating PoweredDevice\n+ Fourth, a virtual base class is always considered a direct base of its most derived class \n(which is why the most derived class is responsible for its construction).\n+ But classes inheriting the virtual base still need access to it. So in order to facilitate this, the compiler creates a virtual table for each class directly inheriting the virtual class (Printer and Scanner). These virtual tables point to the functions in the most derived class. Because the derived classes have a virtual table,  that also means they are now larger by a pointer (to the virtual table).\n\n#### \n\n\n```cpp\nint main()\n{\n    Derived derived(5);\n    Base base = derived; // what happens here?\n    std::cout << \"base is a \" << base.getName() << \" and has value \" << base.getValue() << '\\n';\n    return 0;\n}\n\nvoid printName(const Base base) // note: base passed by value, not reference\n{\n    std::cout << \"I am a \" << base.getName() << '\\n';\n}\nThis is a pretty simple function with a const base object parameter that is passed by value. If we call this function like such:\t\nint main()\n{\n    Derived d(5);\n    printName(d); // oops, didn't realize this was pass by value on the calling end \n    return 0;\n}\n```\n\nvector<base>vector<&base>vector<base*>\n\nstd::vector<Base&> v;\nUnfortunately, this wont compile. The elements of std::vector must be assignable, whereas references cant be reassigned (only initialized).\ndelete\n```cpp\n#include <vector>\nint main()\n{\n\tstd::vector<Base*> v;\n\tv.push_back(new Base(5)); // add a Base object to our vector\n\tv.push_back(new Derived(6)); // add a Derived object to our vector\n        // Print out all of the elements in our vector\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tstd::cout << \"I am a \" << v[count]->getName() << \" with value \" << v[count]->getValue() << \"\\n\";\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tdelete v[count];\n\treturn 0;\n}\n\n#include <vector>\n#include <functional> // for std::reference_wrapper\nint main()\n{\n\tstd::vector<std::reference_wrapper<Base> > v; // our vector is a vector of std::reference_wrapper wrapped Base (not Base&)\n\tBase b(5); // b and d can't be anonymous objects\n\tDerived d(6);\n\tv.push_back(b); // add a Base object to our vector\n\tv.push_back(d); // add a Derived object to our vector\n\t// Print out all of the elements in our vector\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tstd::cout << \"I am a \" << v[count].get().getName() << \" with value \" << v[count].get().getValue() << \"\\n\"; // we use .get() to get our element from the wrapper\n\treturn 0;\n}```\n\n\n\n```cpp\nint main()\n{\n    Derived d1(5);\n    Derived d2(6);\n    Base &b = d2;//bd2\n    b = d1; // this line is problematicbd1,d2,bd2d2d1d2\n    return 0;\n}```\n\n#### dynamic_cast:\n+ shape *ps=new circle();\n    virtual func:  ps->rotate()    //virtual func\n    dynamic_cast:type\n    if(circle *pc=dynamic_cast<circle*>(ps))\n    \n    (::\n    void*\n    \n    \n\n","source":"_posts/cpp-polymorphism.md","raw":"---\ntitle: cpp_polymorphism\ndate: 2018-06-09 14:06:57\ntags: cpp_class\ncategories: c&cpp\n---\n### \n\n#### \n  \n  \n+ (int char.)value)\n+ intbyte,char1byte;<!--more-->\n+ charint\n\n```cpp\n#include<iostream>\n  3 using namespace std;\n  4 int main()\n  5 {\n  6     int in=2;\n  7     char *pc=(char*)&in;\n  8     cout<<*pc<<endl;//\n  9     return 0;\n 10 }\n```\n\n\n```cpp\nclass Base\n{\npublic:\n    const char* getName() { return \"Base\"; }\n};\n \nclass Derived: public Base\n{\npublic:\n    const char* getName() { return \"Derived\"; }\n};\n \nint main()\n{\n    Derived derived;\n    Base &rBase = derived;\n    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n}\n```\nThis example prints the result:\n\nrBase is a Base\n\n/  \n```cpp\nAnimal *animals[] = { &fred, &garbo, &misty, &pooky, &truffle, &zeke };\n    for (int iii=0; iii < 6; iii++)\n        std::cout << animals[iii]->getName() << \" says \" << animals[iii]->speak() << '\\n';\n ```\n+ \n      \n+ :  \n  A derived function is considered a match if it has the same signature (name, parameter types, and whether it is const) and return type as the base version of the function. Such functions are called overrides.\n\n#### \n```cpp\nclass Base\n{\npublic:\n    virtual const char* getName() { return \"Base\"; } // note addition of virtual keyword\n};\n \nclass Derived: public Base\n{\npublic:\n    virtual const char* getName() { return \"Derived\"; }\n};\n \nint main()\n{\n    Derived derived;\n    Base &rBase = derived;\n    std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n \n    return 0;\n}\n```\nThis example prints the result:\n\nrBase is a Derived\n  \n\n```cpp\n#include <string>\nclass Animal\n{\nprotected:\n    std::string m_name;\n \n    // We're making this constructor protected because\n    // we don't want people creating Animal objects directly,\n    // but we still want derived classes to be able to use it.\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n \npublic:\n    std::string getName() { return m_name; }\n    virtual const char* speak() { return \"???\"; }\n};\n \nclass Cat: public Animal\n{\npublic:\n    Cat(std::string name)\n        : Animal(name)\n    {\n    }\n \n    virtual const char* speak() { return \"Meow\"; }\n};\n \nclass Dog: public Animal\n{\npublic:\n    Dog(std::string name)\n        : Animal(name)\n    {\n    }\n \n    virtual const char* speak() { return \"Woof\"; }\n};\n \nvoid report(Animal &animal)\n{\n    std::cout << animal.getName() << \" says \" << animal.speak() << '\\n';\n}\n \nint main()\n{\n    Cat cat(\"Fred\");\n    Dog dog(\"Garbo\");\n \n    report(cat);\n    report(dog);\n}\n```\n#### \nvirtual\n```cpp\n  1 #include<iostream>\n  2 using namespace std;\n  3 class A\n  4 {\n  5         public:\n  6                     virtual const char* getName() { return \"A\"; }\n  7 };\n  8 \n  9 class B: public A\n 10 {\n 11         public:\n 12                     virtual const char* getName() { return \"B\"; }\n 13 };\n 14 \n 15 class C: public B\n 16 {\n 17         public:\n 18                     virtual const char* getName() { return \"C\"; }\n                        //or const char * getName(){..} and default virtual\n 19 };\n 20 \n 21 class D: public C\n 22 {\n 23         public:\n 24                    // virtual const char* getName() { return \"D\"; }\n 25 };\n 26 \n 27 int main()\n 28 {\n 29             D d;\n 30             A &rBase = d;\n 31             std::cout << \"rBase is a \" << rBase.getName() << '\\n';\n 32 \n 33             return 0;\n 34 }```\n     c\n     \n#### \n+ virtual  \nOnly the most base class function needs to be tagged as virtual for all of the derived \nfunctions to work virtually. However, having the keyword virtual on the derived functions\n does not hurt, and it serves as a useful reminder that the function is a virtual function \n rather than a normal one.\n \n \n+ \n \n+ c++11overridefinal  \n override:  \n :\n ```cpp\n class A\n{\npublic:\n\tvirtual const char* getName1(int x) { return \"A\"; }\n\tvirtual const char* getName2(int x) { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\tvirtual const char* getName1(short int x) { return \"B\"; } // note: parameter is a short int\n\tvirtual const char* getName2(int x) const { return \"B\"; } // note: function is const\n}; \nint main()\n{\n\tB b;\n\tA &rBase = b;\n\tstd::cout << rBase.getName1(1) << '\\n';\n\tstd::cout << rBase.getName2(2) << '\\n';\n \n\treturn 0;\n}\n ```\n \n \n A\nA\n```cpp\noverride:\nclass A\n{\npublic:\n\tvirtual const char* getName1(int x) { return \"A\"; }\n\tvirtual const char* getName2(int x) { return \"A\"; }\n\tvirtual const char* getName3(int x) { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\tvirtual const char* getName1(short int x) override { return \"B\"; } // compile error, function is not an override\n\tvirtual const char* getName2(int x) const override { return \"B\"; } // compile error, function is not an override\n\tvirtual const char* getName3(int x) override { return \"B\"; } // okay, function is an override of A::getName3(int) \n};\nint main()\n{\n\treturn 0;\n} \nRule: Apply the override specifier to every intended override function you write.\n ```\n \n+ final:\n ```cpp\n final\n class A\n{\npublic:\n\tvirtual const char* getName() { return \"A\"; }\n};\nclass B : public A\n{\npublic:\n\t// note use of final specifier on following line -- that makes this function no longer overridable\n\tvirtual const char* getName() override final { return \"B\"; } // okay, overrides A::getName()\n}; \nclass C : public B\n{\npublic:\n\tvirtual const char* getName() override { return \"C\"; } // compile error: overrides B::getName(), which is final\n};\n final\n class A\n{\npublic:\n\tvirtual const char* getName() { return \"A\"; }\n};\nclass B final : public A // note use of final specifier here\n{\npublic:\n\tvirtual const char* getName() override { return \"B\"; }\n};\nclass C : public B // compile error: cannot inherit from final class\n{\npublic:\n\tvirtual const char* getName() override { return \"C\"; }\n};\n ````\n \n+ covariant return types:\n ```cpp\n class Base\n{\npublic:\n    // This version of getThis() returns a pointer to a Base class\n    virtual Base* getThis() { return this; }\n};\nclass Derived: public Base\n{\n    // Normally override functions have to return objects of the same type as the base function\n    // However, because Derived is derived from Base, it's okay to return Derived* instead of Base*\n    virtual Derived* getThis() { return this; }\n};```\n\nbase=&derive;\n     base.getThis()----base\n \n \n#### \n```cpp\n#include <iostream>\nint main()\n{\n    Derived derived;\n    Base &base = derived;\n    // Calls Base::GetName() instead of the virtualized Derived::GetName()\n    std::cout << base.Base::getName() << std::endl;\n}\n```\n\n \n### \n#### \n \n```cpp\n#include <iostream>\nclass Base\n{\npublic:\n    ~Base() // note: not virtual\n    {\n        std::cout << \"Calling ~Base()\" << std::endl;\n    }\n};\nclass Derived: public Base\n{\nprivate:\n    int* m_array;\npublic:\n    Derived(int length)\n    {\n        m_array = new int[length];\n    }\n    ~Derived() // note: not virtual\n    {\n        std::cout << \"Calling ~Derived()\" << std::endl;\n        delete[] m_array;\n    }\n};\nint main()\n{\n    Derived *derived = new Derived(5);\n    Base *base = derived ;\n    delete base;\n    return 0;\n}```\n Calling ~Base()\n + \n ```cpp\n #include <iostream>\nclass Base\n{\npublic:\n    virtual ~Base() // note: virtual\n    {\n        std::cout << \"Calling ~Base()\" << std::endl;\n    }\n};\nclass Derived: public Base\n{\nprivate:\n    int* m_array;\npublic:\n    Derived(int length)\n    {\n        m_array = new int[length];\n    }\n    virtual ~Derived() // note: virtual\n    {\n        std::cout << \"Calling ~Derived()\" << std::endl;\n        delete[] m_array;\n    }\n};\nint main()\n{\n    Derived *derived = new Derived(5);\n    Base *base = derived;\n    delete base;\n \n    return 0;\n}\nNow this program produces the following result:\nCalling ~Derived()\nCalling ~Base()\nRule: Whenever you are dealing with inheritance, you should make any explicit destructors virtual. ```\n \n \n \n \n ### \n #### Early binding and late binding\n   \n\"\" Early binding (also called static binding) means the compiler (or linker) is able to directly associate the identifier name (such as a function or variable name) with a machine address. \n Remember that all functions have a unique address. So when the compiler (or linker) encounters a function call, \n  it replaces the function call with a machine language instruction that tells the CPU to jump to the address of the function.\"\"\n ```cpp\n #include <iostream>\nint add(int x, int y)\n{\n    return x + y;\n}\nint subtract(int x, int y)\n{\n    return x - y;\n}\nint multiply(int x, int y)\n{\n    return x * y;\n}\nint main()\n{\n    int x;\n    std::cout << \"Enter a number: \";\n    std::cin >> x;\n    int y;\n    std::cout << \"Enter another number: \";\n    std::cin >> y;\n    int op;\n    do\n    {\n        std::cout << \"Enter an operation (0=add, 1=subtract, 2=multiply): \";\n        std::cin >> op;\n    } while (op < 0 || op > 2);\n    int result = 0;\n    switch (op)\n    {\n        // call the target function directly using early binding\n        case 0: result = add(x, y); break;\n        case 1: result = subtract(x, y); break;\n        case 2: result = multiply(x, y); break;\n    }\n    std::cout << \"The answer is: \" << result << std::endl;\n    return 0;\n}```\n \n in some programs, it is not possible to know which function will be called until runtime (when the program is run). \n This is known as late binding (or dynamic binding). In C++, one way to get late binding is to use function pointers. \n ```cpp\n #include <iostream>\nint add(int x, int y)\n{\n    return x + y;\n}\nint main()\n{\n    // Create a function pointer and make it point to the Add function\n    int (*pFcn)(int, int) = add;\n    std::cout << pFcn(5, 3) << std::endl; // add 5 + 3\n    return 0;\n}\n ```\n#### \n   \n , \n```cpp\nclass Base\n{\npublic:\n    virtual void function1() {};\n    virtual void function2() {};\n};\nclass D1: public Base\n{\npublic:\n    virtual void function1() {};\n};\nclass D2: public Base\n{\npublic:\n    virtual void function2() {};\n}; \n \n class Base\n{\npublic:\n    FunctionPointer *__vptr;//\n    virtual void function1() {};\n    virtual void function2() {};\n};\nclass D1: public Base\n{\npublic:\n    virtual void function1() {};\n};\nclass D2: public Base\n{\npublic:\n    virtual void function2() {};\n};\n base\n    *__vptr;-------------------------->base vtable\n   virtual function1()<----------------function1()\n|->virtual function2()<----------------function2()\n-----------------------------------------------------|\n   D1:public base                                    |\n   *__vptr,(inherited) ----------------D1 vtable     |\n   virtual function1(); <--------------function1()   |\n                                       function2()----\n D2D1\n ```\n \n### \n#### \n +   \n  virtual int getValue() = 0; // a pure virtual function  \n    \n    \n```cpp\nint main()\n{\n    Base base; // We can't instantiate an abstract base class, but for the sake of example, pretend this was allowed\n    base.getValue(); // what would this do?\n}```\n#### \n  \n  \n   \n ```cpp\n #include <string>\nclass Animal // This Animal is an abstract base class\n{\nprotected:\n    std::string m_name;\npublic:\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n    std::string getName() { return m_name; }\n    virtual const char* speak() = 0; // note that speak is now a pure virtual function\n};\n#include <iostream>\nclass Cow: public Animal\n{\npublic:\n    Cow(std::string name)\n        : Animal(name)\n    {\n    }\n    // We forgot to redefine speak\n};\nint main()\n{\n    Cow cow(\"Betsy\");\n    std::cout << cow.getName() << \" says \" << cow.speak() << '\\n';\n}\n```\n\n```cpp\n#include <iostream>\nclass Cow: public Animal\n{\npublic:\n    Cow(std::string name)\n        : Animal(name)\n    {\n    }\n    virtual const char* speak() { return \"Moo\"; }\n};\nint main()\n{\n    Cow cow(\"Betsy\");\n    std::cout << cow.getName() << \" says \" << cow.speak() << '\\n';\n}\n```\n\n+ \n```cpp\n#include <string>\n#include <iostream> \nclass Animal // This Animal is an abstract base class\n{\nprotected:\n    std::string m_name;\npublic:\n    Animal(std::string name)\n        : m_name(name)\n    {\n    }\n    std::string getName() { return m_name; }\n    virtual const char* speak() = 0; // note that speak is a pure virtual function\n}; \nconst char* Animal::speak()\n{\n    return \"buzz\"; // some default implementation\n}\nclass Dragonfly: public Animal\n{\npublic:\n    Dragonfly(std::string name)\n        : Animal(name)\n    {\n    }\n    virtual const char* speak() // this class is no longer abstract because we defined this function\n    {\n        return Animal::speak(); // use Animal's default implementation\n    }\n};\nint main()\n{\n    Dragonfly dfly(\"Sally\");\n    std::cout << dfly.getName() << \" says \" << dfly.speak() << '\\n';\n}\nThe above code prints:\nSally says buzz\n```\n\n#### \nI:IErrorLog,java\n```cpp\nclass IErrorLog\n{\npublic:\n    virtual bool openLog(const char *filename) = 0;\n    virtual bool closeLog() = 0;\n    virtual bool writeError(const char *errorMessage) = 0;\n    virtual ~IErrorLog() {}; // make a virtual destructor in case we delete an IErrorLog pointer, so the proper derived destructor is called\n};```\n#### virtual base class\n\n\n```cpp\nclass PoweredDevice\n{\npublic:\n    PoweredDevice(int power)\n    {\n\t\tcout << \"PoweredDevice: \" << power << '\\n';\n    }\n};\nclass Scanner: public PoweredDevice\n{\npublic:\n    Scanner(int scanner, int power)\n        : PoweredDevice(power)\n    {\n\t\tcout << \"Scanner: \" << scanner << '\\n';\n    }\n};\nclass Printer: public PoweredDevice\n{\npublic:\n    Printer(int printer, int power)\n        : PoweredDevice(power)\n    {\n\t\tcout << \"Printer: \" << printer << '\\n';\n    }\n};\nclass Copier: public Scanner, public Printer\n{\npublic:\n    Copier(int scanner, int printer, int power)\n        : Scanner(scanner, power), Printer(printer, power)\n    {\n    }\n};\nint main()\n{\n    Copier copier(1, 2, 3);\n}\nPoweredDevice: 3\nScanner: 1\nPoweredDevice: 3\nPrinter: 2\n```\n  \nvirtual base class\n```cpp\nclass PoweredDevice\n{\n};\nclass Scanner: virtual public PoweredDevice\n{\n};\nclass Printer: virtual public PoweredDevice\n{\n};\nclass Copier: public Scanner, public Printer\n{\n};\n#include <iostream>\nclass PoweredDevice\n{\npublic:\n    PoweredDevice(int power)\n    {\n\t\tstd::cout << \"PoweredDevice: \" << power << '\\n';\n    }\n};\nclass Scanner: virtual public PoweredDevice // note: PoweredDevice is now a virtual base class\n{\npublic:\n    Scanner(int scanner, int power)\n        : PoweredDevice(power) // this line is required to create Scanner objects, but ignored in this case\n    {\n\t\tstd::cout << \"Scanner: \" << scanner << '\\n';\n    }\n};\nclass Printer: virtual public PoweredDevice // note: PoweredDevice is now a virtual base class\n{\npublic:\n    Printer(int printer, int power)\n        : PoweredDevice(power) // this line is required to create Printer objects, but ignored in this case\n    {\n\t\tstd::cout << \"Printer: \" << printer << '\\n';\n    }\n};\nclass Copier: public Scanner, public Printer\n{\npublic:\n    Copier(int scanner, int printer, int power)\n        : Scanner(scanner, power), Printer(printer, power),\n        PoweredDevice(power) // PoweredDevice is constructed here\n    {\n    }\n};\nThis time, our previous example:\nint main()\n{\n    Copier copier(1, 2, 3);\n}\nproduces the result:\nPoweredDevice: 3\nScanner: 1\nPrinter: 2\n```\n\n+ \n+ virtual base class\n+ if Copier was singly inherited from Printer, and Printer was virtually inherited from PoweredDevice, Copier is still responsible for creating PoweredDevice\n+ Fourth, a virtual base class is always considered a direct base of its most derived class \n(which is why the most derived class is responsible for its construction).\n+ But classes inheriting the virtual base still need access to it. So in order to facilitate this, the compiler creates a virtual table for each class directly inheriting the virtual class (Printer and Scanner). These virtual tables point to the functions in the most derived class. Because the derived classes have a virtual table,  that also means they are now larger by a pointer (to the virtual table).\n\n#### \n\n\n```cpp\nint main()\n{\n    Derived derived(5);\n    Base base = derived; // what happens here?\n    std::cout << \"base is a \" << base.getName() << \" and has value \" << base.getValue() << '\\n';\n    return 0;\n}\n\nvoid printName(const Base base) // note: base passed by value, not reference\n{\n    std::cout << \"I am a \" << base.getName() << '\\n';\n}\nThis is a pretty simple function with a const base object parameter that is passed by value. If we call this function like such:\t\nint main()\n{\n    Derived d(5);\n    printName(d); // oops, didn't realize this was pass by value on the calling end \n    return 0;\n}\n```\n\nvector<base>vector<&base>vector<base*>\n\nstd::vector<Base&> v;\nUnfortunately, this wont compile. The elements of std::vector must be assignable, whereas references cant be reassigned (only initialized).\ndelete\n```cpp\n#include <vector>\nint main()\n{\n\tstd::vector<Base*> v;\n\tv.push_back(new Base(5)); // add a Base object to our vector\n\tv.push_back(new Derived(6)); // add a Derived object to our vector\n        // Print out all of the elements in our vector\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tstd::cout << \"I am a \" << v[count]->getName() << \" with value \" << v[count]->getValue() << \"\\n\";\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tdelete v[count];\n\treturn 0;\n}\n\n#include <vector>\n#include <functional> // for std::reference_wrapper\nint main()\n{\n\tstd::vector<std::reference_wrapper<Base> > v; // our vector is a vector of std::reference_wrapper wrapped Base (not Base&)\n\tBase b(5); // b and d can't be anonymous objects\n\tDerived d(6);\n\tv.push_back(b); // add a Base object to our vector\n\tv.push_back(d); // add a Derived object to our vector\n\t// Print out all of the elements in our vector\n\tfor (int count = 0; count < v.size(); ++count)\n\t\tstd::cout << \"I am a \" << v[count].get().getName() << \" with value \" << v[count].get().getValue() << \"\\n\"; // we use .get() to get our element from the wrapper\n\treturn 0;\n}```\n\n\n\n```cpp\nint main()\n{\n    Derived d1(5);\n    Derived d2(6);\n    Base &b = d2;//bd2\n    b = d1; // this line is problematicbd1,d2,bd2d2d1d2\n    return 0;\n}```\n\n#### dynamic_cast:\n+ shape *ps=new circle();\n    virtual func:  ps->rotate()    //virtual func\n    dynamic_cast:type\n    if(circle *pc=dynamic_cast<circle*>(ps))\n    \n    (::\n    void*\n    \n    \n\n","slug":"cpp-polymorphism","published":1,"updated":"2018-06-09T06:35:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghoy001i00jxqfxh62gy","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>  </p>\n<ul>\n<li>(int char.)value)</li>\n<li>intbyte,char1byte;<a id=\"more\"></a></li>\n<li>charint</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"> <span class=\"number\">3</span> <span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"> <span class=\"number\">4</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"> 5 </span>&#123;</span><br><span class=\"line\"> <span class=\"number\">6</span>     <span class=\"keyword\">int</span> in=<span class=\"number\">2</span>;</span><br><span class=\"line\"> <span class=\"number\">7</span>     <span class=\"keyword\">char</span> *pc=(<span class=\"keyword\">char</span>*)&amp;in;</span><br><span class=\"line\"> <span class=\"number\">8</span>     <span class=\"built_in\">cout</span>&lt;&lt;*pc&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"number\">9</span>     <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">10</span> &#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Base\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Derived\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;rBase = derived;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>This example prints the result:</p>\n<p>rBase is a Base</p>\n<p>/<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Animal *animals[] = &#123; &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> iii=<span class=\"number\">0</span>; iii &lt; <span class=\"number\">6</span>; iii++)</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; animals[iii]-&gt;getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; animals[iii]-&gt;speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><pre><code>\n</code></pre></li>\n<li>:<br>A derived function is considered a match if it has the same signature (name, parameter types, and whether it is const) and return type as the base version of the function. Such functions are called overrides.</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Base\"</span>; &#125; <span class=\"comment\">// note addition of virtual keyword</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Derived\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;rBase = derived;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>This example prints the result:</p>\n<p>rBase is a Derived<br><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// We're making this constructor protected because</span></span><br><span class=\"line\">    <span class=\"comment\">// we don't want people creating Animal objects directly,</span></span><br><span class=\"line\">    <span class=\"comment\">// but we still want derived classes to be able to use it.</span></span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"???\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cat(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Meow\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Dog(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Woof\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">report</span><span class=\"params\">(Animal &amp;animal)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; animal.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; animal.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cat <span class=\"title\">cat</span><span class=\"params\">(<span class=\"string\">\"Fred\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Dog <span class=\"title\">dog</span><span class=\"params\">(<span class=\"string\">\"Garbo\"</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    report(cat);</span><br><span class=\"line\">    report(dog);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>virtual<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"number\">1</span> <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"> <span class=\"number\">2</span> <span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"> <span class=\"number\">3</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\"> 4 &#123;</span></span><br><span class=\"line\"> <span class=\"number\">5</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> <span class=\"number\">6</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\"> <span class=\"number\">7</span> &#125;;</span><br><span class=\"line\"> <span class=\"number\">8</span> </span><br><span class=\"line\"> <span class=\"number\">9</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span>:</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\"><span class=\"number\">10</span> &#123;</span><br><span class=\"line\"><span class=\"number\">11</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">12</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\"><span class=\"number\">13</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">14</span> </span><br><span class=\"line\"><span class=\"number\">15</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\"><span class=\"number\">16</span> &#123;</span><br><span class=\"line\"><span class=\"number\">17</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">18</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">                       <span class=\"comment\">//or const char * getName()&#123;..&#125; and default virtual</span></span><br><span class=\"line\"><span class=\"number\">19</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">20</span> </span><br><span class=\"line\"><span class=\"number\">21</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D</span>:</span> <span class=\"keyword\">public</span> C</span><br><span class=\"line\"><span class=\"number\">22</span> &#123;</span><br><span class=\"line\"><span class=\"number\">23</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">24</span>                    <span class=\"comment\">// virtual const char* getName() &#123; return \"D\"; &#125;</span></span><br><span class=\"line\"><span class=\"number\">25</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">26</span> </span><br><span class=\"line\"><span class=\"number\">27</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">28 </span>&#123;</span><br><span class=\"line\"><span class=\"number\">29</span>             D d;</span><br><span class=\"line\"><span class=\"number\">30</span>             A &amp;rBase = d;</span><br><span class=\"line\"><span class=\"number\">31</span>             <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"><span class=\"number\">32</span> </span><br><span class=\"line\"><span class=\"number\">33</span>             <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">34</span> &#125;</span><br></pre></td></tr></table></figure></p>\n<pre><code>c\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>virtual<br>Only the most base class function needs to be tagged as virtual for all of the derived<br>functions to work virtually. However, having the keyword virtual on the derived functions<br>does not hurt, and it serves as a useful reminder that the function is a virtual function<br>rather than a normal one.</li>\n</ul>\n<ul>\n<li><p></p>\n</li>\n<li><p>c++11overridefinal<br>override:<br>:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">short</span> <span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// note: parameter is a short int</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// note: function is const</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tB b;</span><br><span class=\"line\">\tA &amp;rBase = b;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; rBase.getName1(<span class=\"number\">1</span>) &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; rBase.getName2(<span class=\"number\">2</span>) &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> <br> A<br>A<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">override:</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName3</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">short</span> <span class=\"keyword\">int</span> x)</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// compile error, function is not an override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> <span class=\"keyword\">const</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// compile error, function is not an override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName3</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// okay, function is an override of A::getName3(int) </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">Rule: Apply the override specifier to every intended override function you write.</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>final:<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> final</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"comment\">// note use of final specifier on following line -- that makes this function no longer overridable</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override final </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// okay, overrides A::getName()</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> :</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125; <span class=\"comment\">// compile error: overrides B::getName(), which is final</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> final</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"title\">final</span> :</span> <span class=\"keyword\">public</span> A <span class=\"comment\">// note use of final specifier here</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> :</span> <span class=\"keyword\">public</span> B <span class=\"comment\">// compile error: cannot inherit from final class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> `</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>covariant return types:<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"comment\">// This version of getThis() returns a pointer to a Base class</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> Base* <span class=\"title\">getThis</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Normally override functions have to return objects of the same type as the base function</span></span><br><span class=\"line\">    <span class=\"comment\">// However, because Derived is derived from Base, it's okay to return Derived* instead of Base*</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> Derived* <span class=\"title\">getThis</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>base=&derive;<br>     base.getThis()-base</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;base = derived;</span><br><span class=\"line\">    <span class=\"comment\">// Calls Base::GetName() instead of the virtualized Derived::GetName()</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; base.Base::getName() &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    ~Base() <span class=\"comment\">// note: not virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Base()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span>* m_array;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_array = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[length];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ~Derived() <span class=\"comment\">// note: not virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Derived()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span>[] m_array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived *derived = <span class=\"keyword\">new</span> Derived(<span class=\"number\">5</span>);</span><br><span class=\"line\">    Base *base = derived ;</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> base;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> Calling ~Base()</p>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~Base() <span class=\"comment\">// note: virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Base()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span>* m_array;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_array = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[length];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~Derived() <span class=\"comment\">// note: virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Derived()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span>[] m_array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived *derived = <span class=\"keyword\">new</span> Derived(<span class=\"number\">5</span>);</span><br><span class=\"line\">    Base *base = derived;</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> base;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Now <span class=\"keyword\">this</span> program produces the following result:</span><br><span class=\"line\">Calling ~Derived()</span><br><span class=\"line\">Calling ~Base()</span><br><span class=\"line\">Rule: Whenever you are dealing with inheritance, you should make any <span class=\"keyword\">explicit</span> destructors <span class=\"keyword\">virtual</span>.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"Early-binding-and-late-binding\"><a href=\"#Early-binding-and-late-binding\" class=\"headerlink\" title=\"Early binding and late binding\"></a>Early binding and late binding</h4><p> <br> Early binding (also called static binding) means the compiler (or linker) is able to directly associate the identifier name (such as a function or variable name) with a machine address.<br> Remember that all functions have a unique address. So when the compiler (or linker) encounters a function call,<br>  it replaces the function call with a machine language instruction that tells the CPU to jump to the address of the function.<br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">subtract</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x - y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">multiply</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x * y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter a number: \"</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; x;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> y;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter another number: \"</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; y;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> op;</span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter an operation (0=add, 1=subtract, 2=multiply): \"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; op;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span> (op &lt; <span class=\"number\">0</span> || op &gt; <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (op)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// call the target function directly using early binding</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0</span>: result = add(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>: result = subtract(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>: result = multiply(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"The answer is: \"</span> &lt;&lt; result &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> <br> in some programs, it is not possible to know which function will be called until runtime (when the program is run).<br> This is known as late binding (or dynamic binding). In C++, one way to get late binding is to use function pointers.<br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a function pointer and make it point to the Add function</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> (*pFcn)(<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>) = add;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; pFcn(<span class=\"number\">5</span>, <span class=\"number\">3</span>) &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>; <span class=\"comment\">// add 5 + 3</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br> , <br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D1</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    FunctionPointer *__vptr;<span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D1</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> base</span><br><span class=\"line\">    *__vptr;--------------------------&gt;base vtable</span><br><span class=\"line\">   virtual function1()&lt;----------------function1()</span><br><span class=\"line\">|-&gt;virtual function2()&lt;----------------function2()</span><br><span class=\"line\">-----------------------------------------------------|</span><br><span class=\"line\">   D1:<span class=\"keyword\">public</span> base                                    |</span><br><span class=\"line\">   *__vptr,(inherited) ----------------D1 vtable     |</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"title\">function1</span><span class=\"params\">()</span></span>; &lt;--------------function1()   |</span><br><span class=\"line\">                                       function2()----</span><br><span class=\"line\"> D2D1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><br>virtual int getValue() = 0; // a pure virtual function<br><br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Base base; <span class=\"comment\">// We can't instantiate an abstract base class, but for the sake of example, pretend this was allowed</span></span><br><span class=\"line\">    base.getValue(); <span class=\"comment\">// what would this do?</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> // <span class=\"title\">This</span> <span class=\"title\">Animal</span> <span class=\"title\">is</span> <span class=\"title\">an</span> <span class=\"title\">abstract</span> <span class=\"title\">base</span> <span class=\"title\">class</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>; <span class=\"comment\">// note that speak is now a pure virtual function</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cow</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cow(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// We forgot to redefine speak</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cow <span class=\"title\">cow</span><span class=\"params\">(<span class=\"string\">\"Betsy\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; cow.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; cow.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cow</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cow(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Moo\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cow <span class=\"title\">cow</span><span class=\"params\">(<span class=\"string\">\"Betsy\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; cow.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; cow.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt; </span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> // <span class=\"title\">This</span> <span class=\"title\">Animal</span> <span class=\"title\">is</span> <span class=\"title\">an</span> <span class=\"title\">abstract</span> <span class=\"title\">base</span> <span class=\"title\">class</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>; <span class=\"comment\">// note that speak is a pure virtual function</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* Animal::speak()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"buzz\"</span>; <span class=\"comment\">// some default implementation</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dragonfly</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Dragonfly(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> <span class=\"comment\">// this class is no longer abstract because we defined this function</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Animal::speak(); <span class=\"comment\">// use Animal's default implementation</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Dragonfly <span class=\"title\">dfly</span><span class=\"params\">(<span class=\"string\">\"Sally\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; dfly.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; dfly.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">The above code prints:</span><br><span class=\"line\">Sally says buzz</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>I:IErrorLog,java<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IErrorLog</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">openLog</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *filename)</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">closeLog</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">writeError</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *errorMessage)</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~IErrorLog() &#123;&#125;; <span class=\"comment\">// make a virtual destructor in case we delete an IErrorLog pointer, so the proper derived destructor is called</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"virtual-base-class\"><a href=\"#virtual-base-class\" class=\"headerlink\" title=\"virtual base class\"></a>virtual base class</h4><p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    PoweredDevice(<span class=\"keyword\">int</span> power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"PoweredDevice: \"</span> &lt;&lt; power &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Scanner(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Scanner: \"</span> &lt;&lt; scanner &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Printer(<span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Printer: \"</span> &lt;&lt; printer &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Copier(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : Scanner(scanner, power), Printer(printer, power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Copier <span class=\"title\">copier</span><span class=\"params\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Scanner: <span class=\"number\">1</span></span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Printer: <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p><br>virtual base class<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    PoweredDevice(<span class=\"keyword\">int</span> power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"PoweredDevice: \"</span> &lt;&lt; power &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice <span class=\"comment\">// note: PoweredDevice is now a virtual base class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Scanner(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power) <span class=\"comment\">// this line is required to create Scanner objects, but ignored in this case</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Scanner: \"</span> &lt;&lt; scanner &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice <span class=\"comment\">// note: PoweredDevice is now a virtual base class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Printer(<span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power) <span class=\"comment\">// this line is required to create Printer objects, but ignored in this case</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Printer: \"</span> &lt;&lt; printer &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Copier(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : Scanner(scanner, power), Printer(printer, power),</span><br><span class=\"line\">        PoweredDevice(power) <span class=\"comment\">// PoweredDevice is constructed here</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">This time, our previous example:</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Copier <span class=\"title\">copier</span><span class=\"params\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">produces the result:</span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Scanner: <span class=\"number\">1</span></span><br><span class=\"line\">Printer: <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li>virtual base class</li>\n<li>if Copier was singly inherited from Printer, and Printer was virtually inherited from PoweredDevice, Copier is still responsible for creating PoweredDevice</li>\n<li>Fourth, a virtual base class is always considered a direct base of its most derived class<br>(which is why the most derived class is responsible for its construction).</li>\n<li>But classes inheriting the virtual base still need access to it. So in order to facilitate this, the compiler creates a virtual table for each class directly inheriting the virtual class (Printer and Scanner). These virtual tables point to the functions in the most derived class. Because the derived classes have a virtual table,  that also means they are now larger by a pointer (to the virtual table).</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    Base base = derived; <span class=\"comment\">// what happens here?</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"base is a \"</span> &lt;&lt; base.getName() &lt;&lt; <span class=\"string\">\" and has value \"</span> &lt;&lt; base.getValue() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printName</span><span class=\"params\">(<span class=\"keyword\">const</span> Base base)</span> <span class=\"comment\">// note: base passed by value, not reference</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; base.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">This is a pretty simple function with a <span class=\"keyword\">const</span> base object parameter that is passed by value. If we call <span class=\"keyword\">this</span> function like such:\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    printName(d); <span class=\"comment\">// oops, didn't realize this was pass by value on the calling end </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>vector<base>vector&lt;&amp;base&gt;vector&lt;base*&gt;<br><br>std::vector&lt;Base&amp;&gt; v;<br>Unfortunately, this wont compile. The elements of std::vector must be assignable, whereas references cant be reassigned (only initialized).<br>delete<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">vector</span>&lt;Base*&gt; v;</span><br><span class=\"line\">\tv.push_back(<span class=\"keyword\">new</span> Base(<span class=\"number\">5</span>)); <span class=\"comment\">// add a Base object to our vector</span></span><br><span class=\"line\">\tv.push_back(<span class=\"keyword\">new</span> Derived(<span class=\"number\">6</span>)); <span class=\"comment\">// add a Derived object to our vector</span></span><br><span class=\"line\">        <span class=\"comment\">// Print out all of the elements in our vector</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; v[count]-&gt;getName() &lt;&lt; <span class=\"string\">\" with value \"</span> &lt;&lt; v[count]-&gt;getValue() &lt;&lt; <span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"keyword\">delete</span> v[count];</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;functional&gt; // for std::reference_wrapper</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">std</span>::reference_wrapper&lt;Base&gt; &gt; v; <span class=\"comment\">// our vector is a vector of std::reference_wrapper wrapped Base (not Base&amp;)</span></span><br><span class=\"line\">\t<span class=\"function\">Base <span class=\"title\">b</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>; <span class=\"comment\">// b and d can't be anonymous objects</span></span><br><span class=\"line\">\t<span class=\"function\">Derived <span class=\"title\">d</span><span class=\"params\">(<span class=\"number\">6</span>)</span></span>;</span><br><span class=\"line\">\tv.push_back(b); <span class=\"comment\">// add a Base object to our vector</span></span><br><span class=\"line\">\tv.push_back(d); <span class=\"comment\">// add a Derived object to our vector</span></span><br><span class=\"line\">\t<span class=\"comment\">// Print out all of the elements in our vector</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; v[count].get().getName() &lt;&lt; <span class=\"string\">\" with value \"</span> &lt;&lt; v[count].get().getValue() &lt;&lt; <span class=\"string\">\"\\n\"</span>; <span class=\"comment\">// we use .get() to get our element from the wrapper</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d1</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d2</span><span class=\"params\">(<span class=\"number\">6</span>)</span></span>;</span><br><span class=\"line\">    Base &amp;b = d2;<span class=\"comment\">//bd2</span></span><br><span class=\"line\">    b = d1; <span class=\"comment\">// this line is problematicbd1,d2,bd2d2d1d2</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"dynamic-cast\"><a href=\"#dynamic-cast\" class=\"headerlink\" title=\"dynamic_cast:\"></a>dynamic_cast:</h4><ul>\n<li><p>shape <em>ps=new circle();<br>  virtual func:  ps-&gt;rotate()    //virtual func<br>  dynamic_cast:type<br>  if(circle </em>pc=dynamic_cast&lt;circle*&gt;(ps))</p>\n<p>  (::<br>  void*<br>  <br>  </p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br>  </p>\n<ul>\n<li>(int char.)value)</li>\n<li>intbyte,char1byte;","more":"</li>\n<li>charint</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"> <span class=\"number\">3</span> <span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"> <span class=\"number\">4</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"> 5 </span>&#123;</span><br><span class=\"line\"> <span class=\"number\">6</span>     <span class=\"keyword\">int</span> in=<span class=\"number\">2</span>;</span><br><span class=\"line\"> <span class=\"number\">7</span>     <span class=\"keyword\">char</span> *pc=(<span class=\"keyword\">char</span>*)&amp;in;</span><br><span class=\"line\"> <span class=\"number\">8</span>     <span class=\"built_in\">cout</span>&lt;&lt;*pc&lt;&lt;<span class=\"built_in\">endl</span>;<span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"number\">9</span>     <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">10</span> &#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Base\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Derived\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;rBase = derived;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>This example prints the result:</p>\n<p>rBase is a Base</p>\n<p>/<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Animal *animals[] = &#123; &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> iii=<span class=\"number\">0</span>; iii &lt; <span class=\"number\">6</span>; iii++)</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; animals[iii]-&gt;getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; animals[iii]-&gt;speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><pre><code>\n</code></pre></li>\n<li>:<br>A derived function is considered a match if it has the same signature (name, parameter types, and whether it is const) and return type as the base version of the function. Such functions are called overrides.</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Base\"</span>; &#125; <span class=\"comment\">// note addition of virtual keyword</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Derived\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;rBase = derived;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>This example prints the result:</p>\n<p>rBase is a Derived<br><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">// We're making this constructor protected because</span></span><br><span class=\"line\">    <span class=\"comment\">// we don't want people creating Animal objects directly,</span></span><br><span class=\"line\">    <span class=\"comment\">// but we still want derived classes to be able to use it.</span></span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"???\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cat(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Meow\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Dog(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Woof\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">report</span><span class=\"params\">(Animal &amp;animal)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; animal.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; animal.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cat <span class=\"title\">cat</span><span class=\"params\">(<span class=\"string\">\"Fred\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Dog <span class=\"title\">dog</span><span class=\"params\">(<span class=\"string\">\"Garbo\"</span>)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    report(cat);</span><br><span class=\"line\">    report(dog);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>virtual<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"number\">1</span> <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"> <span class=\"number\">2</span> <span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"> <span class=\"number\">3</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\"> 4 &#123;</span></span><br><span class=\"line\"> <span class=\"number\">5</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> <span class=\"number\">6</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\"> <span class=\"number\">7</span> &#125;;</span><br><span class=\"line\"> <span class=\"number\">8</span> </span><br><span class=\"line\"> <span class=\"number\">9</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span>:</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\"><span class=\"number\">10</span> &#123;</span><br><span class=\"line\"><span class=\"number\">11</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">12</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\"><span class=\"number\">13</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">14</span> </span><br><span class=\"line\"><span class=\"number\">15</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span>:</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\"><span class=\"number\">16</span> &#123;</span><br><span class=\"line\"><span class=\"number\">17</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">18</span>                     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">                       <span class=\"comment\">//or const char * getName()&#123;..&#125; and default virtual</span></span><br><span class=\"line\"><span class=\"number\">19</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">20</span> </span><br><span class=\"line\"><span class=\"number\">21</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D</span>:</span> <span class=\"keyword\">public</span> C</span><br><span class=\"line\"><span class=\"number\">22</span> &#123;</span><br><span class=\"line\"><span class=\"number\">23</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\"><span class=\"number\">24</span>                    <span class=\"comment\">// virtual const char* getName() &#123; return \"D\"; &#125;</span></span><br><span class=\"line\"><span class=\"number\">25</span> &#125;;</span><br><span class=\"line\"><span class=\"number\">26</span> </span><br><span class=\"line\"><span class=\"number\">27</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">28 </span>&#123;</span><br><span class=\"line\"><span class=\"number\">29</span>             D d;</span><br><span class=\"line\"><span class=\"number\">30</span>             A &amp;rBase = d;</span><br><span class=\"line\"><span class=\"number\">31</span>             <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"rBase is a \"</span> &lt;&lt; rBase.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"><span class=\"number\">32</span> </span><br><span class=\"line\"><span class=\"number\">33</span>             <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">34</span> &#125;</span><br></pre></td></tr></table></figure></p>\n<pre><code>c\n</code></pre><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>virtual<br>Only the most base class function needs to be tagged as virtual for all of the derived<br>functions to work virtually. However, having the keyword virtual on the derived functions<br>does not hurt, and it serves as a useful reminder that the function is a virtual function<br>rather than a normal one.</li>\n</ul>\n<ul>\n<li><p></p>\n</li>\n<li><p>c++11overridefinal<br>override:<br>:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">short</span> <span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// note: parameter is a short int</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// note: function is const</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tB b;</span><br><span class=\"line\">\tA &amp;rBase = b;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; rBase.getName1(<span class=\"number\">1</span>) &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; rBase.getName2(<span class=\"number\">2</span>) &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p> <br> A<br>A<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">override:</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName3</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName1</span><span class=\"params\">(<span class=\"keyword\">short</span> <span class=\"keyword\">int</span> x)</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// compile error, function is not an override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName2</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> <span class=\"keyword\">const</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// compile error, function is not an override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName3</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// okay, function is an override of A::getName3(int) </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">Rule: Apply the override specifier to every intended override function you write.</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>final:<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> final</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> :</span> <span class=\"keyword\">public</span> A</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"comment\">// note use of final specifier on following line -- that makes this function no longer overridable</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override final </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125; <span class=\"comment\">// okay, overrides A::getName()</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> :</span> <span class=\"keyword\">public</span> B</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125; <span class=\"comment\">// compile error: overrides B::getName(), which is final</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> final</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"A\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"title\">final</span> :</span> <span class=\"keyword\">public</span> A <span class=\"comment\">// note use of final specifier here</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"B\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> :</span> <span class=\"keyword\">public</span> B <span class=\"comment\">// compile error: cannot inherit from final class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">getName</span><span class=\"params\">()</span> override </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"C\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> `</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>covariant return types:<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"comment\">// This version of getThis() returns a pointer to a Base class</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> Base* <span class=\"title\">getThis</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Normally override functions have to return objects of the same type as the base function</span></span><br><span class=\"line\">    <span class=\"comment\">// However, because Derived is derived from Base, it's okay to return Derived* instead of Base*</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> Derived* <span class=\"title\">getThis</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>base=&derive;<br>     base.getThis()-base</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived derived;</span><br><span class=\"line\">    Base &amp;base = derived;</span><br><span class=\"line\">    <span class=\"comment\">// Calls Base::GetName() instead of the virtualized Derived::GetName()</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; base.Base::getName() &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    ~Base() <span class=\"comment\">// note: not virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Base()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span>* m_array;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_array = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[length];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ~Derived() <span class=\"comment\">// note: not virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Derived()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span>[] m_array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived *derived = <span class=\"keyword\">new</span> Derived(<span class=\"number\">5</span>);</span><br><span class=\"line\">    Base *base = derived ;</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> base;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> Calling ~Base()</p>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~Base() <span class=\"comment\">// note: virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Base()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span>* m_array;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Derived(<span class=\"keyword\">int</span> length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_array = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[length];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~Derived() <span class=\"comment\">// note: virtual</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Calling ~Derived()\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span>[] m_array;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Derived *derived = <span class=\"keyword\">new</span> Derived(<span class=\"number\">5</span>);</span><br><span class=\"line\">    Base *base = derived;</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> base;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Now <span class=\"keyword\">this</span> program produces the following result:</span><br><span class=\"line\">Calling ~Derived()</span><br><span class=\"line\">Calling ~Base()</span><br><span class=\"line\">Rule: Whenever you are dealing with inheritance, you should make any <span class=\"keyword\">explicit</span> destructors <span class=\"keyword\">virtual</span>.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"Early-binding-and-late-binding\"><a href=\"#Early-binding-and-late-binding\" class=\"headerlink\" title=\"Early binding and late binding\"></a>Early binding and late binding</h4><p> <br> Early binding (also called static binding) means the compiler (or linker) is able to directly associate the identifier name (such as a function or variable name) with a machine address.<br> Remember that all functions have a unique address. So when the compiler (or linker) encounters a function call,<br>  it replaces the function call with a machine language instruction that tells the CPU to jump to the address of the function.<br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">subtract</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x - y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">multiply</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x * y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter a number: \"</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; x;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> y;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter another number: \"</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; y;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> op;</span><br><span class=\"line\">    <span class=\"keyword\">do</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Enter an operation (0=add, 1=subtract, 2=multiply): \"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cin</span> &gt;&gt; op;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span> (op &lt; <span class=\"number\">0</span> || op &gt; <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (op)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// call the target function directly using early binding</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0</span>: result = add(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>: result = subtract(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>: result = multiply(x, y); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"The answer is: \"</span> &lt;&lt; result &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p> <br> in some programs, it is not possible to know which function will be called until runtime (when the program is run).<br> This is known as late binding (or dynamic binding). In C++, one way to get late binding is to use function pointers.<br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create a function pointer and make it point to the Add function</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> (*pFcn)(<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>) = add;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; pFcn(<span class=\"number\">5</span>, <span class=\"number\">3</span>) &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>; <span class=\"comment\">// add 5 + 3</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <br> , <br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D1</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    FunctionPointer *__vptr;<span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D1</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D2</span>:</span> <span class=\"keyword\">public</span> Base</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">function2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> base</span><br><span class=\"line\">    *__vptr;--------------------------&gt;base vtable</span><br><span class=\"line\">   virtual function1()&lt;----------------function1()</span><br><span class=\"line\">|-&gt;virtual function2()&lt;----------------function2()</span><br><span class=\"line\">-----------------------------------------------------|</span><br><span class=\"line\">   D1:<span class=\"keyword\">public</span> base                                    |</span><br><span class=\"line\">   *__vptr,(inherited) ----------------D1 vtable     |</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"title\">function1</span><span class=\"params\">()</span></span>; &lt;--------------function1()   |</span><br><span class=\"line\">                                       function2()----</span><br><span class=\"line\"> D2D1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><br>virtual int getValue() = 0; // a pure virtual function<br><br>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Base base; <span class=\"comment\">// We can't instantiate an abstract base class, but for the sake of example, pretend this was allowed</span></span><br><span class=\"line\">    base.getValue(); <span class=\"comment\">// what would this do?</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br> <br> <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> // <span class=\"title\">This</span> <span class=\"title\">Animal</span> <span class=\"title\">is</span> <span class=\"title\">an</span> <span class=\"title\">abstract</span> <span class=\"title\">base</span> <span class=\"title\">class</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>; <span class=\"comment\">// note that speak is now a pure virtual function</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cow</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cow(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// We forgot to redefine speak</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cow <span class=\"title\">cow</span><span class=\"params\">(<span class=\"string\">\"Betsy\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; cow.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; cow.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cow</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Cow(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"Moo\"</span>; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Cow <span class=\"title\">cow</span><span class=\"params\">(<span class=\"string\">\"Betsy\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; cow.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; cow.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt; </span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> // <span class=\"title\">This</span> <span class=\"title\">Animal</span> <span class=\"title\">is</span> <span class=\"title\">an</span> <span class=\"title\">abstract</span> <span class=\"title\">base</span> <span class=\"title\">class</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> m_name;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Animal(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : m_name(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_name; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>; <span class=\"comment\">// note that speak is a pure virtual function</span></span><br><span class=\"line\">&#125;; </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* Animal::speak()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"buzz\"</span>; <span class=\"comment\">// some default implementation</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dragonfly</span>:</span> <span class=\"keyword\">public</span> Animal</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Dragonfly(<span class=\"built_in\">std</span>::<span class=\"built_in\">string</span> name)</span><br><span class=\"line\">        : Animal(name)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"title\">speak</span><span class=\"params\">()</span> <span class=\"comment\">// this class is no longer abstract because we defined this function</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Animal::speak(); <span class=\"comment\">// use Animal's default implementation</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Dragonfly <span class=\"title\">dfly</span><span class=\"params\">(<span class=\"string\">\"Sally\"</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; dfly.getName() &lt;&lt; <span class=\"string\">\" says \"</span> &lt;&lt; dfly.speak() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">The above code prints:</span><br><span class=\"line\">Sally says buzz</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>I:IErrorLog,java<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IErrorLog</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">openLog</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *filename)</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">closeLog</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">bool</span> <span class=\"title\">writeError</span><span class=\"params\">(<span class=\"keyword\">const</span> <span class=\"keyword\">char</span> *errorMessage)</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">virtual</span> ~IErrorLog() &#123;&#125;; <span class=\"comment\">// make a virtual destructor in case we delete an IErrorLog pointer, so the proper derived destructor is called</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"virtual-base-class\"><a href=\"#virtual-base-class\" class=\"headerlink\" title=\"virtual base class\"></a>virtual base class</h4><p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    PoweredDevice(<span class=\"keyword\">int</span> power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"PoweredDevice: \"</span> &lt;&lt; power &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Scanner(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Scanner: \"</span> &lt;&lt; scanner &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Printer(<span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Printer: \"</span> &lt;&lt; printer &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Copier(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : Scanner(scanner, power), Printer(printer, power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Copier <span class=\"title\">copier</span><span class=\"params\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Scanner: <span class=\"number\">1</span></span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Printer: <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p><br>virtual base class<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PoweredDevice</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    PoweredDevice(<span class=\"keyword\">int</span> power)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"PoweredDevice: \"</span> &lt;&lt; power &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scanner</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice <span class=\"comment\">// note: PoweredDevice is now a virtual base class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Scanner(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power) <span class=\"comment\">// this line is required to create Scanner objects, but ignored in this case</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Scanner: \"</span> &lt;&lt; scanner &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Printer</span>:</span> <span class=\"keyword\">virtual</span> <span class=\"keyword\">public</span> PoweredDevice <span class=\"comment\">// note: PoweredDevice is now a virtual base class</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Printer(<span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : PoweredDevice(power) <span class=\"comment\">// this line is required to create Printer objects, but ignored in this case</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Printer: \"</span> &lt;&lt; printer &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Copier</span>:</span> <span class=\"keyword\">public</span> Scanner, <span class=\"keyword\">public</span> Printer</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Copier(<span class=\"keyword\">int</span> scanner, <span class=\"keyword\">int</span> printer, <span class=\"keyword\">int</span> power)</span><br><span class=\"line\">        : Scanner(scanner, power), Printer(printer, power),</span><br><span class=\"line\">        PoweredDevice(power) <span class=\"comment\">// PoweredDevice is constructed here</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">This time, our previous example:</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Copier <span class=\"title\">copier</span><span class=\"params\">(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">produces the result:</span><br><span class=\"line\">PoweredDevice: <span class=\"number\">3</span></span><br><span class=\"line\">Scanner: <span class=\"number\">1</span></span><br><span class=\"line\">Printer: <span class=\"number\">2</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li></li>\n<li>virtual base class</li>\n<li>if Copier was singly inherited from Printer, and Printer was virtually inherited from PoweredDevice, Copier is still responsible for creating PoweredDevice</li>\n<li>Fourth, a virtual base class is always considered a direct base of its most derived class<br>(which is why the most derived class is responsible for its construction).</li>\n<li>But classes inheriting the virtual base still need access to it. So in order to facilitate this, the compiler creates a virtual table for each class directly inheriting the virtual class (Printer and Scanner). These virtual tables point to the functions in the most derived class. Because the derived classes have a virtual table,  that also means they are now larger by a pointer (to the virtual table).</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">derived</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    Base base = derived; <span class=\"comment\">// what happens here?</span></span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"base is a \"</span> &lt;&lt; base.getName() &lt;&lt; <span class=\"string\">\" and has value \"</span> &lt;&lt; base.getValue() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printName</span><span class=\"params\">(<span class=\"keyword\">const</span> Base base)</span> <span class=\"comment\">// note: base passed by value, not reference</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; base.getName() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">This is a pretty simple function with a <span class=\"keyword\">const</span> base object parameter that is passed by value. If we call <span class=\"keyword\">this</span> function like such:\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    printName(d); <span class=\"comment\">// oops, didn't realize this was pass by value on the calling end </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>vector<base>vector&lt;&amp;base&gt;vector&lt;base*&gt;<br><br>std::vector&lt;Base&amp;&gt; v;<br>Unfortunately, this wont compile. The elements of std::vector must be assignable, whereas references cant be reassigned (only initialized).<br>delete<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">vector</span>&lt;Base*&gt; v;</span><br><span class=\"line\">\tv.push_back(<span class=\"keyword\">new</span> Base(<span class=\"number\">5</span>)); <span class=\"comment\">// add a Base object to our vector</span></span><br><span class=\"line\">\tv.push_back(<span class=\"keyword\">new</span> Derived(<span class=\"number\">6</span>)); <span class=\"comment\">// add a Derived object to our vector</span></span><br><span class=\"line\">        <span class=\"comment\">// Print out all of the elements in our vector</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; v[count]-&gt;getName() &lt;&lt; <span class=\"string\">\" with value \"</span> &lt;&lt; v[count]-&gt;getValue() &lt;&lt; <span class=\"string\">\"\\n\"</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"keyword\">delete</span> v[count];</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;functional&gt; // for std::reference_wrapper</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">std</span>::<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">std</span>::reference_wrapper&lt;Base&gt; &gt; v; <span class=\"comment\">// our vector is a vector of std::reference_wrapper wrapped Base (not Base&amp;)</span></span><br><span class=\"line\">\t<span class=\"function\">Base <span class=\"title\">b</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>; <span class=\"comment\">// b and d can't be anonymous objects</span></span><br><span class=\"line\">\t<span class=\"function\">Derived <span class=\"title\">d</span><span class=\"params\">(<span class=\"number\">6</span>)</span></span>;</span><br><span class=\"line\">\tv.push_back(b); <span class=\"comment\">// add a Base object to our vector</span></span><br><span class=\"line\">\tv.push_back(d); <span class=\"comment\">// add a Derived object to our vector</span></span><br><span class=\"line\">\t<span class=\"comment\">// Print out all of the elements in our vector</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count = <span class=\"number\">0</span>; count &lt; v.size(); ++count)</span><br><span class=\"line\">\t\t<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"I am a \"</span> &lt;&lt; v[count].get().getName() &lt;&lt; <span class=\"string\">\" with value \"</span> &lt;&lt; v[count].get().getValue() &lt;&lt; <span class=\"string\">\"\\n\"</span>; <span class=\"comment\">// we use .get() to get our element from the wrapper</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d1</span><span class=\"params\">(<span class=\"number\">5</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\">Derived <span class=\"title\">d2</span><span class=\"params\">(<span class=\"number\">6</span>)</span></span>;</span><br><span class=\"line\">    Base &amp;b = d2;<span class=\"comment\">//bd2</span></span><br><span class=\"line\">    b = d1; <span class=\"comment\">// this line is problematicbd1,d2,bd2d2d1d2</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"dynamic-cast\"><a href=\"#dynamic-cast\" class=\"headerlink\" title=\"dynamic_cast:\"></a>dynamic_cast:</h4><ul>\n<li><p>shape <em>ps=new circle();<br>  virtual func:  ps-&gt;rotate()    //virtual func<br>  dynamic_cast:type<br>  if(circle </em>pc=dynamic_cast&lt;circle*&gt;(ps))</p>\n<p>  (::<br>  void*<br>  <br>  </p>\n</li>\n</ul>"},{"title":"cpp_static","date":"2018-06-08T14:44:43.000Z","_content":"### c++static\n##### something share:\nc++c\ncppg++<!--more-->\nc++g++C++\n\n\n\n#### static overiew \n+ staticc(in static mem ,not in stack).\n+ (data)\n\n#### \nstatic  \nstatic  \nstatic  \n\n#### static\nstatic(data)  \n+ static  \n+  -(data)\n\n##### cstatic:\n+ auto,\n+ extern ,static\n\n\"   \nstat.hstatic int getstats().  \nstat.cstatic int getstats(){return xxx;}  \nmain  \n)  \nc++staticc\" \n\n\n#### static\n##### static\n```c\n   static int global1=4;\n   12 int main()\n   13 {\n>> 14         int loc1=global1;\n\n_ZL7global1:\n\t.long\t4\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n\n\tmovl\t_ZL7global1(%rip), %eax\n\tmovl\t%eax, -4(%rbp)\n//kdbg\nstatic\n(int *) 0x601048 <global1>\n\n(char **) 0x7ffff7a54530 <loc1>```\n\n##### \n```c \nint main()\n   13 {\n   14         static int locstatic1=5;\n>> 15         int loc1=global1;\n>> 16         int loc2=locstatic1;\n\n\tmovl\t_ZZ4mainE10locstatic1(%rip), %eax\n\tmovl\t%eax, -4(%rbp)\n\n_ZZ4mainE10locstatic1:\n\t.long\t5\n\nloca1 (int *) 0x7fffffffd8a8\nloca2 (int *) 0x7fffffffd8ac\n\n  global1 (int *) 0x601048 <global1>\n  locstatic:(int *) 0x60104c <main::locstatic1>\n\t```\n##### static\n\n\n##### static\n```c\n static  int getv()\n    4 {\n    5         int a=5;\n    6         a++;\n    7         cout<<a<<endl;\n    8         return 4;\n    9 } \n\n\t.type\t_ZL4getvv, @function\n_ZL4getvv:\n.LFB1021:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tsubq\t$16, %rsp\n\n\n```\n\tcall\t_ZL4getvv\n\n```c\n\nstatic  int getv()\n{\n0x400816 push   %rbp\n0x400817 mov    %rsp,%rbp\n0x40081a sub    $0x10,%rsp\n\t\tint a=5;\n\t\ta++;\n\t\tcout<<a<<endl;\n\t\treturn 4;\n} \n\nstatic int global1=4;\nint main()\n{\n\t\tstatic int locstatic1=5;\n\t\tint loc1=global1;\n\t\tint loc2=locstatic1;\n//\t\tcout<<getv()<<endl;\n    \tgetv();\n0x400866 callq  0x400816 <getv()>\n```\n\n\n#### static\n##### static\n static\n```cpp\nclass Something\n{\npublic:\n    static int s_value; // declares the static member variable\n};\n \nint Something::s_value = 1; // defines the static member variable (we'll discuss this section below)\n \nint main()\n{\n    // note: we're not instantiating any objects of type Something\n \n    Something::s_value = 2;\n    std::cout << Something::s_value << '\\n';\n    return 0;\n}\n```\n```c\n_ZN9Something7s_valueE:\n\t.long\t1\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n\n\n  Something::s_value=3;\n0x40081a movl   $0x3,0x20083c(%rip)        # 0x601060 <Something::s_value>\n\tmovl\t_ZN9Something7s_valueE(%rip), %eax\n\tmovl\t%eax, %esi\n\n\n```\n\n##### \n:\n\n```cpp\nstati.h\n class Some{\n  2         public:\n  3                 static int s_v;\n  4 };\n  5 //static int s_vv;//error \n\nstati.cpp\n   #include\"stati.h\"\n  2 int Some::s_v=4;\n  3 //static int s_vv=5;error\n\nmain\n   #include \"stati.h\"\n\n  int gets= Some::s_v;\n\nother:\nclass Whatever\n{\npublic:\n    static const int s_value = 4; // a static const int can be declared and initialized directly\n};\n```\n##### \n+ privatedirectly by class  \nbut you canto use it  \n+ this \n+ func,static,staticpublicconst\nstatic)\n\n```cpp\nclass IDGenerator\n{\nprivate:\n    static int s_nextID; // Here's the declaration for a static member\n \npublic:\n     static int getNextID(); // Here's the declaration for a static function\n};\n \n// Here's the definition of the static member outside the class.  Note we don't use the static keyword here.\n// We'll start generating IDs at 1\nint IDGenerator::s_nextID = 1;\n \n// Here's the definition of the static function outside of the class.  Note we don't use the static keyword here.\nint IDGenerator::getNextID() { return s_nextID++; } \n \nint main()\n{\n    for (int count=0; count < 5; ++count)\n        std::cout << \"The next ID is: \" << IDGenerator::getNextID() << '\\n';\n \n    return 0;\n}\n```","source":"_posts/cpp-static.md","raw":"---\ntitle: cpp_static\ndate: 2018-06-08 22:44:43\ntags: cpp_keyword\ncategories: c&cpp\n---\n### c++static\n##### something share:\nc++c\ncppg++<!--more-->\nc++g++C++\n\n\n\n#### static overiew \n+ staticc(in static mem ,not in stack).\n+ (data)\n\n#### \nstatic  \nstatic  \nstatic  \n\n#### static\nstatic(data)  \n+ static  \n+  -(data)\n\n##### cstatic:\n+ auto,\n+ extern ,static\n\n\"   \nstat.hstatic int getstats().  \nstat.cstatic int getstats(){return xxx;}  \nmain  \n)  \nc++staticc\" \n\n\n#### static\n##### static\n```c\n   static int global1=4;\n   12 int main()\n   13 {\n>> 14         int loc1=global1;\n\n_ZL7global1:\n\t.long\t4\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n\n\tmovl\t_ZL7global1(%rip), %eax\n\tmovl\t%eax, -4(%rbp)\n//kdbg\nstatic\n(int *) 0x601048 <global1>\n\n(char **) 0x7ffff7a54530 <loc1>```\n\n##### \n```c \nint main()\n   13 {\n   14         static int locstatic1=5;\n>> 15         int loc1=global1;\n>> 16         int loc2=locstatic1;\n\n\tmovl\t_ZZ4mainE10locstatic1(%rip), %eax\n\tmovl\t%eax, -4(%rbp)\n\n_ZZ4mainE10locstatic1:\n\t.long\t5\n\nloca1 (int *) 0x7fffffffd8a8\nloca2 (int *) 0x7fffffffd8ac\n\n  global1 (int *) 0x601048 <global1>\n  locstatic:(int *) 0x60104c <main::locstatic1>\n\t```\n##### static\n\n\n##### static\n```c\n static  int getv()\n    4 {\n    5         int a=5;\n    6         a++;\n    7         cout<<a<<endl;\n    8         return 4;\n    9 } \n\n\t.type\t_ZL4getvv, @function\n_ZL4getvv:\n.LFB1021:\n\t.cfi_startproc\n\tpushq\t%rbp\n\t.cfi_def_cfa_offset 16\n\t.cfi_offset 6, -16\n\tmovq\t%rsp, %rbp\n\t.cfi_def_cfa_register 6\n\tsubq\t$16, %rsp\n\n\n```\n\tcall\t_ZL4getvv\n\n```c\n\nstatic  int getv()\n{\n0x400816 push   %rbp\n0x400817 mov    %rsp,%rbp\n0x40081a sub    $0x10,%rsp\n\t\tint a=5;\n\t\ta++;\n\t\tcout<<a<<endl;\n\t\treturn 4;\n} \n\nstatic int global1=4;\nint main()\n{\n\t\tstatic int locstatic1=5;\n\t\tint loc1=global1;\n\t\tint loc2=locstatic1;\n//\t\tcout<<getv()<<endl;\n    \tgetv();\n0x400866 callq  0x400816 <getv()>\n```\n\n\n#### static\n##### static\n static\n```cpp\nclass Something\n{\npublic:\n    static int s_value; // declares the static member variable\n};\n \nint Something::s_value = 1; // defines the static member variable (we'll discuss this section below)\n \nint main()\n{\n    // note: we're not instantiating any objects of type Something\n \n    Something::s_value = 2;\n    std::cout << Something::s_value << '\\n';\n    return 0;\n}\n```\n```c\n_ZN9Something7s_valueE:\n\t.long\t1\n\t.text\n\t.globl\tmain\n\t.type\tmain, @function\n\n\n  Something::s_value=3;\n0x40081a movl   $0x3,0x20083c(%rip)        # 0x601060 <Something::s_value>\n\tmovl\t_ZN9Something7s_valueE(%rip), %eax\n\tmovl\t%eax, %esi\n\n\n```\n\n##### \n:\n\n```cpp\nstati.h\n class Some{\n  2         public:\n  3                 static int s_v;\n  4 };\n  5 //static int s_vv;//error \n\nstati.cpp\n   #include\"stati.h\"\n  2 int Some::s_v=4;\n  3 //static int s_vv=5;error\n\nmain\n   #include \"stati.h\"\n\n  int gets= Some::s_v;\n\nother:\nclass Whatever\n{\npublic:\n    static const int s_value = 4; // a static const int can be declared and initialized directly\n};\n```\n##### \n+ privatedirectly by class  \nbut you canto use it  \n+ this \n+ func,static,staticpublicconst\nstatic)\n\n```cpp\nclass IDGenerator\n{\nprivate:\n    static int s_nextID; // Here's the declaration for a static member\n \npublic:\n     static int getNextID(); // Here's the declaration for a static function\n};\n \n// Here's the definition of the static member outside the class.  Note we don't use the static keyword here.\n// We'll start generating IDs at 1\nint IDGenerator::s_nextID = 1;\n \n// Here's the definition of the static function outside of the class.  Note we don't use the static keyword here.\nint IDGenerator::getNextID() { return s_nextID++; } \n \nint main()\n{\n    for (int count=0; count < 5; ++count)\n        std::cout << \"The next ID is: \" << IDGenerator::getNextID() << '\\n';\n \n    return 0;\n}\n```","slug":"cpp-static","published":1,"updated":"2018-06-08T15:23:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghp1001l00jxs0qsyw37","content":"<h3 id=\"c-static\"><a href=\"#c-static\" class=\"headerlink\" title=\"c++static\"></a>c++static</h3><h5 id=\"something-share\"><a href=\"#something-share\" class=\"headerlink\" title=\"something share:\"></a>something share:</h5><p>c++c<br>cppg++<a id=\"more\"></a><br>c++g++C++</p>\n<h4 id=\"static-overiew\"><a href=\"#static-overiew\" class=\"headerlink\" title=\"static overiew\"></a>static overiew</h4><ul>\n<li>staticc(in static mem ,not in stack).</li>\n<li>(data)</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>static<br>static<br>static  </p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><p>static(data)  </p>\n<ul>\n<li>static  </li>\n<li> -(data)</li>\n</ul>\n<h5 id=\"cstatic\"><a href=\"#cstatic\" class=\"headerlink\" title=\"cstatic:\"></a>cstatic:</h5><ul>\n<li>auto,</li>\n<li>extern ,static</li>\n</ul>\n<p> <br>stat.hstatic int getstats().<br>stat.cstatic int getstats(){return xxx;}<br>main<br>)<br>c++staticc </p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> global1=<span class=\"number\">4</span>;</span><br><span class=\"line\">   <span class=\"number\">12</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   13 </span>&#123;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">14</span>         <span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\"></span><br><span class=\"line\">_ZL7global1:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">4</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br><span class=\"line\"></span><br><span class=\"line\">\tmovl\t_ZL7global1(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, <span class=\"number\">-4</span>(%rbp)</span><br><span class=\"line\"><span class=\"comment\">//kdbg</span></span><br><span class=\"line\"><span class=\"keyword\">static</span></span><br><span class=\"line\">(<span class=\"keyword\">int</span> *) <span class=\"number\">0x601048</span> &lt;global1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">char</span> **) <span class=\"number\">0x7ffff7a54530</span> &lt;loc1&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   13 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">14</span>         <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> locstatic1=<span class=\"number\">5</span>;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">15</span>         <span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">16</span>         <span class=\"keyword\">int</span> loc2=locstatic1;</span><br><span class=\"line\"></span><br><span class=\"line\">\tmovl\t_ZZ4mainE10locstatic1(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, <span class=\"number\">-4</span>(%rbp)</span><br><span class=\"line\"></span><br><span class=\"line\">_ZZ4mainE10locstatic1:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">loca1 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x7fffffffd8a8</span></span><br><span class=\"line\">loca2 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x7fffffffd8ac</span></span><br><span class=\"line\"></span><br><span class=\"line\">  global1 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x601048</span> &lt;global1&gt;</span><br><span class=\"line\">  locstatic:(<span class=\"keyword\">int</span> *) <span class=\"number\">0x60104c</span> &lt;main::locstatic1&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p><br></p>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">static</span>  <span class=\"keyword\">int</span> <span class=\"title\">getv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    4 </span>&#123;</span><br><span class=\"line\">    <span class=\"number\">5</span>         <span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"number\">6</span>         a++;</span><br><span class=\"line\">    <span class=\"number\">7</span>         <span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"number\">8</span>         <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"number\">9</span> &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">\t.type\t_ZL4getvv, @function</span><br><span class=\"line\">_ZL4getvv:</span><br><span class=\"line\">.LFB1021:</span><br><span class=\"line\">\t.cfi_startproc</span><br><span class=\"line\">\tpushq\t%rbp</span><br><span class=\"line\">\t.cfi_def_cfa_offset <span class=\"number\">16</span></span><br><span class=\"line\">\t.cfi_offset <span class=\"number\">6</span>, <span class=\"number\">-16</span></span><br><span class=\"line\">\tmovq\t%rsp, %rbp</span><br><span class=\"line\">\t.cfi_def_cfa_register <span class=\"number\">6</span></span><br><span class=\"line\">\tsubq\t$<span class=\"number\">16</span>, %rsp</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>    call    _ZL4getvv<br><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span>  <span class=\"keyword\">int</span> <span class=\"title\">getv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"number\">0x400816</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400817</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x40081a</span> sub    $<span class=\"number\">0x10</span>,%rsp</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</span><br><span class=\"line\">\t\ta++;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> global1=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> locstatic1=<span class=\"number\">5</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> loc2=locstatic1;</span><br><span class=\"line\"><span class=\"comment\">//\t\tcout&lt;&lt;getv()&lt;&lt;endl;</span></span><br><span class=\"line\">    \tgetv();</span><br><span class=\"line\"><span class=\"number\">0x400866</span> callq  <span class=\"number\">0x400816</span> &lt;getv()&gt;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p> static<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Something</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_value; <span class=\"comment\">// declares the static member variable</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">int</span> Something::s_value = <span class=\"number\">1</span>; <span class=\"comment\">// defines the static member variable (we'll discuss this section below)</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// note: we're not instantiating any objects of type Something</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    Something::s_value = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; Something::s_value &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_ZN9Something7s_valueE:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">1</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  Something::s_value=<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">0x40081a</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">0x20083c</span>(%rip)        # <span class=\"number\">0x601060</span> &lt;Something::s_value&gt;</span><br><span class=\"line\">\tmovl\t_ZN9Something7s_valueE(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, %esi</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>:<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stati.h</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Some</span>&#123;</span></span><br><span class=\"line\">  <span class=\"number\">2</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"number\">3</span>                 <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_v;</span><br><span class=\"line\">  <span class=\"number\">4</span> &#125;;</span><br><span class=\"line\">  <span class=\"number\">5</span> <span class=\"comment\">//static int s_vv;//error </span></span><br><span class=\"line\"></span><br><span class=\"line\">stati.cpp</span><br><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">\"stati.h\"</span></span></span><br><span class=\"line\">  <span class=\"number\">2</span> <span class=\"keyword\">int</span> Some::s_v=<span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"number\">3</span> <span class=\"comment\">//static int s_vv=5;error</span></span><br><span class=\"line\"></span><br><span class=\"line\">main</span><br><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"stati.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">int</span> gets= Some::s_v;</span><br><span class=\"line\"></span><br><span class=\"line\">other:</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Whatever</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> s_value = <span class=\"number\">4</span>; <span class=\"comment\">// a static const int can be declared and initialized directly</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>privatedirectly by class<br>but you canto use it  </li>\n<li>this </li>\n<li>func,static,staticpublicconst<br>static)</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IDGenerator</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_nextID; <span class=\"comment\">// Here's the declaration for a static member</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">getNextID</span><span class=\"params\">()</span></span>; <span class=\"comment\">// Here's the declaration for a static function</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// Here's the definition of the static member outside the class.  Note we don't use the static keyword here.</span></span><br><span class=\"line\"><span class=\"comment\">// We'll start generating IDs at 1</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> IDGenerator::s_nextID = <span class=\"number\">1</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// Here's the definition of the static function outside of the class.  Note we don't use the static keyword here.</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> IDGenerator::getNextID() &#123; <span class=\"keyword\">return</span> s_nextID++; &#125; </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count=<span class=\"number\">0</span>; count &lt; <span class=\"number\">5</span>; ++count)</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"The next ID is: \"</span> &lt;&lt; IDGenerator::getNextID() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h3 id=\"c-static\"><a href=\"#c-static\" class=\"headerlink\" title=\"c++static\"></a>c++static</h3><h5 id=\"something-share\"><a href=\"#something-share\" class=\"headerlink\" title=\"something share:\"></a>something share:</h5><p>c++c<br>cppg++","more":"<br>c++g++C++</p>\n<h4 id=\"static-overiew\"><a href=\"#static-overiew\" class=\"headerlink\" title=\"static overiew\"></a>static overiew</h4><ul>\n<li>staticc(in static mem ,not in stack).</li>\n<li>(data)</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>static<br>static<br>static  </p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><p>static(data)  </p>\n<ul>\n<li>static  </li>\n<li> -(data)</li>\n</ul>\n<h5 id=\"cstatic\"><a href=\"#cstatic\" class=\"headerlink\" title=\"cstatic:\"></a>cstatic:</h5><ul>\n<li>auto,</li>\n<li>extern ,static</li>\n</ul>\n<p> <br>stat.hstatic int getstats().<br>stat.cstatic int getstats(){return xxx;}<br>main<br>)<br>c++staticc </p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> global1=<span class=\"number\">4</span>;</span><br><span class=\"line\">   <span class=\"number\">12</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   13 </span>&#123;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">14</span>         <span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\"></span><br><span class=\"line\">_ZL7global1:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">4</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br><span class=\"line\"></span><br><span class=\"line\">\tmovl\t_ZL7global1(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, <span class=\"number\">-4</span>(%rbp)</span><br><span class=\"line\"><span class=\"comment\">//kdbg</span></span><br><span class=\"line\"><span class=\"keyword\">static</span></span><br><span class=\"line\">(<span class=\"keyword\">int</span> *) <span class=\"number\">0x601048</span> &lt;global1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">char</span> **) <span class=\"number\">0x7ffff7a54530</span> &lt;loc1&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   13 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">14</span>         <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> locstatic1=<span class=\"number\">5</span>;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">15</span>         <span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">16</span>         <span class=\"keyword\">int</span> loc2=locstatic1;</span><br><span class=\"line\"></span><br><span class=\"line\">\tmovl\t_ZZ4mainE10locstatic1(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, <span class=\"number\">-4</span>(%rbp)</span><br><span class=\"line\"></span><br><span class=\"line\">_ZZ4mainE10locstatic1:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">loca1 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x7fffffffd8a8</span></span><br><span class=\"line\">loca2 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x7fffffffd8ac</span></span><br><span class=\"line\"></span><br><span class=\"line\">  global1 (<span class=\"keyword\">int</span> *) <span class=\"number\">0x601048</span> &lt;global1&gt;</span><br><span class=\"line\">  locstatic:(<span class=\"keyword\">int</span> *) <span class=\"number\">0x60104c</span> &lt;main::locstatic1&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p><br></p>\n<h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">static</span>  <span class=\"keyword\">int</span> <span class=\"title\">getv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    4 </span>&#123;</span><br><span class=\"line\">    <span class=\"number\">5</span>         <span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"number\">6</span>         a++;</span><br><span class=\"line\">    <span class=\"number\">7</span>         <span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    <span class=\"number\">8</span>         <span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"number\">9</span> &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">\t.type\t_ZL4getvv, @function</span><br><span class=\"line\">_ZL4getvv:</span><br><span class=\"line\">.LFB1021:</span><br><span class=\"line\">\t.cfi_startproc</span><br><span class=\"line\">\tpushq\t%rbp</span><br><span class=\"line\">\t.cfi_def_cfa_offset <span class=\"number\">16</span></span><br><span class=\"line\">\t.cfi_offset <span class=\"number\">6</span>, <span class=\"number\">-16</span></span><br><span class=\"line\">\tmovq\t%rsp, %rbp</span><br><span class=\"line\">\t.cfi_def_cfa_register <span class=\"number\">6</span></span><br><span class=\"line\">\tsubq\t$<span class=\"number\">16</span>, %rsp</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>    call    _ZL4getvv<br><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span>  <span class=\"keyword\">int</span> <span class=\"title\">getv</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"number\">0x400816</span> push   %rbp</span><br><span class=\"line\"><span class=\"number\">0x400817</span> mov    %rsp,%rbp</span><br><span class=\"line\"><span class=\"number\">0x40081a</span> sub    $<span class=\"number\">0x10</span>,%rsp</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> a=<span class=\"number\">5</span>;</span><br><span class=\"line\">\t\ta++;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">4</span>;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> global1=<span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> locstatic1=<span class=\"number\">5</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> loc1=global1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> loc2=locstatic1;</span><br><span class=\"line\"><span class=\"comment\">//\t\tcout&lt;&lt;getv()&lt;&lt;endl;</span></span><br><span class=\"line\">    \tgetv();</span><br><span class=\"line\"><span class=\"number\">0x400866</span> callq  <span class=\"number\">0x400816</span> &lt;getv()&gt;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h4><h5 id=\"static\"><a href=\"#static\" class=\"headerlink\" title=\"static\"></a>static</h5><p> static<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Something</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_value; <span class=\"comment\">// declares the static member variable</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">int</span> Something::s_value = <span class=\"number\">1</span>; <span class=\"comment\">// defines the static member variable (we'll discuss this section below)</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// note: we're not instantiating any objects of type Something</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    Something::s_value = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; Something::s_value &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">_ZN9Something7s_valueE:</span><br><span class=\"line\">\t.<span class=\"keyword\">long</span>\t<span class=\"number\">1</span></span><br><span class=\"line\">\t.text</span><br><span class=\"line\">\t.globl\tmain</span><br><span class=\"line\">\t.type\tmain, @function</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  Something::s_value=<span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">0x40081a</span> movl   $<span class=\"number\">0x3</span>,<span class=\"number\">0x20083c</span>(%rip)        # <span class=\"number\">0x601060</span> &lt;Something::s_value&gt;</span><br><span class=\"line\">\tmovl\t_ZN9Something7s_valueE(%rip), %eax</span><br><span class=\"line\">\tmovl\t%eax, %esi</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>:<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stati.h</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Some</span>&#123;</span></span><br><span class=\"line\">  <span class=\"number\">2</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\">  <span class=\"number\">3</span>                 <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_v;</span><br><span class=\"line\">  <span class=\"number\">4</span> &#125;;</span><br><span class=\"line\">  <span class=\"number\">5</span> <span class=\"comment\">//static int s_vv;//error </span></span><br><span class=\"line\"></span><br><span class=\"line\">stati.cpp</span><br><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">\"stati.h\"</span></span></span><br><span class=\"line\">  <span class=\"number\">2</span> <span class=\"keyword\">int</span> Some::s_v=<span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"number\">3</span> <span class=\"comment\">//static int s_vv=5;error</span></span><br><span class=\"line\"></span><br><span class=\"line\">main</span><br><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"stati.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">int</span> gets= Some::s_v;</span><br><span class=\"line\"></span><br><span class=\"line\">other:</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Whatever</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> s_value = <span class=\"number\">4</span>; <span class=\"comment\">// a static const int can be declared and initialized directly</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>privatedirectly by class<br>but you canto use it  </li>\n<li>this </li>\n<li>func,static,staticpublicconst<br>static)</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IDGenerator</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> s_nextID; <span class=\"comment\">// Here's the declaration for a static member</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">getNextID</span><span class=\"params\">()</span></span>; <span class=\"comment\">// Here's the declaration for a static function</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// Here's the definition of the static member outside the class.  Note we don't use the static keyword here.</span></span><br><span class=\"line\"><span class=\"comment\">// We'll start generating IDs at 1</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> IDGenerator::s_nextID = <span class=\"number\">1</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// Here's the definition of the static function outside of the class.  Note we don't use the static keyword here.</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> IDGenerator::getNextID() &#123; <span class=\"keyword\">return</span> s_nextID++; &#125; </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> count=<span class=\"number\">0</span>; count &lt; <span class=\"number\">5</span>; ++count)</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"The next ID is: \"</span> &lt;&lt; IDGenerator::getNextID() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"cpp_this","date":"2018-06-09T02:13:46.000Z","_content":"### c++this\n#### this\nthis\n\n<!--more-->\n```cpp\nclass Simple\n{\nprivate:\n    int m_id;\npublic:\n    Simple(int id)\n    {\n        setID(id);\n    }\n    void setID(int id) { m_id = id; }\n    int getID() { return m_id; }\n};\nint main()\n{\n    Simple simple(1);\n    simple.setID(2);\n    std::cout << simple.getID() << '\\n';\n    return 0;\n}\n```\n```cpp\nsimple.setID(2);--->\nsetID(&simple, 2); // note that simple has been changed from an object prefix to a function argument!\n  void setID(int id) { m_id = id; }--->\n  void setID(Simple* const this, int id) { this->m_id = id; }\n  ```\n#### this\n this \n+  \n+  () cv () noexcept (C++11)(C++11 )\n+  (C++11 )\n+  this  this \n\n```cpp\nextern struct D d;\nstruct D {\nD(int a) : a(a), b(d.a) {} // a(a)will change to this->a(a),but b(d.a)-->this->b(d.a),and will get random value,but b(a)  b(this->a) \n    int a, b;\n};\nD d = D(1);   //  b(d.a)  this  d.b ,i try in g++.find it d.b==1\n```\n\n#### this  \nthis   \n#### this \n```cpp\nint main()\n{\n    Simple A(1); // *this = &A inside the Simple constructor\n    Simple B(2); // *this = &B inside the Simple constructor\n    A.setID(3); // *this = &A inside member function setID\n    B.setID(4); // *this = &B inside member function setID\n \n    return 0;\n}\n``\n+ this  \nthiscout<<xxx<<<xxx<<<xxxxx....\ncout<<<<this  \n```cpp\nstd::cout << \"Hello, \" << userName;\n(std::cout << \"Hello, \") << userName;\n\n(void) << userName;\n(std::cout) << userName;\n\nclass Calc\n{\nprivate:\n    int m_value;\n \npublic:\n    Calc() { m_value = 0; }\n \n    Calc& add(int value) { m_value += value; return *this; }\n    Calc& sub(int value) { m_value -= value; return *this; }\n    Calc& mult(int value) { m_value *= value; return *this; }\n \n    int getValue() { return m_value; }\n};\n\n#include <iostream>\nint main()\n{\n    Calc calc;\n    calc.add(5).sub(3).mult(4);\n \n    std::cout << calc.getValue() << '\\n';\n    return 0;\n}```\n\nCalc& return *this\n#### this\nabove\n```cpp\n#include<iostream>\nusing namespace std;\nclass set\n{\n    int m_i;\npublic:\n    set()\n    {\n        m_i = 0;\n    }\n    set add(int i)\n    {\n        m_i += i;\n        return *this;\n    }\n    int  getval()\n    {\n        return m_i;\n    }\n};\nint main()\n{\n    set s;\n    s.add(2).add(2);\n    cout<<s.getval();\n}```\n//*thisset\n```cpp\nclass set\n    5 {   \n    6     int m_e;\n    7     int m_i;\n    8  public:\n    9     set()\n   10     {\n   11         m_e=0;\n   12         m_i=0;\n   13     }\n   14     set add(int i){\n   15             m_i+=i;\n   16             return *this;\n   17     }\n   18     int getval() { \n   19             return m_i;\n   20     }\n   21 };\n\nint main()\n   33 {\n   34         set s;\n   35         set s2;\n>> 36         printf(\"%x\\n\",s.add(2));--0,*thissm_e\n>> 37         printf(\"%x\\n\",s);0\n   38         s2=s.add(2);--s2ssm_i=2+2\n   39         s2.add(2);--s2m_i=6\n>> 40         printf(\"%d\\n\",s2);// m_e=0\n   41         cout<<s2.getval()<<endl;-6\n   42         return 0;\n   43 }\n this->object  this->s\n            *this==s\n            *this==s\n&s\n```\nref:  \nhttp://zh.cppreference.com/w/cpp/language/this\nhttp://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/\n","source":"_posts/cpp-this.md","raw":"---\ntitle: cpp_this\ndate: 2018-06-09 10:13:46\ntags: cpp_keyword\ncategories: c&cpp\n---\n### c++this\n#### this\nthis\n\n<!--more-->\n```cpp\nclass Simple\n{\nprivate:\n    int m_id;\npublic:\n    Simple(int id)\n    {\n        setID(id);\n    }\n    void setID(int id) { m_id = id; }\n    int getID() { return m_id; }\n};\nint main()\n{\n    Simple simple(1);\n    simple.setID(2);\n    std::cout << simple.getID() << '\\n';\n    return 0;\n}\n```\n```cpp\nsimple.setID(2);--->\nsetID(&simple, 2); // note that simple has been changed from an object prefix to a function argument!\n  void setID(int id) { m_id = id; }--->\n  void setID(Simple* const this, int id) { this->m_id = id; }\n  ```\n#### this\n this \n+  \n+  () cv () noexcept (C++11)(C++11 )\n+  (C++11 )\n+  this  this \n\n```cpp\nextern struct D d;\nstruct D {\nD(int a) : a(a), b(d.a) {} // a(a)will change to this->a(a),but b(d.a)-->this->b(d.a),and will get random value,but b(a)  b(this->a) \n    int a, b;\n};\nD d = D(1);   //  b(d.a)  this  d.b ,i try in g++.find it d.b==1\n```\n\n#### this  \nthis   \n#### this \n```cpp\nint main()\n{\n    Simple A(1); // *this = &A inside the Simple constructor\n    Simple B(2); // *this = &B inside the Simple constructor\n    A.setID(3); // *this = &A inside member function setID\n    B.setID(4); // *this = &B inside member function setID\n \n    return 0;\n}\n``\n+ this  \nthiscout<<xxx<<<xxx<<<xxxxx....\ncout<<<<this  \n```cpp\nstd::cout << \"Hello, \" << userName;\n(std::cout << \"Hello, \") << userName;\n\n(void) << userName;\n(std::cout) << userName;\n\nclass Calc\n{\nprivate:\n    int m_value;\n \npublic:\n    Calc() { m_value = 0; }\n \n    Calc& add(int value) { m_value += value; return *this; }\n    Calc& sub(int value) { m_value -= value; return *this; }\n    Calc& mult(int value) { m_value *= value; return *this; }\n \n    int getValue() { return m_value; }\n};\n\n#include <iostream>\nint main()\n{\n    Calc calc;\n    calc.add(5).sub(3).mult(4);\n \n    std::cout << calc.getValue() << '\\n';\n    return 0;\n}```\n\nCalc& return *this\n#### this\nabove\n```cpp\n#include<iostream>\nusing namespace std;\nclass set\n{\n    int m_i;\npublic:\n    set()\n    {\n        m_i = 0;\n    }\n    set add(int i)\n    {\n        m_i += i;\n        return *this;\n    }\n    int  getval()\n    {\n        return m_i;\n    }\n};\nint main()\n{\n    set s;\n    s.add(2).add(2);\n    cout<<s.getval();\n}```\n//*thisset\n```cpp\nclass set\n    5 {   \n    6     int m_e;\n    7     int m_i;\n    8  public:\n    9     set()\n   10     {\n   11         m_e=0;\n   12         m_i=0;\n   13     }\n   14     set add(int i){\n   15             m_i+=i;\n   16             return *this;\n   17     }\n   18     int getval() { \n   19             return m_i;\n   20     }\n   21 };\n\nint main()\n   33 {\n   34         set s;\n   35         set s2;\n>> 36         printf(\"%x\\n\",s.add(2));--0,*thissm_e\n>> 37         printf(\"%x\\n\",s);0\n   38         s2=s.add(2);--s2ssm_i=2+2\n   39         s2.add(2);--s2m_i=6\n>> 40         printf(\"%d\\n\",s2);// m_e=0\n   41         cout<<s2.getval()<<endl;-6\n   42         return 0;\n   43 }\n this->object  this->s\n            *this==s\n            *this==s\n&s\n```\nref:  \nhttp://zh.cppreference.com/w/cpp/language/this\nhttp://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/\n","slug":"cpp-this","published":1,"updated":"2018-06-09T02:38:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghp4001p00jx1ptjofww","content":"<h3 id=\"c-this\"><a href=\"#c-this\" class=\"headerlink\" title=\"c++this\"></a>c++this</h3><h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>this<br><br><a id=\"more\"></a><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Simple</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_id;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Simple(<span class=\"keyword\">int</span> id)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        setID(id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span> </span>&#123; m_id = id; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getID</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_id; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">simple</span><span class=\"params\">(<span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">    simple.setID(<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; simple.getID() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">simple.setID(<span class=\"number\">2</span>);---&gt;</span><br><span class=\"line\">setID(&amp;simple, <span class=\"number\">2</span>); <span class=\"comment\">// note that simple has been changed from an object prefix to a function argument!</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span> </span>&#123; m_id = id; &#125;---&gt;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(Simple* <span class=\"keyword\">const</span> <span class=\"keyword\">this</span>, <span class=\"keyword\">int</span> id)</span> </span>&#123; <span class=\"keyword\">this</span>-&gt;m_id = id; &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p> this </p>\n<ul>\n<li></li>\n<li>() cv () noexcept (C++11)(C++11 )</li>\n<li> (C++11 )</li>\n<li> this  this </li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">D</span> <span class=\"title\">d</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">D</span> &#123;</span></span><br><span class=\"line\">D(<span class=\"keyword\">int</span> a) : a(a), b(d.a) &#123;&#125; <span class=\"comment\">// a(a)will change to this-&gt;a(a),but b(d.a)--&gt;this-&gt;b(d.a),and will get random value,but b(a)  b(this-&gt;a) </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a, b;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">D d = D(<span class=\"number\">1</span>);   <span class=\"comment\">//  b(d.a)  this  d.b ,i try in g++.find it d.b==1</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>this   </p>\n<h4 id=\"this-\"><a href=\"#this-\" class=\"headerlink\" title=\"this \"></a>this </h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">A</span><span class=\"params\">(<span class=\"number\">1</span>)</span></span>; <span class=\"comment\">// *this = &amp;A inside the Simple constructor</span></span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">B</span><span class=\"params\">(<span class=\"number\">2</span>)</span></span>; <span class=\"comment\">// *this = &amp;B inside the Simple constructor</span></span><br><span class=\"line\">    A.setID(<span class=\"number\">3</span>); <span class=\"comment\">// *this = &amp;A inside member function setID</span></span><br><span class=\"line\">    B.setID(<span class=\"number\">4</span>); <span class=\"comment\">// *this = &amp;B inside member function setID</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">``</span><br><span class=\"line\">+ <span class=\"keyword\">this</span>  </span><br><span class=\"line\"><span class=\"keyword\">this</span><span class=\"built_in\">cout</span>&lt;&lt;xxx&lt;&lt;&lt;xxx&lt;&lt;&lt;xxxxx....</span><br><span class=\"line\"><span class=\"built_in\">cout</span>&lt;&lt;&lt;&lt;<span class=\"keyword\">this</span>  </span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Hello, \"</span> &lt;&lt; userName;</span><br><span class=\"line\">(<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Hello, \"</span>) &lt;&lt; userName;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">void</span>) &lt;&lt; userName;</span><br><span class=\"line\">(<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>) &lt;&lt; userName;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calc</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Calc() &#123; m_value = <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value += value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">sub</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value -= value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">mult</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value *= value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Calc calc;</span><br><span class=\"line\">    calc.add(<span class=\"number\">5</span>).sub(<span class=\"number\">3</span>).mult(<span class=\"number\">4</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; calc.getValue() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Calc&amp; return *this</p>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>above<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">set</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_i;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">set</span>()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">set</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        m_i += i;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span>  <span class=\"title\">getval</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> m_i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">set</span> s;</span><br><span class=\"line\">    s.add(<span class=\"number\">2</span>).add(<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"built_in\">cout</span>&lt;&lt;s.getval();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//*thisset<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">set</span></span></span><br><span class=\"line\"><span class=\"class\">    5 &#123;</span>   </span><br><span class=\"line\">    <span class=\"number\">6</span>     <span class=\"keyword\">int</span> m_e;</span><br><span class=\"line\">    <span class=\"number\">7</span>     <span class=\"keyword\">int</span> m_i;</span><br><span class=\"line\">    <span class=\"number\">8</span>  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"number\">9</span>     <span class=\"built_in\">set</span>()</span><br><span class=\"line\">   <span class=\"number\">10</span>     &#123;</span><br><span class=\"line\">   <span class=\"number\">11</span>         m_e=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">12</span>         m_i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">13</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">14</span>     <span class=\"function\"><span class=\"built_in\">set</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span>&#123;</span><br><span class=\"line\">   <span class=\"number\">15</span>             m_i+=i;</span><br><span class=\"line\">   <span class=\"number\">16</span>             <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">17</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">18</span>     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getval</span><span class=\"params\">()</span> </span>&#123; </span><br><span class=\"line\">   <span class=\"number\">19</span>             <span class=\"keyword\">return</span> m_i;</span><br><span class=\"line\">   <span class=\"number\">20</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">21</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   33 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">34</span>         <span class=\"built_in\">set</span> s;</span><br><span class=\"line\">   <span class=\"number\">35</span>         <span class=\"built_in\">set</span> s2;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">36</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,s.add(<span class=\"number\">2</span>));--<span class=\"number\">0</span>,*<span class=\"keyword\">this</span>sm_e</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">37</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,s);<span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"number\">38</span>         s2=s.add(<span class=\"number\">2</span>);--s2ssm_i=<span class=\"number\">2</span>+<span class=\"number\">2</span></span><br><span class=\"line\">   <span class=\"number\">39</span>         s2.add(<span class=\"number\">2</span>);--s2m_i=<span class=\"number\">6</span></span><br><span class=\"line\">&gt;&gt; <span class=\"number\">40</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,s2);<span class=\"comment\">// m_e=0</span></span><br><span class=\"line\">   <span class=\"number\">41</span>         <span class=\"built_in\">cout</span>&lt;&lt;s2.getval()&lt;&lt;<span class=\"built_in\">endl</span>;-<span class=\"number\">6</span></span><br><span class=\"line\">   <span class=\"number\">42</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">43</span> &#125;</span><br><span class=\"line\"> <span class=\"keyword\">this</span>-&gt;object  <span class=\"keyword\">this</span>-&gt;s</span><br><span class=\"line\">            *<span class=\"keyword\">this</span>==s</span><br><span class=\"line\">            *<span class=\"keyword\">this</span>==s</span><br><span class=\"line\">&amp;s</span><br></pre></td></tr></table></figure></p>\n<p>ref:<br><a href=\"http://zh.cppreference.com/w/cpp/language/this\" target=\"_blank\" rel=\"noopener\">http://zh.cppreference.com/w/cpp/language/this</a><br><a href=\"http://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/\" target=\"_blank\" rel=\"noopener\">http://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-this\"><a href=\"#c-this\" class=\"headerlink\" title=\"c++this\"></a>c++this</h3><h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>this<br><br>","more":"<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Simple</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_id;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Simple(<span class=\"keyword\">int</span> id)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        setID(id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span> </span>&#123; m_id = id; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getID</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_id; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">simple</span><span class=\"params\">(<span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">    simple.setID(<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; simple.getID() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">simple.setID(<span class=\"number\">2</span>);---&gt;</span><br><span class=\"line\">setID(&amp;simple, <span class=\"number\">2</span>); <span class=\"comment\">// note that simple has been changed from an object prefix to a function argument!</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span> </span>&#123; m_id = id; &#125;---&gt;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setID</span><span class=\"params\">(Simple* <span class=\"keyword\">const</span> <span class=\"keyword\">this</span>, <span class=\"keyword\">int</span> id)</span> </span>&#123; <span class=\"keyword\">this</span>-&gt;m_id = id; &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p> this </p>\n<ul>\n<li></li>\n<li>() cv () noexcept (C++11)(C++11 )</li>\n<li> (C++11 )</li>\n<li> this  this </li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">D</span> <span class=\"title\">d</span>;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">D</span> &#123;</span></span><br><span class=\"line\">D(<span class=\"keyword\">int</span> a) : a(a), b(d.a) &#123;&#125; <span class=\"comment\">// a(a)will change to this-&gt;a(a),but b(d.a)--&gt;this-&gt;b(d.a),and will get random value,but b(a)  b(this-&gt;a) </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a, b;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">D d = D(<span class=\"number\">1</span>);   <span class=\"comment\">//  b(d.a)  this  d.b ,i try in g++.find it d.b==1</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>this   </p>\n<h4 id=\"this-\"><a href=\"#this-\" class=\"headerlink\" title=\"this \"></a>this </h4><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">A</span><span class=\"params\">(<span class=\"number\">1</span>)</span></span>; <span class=\"comment\">// *this = &amp;A inside the Simple constructor</span></span><br><span class=\"line\">    <span class=\"function\">Simple <span class=\"title\">B</span><span class=\"params\">(<span class=\"number\">2</span>)</span></span>; <span class=\"comment\">// *this = &amp;B inside the Simple constructor</span></span><br><span class=\"line\">    A.setID(<span class=\"number\">3</span>); <span class=\"comment\">// *this = &amp;A inside member function setID</span></span><br><span class=\"line\">    B.setID(<span class=\"number\">4</span>); <span class=\"comment\">// *this = &amp;B inside member function setID</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">``</span><br><span class=\"line\">+ <span class=\"keyword\">this</span>  </span><br><span class=\"line\"><span class=\"keyword\">this</span><span class=\"built_in\">cout</span>&lt;&lt;xxx&lt;&lt;&lt;xxx&lt;&lt;&lt;xxxxx....</span><br><span class=\"line\"><span class=\"built_in\">cout</span>&lt;&lt;&lt;&lt;<span class=\"keyword\">this</span>  </span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Hello, \"</span> &lt;&lt; userName;</span><br><span class=\"line\">(<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Hello, \"</span>) &lt;&lt; userName;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">void</span>) &lt;&lt; userName;</span><br><span class=\"line\">(<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>) &lt;&lt; userName;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calc</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_value;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    Calc() &#123; m_value = <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value += value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">sub</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value -= value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\">Calc&amp; <span class=\"title\">mult</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123; m_value *= value; <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> m_value; &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Calc calc;</span><br><span class=\"line\">    calc.add(<span class=\"number\">5</span>).sub(<span class=\"number\">3</span>).mult(<span class=\"number\">4</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; calc.getValue() &lt;&lt; <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Calc&amp; return *this</p>\n<h4 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h4><p>above<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">set</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> m_i;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">set</span>()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        m_i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">set</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        m_i += i;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span>  <span class=\"title\">getval</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> m_i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">set</span> s;</span><br><span class=\"line\">    s.add(<span class=\"number\">2</span>).add(<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"built_in\">cout</span>&lt;&lt;s.getval();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//*thisset<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">set</span></span></span><br><span class=\"line\"><span class=\"class\">    5 &#123;</span>   </span><br><span class=\"line\">    <span class=\"number\">6</span>     <span class=\"keyword\">int</span> m_e;</span><br><span class=\"line\">    <span class=\"number\">7</span>     <span class=\"keyword\">int</span> m_i;</span><br><span class=\"line\">    <span class=\"number\">8</span>  <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"number\">9</span>     <span class=\"built_in\">set</span>()</span><br><span class=\"line\">   <span class=\"number\">10</span>     &#123;</span><br><span class=\"line\">   <span class=\"number\">11</span>         m_e=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">12</span>         m_i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">13</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">14</span>     <span class=\"function\"><span class=\"built_in\">set</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span></span>&#123;</span><br><span class=\"line\">   <span class=\"number\">15</span>             m_i+=i;</span><br><span class=\"line\">   <span class=\"number\">16</span>             <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">17</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">18</span>     <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getval</span><span class=\"params\">()</span> </span>&#123; </span><br><span class=\"line\">   <span class=\"number\">19</span>             <span class=\"keyword\">return</span> m_i;</span><br><span class=\"line\">   <span class=\"number\">20</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">21</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   33 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">34</span>         <span class=\"built_in\">set</span> s;</span><br><span class=\"line\">   <span class=\"number\">35</span>         <span class=\"built_in\">set</span> s2;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">36</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,s.add(<span class=\"number\">2</span>));--<span class=\"number\">0</span>,*<span class=\"keyword\">this</span>sm_e</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">37</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%x\\n\"</span>,s);<span class=\"number\">0</span></span><br><span class=\"line\">   <span class=\"number\">38</span>         s2=s.add(<span class=\"number\">2</span>);--s2ssm_i=<span class=\"number\">2</span>+<span class=\"number\">2</span></span><br><span class=\"line\">   <span class=\"number\">39</span>         s2.add(<span class=\"number\">2</span>);--s2m_i=<span class=\"number\">6</span></span><br><span class=\"line\">&gt;&gt; <span class=\"number\">40</span>         <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\\n\"</span>,s2);<span class=\"comment\">// m_e=0</span></span><br><span class=\"line\">   <span class=\"number\">41</span>         <span class=\"built_in\">cout</span>&lt;&lt;s2.getval()&lt;&lt;<span class=\"built_in\">endl</span>;-<span class=\"number\">6</span></span><br><span class=\"line\">   <span class=\"number\">42</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">43</span> &#125;</span><br><span class=\"line\"> <span class=\"keyword\">this</span>-&gt;object  <span class=\"keyword\">this</span>-&gt;s</span><br><span class=\"line\">            *<span class=\"keyword\">this</span>==s</span><br><span class=\"line\">            *<span class=\"keyword\">this</span>==s</span><br><span class=\"line\">&amp;s</span><br></pre></td></tr></table></figure></p>\n<p>ref:<br><a href=\"http://zh.cppreference.com/w/cpp/language/this\" target=\"_blank\" rel=\"noopener\">http://zh.cppreference.com/w/cpp/language/this</a><br><a href=\"http://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/\" target=\"_blank\" rel=\"noopener\">http://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/</a></p>"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2019-10-08T08:39:50.842Z","updated":"2018-05-19T15:06:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghp9001s00jxccauwz3d","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"cpp_runtime_semantis","date":"2018-07-29T09:54:07.000Z","_content":"### c++ \n#### \n+ cpuc.c++main,mainc++<!--more-->\n+ \n+ (c++).le.\n+ \n#### c++\n+ \n-->\n-->  \n  \n```cpp\nX xx;\nY yy;\nif(yy==xx.getvalue()) ``` \nyy==xxgetvalue  \nbool operator==(const Y&) constX getvalue()  \nyy==xx.getvalue()yy.operator==(xx.getvalue),  \nXoperator Y()const;//conversion  \n     yy.operator==(xx.getvalue.operator Y())  \n :  \n   Xtmp1=xx.getvalue;//  \n   Y tmp2=tmp1.operator Y()//  \n   int tmp3=yy.operator==(tmp2);//  \n     \n   (?thiscout\n\n\n#### \n+ :  \n,;\n//c++  \n```cpp\n{\n   Point point ;\n   //point.Point::Point() \n   ...\n   //point.Point::~Point() \n   }\n ```\n+ :  \n1\n```cpp\n{\n  Point point;\n  //constructor here\n  switch (int (point.x()) {\n  case -1:\n    //mumble;\n    //destructor here\n    return ;\n  case 0:\n    //mumble;\n    //destructor here\n    ....\n    default :\n      //mumble\n      //destructor here\n      return ;\n     }\n    destructor here\n    }\n  ```\n  \n\n+ returnswitch,ifgoto\n+ \n```cpp\n{\n   if(cache)\n      return 1;\n   Point xx;\n   if(xx.get()==1)\n   return 1;\n   }\n   \n   {\n     Point xx;\n     if(cache\n       return 1;\n       ...\n   }\n   ```\n   if(cachereturn \n   c++\n   \n+ --    \n\"main?\"\n  \n```\n  Matrix identity;\n   main ()\n   {\n      //identity \n      Matrix m1=identity;\n      ...\n      return 0;\n   }\n   ```\n   c++ identitymain\n   (data segment),cc++\n```\n  //,cfront_main\n  //sti_xxx---static initialization\n   int main()\n   {\n      _main();---(_sti_xxx(); _sti_xxx();,,,)\n      ...\n      ...\n      _exit()---(_std_xxx()....)\n      //\n      }\n      _sti_stdnmnm.o_sti _std\n```\n\n+ --\n?\n``` \n   const Matrix&\n   identify() {\n      static Matrix mat_identify;\n      //....\n      return mat_identify;\n   }\n  //1\\\n  //2\n```\n\n+ ?\n)\n```\nclass Point{\n   public:\n      int a;\n      Point (){a=3;}\n }\nPoint knot[10];\ncout<<knot[3].a;//3\n}\n```\n\nvec_new() vec_delete()\n\n```\nvoid *vec_new(void *array,//\n      size_t elem_size,int elem_count,//\n      void (*constructor)(*void)\n      void(*destructor)(*void)\n      \n      Point knots[10]\n      //delete\n      vec_new(&knnots,sizeof(Point),10,&Point::Point,0)\n```\n\n```\nPoint knots[10]={Point(),Point(1.8,2.1,0.2),-1.9};\nvec_new\n```\n\n\n+ \n\n#### newdelete\nnewdelete\n\n+ mallocfree,newdelete\nnew \n\n```cpp\n\nint *pi=new int(5);\n//1 new:_new \n//int *pi=_new(sizeof(int));\n//2 *pi=5;\n//\n(int  *pi ; if(pi=_new(...))*pi=5)\n//delete\n\nPoint3d *origin =new Point3d;\n\nPoint3d *origin;\n//\nif(origin =_new(sizeof(Point3d))\norigin=Pointed::Point3d(origin)//\n\ndelete origin;\n\nif (!origin !=0) {\n//\nPoint3d::~Point3d(origin);\n_delete(origin);\n}\n\nnew mallocdeletefree\nextern void operator new(size_t)\n{\n  if (size =0)\n    size=1;\n  void *last_alloc\n  while(!(last_alloc=malloc(size)))\n  {\n   if(_new_handle)\n   (*_new_handle)();\n   else \n      return 0;\n   }\n      return last_alloc\n}\n      \n ```\n\n\n+ newdelete\nnewnewint *parray=(*int)_new(5*sizeof(int));\n\n+ placement operator new-new\n\n#### c++---\n+ \nbug\n  + \n  \n ```cpp\n    int a,b,c;\n    ....\n    a=b+c;//a\n    //a,b,cb+c\n    c++b+c\n    a\n    \n    a;\n```\n + ? \n ```\n     1 #include<iostream>\n    2 class Point {\n    3         public:\n    4                 int a;\n    5                 Point(){std::cout<<\"constructor\"<<std::endl; a=4;}\n    6                 void printa() const { std::cout<<a<<32<<std::endl;}\n    7                 ~Point(){\n    8                         std::cout<<\"~destrucot\"<<std::endl;}\n>>  9                Point(const Point& p)\n   10                {\n   11                                 std::cout << \"Copy Constructor\" << std::en      dl;\n   12                }\n   13 \n>> 14               Point& operator=(const Point& p)\n   15               {\n   16                  std::cout << \"Assign\" << std::endl;\n   17                  return *this;\n   18               }\n   19 \n   20 };\n   21 void getv(const Point pp)\n   22 {\n   23     //= pp.a=6;\n   24         pp.printa();\n   25         std::cout<<pp.a<<std::endl;\n   26 }\n   27 \n   28 int main()\n   29 {\n   30         Point pplist;\n   31         std::cout<<pplist.a<<std::endl;\n   32         getv(pplist);//\n   33         return 0;\n   34 }\n```\n\n  \n  c++\n  + \n```\n \n    X xxx=bar();\n  a void bar(X_result)\n  b return copy constructor \n      void bar(X &__result){\n                X xx;\n                xx.X::X();\n                __result.X::XX(xx);\n                return ;\n        }\n    X xxx=bar()\n    //->bar(X &__result);\n        xxx=_result;\n```\n  + \n  +  a+b\n \n```cpp\n   #include <iostream>\nclass tmpclass\n{\npublic:\n    int a;\n    tmpclass(int i)\n    {\n        a = i;\n    }\n\n    tmpclass()\n    {\n        tmpclass(0);//a=0,show\n    }\n\n    void show()\n    {\n        std::cout << \"a = \" << a << std::endl;\n    }\n};\n\nint main(void)\n{\n    tmpclass c;\n    c.show();\n    return 0;\n}\n\n tmpclass c1 = tmpclass(6);//+\n tmpclass(6).show()//\n```\n\n+ \n\n+ )\n\n+ \n\n","source":"_posts/cpp-runtime-semantis.md","raw":"---\ntitle: cpp_runtime_semantis\ndate: 2018-07-29 17:54:07\ntags: cpp_class\ncategories: c&cpp\n---\n### c++ \n#### \n+ cpuc.c++main,mainc++<!--more-->\n+ \n+ (c++).le.\n+ \n#### c++\n+ \n-->\n-->  \n  \n```cpp\nX xx;\nY yy;\nif(yy==xx.getvalue()) ``` \nyy==xxgetvalue  \nbool operator==(const Y&) constX getvalue()  \nyy==xx.getvalue()yy.operator==(xx.getvalue),  \nXoperator Y()const;//conversion  \n     yy.operator==(xx.getvalue.operator Y())  \n :  \n   Xtmp1=xx.getvalue;//  \n   Y tmp2=tmp1.operator Y()//  \n   int tmp3=yy.operator==(tmp2);//  \n     \n   (?thiscout\n\n\n#### \n+ :  \n,;\n//c++  \n```cpp\n{\n   Point point ;\n   //point.Point::Point() \n   ...\n   //point.Point::~Point() \n   }\n ```\n+ :  \n1\n```cpp\n{\n  Point point;\n  //constructor here\n  switch (int (point.x()) {\n  case -1:\n    //mumble;\n    //destructor here\n    return ;\n  case 0:\n    //mumble;\n    //destructor here\n    ....\n    default :\n      //mumble\n      //destructor here\n      return ;\n     }\n    destructor here\n    }\n  ```\n  \n\n+ returnswitch,ifgoto\n+ \n```cpp\n{\n   if(cache)\n      return 1;\n   Point xx;\n   if(xx.get()==1)\n   return 1;\n   }\n   \n   {\n     Point xx;\n     if(cache\n       return 1;\n       ...\n   }\n   ```\n   if(cachereturn \n   c++\n   \n+ --    \n\"main?\"\n  \n```\n  Matrix identity;\n   main ()\n   {\n      //identity \n      Matrix m1=identity;\n      ...\n      return 0;\n   }\n   ```\n   c++ identitymain\n   (data segment),cc++\n```\n  //,cfront_main\n  //sti_xxx---static initialization\n   int main()\n   {\n      _main();---(_sti_xxx(); _sti_xxx();,,,)\n      ...\n      ...\n      _exit()---(_std_xxx()....)\n      //\n      }\n      _sti_stdnmnm.o_sti _std\n```\n\n+ --\n?\n``` \n   const Matrix&\n   identify() {\n      static Matrix mat_identify;\n      //....\n      return mat_identify;\n   }\n  //1\\\n  //2\n```\n\n+ ?\n)\n```\nclass Point{\n   public:\n      int a;\n      Point (){a=3;}\n }\nPoint knot[10];\ncout<<knot[3].a;//3\n}\n```\n\nvec_new() vec_delete()\n\n```\nvoid *vec_new(void *array,//\n      size_t elem_size,int elem_count,//\n      void (*constructor)(*void)\n      void(*destructor)(*void)\n      \n      Point knots[10]\n      //delete\n      vec_new(&knnots,sizeof(Point),10,&Point::Point,0)\n```\n\n```\nPoint knots[10]={Point(),Point(1.8,2.1,0.2),-1.9};\nvec_new\n```\n\n\n+ \n\n#### newdelete\nnewdelete\n\n+ mallocfree,newdelete\nnew \n\n```cpp\n\nint *pi=new int(5);\n//1 new:_new \n//int *pi=_new(sizeof(int));\n//2 *pi=5;\n//\n(int  *pi ; if(pi=_new(...))*pi=5)\n//delete\n\nPoint3d *origin =new Point3d;\n\nPoint3d *origin;\n//\nif(origin =_new(sizeof(Point3d))\norigin=Pointed::Point3d(origin)//\n\ndelete origin;\n\nif (!origin !=0) {\n//\nPoint3d::~Point3d(origin);\n_delete(origin);\n}\n\nnew mallocdeletefree\nextern void operator new(size_t)\n{\n  if (size =0)\n    size=1;\n  void *last_alloc\n  while(!(last_alloc=malloc(size)))\n  {\n   if(_new_handle)\n   (*_new_handle)();\n   else \n      return 0;\n   }\n      return last_alloc\n}\n      \n ```\n\n\n+ newdelete\nnewnewint *parray=(*int)_new(5*sizeof(int));\n\n+ placement operator new-new\n\n#### c++---\n+ \nbug\n  + \n  \n ```cpp\n    int a,b,c;\n    ....\n    a=b+c;//a\n    //a,b,cb+c\n    c++b+c\n    a\n    \n    a;\n```\n + ? \n ```\n     1 #include<iostream>\n    2 class Point {\n    3         public:\n    4                 int a;\n    5                 Point(){std::cout<<\"constructor\"<<std::endl; a=4;}\n    6                 void printa() const { std::cout<<a<<32<<std::endl;}\n    7                 ~Point(){\n    8                         std::cout<<\"~destrucot\"<<std::endl;}\n>>  9                Point(const Point& p)\n   10                {\n   11                                 std::cout << \"Copy Constructor\" << std::en      dl;\n   12                }\n   13 \n>> 14               Point& operator=(const Point& p)\n   15               {\n   16                  std::cout << \"Assign\" << std::endl;\n   17                  return *this;\n   18               }\n   19 \n   20 };\n   21 void getv(const Point pp)\n   22 {\n   23     //= pp.a=6;\n   24         pp.printa();\n   25         std::cout<<pp.a<<std::endl;\n   26 }\n   27 \n   28 int main()\n   29 {\n   30         Point pplist;\n   31         std::cout<<pplist.a<<std::endl;\n   32         getv(pplist);//\n   33         return 0;\n   34 }\n```\n\n  \n  c++\n  + \n```\n \n    X xxx=bar();\n  a void bar(X_result)\n  b return copy constructor \n      void bar(X &__result){\n                X xx;\n                xx.X::X();\n                __result.X::XX(xx);\n                return ;\n        }\n    X xxx=bar()\n    //->bar(X &__result);\n        xxx=_result;\n```\n  + \n  +  a+b\n \n```cpp\n   #include <iostream>\nclass tmpclass\n{\npublic:\n    int a;\n    tmpclass(int i)\n    {\n        a = i;\n    }\n\n    tmpclass()\n    {\n        tmpclass(0);//a=0,show\n    }\n\n    void show()\n    {\n        std::cout << \"a = \" << a << std::endl;\n    }\n};\n\nint main(void)\n{\n    tmpclass c;\n    c.show();\n    return 0;\n}\n\n tmpclass c1 = tmpclass(6);//+\n tmpclass(6).show()//\n```\n\n+ \n\n+ )\n\n+ \n\n","slug":"cpp-runtime-semantis","published":1,"updated":"2020-03-21T06:24:20.147Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpe001v00jxpd751tnk","content":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++ \"></a>c++ </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>cpuc.c++main,mainc++<a id=\"more\"></a></li>\n<li></li>\n<li>(c++).le.</li>\n<li><h4 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h4></li>\n<li><p><br>&gt;<br>&gt;<br>  </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X xx;</span><br><span class=\"line\">Y yy;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(yy==xx.getvalue()) ``` </span><br><span class=\"line\">yy==xxgetvalue  </span><br><span class=\"line\"><span class=\"keyword\">bool</span> <span class=\"keyword\">operator</span>==(<span class=\"keyword\">const</span> Y&amp;) <span class=\"keyword\">const</span>X getvalue()  </span><br><span class=\"line\">yy==xx.getvalue()yy.<span class=\"keyword\">operator</span>==(xx.getvalue),  </span><br><span class=\"line\">X<span class=\"keyword\">operator</span> Y()<span class=\"keyword\">const</span>;<span class=\"comment\">//conversion  </span></span><br><span class=\"line\">     yy.<span class=\"keyword\">operator</span>==(xx.getvalue.<span class=\"keyword\">operator</span> Y())  </span><br><span class=\"line\"> :  </span><br><span class=\"line\">   Xtmp1=xx.getvalue;<span class=\"comment\">//  </span></span><br><span class=\"line\">   Y tmp2=tmp1.<span class=\"keyword\">operator</span> Y()<span class=\"comment\">//  </span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> tmp3=yy.<span class=\"keyword\">operator</span>==(tmp2);<span class=\"comment\">//  </span></span><br><span class=\"line\">     </span><br><span class=\"line\">   (?<span class=\"keyword\">this</span><span class=\"built_in\">cout</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#### </span><br><span class=\"line\">+ :  </span><br><span class=\"line\">,;</span><br><span class=\"line\"><span class=\"comment\">//c++  </span></span><br><span class=\"line\">```cpp</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   Point point ;</span><br><span class=\"line\">   <span class=\"comment\">//point.Point::Point() </span></span><br><span class=\"line\">   ...</span><br><span class=\"line\">   <span class=\"comment\">//point.Point::~Point() </span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:<br>1</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  Point point;</span><br><span class=\"line\">  <span class=\"comment\">//constructor here</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (<span class=\"keyword\">int</span> (point.x()) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"number\">-1</span>:</span><br><span class=\"line\">    <span class=\"comment\">//mumble;</span></span><br><span class=\"line\">    <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">    <span class=\"comment\">//mumble;</span></span><br><span class=\"line\">    <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"keyword\">default</span> :</span><br><span class=\"line\">      <span class=\"comment\">//mumble</span></span><br><span class=\"line\">      <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    destructor here</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>returnswitch,ifgoto</li>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(cache)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">   Point xx;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(xx.get()==<span class=\"number\">1</span>)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">     Point xx;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(cache</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">       ...</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p> if(cachereturn <br> c++</p>\n</li>\n<li><p><br>main?<br>  </p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Matrix</span> identity;</span><br><span class=\"line\"> main ()</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//identity </span></span><br><span class=\"line\">    <span class=\"keyword\">Matrix</span> m1=identity;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p> c++ identitymain<br> (data segment),cc++</p>\n<figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//,cfront_main</span></span><br><span class=\"line\"><span class=\"comment\">//sti_xxx---static initialization</span></span><br><span class=\"line\"> int main()</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">    <span class=\"variable\">_main</span>();---(<span class=\"variable\">_sti_xxx</span>(); <span class=\"variable\">_sti_xxx</span>();,,,)</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"variable\">_exit</span>()---(<span class=\"variable\">_std_xxx</span>()....)</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable\">_sti</span><span class=\"variable\">_std</span>nmnm.o<span class=\"variable\">_sti</span> <span class=\"variable\">_std</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p><br>?</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> Matrix&amp;</span><br><span class=\"line\"> identify() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> Matrix mat_identify;</span><br><span class=\"line\">    <span class=\"comment\">//....</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mat_identify;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"><span class=\"comment\">//1\\</span></span><br><span class=\"line\"><span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p></p>\n<ul>\n<li>?<br>)<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">      <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">      Point ()&#123;a=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">Point knot[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"built_in\">cout</span>&lt;&lt;knot[<span class=\"number\">3</span>].a;<span class=\"comment\">//3</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br>vec_new() vec_delete()</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> *vec_new(<span class=\"keyword\">void</span> *<span class=\"keyword\">array</span>,<span class=\"comment\">//</span></span><br><span class=\"line\">      size_t elem_size,<span class=\"keyword\">int</span> elem_count,<span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"keyword\">void</span> (*constructor)(*<span class=\"keyword\">void</span>)</span><br><span class=\"line\">      <span class=\"keyword\">void</span>(*destructor)(*<span class=\"keyword\">void</span>)</span><br><span class=\"line\">      </span><br><span class=\"line\">      Point knots[<span class=\"number\">10</span>]</span><br><span class=\"line\">      <span class=\"comment\">//delete</span></span><br><span class=\"line\">      vec_new(&amp;knnots,<span class=\"keyword\">sizeof</span>(Point),<span class=\"number\">10</span>,&amp;Point::Point,<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point knots[<span class=\"number\">10</span>]=&#123;Point(),Point(<span class=\"number\">1.8</span>,<span class=\"number\">2.1</span>,<span class=\"number\">0.2</span>),<span class=\"number\">-1.9</span>&#125;;</span><br><span class=\"line\">vec_new</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li></li>\n</ul>\n<h4 id=\"newdelete\"><a href=\"#newdelete\" class=\"headerlink\" title=\"newdelete\"></a>newdelete</h4><p>newdelete</p>\n<ul>\n<li>mallocfree,newdelete<br>new </li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> *pi=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"comment\">//1 new:_new </span></span><br><span class=\"line\"><span class=\"comment\">//int *pi=_new(sizeof(int));</span></span><br><span class=\"line\"><span class=\"comment\">//2 *pi=5;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">(<span class=\"keyword\">int</span>  *pi ; <span class=\"keyword\">if</span>(pi=_new(...))*pi=<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"comment\">//delete</span></span><br><span class=\"line\"></span><br><span class=\"line\">Point3d *origin =<span class=\"keyword\">new</span> Point3d;</span><br><span class=\"line\"></span><br><span class=\"line\">Point3d *origin;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(origin =_new(<span class=\"keyword\">sizeof</span>(Point3d))</span><br><span class=\"line\">origin=Pointed::Point3d(origin)<span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">delete</span> origin;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!origin !=<span class=\"number\">0</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">Point3d::~Point3d(origin);</span><br><span class=\"line\">_delete(origin);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">malloc</span><span class=\"keyword\">delete</span><span class=\"built_in\">free</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span> <span class=\"keyword\">new</span>(<span class=\"keyword\">size_t</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (size =<span class=\"number\">0</span>)</span><br><span class=\"line\">    size=<span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">void</span> *last_alloc</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(!(last_alloc=<span class=\"built_in\">malloc</span>(size)))</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(_new_handle)</span><br><span class=\"line\">   (*_new_handle)();</span><br><span class=\"line\">   <span class=\"keyword\">else</span> </span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> last_alloc</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>newdelete<br>newnewint <em>parray=(</em>int)_new(5*sizeof(int));<br></li>\n<li>placement operator new-new</li>\n</ul>\n<h4 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h4><ul>\n<li><p><br>bug</p>\n<ul>\n<li><p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a,b,c;</span><br><span class=\"line\">....</span><br><span class=\"line\">a=b+c;<span class=\"comment\">//a</span></span><br><span class=\"line\"><span class=\"comment\">//a,b,cb+c</span></span><br><span class=\"line\">c++b+c</span><br><span class=\"line\">a</span><br><span class=\"line\"></span><br><span class=\"line\">a;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>? </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">     <span class=\"number\">1</span> <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\">    <span class=\"number\">2</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> &#123;</span></span><br><span class=\"line\">    <span class=\"number\">3</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"number\">4</span>                 <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"number\">5</span>                 Point()&#123;<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"constructor\"</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>; a=<span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">    <span class=\"number\">6</span>                 <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printa</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"number\">32</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">    <span class=\"number\">7</span>                 ~Point()&#123;</span><br><span class=\"line\">    <span class=\"number\">8</span>                         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"~destrucot\"</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">&gt;&gt;  <span class=\"number\">9</span>                Point(<span class=\"keyword\">const</span> Point&amp; p)</span><br><span class=\"line\">   <span class=\"number\">10</span>                &#123;</span><br><span class=\"line\">   <span class=\"number\">11</span>                                 <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Copy Constructor\"</span> &lt;&lt; <span class=\"built_in\">std</span>::en      dl;</span><br><span class=\"line\">   <span class=\"number\">12</span>                &#125;</span><br><span class=\"line\">   <span class=\"number\">13</span> </span><br><span class=\"line\">&gt;&gt; <span class=\"number\">14</span>               Point&amp; <span class=\"keyword\">operator</span>=(<span class=\"keyword\">const</span> Point&amp; p)</span><br><span class=\"line\">   <span class=\"number\">15</span>               &#123;</span><br><span class=\"line\">   <span class=\"number\">16</span>                  <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Assign\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">17</span>                  <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">18</span>               &#125;</span><br><span class=\"line\">   <span class=\"number\">19</span> </span><br><span class=\"line\">   <span class=\"number\">20</span> &#125;;</span><br><span class=\"line\">   <span class=\"number\">21</span> <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getv</span><span class=\"params\">(<span class=\"keyword\">const</span> Point pp)</span></span></span><br><span class=\"line\"><span class=\"function\">   22 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">23</span>     <span class=\"comment\">//= pp.a=6;</span></span><br><span class=\"line\">   <span class=\"number\">24</span>         pp.printa();</span><br><span class=\"line\">   <span class=\"number\">25</span>         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;pp.a&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">26</span> &#125;</span><br><span class=\"line\">   <span class=\"number\">27</span> </span><br><span class=\"line\">   <span class=\"number\">28</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   29 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">30</span>         Point pplist;</span><br><span class=\"line\">   <span class=\"number\">31</span>         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;pplist.a&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">32</span>         getv(pplist);<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"number\">33</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">34</span> &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br>c++</p>\n<ul>\n<li><p></p>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">   X xxx=bar();</span><br><span class=\"line\"> a void bar(X_result)</span><br><span class=\"line\"> b return <span class=\"keyword\">copy</span> <span class=\"function\"><span class=\"keyword\">constructor</span> </span></span><br><span class=\"line\"><span class=\"function\">     <span class=\"title\">void</span> <span class=\"title\">bar</span><span class=\"params\">(X &amp;__result)</span><span class=\"comment\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               X xx;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               xx.X::X();</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               __result.X::XX(xx);</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               return ;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">       &#125;</span></span></span><br><span class=\"line\"><span class=\"function\">   <span class=\"title\">X</span> <span class=\"title\">xxx</span>=<span class=\"title\">bar</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   //-&gt;<span class=\"title\">bar</span><span class=\"params\">(X &amp;__result)</span>;</span></span><br><span class=\"line\">       xxx=_result;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n<li> a+b</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">tmpclass</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    tmpclass(<span class=\"keyword\">int</span> i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a = i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpclass()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmpclass(<span class=\"number\">0</span>);<span class=\"comment\">//a=0,show</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"a = \"</span> &lt;&lt; a &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    tmpclass c;</span><br><span class=\"line\">    c.show();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> tmpclass c1 = tmpclass(<span class=\"number\">6</span>);<span class=\"comment\">//+</span></span><br><span class=\"line\"> tmpclass(<span class=\"number\">6</span>).show()<span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><br></li>\n<li>)<br></li>\n<li><br></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++ \"></a>c++ </h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>cpuc.c++main,mainc++","more":"</li>\n<li></li>\n<li>(c++).le.</li>\n<li><h4 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h4></li>\n<li><p><br>&gt;<br>&gt;<br>  </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X xx;</span><br><span class=\"line\">Y yy;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(yy==xx.getvalue()) ``` </span><br><span class=\"line\">yy==xxgetvalue  </span><br><span class=\"line\"><span class=\"keyword\">bool</span> <span class=\"keyword\">operator</span>==(<span class=\"keyword\">const</span> Y&amp;) <span class=\"keyword\">const</span>X getvalue()  </span><br><span class=\"line\">yy==xx.getvalue()yy.<span class=\"keyword\">operator</span>==(xx.getvalue),  </span><br><span class=\"line\">X<span class=\"keyword\">operator</span> Y()<span class=\"keyword\">const</span>;<span class=\"comment\">//conversion  </span></span><br><span class=\"line\">     yy.<span class=\"keyword\">operator</span>==(xx.getvalue.<span class=\"keyword\">operator</span> Y())  </span><br><span class=\"line\"> :  </span><br><span class=\"line\">   Xtmp1=xx.getvalue;<span class=\"comment\">//  </span></span><br><span class=\"line\">   Y tmp2=tmp1.<span class=\"keyword\">operator</span> Y()<span class=\"comment\">//  </span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> tmp3=yy.<span class=\"keyword\">operator</span>==(tmp2);<span class=\"comment\">//  </span></span><br><span class=\"line\">     </span><br><span class=\"line\">   (?<span class=\"keyword\">this</span><span class=\"built_in\">cout</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#### </span><br><span class=\"line\">+ :  </span><br><span class=\"line\">,;</span><br><span class=\"line\"><span class=\"comment\">//c++  </span></span><br><span class=\"line\">```cpp</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   Point point ;</span><br><span class=\"line\">   <span class=\"comment\">//point.Point::Point() </span></span><br><span class=\"line\">   ...</span><br><span class=\"line\">   <span class=\"comment\">//point.Point::~Point() </span></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>:<br>1</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  Point point;</span><br><span class=\"line\">  <span class=\"comment\">//constructor here</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (<span class=\"keyword\">int</span> (point.x()) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"number\">-1</span>:</span><br><span class=\"line\">    <span class=\"comment\">//mumble;</span></span><br><span class=\"line\">    <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">    <span class=\"comment\">//mumble;</span></span><br><span class=\"line\">    <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">    ....</span><br><span class=\"line\">    <span class=\"keyword\">default</span> :</span><br><span class=\"line\">      <span class=\"comment\">//mumble</span></span><br><span class=\"line\">      <span class=\"comment\">//destructor here</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    destructor here</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>returnswitch,ifgoto</li>\n<li><p></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(cache)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">   Point xx;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(xx.get()==<span class=\"number\">1</span>)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">     Point xx;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(cache</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">       ...</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p> if(cachereturn <br> c++</p>\n</li>\n<li><p><br>main?<br>  </p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">Matrix</span> identity;</span><br><span class=\"line\"> main ()</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//identity </span></span><br><span class=\"line\">    <span class=\"keyword\">Matrix</span> m1=identity;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p> c++ identitymain<br> (data segment),cc++</p>\n<figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//,cfront_main</span></span><br><span class=\"line\"><span class=\"comment\">//sti_xxx---static initialization</span></span><br><span class=\"line\"> int main()</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">    <span class=\"variable\">_main</span>();---(<span class=\"variable\">_sti_xxx</span>(); <span class=\"variable\">_sti_xxx</span>();,,,)</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"variable\">_exit</span>()---(<span class=\"variable\">_std_xxx</span>()....)</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable\">_sti</span><span class=\"variable\">_std</span>nmnm.o<span class=\"variable\">_sti</span> <span class=\"variable\">_std</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p><br>?</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> Matrix&amp;</span><br><span class=\"line\"> identify() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> Matrix mat_identify;</span><br><span class=\"line\">    <span class=\"comment\">//....</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mat_identify;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"><span class=\"comment\">//1\\</span></span><br><span class=\"line\"><span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p></p>\n<ul>\n<li>?<br>)<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span>&#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span>:</span><br><span class=\"line\">      <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">      Point ()&#123;a=<span class=\"number\">3</span>;&#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">Point knot[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"built_in\">cout</span>&lt;&lt;knot[<span class=\"number\">3</span>].a;<span class=\"comment\">//3</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br>vec_new() vec_delete()</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> *vec_new(<span class=\"keyword\">void</span> *<span class=\"keyword\">array</span>,<span class=\"comment\">//</span></span><br><span class=\"line\">      size_t elem_size,<span class=\"keyword\">int</span> elem_count,<span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"keyword\">void</span> (*constructor)(*<span class=\"keyword\">void</span>)</span><br><span class=\"line\">      <span class=\"keyword\">void</span>(*destructor)(*<span class=\"keyword\">void</span>)</span><br><span class=\"line\">      </span><br><span class=\"line\">      Point knots[<span class=\"number\">10</span>]</span><br><span class=\"line\">      <span class=\"comment\">//delete</span></span><br><span class=\"line\">      vec_new(&amp;knnots,<span class=\"keyword\">sizeof</span>(Point),<span class=\"number\">10</span>,&amp;Point::Point,<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Point knots[<span class=\"number\">10</span>]=&#123;Point(),Point(<span class=\"number\">1.8</span>,<span class=\"number\">2.1</span>,<span class=\"number\">0.2</span>),<span class=\"number\">-1.9</span>&#125;;</span><br><span class=\"line\">vec_new</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li></li>\n</ul>\n<h4 id=\"newdelete\"><a href=\"#newdelete\" class=\"headerlink\" title=\"newdelete\"></a>newdelete</h4><p>newdelete</p>\n<ul>\n<li>mallocfree,newdelete<br>new </li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> *pi=<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>(<span class=\"number\">5</span>);</span><br><span class=\"line\"><span class=\"comment\">//1 new:_new </span></span><br><span class=\"line\"><span class=\"comment\">//int *pi=_new(sizeof(int));</span></span><br><span class=\"line\"><span class=\"comment\">//2 *pi=5;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">(<span class=\"keyword\">int</span>  *pi ; <span class=\"keyword\">if</span>(pi=_new(...))*pi=<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"comment\">//delete</span></span><br><span class=\"line\"></span><br><span class=\"line\">Point3d *origin =<span class=\"keyword\">new</span> Point3d;</span><br><span class=\"line\"></span><br><span class=\"line\">Point3d *origin;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(origin =_new(<span class=\"keyword\">sizeof</span>(Point3d))</span><br><span class=\"line\">origin=Pointed::Point3d(origin)<span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">delete</span> origin;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!origin !=<span class=\"number\">0</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">Point3d::~Point3d(origin);</span><br><span class=\"line\">_delete(origin);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">malloc</span><span class=\"keyword\">delete</span><span class=\"built_in\">free</span></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span> <span class=\"keyword\">new</span>(<span class=\"keyword\">size_t</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (size =<span class=\"number\">0</span>)</span><br><span class=\"line\">    size=<span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">void</span> *last_alloc</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(!(last_alloc=<span class=\"built_in\">malloc</span>(size)))</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span>(_new_handle)</span><br><span class=\"line\">   (*_new_handle)();</span><br><span class=\"line\">   <span class=\"keyword\">else</span> </span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> last_alloc</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>newdelete<br>newnewint <em>parray=(</em>int)_new(5*sizeof(int));<br></li>\n<li>placement operator new-new</li>\n</ul>\n<h4 id=\"c-\"><a href=\"#c-\" class=\"headerlink\" title=\"c++\"></a>c++</h4><ul>\n<li><p><br>bug</p>\n<ul>\n<li><p><br></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a,b,c;</span><br><span class=\"line\">....</span><br><span class=\"line\">a=b+c;<span class=\"comment\">//a</span></span><br><span class=\"line\"><span class=\"comment\">//a,b,cb+c</span></span><br><span class=\"line\">c++b+c</span><br><span class=\"line\">a</span><br><span class=\"line\"></span><br><span class=\"line\">a;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>? </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">     <span class=\"number\">1</span> <span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\">    <span class=\"number\">2</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> &#123;</span></span><br><span class=\"line\">    <span class=\"number\">3</span>         <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"number\">4</span>                 <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"number\">5</span>                 Point()&#123;<span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"constructor\"</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>; a=<span class=\"number\">4</span>;&#125;</span><br><span class=\"line\">    <span class=\"number\">6</span>                 <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">printa</span><span class=\"params\">()</span> <span class=\"keyword\">const</span> </span>&#123; <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;a&lt;&lt;<span class=\"number\">32</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">    <span class=\"number\">7</span>                 ~Point()&#123;</span><br><span class=\"line\">    <span class=\"number\">8</span>                         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"~destrucot\"</span>&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;&#125;</span><br><span class=\"line\">&gt;&gt;  <span class=\"number\">9</span>                Point(<span class=\"keyword\">const</span> Point&amp; p)</span><br><span class=\"line\">   <span class=\"number\">10</span>                &#123;</span><br><span class=\"line\">   <span class=\"number\">11</span>                                 <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Copy Constructor\"</span> &lt;&lt; <span class=\"built_in\">std</span>::en      dl;</span><br><span class=\"line\">   <span class=\"number\">12</span>                &#125;</span><br><span class=\"line\">   <span class=\"number\">13</span> </span><br><span class=\"line\">&gt;&gt; <span class=\"number\">14</span>               Point&amp; <span class=\"keyword\">operator</span>=(<span class=\"keyword\">const</span> Point&amp; p)</span><br><span class=\"line\">   <span class=\"number\">15</span>               &#123;</span><br><span class=\"line\">   <span class=\"number\">16</span>                  <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"Assign\"</span> &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">17</span>                  <span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">18</span>               &#125;</span><br><span class=\"line\">   <span class=\"number\">19</span> </span><br><span class=\"line\">   <span class=\"number\">20</span> &#125;;</span><br><span class=\"line\">   <span class=\"number\">21</span> <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getv</span><span class=\"params\">(<span class=\"keyword\">const</span> Point pp)</span></span></span><br><span class=\"line\"><span class=\"function\">   22 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">23</span>     <span class=\"comment\">//= pp.a=6;</span></span><br><span class=\"line\">   <span class=\"number\">24</span>         pp.printa();</span><br><span class=\"line\">   <span class=\"number\">25</span>         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;pp.a&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">26</span> &#125;</span><br><span class=\"line\">   <span class=\"number\">27</span> </span><br><span class=\"line\">   <span class=\"number\">28</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   29 </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">30</span>         Point pplist;</span><br><span class=\"line\">   <span class=\"number\">31</span>         <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span>&lt;&lt;pplist.a&lt;&lt;<span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">   <span class=\"number\">32</span>         getv(pplist);<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"number\">33</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"number\">34</span> &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br>c++</p>\n<ul>\n<li><p></p>\n<figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">   X xxx=bar();</span><br><span class=\"line\"> a void bar(X_result)</span><br><span class=\"line\"> b return <span class=\"keyword\">copy</span> <span class=\"function\"><span class=\"keyword\">constructor</span> </span></span><br><span class=\"line\"><span class=\"function\">     <span class=\"title\">void</span> <span class=\"title\">bar</span><span class=\"params\">(X &amp;__result)</span><span class=\"comment\">&#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               X xx;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               xx.X::X();</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               __result.X::XX(xx);</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">               return ;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">       &#125;</span></span></span><br><span class=\"line\"><span class=\"function\">   <span class=\"title\">X</span> <span class=\"title\">xxx</span>=<span class=\"title\">bar</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   //-&gt;<span class=\"title\">bar</span><span class=\"params\">(X &amp;__result)</span>;</span></span><br><span class=\"line\">       xxx=_result;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n<li> a+b</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">tmpclass</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    tmpclass(<span class=\"keyword\">int</span> i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        a = i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    tmpclass()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmpclass(<span class=\"number\">0</span>);<span class=\"comment\">//a=0,show</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">std</span>::<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">\"a = \"</span> &lt;&lt; a &lt;&lt; <span class=\"built_in\">std</span>::<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    tmpclass c;</span><br><span class=\"line\">    c.show();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> tmpclass c1 = tmpclass(<span class=\"number\">6</span>);<span class=\"comment\">//+</span></span><br><span class=\"line\"> tmpclass(<span class=\"number\">6</span>).show()<span class=\"comment\">//</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><br></li>\n<li>)<br></li>\n<li><br></li>\n</ul>"},{"title":"ksance test article","date":"2018-05-19T16:10:13.000Z","_content":" this is a test article by ksance \n","source":"_posts/ksance-test-article.md","raw":"---\ntitle: ksance test article\ndate: 2018-05-20 00:10:13\ntags: \n---\n this is a test article by ksance \n","slug":"ksance-test-article","published":1,"updated":"2018-05-19T16:57:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpi001z00jxcqrgnjpx","content":"<p> this is a test article by ksance </p>\n","site":{"data":{}},"excerpt":"","more":"<p> this is a test article by ksance </p>\n"},{"title":"leetcode_linklist1","date":"2018-06-03T13:37:57.000Z","_content":"### leetcode\n\n#### \n+ leetcode\n+ 2333\n+   \n+   <!--more-->\nYou are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.  \nYou may assume the two numbers do not contain any leading zero, except the number 0 itself.\nExample\nInput: (2 -> 4 -> 3) + (5 -> 6 -> 4)\nOutput: 7 -> 0 -> 8\nExplanation: 342 + 465 = 807.\n\n```c\n#include<stdio.h>\n#include<stdlib.h>```\n\n```c\nstruct ListNode {\n\t\tstruct ListNode *next;\n\t\tint num;\n} *linklist,listnode;\n\n//\nint changtolist(struct ListNode *list1,char num1[],struct ListNode *list2,char  num2[])\n{//\n   int i=0;\n   int lennum1=0;\n   while(num1[lennum1]!='\\0'){lennum1++;}\n   int lennum2=0;\n   while(num2[lennum2]!='\\0'){lennum2++;}\n//\n   list1->num=num1[lennum1-1]-48;\n   for(i=lennum1-2;i>=0;i--)\n   {\n\t\tlist1->next=(struct ListNode*)malloc(sizeof(struct ListNode));\n\t\tlist1=list1->next;\n        list1->num=num1[i]-48;\n   }\n   list1->next=NULL;\n   list2->num=num2[lennum2-1]-48;\n   for(i=lennum2-2;i>=0;i--)\n   {\n\t\tlist2->next=(struct ListNode*)malloc(sizeof(struct ListNode));\n\t\tlist2=list2->next;\n\t\tlist2->num=num2[i]-48;\n   }\n   list2->next=NULL;\n   return 0;\n}\n//\nint Add_two_num(struct ListNode *list1,struct ListNode *list2)\n{\n\t int adding = 0;\n     if(list1 == NULL || list2 == NULL)\n\t\t\t return -1;\n/*\t while(list1!=NULL && list2!=NULL)\n\t {\n\t\t\t list1->num = (list1->num+list2->num+adding)%10;\n             adding = (list1->num + list2->num+adding)/10;\n\t\t\t list1 = list1->next;\n\t\t\t list2 = list2->next;\n\t}\n\t if(list1==NULL && list2!=NULL)\n\t*/\t\t \n\t  struct ListNode *xx=list1;\n      int n=0;\n\t  int sum=0;\n\t  sum = list1->num+list2->num+adding;\n\t  list1->num = sum%10;\n      adding = sum/10;\n\tdo {//\n\t\t\t list1 = list1->next;\n\t\t\t list2 = list2->next;\n\t\t\t sum= list1->num+list2->num+adding;\n\t\t\t list1->num = sum %10;\n\t\t\t// printf(\"%d \",list1->num);\n             adding = sum/10;\n    }while(list1->next!=NULL && list2->next!=NULL);\n\tif(list1->next ==NULL&& list2->next==NULL &&adding!=0)//12\n\t{\n\t\t\tlist1->next = (struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t\tlist1->next->num= adding;\n\t\t\tprintf(\"show:%d\\n\",adding);\n\t}\n\tif(list1->next==NULL && list2->next !=NULL)\n\t{\n\n\t\t\tlist1->next = list2->next;\n\t\t\twhile(list2->next!=NULL&&adding !=0)\n\t\t\t{\n              list2=list2->next;\n\t\t\t  sum= list2->num+adding;\n              list2->num=sum%10;\n\t\t\t  adding = sum/10;\n\t\t\t}\n\t\t\tif(adding>0)\n\t\t\t{\n\t\t\t\t\tlist2->next=(struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t            list2->next->num=adding;\n\t\t\t}\n\t}  \n    ...//1 2\n    .....\n  \treturn 0;\n\n}\n//1,2newlistnode \n//\nint main ()\n{\n  struct ListNode *list1,*list2;\n  list1 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list2 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list1->num=3;\n  list2->num=5;\n  struct ListNode *tmplist1=list1;\n  struct ListNode *tmplist2=list2;\n  int i;\n  for(i=1; i<9;i++)\n  {\n    \n\tlist1->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n\tlist2->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n\tlist1 = list1->next;\n\tlist2 = list2->next;\n    list1->num = 2;\n\tlist2->num= 8;\n  }\n  list2->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list2->next->num=9; \n  struct ListNode *result=tmplist1;\n  struct ListNode *freelist1 = tmplist1;\n  struct ListNode *freelist2 = tmplist2;\n  for (i=0;i<9;i++,tmplist1=tmplist1->next)\n\t\t  printf(\"%d \",tmplist1->num);\n  printf(\"\\n\");\n\n  for (i=0;i<10;i++,tmplist2=tmplist2->next)\n\t\t  printf(\"%d \",tmplist2->num);\n  printf(\"\\n\");\n  Add_two_num(freelist1,freelist2);\n  for(i=0;result!=NULL ;i++,result=result->next)\n       printf(\"%d \",result->num); \n  free(freelist1);\n  free(freelist2);\n\n\n  printf(\"\\n\");\n//-------------------------------\n  struct ListNode *list11,*list22;\n  list11 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list22 = (struct ListNode*)malloc(sizeof(struct ListNode));\n\n\n  char num1[100],num2[100];\n  gets(num1);\n  gets(num2);\n  changtolist(list11,num1,list22,num2);\n  struct ListNode *result11 = list11;\n  Add_two_num(list11,list22);\n  for(i=0;result11!=NULL ;i++,result11=result11->next)\n       printf(\"%d \",result11->num); \n  free(list11);\n  free(list22);\n  return 0;\n}```\n//:\"\n//5263565656554+5656537677834546\n//charint/char\n-------\n--c\n```c\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     ListNode *next;\n *     ListNode(int x) : val(x), next(NULL) {}\n * };\n */\n\n class Solution {\n public:\n\t ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) {\n\t\t ListNode *sum, *l4;\n\t\t sum = new ListNode(0); //\n\t\t l4 = sum;\n\t\t int sum_single, en = 0;//en\n\t\t while (l1 != NULL&&l2 != NULL)\n\t\t {\n\t\t\t \n\t\t\t\t sum->next = new ListNode(0);//sum=NULL\n\t\t\t\t sum = sum->next;\n\t\t\t// signal = 0;\n\t\t\t sum_single = l1->val + l2->val + en;\n\t\t\t if (sum_single<10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t else if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t l1 = l1->next;\n\t\t\t l2 = l2->next;\n\t\t\n\t\t }\n\t\t while (l1 != NULL&&l2 == NULL)\n\t\t { \n\t\t\t sum->next = new ListNode(0);\n\t\t\t sum = sum->next;\n\t\t\t sum_single = en + l1->val;\n\t\t\t if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t else\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t l1 = l1->next;\n\t\t\t\n\n\t\t }\n\t\t while (l2 != NULL&&l1 == NULL)\n\t\t { \n\t\t\t sum->next = new ListNode(0);\n\t\t\t sum = sum->next;\n\t\t\t sum_single = en + l2->val;\n\t\t\t if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t else\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t l2 = l2->next;\n\t\t }\n\t\t if (l1 == NULL&&l2 == NULL&&en == 1)\n\t\t\t sum->next = new ListNode(en);\n\t\t//if(l1==NULL&&l2==NULL&&en==0)sum = NULL;\n\t/*\t while (l3)\n\t\t {\n\t\t\t cout << l3->val;\n\t\t\t l3 = l3->next;\n\t\t }*/\n\t\t return l4->next;\n\t }\n };\n/*\nint main()\n{\n    Solution sou;\n    ListNode *l1,*l2,*l3;\n    l1=new ListNode(3);\n    l1->next=new ListNode(7);\n    l1->next->next=new ListNode(5);\n    \n     l2=new ListNode(7);\n    l2->next=new ListNode(7);\n    l2->next->next=new ListNode(5);\n    l3=sou.addTwoNumbers(l1,l2);\n    cout<<l3->val<<l3->next->val<<l3->next->next->val;\n    return 0;\n}\n\n\n\n*/```","source":"_posts/leetcode-linklist1.md","raw":"---\ntitle: leetcode_linklist1\ndate: 2018-06-03 21:37:57\ntags: leetcode_linklist\ncategories: leetcode\n---\n### leetcode\n\n#### \n+ leetcode\n+ 2333\n+   \n+   <!--more-->\nYou are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.  \nYou may assume the two numbers do not contain any leading zero, except the number 0 itself.\nExample\nInput: (2 -> 4 -> 3) + (5 -> 6 -> 4)\nOutput: 7 -> 0 -> 8\nExplanation: 342 + 465 = 807.\n\n```c\n#include<stdio.h>\n#include<stdlib.h>```\n\n```c\nstruct ListNode {\n\t\tstruct ListNode *next;\n\t\tint num;\n} *linklist,listnode;\n\n//\nint changtolist(struct ListNode *list1,char num1[],struct ListNode *list2,char  num2[])\n{//\n   int i=0;\n   int lennum1=0;\n   while(num1[lennum1]!='\\0'){lennum1++;}\n   int lennum2=0;\n   while(num2[lennum2]!='\\0'){lennum2++;}\n//\n   list1->num=num1[lennum1-1]-48;\n   for(i=lennum1-2;i>=0;i--)\n   {\n\t\tlist1->next=(struct ListNode*)malloc(sizeof(struct ListNode));\n\t\tlist1=list1->next;\n        list1->num=num1[i]-48;\n   }\n   list1->next=NULL;\n   list2->num=num2[lennum2-1]-48;\n   for(i=lennum2-2;i>=0;i--)\n   {\n\t\tlist2->next=(struct ListNode*)malloc(sizeof(struct ListNode));\n\t\tlist2=list2->next;\n\t\tlist2->num=num2[i]-48;\n   }\n   list2->next=NULL;\n   return 0;\n}\n//\nint Add_two_num(struct ListNode *list1,struct ListNode *list2)\n{\n\t int adding = 0;\n     if(list1 == NULL || list2 == NULL)\n\t\t\t return -1;\n/*\t while(list1!=NULL && list2!=NULL)\n\t {\n\t\t\t list1->num = (list1->num+list2->num+adding)%10;\n             adding = (list1->num + list2->num+adding)/10;\n\t\t\t list1 = list1->next;\n\t\t\t list2 = list2->next;\n\t}\n\t if(list1==NULL && list2!=NULL)\n\t*/\t\t \n\t  struct ListNode *xx=list1;\n      int n=0;\n\t  int sum=0;\n\t  sum = list1->num+list2->num+adding;\n\t  list1->num = sum%10;\n      adding = sum/10;\n\tdo {//\n\t\t\t list1 = list1->next;\n\t\t\t list2 = list2->next;\n\t\t\t sum= list1->num+list2->num+adding;\n\t\t\t list1->num = sum %10;\n\t\t\t// printf(\"%d \",list1->num);\n             adding = sum/10;\n    }while(list1->next!=NULL && list2->next!=NULL);\n\tif(list1->next ==NULL&& list2->next==NULL &&adding!=0)//12\n\t{\n\t\t\tlist1->next = (struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t\tlist1->next->num= adding;\n\t\t\tprintf(\"show:%d\\n\",adding);\n\t}\n\tif(list1->next==NULL && list2->next !=NULL)\n\t{\n\n\t\t\tlist1->next = list2->next;\n\t\t\twhile(list2->next!=NULL&&adding !=0)\n\t\t\t{\n              list2=list2->next;\n\t\t\t  sum= list2->num+adding;\n              list2->num=sum%10;\n\t\t\t  adding = sum/10;\n\t\t\t}\n\t\t\tif(adding>0)\n\t\t\t{\n\t\t\t\t\tlist2->next=(struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t            list2->next->num=adding;\n\t\t\t}\n\t}  \n    ...//1 2\n    .....\n  \treturn 0;\n\n}\n//1,2newlistnode \n//\nint main ()\n{\n  struct ListNode *list1,*list2;\n  list1 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list2 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list1->num=3;\n  list2->num=5;\n  struct ListNode *tmplist1=list1;\n  struct ListNode *tmplist2=list2;\n  int i;\n  for(i=1; i<9;i++)\n  {\n    \n\tlist1->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n\tlist2->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n\tlist1 = list1->next;\n\tlist2 = list2->next;\n    list1->num = 2;\n\tlist2->num= 8;\n  }\n  list2->next = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list2->next->num=9; \n  struct ListNode *result=tmplist1;\n  struct ListNode *freelist1 = tmplist1;\n  struct ListNode *freelist2 = tmplist2;\n  for (i=0;i<9;i++,tmplist1=tmplist1->next)\n\t\t  printf(\"%d \",tmplist1->num);\n  printf(\"\\n\");\n\n  for (i=0;i<10;i++,tmplist2=tmplist2->next)\n\t\t  printf(\"%d \",tmplist2->num);\n  printf(\"\\n\");\n  Add_two_num(freelist1,freelist2);\n  for(i=0;result!=NULL ;i++,result=result->next)\n       printf(\"%d \",result->num); \n  free(freelist1);\n  free(freelist2);\n\n\n  printf(\"\\n\");\n//-------------------------------\n  struct ListNode *list11,*list22;\n  list11 = (struct ListNode*)malloc(sizeof(struct ListNode));\n  list22 = (struct ListNode*)malloc(sizeof(struct ListNode));\n\n\n  char num1[100],num2[100];\n  gets(num1);\n  gets(num2);\n  changtolist(list11,num1,list22,num2);\n  struct ListNode *result11 = list11;\n  Add_two_num(list11,list22);\n  for(i=0;result11!=NULL ;i++,result11=result11->next)\n       printf(\"%d \",result11->num); \n  free(list11);\n  free(list22);\n  return 0;\n}```\n//:\"\n//5263565656554+5656537677834546\n//charint/char\n-------\n--c\n```c\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     ListNode *next;\n *     ListNode(int x) : val(x), next(NULL) {}\n * };\n */\n\n class Solution {\n public:\n\t ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) {\n\t\t ListNode *sum, *l4;\n\t\t sum = new ListNode(0); //\n\t\t l4 = sum;\n\t\t int sum_single, en = 0;//en\n\t\t while (l1 != NULL&&l2 != NULL)\n\t\t {\n\t\t\t \n\t\t\t\t sum->next = new ListNode(0);//sum=NULL\n\t\t\t\t sum = sum->next;\n\t\t\t// signal = 0;\n\t\t\t sum_single = l1->val + l2->val + en;\n\t\t\t if (sum_single<10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t else if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t l1 = l1->next;\n\t\t\t l2 = l2->next;\n\t\t\n\t\t }\n\t\t while (l1 != NULL&&l2 == NULL)\n\t\t { \n\t\t\t sum->next = new ListNode(0);\n\t\t\t sum = sum->next;\n\t\t\t sum_single = en + l1->val;\n\t\t\t if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t else\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t l1 = l1->next;\n\t\t\t\n\n\t\t }\n\t\t while (l2 != NULL&&l1 == NULL)\n\t\t { \n\t\t\t sum->next = new ListNode(0);\n\t\t\t sum = sum->next;\n\t\t\t sum_single = en + l2->val;\n\t\t\t if (sum_single >= 10)\n\t\t\t {\n\t\t\t\t sum->val = sum_single - 10;\n\t\t\t\t en = 1;\n\t\t\t }\n\t\t\t else\n\t\t\t {\n\t\t\t\t sum->val = sum_single;\n\t\t\t\t en = 0;\n\t\t\t }\n\t\t\t l2 = l2->next;\n\t\t }\n\t\t if (l1 == NULL&&l2 == NULL&&en == 1)\n\t\t\t sum->next = new ListNode(en);\n\t\t//if(l1==NULL&&l2==NULL&&en==0)sum = NULL;\n\t/*\t while (l3)\n\t\t {\n\t\t\t cout << l3->val;\n\t\t\t l3 = l3->next;\n\t\t }*/\n\t\t return l4->next;\n\t }\n };\n/*\nint main()\n{\n    Solution sou;\n    ListNode *l1,*l2,*l3;\n    l1=new ListNode(3);\n    l1->next=new ListNode(7);\n    l1->next->next=new ListNode(5);\n    \n     l2=new ListNode(7);\n    l2->next=new ListNode(7);\n    l2->next->next=new ListNode(5);\n    l3=sou.addTwoNumbers(l1,l2);\n    cout<<l3->val<<l3->next->val<<l3->next->next->val;\n    return 0;\n}\n\n\n\n*/```","slug":"leetcode-linklist1","published":1,"updated":"2018-06-03T13:40:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpl002300jxs5qtt0kb","content":"<h3 id=\"leetcode\"><a href=\"#leetcode\" class=\"headerlink\" title=\"leetcode\"></a>leetcode</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>leetcode</li>\n<li>2333</li>\n<li>  </li>\n<li>  <a id=\"more\"></a><br>You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.<br>You may assume the two numbers do not contain any leading zero, except the number 0 itself.<br>Example<br>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8<br>Explanation: 342 + 465 = 807.<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> num;</span><br><span class=\"line\">&#125; *linklist,listnode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">changtolist</span><span class=\"params\">(struct ListNode *list1,<span class=\"keyword\">char</span> num1[],struct ListNode *list2,<span class=\"keyword\">char</span>  num2[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> lennum1=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(num1[lennum1]!=<span class=\"string\">'\\0'</span>)&#123;lennum1++;&#125;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> lennum2=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(num2[lennum2]!=<span class=\"string\">'\\0'</span>)&#123;lennum2++;&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">   list1-&gt;num=num1[lennum1<span class=\"number\">-1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=lennum1<span class=\"number\">-2</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\tlist1-&gt;next=(struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\tlist1=list1-&gt;next;</span><br><span class=\"line\">        list1-&gt;num=num1[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list1-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   list2-&gt;num=num2[lennum2<span class=\"number\">-1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=lennum2<span class=\"number\">-2</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\tlist2-&gt;next=(struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\tlist2=list2-&gt;next;</span><br><span class=\"line\">\t\tlist2-&gt;num=num2[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list2-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">Add_two_num</span><span class=\"params\">(struct ListNode *list1,struct ListNode *list2)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t <span class=\"keyword\">int</span> adding = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(list1 == <span class=\"literal\">NULL</span> || list2 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"comment\">/*\t while(list1!=NULL &amp;&amp; list2!=NULL)</span></span><br><span class=\"line\"><span class=\"comment\">\t &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list1-&gt;num = (list1-&gt;num+list2-&gt;num+adding)%10;</span></span><br><span class=\"line\"><span class=\"comment\">             adding = (list1-&gt;num + list2-&gt;num+adding)/10;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list1 = list1-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list2 = list2-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t if(list1==NULL &amp;&amp; list2!=NULL)</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span>\t\t </span><br><span class=\"line\">\t  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">xx</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> n=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t  sum = list1-&gt;num+list2-&gt;num+adding;</span><br><span class=\"line\">\t  list1-&gt;num = sum%<span class=\"number\">10</span>;</span><br><span class=\"line\">      adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">do</span> &#123;<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t list1 = list1-&gt;next;</span><br><span class=\"line\">\t\t\t list2 = list2-&gt;next;</span><br><span class=\"line\">\t\t\t sum= list1-&gt;num+list2-&gt;num+adding;</span><br><span class=\"line\">\t\t\t list1-&gt;num = sum %<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// printf(\"%d \",list1-&gt;num);</span></span><br><span class=\"line\">             adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">while</span>(list1-&gt;next!=<span class=\"literal\">NULL</span> &amp;&amp; list2-&gt;next!=<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(list1-&gt;next ==<span class=\"literal\">NULL</span>&amp;&amp; list2-&gt;next==<span class=\"literal\">NULL</span> &amp;&amp;adding!=<span class=\"number\">0</span>)<span class=\"comment\">//12</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t\tlist1-&gt;next = (struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t\tlist1-&gt;next-&gt;num= adding;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"show:%d\\n\"</span>,adding);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(list1-&gt;next==<span class=\"literal\">NULL</span> &amp;&amp; list2-&gt;next !=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tlist1-&gt;next = list2-&gt;next;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(list2-&gt;next!=<span class=\"literal\">NULL</span>&amp;&amp;adding !=<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">              list2=list2-&gt;next;</span><br><span class=\"line\">\t\t\t  sum= list2-&gt;num+adding;</span><br><span class=\"line\">              list2-&gt;num=sum%<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t  adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(adding&gt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tlist2-&gt;next=(struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t            list2-&gt;next-&gt;num=adding;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t&#125;  </span><br><span class=\"line\">    ...<span class=\"comment\">//1 2</span></span><br><span class=\"line\">    .....</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//1,2newlistnode </span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list1</span>,*<span class=\"title\">list2</span>;</span></span><br><span class=\"line\">  list1 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list2 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list1-&gt;num=<span class=\"number\">3</span>;</span><br><span class=\"line\">  list2-&gt;num=<span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmplist1</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmplist2</span>=<span class=\"title\">list2</span>;</span></span><br><span class=\"line\">  <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>; i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">\tlist1-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\tlist2-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\tlist1 = list1-&gt;next;</span><br><span class=\"line\">\tlist2 = list2-&gt;next;</span><br><span class=\"line\">    list1-&gt;num = <span class=\"number\">2</span>;</span><br><span class=\"line\">\tlist2-&gt;num= <span class=\"number\">8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  list2-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list2-&gt;next-&gt;num=<span class=\"number\">9</span>; </span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">result</span>=<span class=\"title\">tmplist1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist1</span> = <span class=\"title\">tmplist1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist2</span> = <span class=\"title\">tmplist2</span>;</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">9</span>;i++,tmplist1=tmplist1-&gt;next)</span><br><span class=\"line\">\t\t  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,tmplist1-&gt;num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++,tmplist2=tmplist2-&gt;next)</span><br><span class=\"line\">\t\t  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,tmplist2-&gt;num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">  Add_two_num(freelist1,freelist2);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result!=<span class=\"literal\">NULL</span> ;i++,result=result-&gt;next)</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result-&gt;num); </span><br><span class=\"line\">  <span class=\"built_in\">free</span>(freelist1);</span><br><span class=\"line\">  <span class=\"built_in\">free</span>(freelist2);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//-------------------------------</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list11</span>,*<span class=\"title\">list22</span>;</span></span><br><span class=\"line\">  list11 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list22 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">char</span> num1[<span class=\"number\">100</span>],num2[<span class=\"number\">100</span>];</span><br><span class=\"line\">  gets(num1);</span><br><span class=\"line\">  gets(num2);</span><br><span class=\"line\">  changtolist(list11,num1,list22,num2);</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">result11</span> = <span class=\"title\">list11</span>;</span></span><br><span class=\"line\">  Add_two_num(list11,list22);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result11!=<span class=\"literal\">NULL</span> ;i++,result11=result11-&gt;next)</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result11-&gt;num); </span><br><span class=\"line\">  <span class=\"built_in\">free</span>(list11);</span><br><span class=\"line\">  <span class=\"built_in\">free</span>(list22);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//:<br>//5263565656554+5656537677834546<br>//charint/char<br>-<br>c<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t <span class=\"function\">ListNode* <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class=\"line\">\t\t ListNode *sum, *l4;</span><br><span class=\"line\">\t\t sum = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>); <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t l4 = sum;</span><br><span class=\"line\">\t\t <span class=\"keyword\">int</span> sum_single, en = <span class=\"number\">0</span>;<span class=\"comment\">//en</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l1 != <span class=\"literal\">NULL</span>&amp;&amp;l2 != <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123;</span><br><span class=\"line\">\t\t\t </span><br><span class=\"line\">\t\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);<span class=\"comment\">//sum=NULL</span></span><br><span class=\"line\">\t\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// signal = 0;</span></span><br><span class=\"line\">\t\t\t sum_single = l1-&gt;val + l2-&gt;val + en;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single&lt;<span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l1 = l1-&gt;next;</span><br><span class=\"line\">\t\t\t l2 = l2-&gt;next;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l1 != <span class=\"literal\">NULL</span>&amp;&amp;l2 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123; </span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t sum_single = en + l1-&gt;val;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l1 = l1-&gt;next;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l2 != <span class=\"literal\">NULL</span>&amp;&amp;l1 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123; </span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t sum_single = en + l2-&gt;val;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l2 = l2-&gt;next;</span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">if</span> (l1 == <span class=\"literal\">NULL</span>&amp;&amp;l2 == <span class=\"literal\">NULL</span>&amp;&amp;en == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(en);</span><br><span class=\"line\">\t\t<span class=\"comment\">//if(l1==NULL&amp;&amp;l2==NULL&amp;&amp;en==0)sum = NULL;</span></span><br><span class=\"line\">\t<span class=\"comment\">/*\t while (l3)</span></span><br><span class=\"line\"><span class=\"comment\">\t\t &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t cout &lt;&lt; l3-&gt;val;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t l3 = l3-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t &#125;*/</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> l4-&gt;next;</span><br><span class=\"line\">\t &#125;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">int main()</span></span><br><span class=\"line\"><span class=\"comment\">&#123;</span></span><br><span class=\"line\"><span class=\"comment\">    Solution sou;</span></span><br><span class=\"line\"><span class=\"comment\">    ListNode *l1,*l2,*l3;</span></span><br><span class=\"line\"><span class=\"comment\">    l1=new ListNode(3);</span></span><br><span class=\"line\"><span class=\"comment\">    l1-&gt;next=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l1-&gt;next-&gt;next=new ListNode(5);</span></span><br><span class=\"line\"><span class=\"comment\">    </span></span><br><span class=\"line\"><span class=\"comment\">     l2=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l2-&gt;next=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l2-&gt;next-&gt;next=new ListNode(5);</span></span><br><span class=\"line\"><span class=\"comment\">    l3=sou.addTwoNumbers(l1,l2);</span></span><br><span class=\"line\"><span class=\"comment\">    cout&lt;&lt;l3-&gt;val&lt;&lt;l3-&gt;next-&gt;val&lt;&lt;l3-&gt;next-&gt;next-&gt;val;</span></span><br><span class=\"line\"><span class=\"comment\">    return 0;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"leetcode\"><a href=\"#leetcode\" class=\"headerlink\" title=\"leetcode\"></a>leetcode</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>leetcode</li>\n<li>2333</li>\n<li>  </li>\n<li>","more":"<br>You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.<br>You may assume the two numbers do not contain any leading zero, except the number 0 itself.<br>Example<br>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8<br>Explanation: 342 + 465 = 807.<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> &#123;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> num;</span><br><span class=\"line\">&#125; *linklist,listnode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">changtolist</span><span class=\"params\">(struct ListNode *list1,<span class=\"keyword\">char</span> num1[],struct ListNode *list2,<span class=\"keyword\">char</span>  num2[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;<span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> lennum1=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(num1[lennum1]!=<span class=\"string\">'\\0'</span>)&#123;lennum1++;&#125;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> lennum2=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(num2[lennum2]!=<span class=\"string\">'\\0'</span>)&#123;lennum2++;&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\">   list1-&gt;num=num1[lennum1<span class=\"number\">-1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=lennum1<span class=\"number\">-2</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\tlist1-&gt;next=(struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\tlist1=list1-&gt;next;</span><br><span class=\"line\">        list1-&gt;num=num1[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list1-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   list2-&gt;num=num2[lennum2<span class=\"number\">-1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=lennum2<span class=\"number\">-2</span>;i&gt;=<span class=\"number\">0</span>;i--)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\tlist2-&gt;next=(struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\tlist2=list2-&gt;next;</span><br><span class=\"line\">\t\tlist2-&gt;num=num2[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list2-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">Add_two_num</span><span class=\"params\">(struct ListNode *list1,struct ListNode *list2)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t <span class=\"keyword\">int</span> adding = <span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(list1 == <span class=\"literal\">NULL</span> || list2 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"comment\">/*\t while(list1!=NULL &amp;&amp; list2!=NULL)</span></span><br><span class=\"line\"><span class=\"comment\">\t &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list1-&gt;num = (list1-&gt;num+list2-&gt;num+adding)%10;</span></span><br><span class=\"line\"><span class=\"comment\">             adding = (list1-&gt;num + list2-&gt;num+adding)/10;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list1 = list1-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t list2 = list2-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t if(list1==NULL &amp;&amp; list2!=NULL)</span></span><br><span class=\"line\"><span class=\"comment\">\t*/</span>\t\t </span><br><span class=\"line\">\t  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">xx</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> n=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t  sum = list1-&gt;num+list2-&gt;num+adding;</span><br><span class=\"line\">\t  list1-&gt;num = sum%<span class=\"number\">10</span>;</span><br><span class=\"line\">      adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">do</span> &#123;<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t list1 = list1-&gt;next;</span><br><span class=\"line\">\t\t\t list2 = list2-&gt;next;</span><br><span class=\"line\">\t\t\t sum= list1-&gt;num+list2-&gt;num+adding;</span><br><span class=\"line\">\t\t\t list1-&gt;num = sum %<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// printf(\"%d \",list1-&gt;num);</span></span><br><span class=\"line\">             adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">while</span>(list1-&gt;next!=<span class=\"literal\">NULL</span> &amp;&amp; list2-&gt;next!=<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(list1-&gt;next ==<span class=\"literal\">NULL</span>&amp;&amp; list2-&gt;next==<span class=\"literal\">NULL</span> &amp;&amp;adding!=<span class=\"number\">0</span>)<span class=\"comment\">//12</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t\tlist1-&gt;next = (struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t\tlist1-&gt;next-&gt;num= adding;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"show:%d\\n\"</span>,adding);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(list1-&gt;next==<span class=\"literal\">NULL</span> &amp;&amp; list2-&gt;next !=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tlist1-&gt;next = list2-&gt;next;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(list2-&gt;next!=<span class=\"literal\">NULL</span>&amp;&amp;adding !=<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">              list2=list2-&gt;next;</span><br><span class=\"line\">\t\t\t  sum= list2-&gt;num+adding;</span><br><span class=\"line\">              list2-&gt;num=sum%<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t  adding = sum/<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(adding&gt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tlist2-&gt;next=(struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t            list2-&gt;next-&gt;num=adding;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t&#125;  </span><br><span class=\"line\">    ...<span class=\"comment\">//1 2</span></span><br><span class=\"line\">    .....</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//1,2newlistnode </span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list1</span>,*<span class=\"title\">list2</span>;</span></span><br><span class=\"line\">  list1 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list2 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list1-&gt;num=<span class=\"number\">3</span>;</span><br><span class=\"line\">  list2-&gt;num=<span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmplist1</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmplist2</span>=<span class=\"title\">list2</span>;</span></span><br><span class=\"line\">  <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>; i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">\tlist1-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\tlist2-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\tlist1 = list1-&gt;next;</span><br><span class=\"line\">\tlist2 = list2-&gt;next;</span><br><span class=\"line\">    list1-&gt;num = <span class=\"number\">2</span>;</span><br><span class=\"line\">\tlist2-&gt;num= <span class=\"number\">8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  list2-&gt;next = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list2-&gt;next-&gt;num=<span class=\"number\">9</span>; </span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">result</span>=<span class=\"title\">tmplist1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist1</span> = <span class=\"title\">tmplist1</span>;</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist2</span> = <span class=\"title\">tmplist2</span>;</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">9</span>;i++,tmplist1=tmplist1-&gt;next)</span><br><span class=\"line\">\t\t  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,tmplist1-&gt;num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++,tmplist2=tmplist2-&gt;next)</span><br><span class=\"line\">\t\t  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,tmplist2-&gt;num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">  Add_two_num(freelist1,freelist2);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result!=<span class=\"literal\">NULL</span> ;i++,result=result-&gt;next)</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result-&gt;num); </span><br><span class=\"line\">  <span class=\"built_in\">free</span>(freelist1);</span><br><span class=\"line\">  <span class=\"built_in\">free</span>(freelist2);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//-------------------------------</span></span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list11</span>,*<span class=\"title\">list22</span>;</span></span><br><span class=\"line\">  list11 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">  list22 = (struct ListNode*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">char</span> num1[<span class=\"number\">100</span>],num2[<span class=\"number\">100</span>];</span><br><span class=\"line\">  gets(num1);</span><br><span class=\"line\">  gets(num2);</span><br><span class=\"line\">  changtolist(list11,num1,list22,num2);</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">result11</span> = <span class=\"title\">list11</span>;</span></span><br><span class=\"line\">  Add_two_num(list11,list22);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result11!=<span class=\"literal\">NULL</span> ;i++,result11=result11-&gt;next)</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result11-&gt;num); </span><br><span class=\"line\">  <span class=\"built_in\">free</span>(list11);</span><br><span class=\"line\">  <span class=\"built_in\">free</span>(list22);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//:<br>//5263565656554+5656537677834546<br>//charint/char<br>-<br>c<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t <span class=\"function\">ListNode* <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class=\"line\">\t\t ListNode *sum, *l4;</span><br><span class=\"line\">\t\t sum = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>); <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t l4 = sum;</span><br><span class=\"line\">\t\t <span class=\"keyword\">int</span> sum_single, en = <span class=\"number\">0</span>;<span class=\"comment\">//en</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l1 != <span class=\"literal\">NULL</span>&amp;&amp;l2 != <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123;</span><br><span class=\"line\">\t\t\t </span><br><span class=\"line\">\t\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);<span class=\"comment\">//sum=NULL</span></span><br><span class=\"line\">\t\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// signal = 0;</span></span><br><span class=\"line\">\t\t\t sum_single = l1-&gt;val + l2-&gt;val + en;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single&lt;<span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l1 = l1-&gt;next;</span><br><span class=\"line\">\t\t\t l2 = l2-&gt;next;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l1 != <span class=\"literal\">NULL</span>&amp;&amp;l2 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123; </span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t sum_single = en + l1-&gt;val;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l1 = l1-&gt;next;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">while</span> (l2 != <span class=\"literal\">NULL</span>&amp;&amp;l1 == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t &#123; </span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t sum = sum-&gt;next;</span><br><span class=\"line\">\t\t\t sum_single = en + l2-&gt;val;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span> (sum_single &gt;= <span class=\"number\">10</span>)</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single - <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t sum-&gt;val = sum_single;</span><br><span class=\"line\">\t\t\t\t en = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t l2 = l2-&gt;next;</span><br><span class=\"line\">\t\t &#125;</span><br><span class=\"line\">\t\t <span class=\"keyword\">if</span> (l1 == <span class=\"literal\">NULL</span>&amp;&amp;l2 == <span class=\"literal\">NULL</span>&amp;&amp;en == <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t\t sum-&gt;next = <span class=\"keyword\">new</span> ListNode(en);</span><br><span class=\"line\">\t\t<span class=\"comment\">//if(l1==NULL&amp;&amp;l2==NULL&amp;&amp;en==0)sum = NULL;</span></span><br><span class=\"line\">\t<span class=\"comment\">/*\t while (l3)</span></span><br><span class=\"line\"><span class=\"comment\">\t\t &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t cout &lt;&lt; l3-&gt;val;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t l3 = l3-&gt;next;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t &#125;*/</span></span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> l4-&gt;next;</span><br><span class=\"line\">\t &#125;</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">int main()</span></span><br><span class=\"line\"><span class=\"comment\">&#123;</span></span><br><span class=\"line\"><span class=\"comment\">    Solution sou;</span></span><br><span class=\"line\"><span class=\"comment\">    ListNode *l1,*l2,*l3;</span></span><br><span class=\"line\"><span class=\"comment\">    l1=new ListNode(3);</span></span><br><span class=\"line\"><span class=\"comment\">    l1-&gt;next=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l1-&gt;next-&gt;next=new ListNode(5);</span></span><br><span class=\"line\"><span class=\"comment\">    </span></span><br><span class=\"line\"><span class=\"comment\">     l2=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l2-&gt;next=new ListNode(7);</span></span><br><span class=\"line\"><span class=\"comment\">    l2-&gt;next-&gt;next=new ListNode(5);</span></span><br><span class=\"line\"><span class=\"comment\">    l3=sou.addTwoNumbers(l1,l2);</span></span><br><span class=\"line\"><span class=\"comment\">    cout&lt;&lt;l3-&gt;val&lt;&lt;l3-&gt;next-&gt;val&lt;&lt;l3-&gt;next-&gt;next-&gt;val;</span></span><br><span class=\"line\"><span class=\"comment\">    return 0;</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>"},{"title":"leetcode_linklist2","date":"2018-06-03T13:40:41.000Z","_content":"### leetcode2\n#### partition list\n: <!--more-->\n```c\n/*\nGiven a linked list and a value x, partition it such that all nodes less than x come before nodes greater than or equal to x.\n\nYou should preserve the original relative order of the nodes in each of the two partitions.\n\nExample:\n\nInput: head = 1->4->3->2->5->2, x = 3\nOutput: 1->2->2->4->3->5*/\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\nstruct ListNode* partition(struct ListNode* head, int x) {\n    /**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n\n    if(head==NULL)\n\t\t\t\treturn NULL;\n    if(head->next ==NULL)\n              return head;\n        struct ListNode *list=(struct ListNode*)malloc(sizeof(struct  ListNode));\n        list->next=head;\n\t\tstruct ListNode*head1=list;\n\t\tstruct ListNode*cur = head1->next;\n\t\tstruct ListNode*tail=head1;\n\t\tint lenoflist1=0;\n\t\twhile(tail->next!=NULL)\n\t\t{\n\t\t\t\ttail=tail->next;\n\t\t\t\tlenoflist1++;\n\t\t}\n       struct ListNode* tmp=tail;\n\t\twhile(lenoflist1>=1)\n\t\t{ \n            lenoflist1--;\n            if(tail==cur)\n                continue;\n          if(cur->val>=x)\n\t\t  {\n\t\t\t\t  head1->next=cur->next;\n\t\t\t\t  cur->next=NULL;\n\t\t          tail->next=cur;\n\t\t\t\t  tail=tail->next;//not consid at first\n\t\t\t\t  cur=head1->next;\n\n\t\t  } \n\t\t  else{\n\t\t\t\t  head1=head1->next;\n\t\t\t\t  cur=cur->next;\n\t\t  }\n\t\t \n\t\t //  printf(\"%d : \",cur->num);\n\t\t}\n    //if(head1->next==NULL)head1->next=tmp;\n         head=list->next;\n   list->next=NULL;\n    free(list);\n\t\tprintf(\"\\n\");\n    return head;\n    \n}\n```\n//accepted\n//,accept\n\n\n#### \n+   \n\n```c \n/* reverse a linklist from m to n\n * 1->2->4->5->null and m,n(ex:2,4)\n * return 1->5->4->2->null\n */\n\n#include<stdlib.h>\n#include<stdio.h>\ntypedef struct LinkList\n{\n\tint num;\n\tstruct LinkList  *next;\n}Linklist;\nint reverselinklist(Linklist *list1,int m,int n,Linklist **result)\n{\n\t\tif(list1==NULL)\n\t\t\t\treturn -1;\n\t\tint i=0;\n\t\tLinklist *head1,*head2,*cur,*tmp,*pre;\n\t\tcur=list1;\n\t\thead1=cur;\n\t\tpre=head1;\n\t\tif(m==1)\n\t\t{\n\t\t\t\tcur=cur->next;\n\t\t\t\tfor(i=m;i<n;i++)\n\t\t\t\t{\n\t\t\t\t  pre->next=cur->next;\n\t\t\t\t  cur->next=head1;\n\t\t\t\t  head1=cur;\n\t\t\t\t  cur=pre->next;\n\t\t\t\t}\n\t\t\t    *result=head1;\n\t\t\t\treturn 1;\n\t\t}\n\n\t\tfor(i=1;i<m;i++)//node1->node2->node3---1->2->3--ex:m=2,list1->1\n\t\t{\n\t\t  head1=cur;\n          cur=cur->next;\n\t\t}\n\t\thead2=cur;\n\t\tcur=cur->next;\n\t\tpre=head2;\n\t\tfor(i=m;i<n;i++)\n\t\t{\n\t\t   pre->next=cur->next;\n\t\t   cur->next=head1->next;\n\t\t   head1->next=cur;\n\t\t   cur=pre->next;\n\t\t}\n      return 3;\n}\n\nint main ()\n{\n\t\tLinklist *list1=(Linklist*)malloc(sizeof(Linklist));\n\t\tLinklist *result11=list1;\n\t\tint i;\n\t\tlist1->num=4;\n\t\tprintf(\"4 \");\n       for(i=1; i<9;i++)\n\t  {\n\t\t\t\t\t\t     \n\t\t\tlist1->next = (Linklist *)malloc(sizeof(Linklist));\n\t\t\tlist1 = list1->next;\n\t\t    list1->num = i*2;\n\t\t\tprintf(\"%d \",i*2);\n\t  }\n\t   printf(\"\\n\");\n\t   Linklist *rr=(Linklist *)malloc(sizeof(Linklist));\n\t   Linklist **resull=&rr;\n\t   int rere=reverselinklist(result11,1,9,resull);\n\t   if(rere==3) {\n\t    for(i=0;result11!=NULL ;i++,result11=result11->next)\n\t\t\t\t       printf(\"%d \",result11->num); \n\t  \tfree(list1);\n\t   }\n\t  else\n\t  { \n\t    for(i=0;*resull!=NULL ;i++,*resull= (*resull)->next)\n\t\t\t\t       printf(\"%d \",(*resull)->num); \n\t  \tfree(*resull);\n\t  }\n\t\treturn 0;\n}```\n//leetcode\n\n#### \n+ \n\n```c\n/**\n\n Given a sorted linked list, delete all duplicates such that each element appear only once.\n\nExample 1:\n\nInput: 1->1->2\nOutput: 1->2\n\nExample 2:\n\nInput: 1->1->2->3->3\nOutput: 1->2->3\n\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\nstruct ListNode* deleteDuplicates(struct ListNode* head) {\n    if(head==NULL)return NULL;\n    if(head->next==NULL)return head;\n    struct ListNode *first=head;\n    struct ListNode  *second=head->next;\n    struct ListNode *tmp=second;\n    while(second!=NULL) \n    {\n        tmp=second;\n        if(first->val==second->val)\n        {\n            second=second->next;\n            \n        }\n        else\n        {\n            first->next=second;\n            first=first->next;\n            second=second->next;\n        }\n    }\n    if(first->val==tmp->val)\n        first->next=NULL;\n    return head;\n}```\n//accepted\n\n#### node\n+ :\n\n```c\n/**\n\n Given a sorted linked list, delete all duplicates such that each element appear only once.\n\nExample 1:\n\nInput: 1->1->2\nOutput: 1->2\n\nExample 2:\n\nInput: 1->1->2->3->3\nOutput: 1->2->3\n\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n#include<stdio.h>\n#include<stdlib.h>\nstruct ListNode {\n      int val;\n      struct ListNode *next;\n  };\nstruct ListNode* deleteDuplicates(struct ListNode* head) {\n    if(head==NULL)return NULL;\n    if(head->next==NULL)return head;\n    struct ListNode *headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    \n    struct ListNode *first=head;\n    struct ListNode  *second=head->next;\n    int numsame=0;\n    struct ListNode *tmphead=headnode;\n    while(second!=NULL) \n    {\n        if(first->val==second->val)\n        {\n               numsame++;\n               first=first->next;\n               second=second->next;\n               \n        }\n        else if(first->val !=second->val && numsame==0)\n        {\n            tmphead->next=first;\n            tmphead=tmphead->next;\n            first=first->next;\n            second=second->next;\n        }\n        else \n        {\n            first=first->next;\n            second=second->next;\n            numsame=0;\n        }\n    }\n    if(numsame==0)tmphead->next=first;\n    else tmphead->next =NULL;\n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);   \n    return head;\n}\n\n\nint main()\n{\n   struct ListNode *list1=(struct ListNode *)malloc(sizeof(struct ListNode));\n   struct ListNode *tmp=list1;\n   struct ListNode *freelist1=list1;\n   int i=0;\n   for(i=1;i<9;i++)\n   {\n\t\t list1->val=20-i;\n\t\t list1->next=(struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t list1=list1->next;\n\t\t printf(\"%d \",20-i);\n   }\n   list1->val=12;\n   tmp=deleteDuplicates(tmp);\n   printf(\"\\n\");\n   for(i=1;tmp!=NULL;i++)\n   {\n\t\t   printf(\"%d  \",tmp->val);\n\t\t   tmp=tmp->next;\n   }\n   free(freelist1);\n   return 0;\n}\n\n\n=\n4,4,4;4,5,5 4,5,6.4,4,5```\n","source":"_posts/leetcode-linklist2.md","raw":"---\ntitle: leetcode_linklist2\ndate: 2018-06-03 21:40:41\ntags: leetcode_linklist\ncategories: leetcode\n---\n### leetcode2\n#### partition list\n: <!--more-->\n```c\n/*\nGiven a linked list and a value x, partition it such that all nodes less than x come before nodes greater than or equal to x.\n\nYou should preserve the original relative order of the nodes in each of the two partitions.\n\nExample:\n\nInput: head = 1->4->3->2->5->2, x = 3\nOutput: 1->2->2->4->3->5*/\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\nstruct ListNode* partition(struct ListNode* head, int x) {\n    /**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n\n    if(head==NULL)\n\t\t\t\treturn NULL;\n    if(head->next ==NULL)\n              return head;\n        struct ListNode *list=(struct ListNode*)malloc(sizeof(struct  ListNode));\n        list->next=head;\n\t\tstruct ListNode*head1=list;\n\t\tstruct ListNode*cur = head1->next;\n\t\tstruct ListNode*tail=head1;\n\t\tint lenoflist1=0;\n\t\twhile(tail->next!=NULL)\n\t\t{\n\t\t\t\ttail=tail->next;\n\t\t\t\tlenoflist1++;\n\t\t}\n       struct ListNode* tmp=tail;\n\t\twhile(lenoflist1>=1)\n\t\t{ \n            lenoflist1--;\n            if(tail==cur)\n                continue;\n          if(cur->val>=x)\n\t\t  {\n\t\t\t\t  head1->next=cur->next;\n\t\t\t\t  cur->next=NULL;\n\t\t          tail->next=cur;\n\t\t\t\t  tail=tail->next;//not consid at first\n\t\t\t\t  cur=head1->next;\n\n\t\t  } \n\t\t  else{\n\t\t\t\t  head1=head1->next;\n\t\t\t\t  cur=cur->next;\n\t\t  }\n\t\t \n\t\t //  printf(\"%d : \",cur->num);\n\t\t}\n    //if(head1->next==NULL)head1->next=tmp;\n         head=list->next;\n   list->next=NULL;\n    free(list);\n\t\tprintf(\"\\n\");\n    return head;\n    \n}\n```\n//accepted\n//,accept\n\n\n#### \n+   \n\n```c \n/* reverse a linklist from m to n\n * 1->2->4->5->null and m,n(ex:2,4)\n * return 1->5->4->2->null\n */\n\n#include<stdlib.h>\n#include<stdio.h>\ntypedef struct LinkList\n{\n\tint num;\n\tstruct LinkList  *next;\n}Linklist;\nint reverselinklist(Linklist *list1,int m,int n,Linklist **result)\n{\n\t\tif(list1==NULL)\n\t\t\t\treturn -1;\n\t\tint i=0;\n\t\tLinklist *head1,*head2,*cur,*tmp,*pre;\n\t\tcur=list1;\n\t\thead1=cur;\n\t\tpre=head1;\n\t\tif(m==1)\n\t\t{\n\t\t\t\tcur=cur->next;\n\t\t\t\tfor(i=m;i<n;i++)\n\t\t\t\t{\n\t\t\t\t  pre->next=cur->next;\n\t\t\t\t  cur->next=head1;\n\t\t\t\t  head1=cur;\n\t\t\t\t  cur=pre->next;\n\t\t\t\t}\n\t\t\t    *result=head1;\n\t\t\t\treturn 1;\n\t\t}\n\n\t\tfor(i=1;i<m;i++)//node1->node2->node3---1->2->3--ex:m=2,list1->1\n\t\t{\n\t\t  head1=cur;\n          cur=cur->next;\n\t\t}\n\t\thead2=cur;\n\t\tcur=cur->next;\n\t\tpre=head2;\n\t\tfor(i=m;i<n;i++)\n\t\t{\n\t\t   pre->next=cur->next;\n\t\t   cur->next=head1->next;\n\t\t   head1->next=cur;\n\t\t   cur=pre->next;\n\t\t}\n      return 3;\n}\n\nint main ()\n{\n\t\tLinklist *list1=(Linklist*)malloc(sizeof(Linklist));\n\t\tLinklist *result11=list1;\n\t\tint i;\n\t\tlist1->num=4;\n\t\tprintf(\"4 \");\n       for(i=1; i<9;i++)\n\t  {\n\t\t\t\t\t\t     \n\t\t\tlist1->next = (Linklist *)malloc(sizeof(Linklist));\n\t\t\tlist1 = list1->next;\n\t\t    list1->num = i*2;\n\t\t\tprintf(\"%d \",i*2);\n\t  }\n\t   printf(\"\\n\");\n\t   Linklist *rr=(Linklist *)malloc(sizeof(Linklist));\n\t   Linklist **resull=&rr;\n\t   int rere=reverselinklist(result11,1,9,resull);\n\t   if(rere==3) {\n\t    for(i=0;result11!=NULL ;i++,result11=result11->next)\n\t\t\t\t       printf(\"%d \",result11->num); \n\t  \tfree(list1);\n\t   }\n\t  else\n\t  { \n\t    for(i=0;*resull!=NULL ;i++,*resull= (*resull)->next)\n\t\t\t\t       printf(\"%d \",(*resull)->num); \n\t  \tfree(*resull);\n\t  }\n\t\treturn 0;\n}```\n//leetcode\n\n#### \n+ \n\n```c\n/**\n\n Given a sorted linked list, delete all duplicates such that each element appear only once.\n\nExample 1:\n\nInput: 1->1->2\nOutput: 1->2\n\nExample 2:\n\nInput: 1->1->2->3->3\nOutput: 1->2->3\n\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\nstruct ListNode* deleteDuplicates(struct ListNode* head) {\n    if(head==NULL)return NULL;\n    if(head->next==NULL)return head;\n    struct ListNode *first=head;\n    struct ListNode  *second=head->next;\n    struct ListNode *tmp=second;\n    while(second!=NULL) \n    {\n        tmp=second;\n        if(first->val==second->val)\n        {\n            second=second->next;\n            \n        }\n        else\n        {\n            first->next=second;\n            first=first->next;\n            second=second->next;\n        }\n    }\n    if(first->val==tmp->val)\n        first->next=NULL;\n    return head;\n}```\n//accepted\n\n#### node\n+ :\n\n```c\n/**\n\n Given a sorted linked list, delete all duplicates such that each element appear only once.\n\nExample 1:\n\nInput: 1->1->2\nOutput: 1->2\n\nExample 2:\n\nInput: 1->1->2->3->3\nOutput: 1->2->3\n\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n#include<stdio.h>\n#include<stdlib.h>\nstruct ListNode {\n      int val;\n      struct ListNode *next;\n  };\nstruct ListNode* deleteDuplicates(struct ListNode* head) {\n    if(head==NULL)return NULL;\n    if(head->next==NULL)return head;\n    struct ListNode *headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    \n    struct ListNode *first=head;\n    struct ListNode  *second=head->next;\n    int numsame=0;\n    struct ListNode *tmphead=headnode;\n    while(second!=NULL) \n    {\n        if(first->val==second->val)\n        {\n               numsame++;\n               first=first->next;\n               second=second->next;\n               \n        }\n        else if(first->val !=second->val && numsame==0)\n        {\n            tmphead->next=first;\n            tmphead=tmphead->next;\n            first=first->next;\n            second=second->next;\n        }\n        else \n        {\n            first=first->next;\n            second=second->next;\n            numsame=0;\n        }\n    }\n    if(numsame==0)tmphead->next=first;\n    else tmphead->next =NULL;\n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);   \n    return head;\n}\n\n\nint main()\n{\n   struct ListNode *list1=(struct ListNode *)malloc(sizeof(struct ListNode));\n   struct ListNode *tmp=list1;\n   struct ListNode *freelist1=list1;\n   int i=0;\n   for(i=1;i<9;i++)\n   {\n\t\t list1->val=20-i;\n\t\t list1->next=(struct ListNode *)malloc(sizeof(struct ListNode));\n\t\t list1=list1->next;\n\t\t printf(\"%d \",20-i);\n   }\n   list1->val=12;\n   tmp=deleteDuplicates(tmp);\n   printf(\"\\n\");\n   for(i=1;tmp!=NULL;i++)\n   {\n\t\t   printf(\"%d  \",tmp->val);\n\t\t   tmp=tmp->next;\n   }\n   free(freelist1);\n   return 0;\n}\n\n\n=\n4,4,4;4,5,5 4,5,6.4,4,5```\n","slug":"leetcode-linklist2","published":1,"updated":"2018-06-03T13:57:48.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpo002700jx7xdcs7ek","content":"<h3 id=\"leetcode2\"><a href=\"#leetcode2\" class=\"headerlink\" title=\"leetcode2\"></a>leetcode2</h3><h4 id=\"partition-list\"><a href=\"#partition-list\" class=\"headerlink\" title=\"partition list\"></a>partition list</h4><p>: <a id=\"more\"></a><br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">Given a linked list and a value x, partition it such that all nodes less than x come before nodes greater than or equal to x.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">You should preserve the original relative order of the nodes in each of the two partitions.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: head = 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2, x = 3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">partition</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next ==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">              <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span>  <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">        <span class=\"built_in\">list</span>-&gt;next=head;</span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">head1</span>=<span class=\"title\">list</span>;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">cur</span> = <span class=\"title\">head1</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">tail</span>=<span class=\"title\">head1</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> lenoflist1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span>(tail-&gt;next!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\ttail=tail-&gt;next;</span><br><span class=\"line\">\t\t\t\tlenoflist1++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>* <span class=\"title\">tmp</span>=<span class=\"title\">tail</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span>(lenoflist1&gt;=<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t&#123; </span><br><span class=\"line\">            lenoflist1--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(tail==cur)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(cur-&gt;val&gt;=x)</span><br><span class=\"line\">\t\t  &#123;</span><br><span class=\"line\">\t\t\t\t  head1-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t\t          tail-&gt;next=cur;</span><br><span class=\"line\">\t\t\t\t  tail=tail-&gt;next;<span class=\"comment\">//not consid at first</span></span><br><span class=\"line\">\t\t\t\t  cur=head1-&gt;next;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t  &#125; </span><br><span class=\"line\">\t\t  <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t\t  head1=head1-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur=cur-&gt;next;</span><br><span class=\"line\">\t\t  &#125;</span><br><span class=\"line\">\t\t </span><br><span class=\"line\">\t\t <span class=\"comment\">//  printf(\"%d : \",cur-&gt;num);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//if(head1-&gt;next==NULL)head1-&gt;next=tmp;</span></span><br><span class=\"line\">         head=<span class=\"built_in\">list</span>-&gt;next;</span><br><span class=\"line\">   <span class=\"built_in\">list</span>-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(<span class=\"built_in\">list</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//accepted<br>//,accept</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reverse a linklist from m to n</span></span><br><span class=\"line\"><span class=\"comment\"> * 1-&gt;2-&gt;4-&gt;5-&gt;null and m,n(ex:2,4)</span></span><br><span class=\"line\"><span class=\"comment\"> * return 1-&gt;5-&gt;4-&gt;2-&gt;null</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LinkList</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> num;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LinkList</span>  *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;Linklist;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">reverselinklist</span><span class=\"params\">(Linklist *list1,<span class=\"keyword\">int</span> m,<span class=\"keyword\">int</span> n,Linklist **result)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(list1==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tLinklist *head1,*head2,*cur,*tmp,*pre;</span><br><span class=\"line\">\t\tcur=list1;</span><br><span class=\"line\">\t\thead1=cur;</span><br><span class=\"line\">\t\tpre=head1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(m==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\tcur=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span>(i=m;i&lt;n;i++)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t  pre-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur-&gt;next=head1;</span><br><span class=\"line\">\t\t\t\t  head1=cur;</span><br><span class=\"line\">\t\t\t\t  cur=pre-&gt;next;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t    *result=head1;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;m;i++)<span class=\"comment\">//node1-&gt;node2-&gt;node3---1-&gt;2-&gt;3--ex:m=2,list1-&gt;1</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t  head1=cur;</span><br><span class=\"line\">          cur=cur-&gt;next;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\thead2=cur;</span><br><span class=\"line\">\t\tcur=cur-&gt;next;</span><br><span class=\"line\">\t\tpre=head2;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=m;i&lt;n;i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t   pre-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t   cur-&gt;next=head1-&gt;next;</span><br><span class=\"line\">\t\t   head1-&gt;next=cur;</span><br><span class=\"line\">\t\t   cur=pre-&gt;next;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tLinklist *list1=(Linklist*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t\tLinklist *result11=list1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i;</span><br><span class=\"line\">\t\tlist1-&gt;num=<span class=\"number\">4</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"4 \"</span>);</span><br><span class=\"line\">       <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>; i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">\t  &#123;</span><br><span class=\"line\">\t\t\t\t\t\t     </span><br><span class=\"line\">\t\t\tlist1-&gt;next = (Linklist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t\t\tlist1 = list1-&gt;next;</span><br><span class=\"line\">\t\t    list1-&gt;num = i*<span class=\"number\">2</span>;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,i*<span class=\"number\">2</span>);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t   <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">\t   Linklist *rr=(Linklist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t   Linklist **resull=&amp;rr;</span><br><span class=\"line\">\t   <span class=\"keyword\">int</span> rere=reverselinklist(result11,<span class=\"number\">1</span>,<span class=\"number\">9</span>,resull);</span><br><span class=\"line\">\t   <span class=\"keyword\">if</span>(rere==<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result11!=<span class=\"literal\">NULL</span> ;i++,result11=result11-&gt;next)</span><br><span class=\"line\">\t\t\t\t       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result11-&gt;num); </span><br><span class=\"line\">\t  \t<span class=\"built_in\">free</span>(list1);</span><br><span class=\"line\">\t   &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">else</span></span><br><span class=\"line\">\t  &#123; </span><br><span class=\"line\">\t    <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;*resull!=<span class=\"literal\">NULL</span> ;i++,*resull= (*resull)-&gt;next)</span><br><span class=\"line\">\t\t\t\t       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,(*resull)-&gt;num); </span><br><span class=\"line\">\t  \t<span class=\"built_in\">free</span>(*resull);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//leetcode</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> Given a sorted linked list, delete all duplicates such that each element appear only once.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 1:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 2:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">deleteDuplicates</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmp</span>=<span class=\"title\">second</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(second!=<span class=\"literal\">NULL</span>) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmp=second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first-&gt;val==second-&gt;val)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            first-&gt;next=second;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first-&gt;val==tmp-&gt;val)</span><br><span class=\"line\">        first-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//accepted</p>\n<h4 id=\"node\"><a href=\"#node\" class=\"headerlink\" title=\"node\"></a>node</h4><ul>\n<li>:</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> Given a sorted linked list, delete all duplicates such that each element appear only once.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 1:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 2:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> &#123;</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">      <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">deleteDuplicates</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> numsame=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmphead</span>=<span class=\"title\">headnode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(second!=<span class=\"literal\">NULL</span>) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first-&gt;val==second-&gt;val)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">               numsame++;</span><br><span class=\"line\">               first=first-&gt;next;</span><br><span class=\"line\">               second=second-&gt;next;</span><br><span class=\"line\">               </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(first-&gt;val !=second-&gt;val &amp;&amp; numsame==<span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            tmphead-&gt;next=first;</span><br><span class=\"line\">            tmphead=tmphead-&gt;next;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">            numsame=<span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(numsame==<span class=\"number\">0</span>)tmphead-&gt;next=first;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> tmphead-&gt;next =<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list1</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span> *)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmp</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist1</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t list1-&gt;val=<span class=\"number\">20</span>-i;</span><br><span class=\"line\">\t\t list1-&gt;next=(struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t list1=list1-&gt;next;</span><br><span class=\"line\">\t\t <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,<span class=\"number\">20</span>-i);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list1-&gt;val=<span class=\"number\">12</span>;</span><br><span class=\"line\">   tmp=deleteDuplicates(tmp);</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;tmp!=<span class=\"literal\">NULL</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d  \"</span>,tmp-&gt;val);</span><br><span class=\"line\">\t\t   tmp=tmp-&gt;next;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">free</span>(freelist1);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">=</span><br><span class=\"line\"><span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>;<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span> <span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6.4</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3 id=\"leetcode2\"><a href=\"#leetcode2\" class=\"headerlink\" title=\"leetcode2\"></a>leetcode2</h3><h4 id=\"partition-list\"><a href=\"#partition-list\" class=\"headerlink\" title=\"partition list\"></a>partition list</h4><p>:","more":"<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">Given a linked list and a value x, partition it such that all nodes less than x come before nodes greater than or equal to x.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">You should preserve the original relative order of the nodes in each of the two partitions.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: head = 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2, x = 3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">partition</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next ==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">              <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">        <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span>  <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">        <span class=\"built_in\">list</span>-&gt;next=head;</span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">head1</span>=<span class=\"title\">list</span>;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">cur</span> = <span class=\"title\">head1</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">\t\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>*<span class=\"title\">tail</span>=<span class=\"title\">head1</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> lenoflist1=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span>(tail-&gt;next!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\ttail=tail-&gt;next;</span><br><span class=\"line\">\t\t\t\tlenoflist1++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">       <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>* <span class=\"title\">tmp</span>=<span class=\"title\">tail</span>;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span>(lenoflist1&gt;=<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t&#123; </span><br><span class=\"line\">            lenoflist1--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(tail==cur)</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(cur-&gt;val&gt;=x)</span><br><span class=\"line\">\t\t  &#123;</span><br><span class=\"line\">\t\t\t\t  head1-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\t\t          tail-&gt;next=cur;</span><br><span class=\"line\">\t\t\t\t  tail=tail-&gt;next;<span class=\"comment\">//not consid at first</span></span><br><span class=\"line\">\t\t\t\t  cur=head1-&gt;next;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t  &#125; </span><br><span class=\"line\">\t\t  <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t\t  head1=head1-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur=cur-&gt;next;</span><br><span class=\"line\">\t\t  &#125;</span><br><span class=\"line\">\t\t </span><br><span class=\"line\">\t\t <span class=\"comment\">//  printf(\"%d : \",cur-&gt;num);</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//if(head1-&gt;next==NULL)head1-&gt;next=tmp;</span></span><br><span class=\"line\">         head=<span class=\"built_in\">list</span>-&gt;next;</span><br><span class=\"line\">   <span class=\"built_in\">list</span>-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(<span class=\"built_in\">list</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>//accepted<br>//,accept</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>  </li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reverse a linklist from m to n</span></span><br><span class=\"line\"><span class=\"comment\"> * 1-&gt;2-&gt;4-&gt;5-&gt;null and m,n(ex:2,4)</span></span><br><span class=\"line\"><span class=\"comment\"> * return 1-&gt;5-&gt;4-&gt;2-&gt;null</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LinkList</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> num;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">LinkList</span>  *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125;Linklist;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">reverselinklist</span><span class=\"params\">(Linklist *list1,<span class=\"keyword\">int</span> m,<span class=\"keyword\">int</span> n,Linklist **result)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(list1==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tLinklist *head1,*head2,*cur,*tmp,*pre;</span><br><span class=\"line\">\t\tcur=list1;</span><br><span class=\"line\">\t\thead1=cur;</span><br><span class=\"line\">\t\tpre=head1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(m==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t\tcur=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span>(i=m;i&lt;n;i++)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t  pre-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t\t\t  cur-&gt;next=head1;</span><br><span class=\"line\">\t\t\t\t  head1=cur;</span><br><span class=\"line\">\t\t\t\t  cur=pre-&gt;next;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t    *result=head1;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;m;i++)<span class=\"comment\">//node1-&gt;node2-&gt;node3---1-&gt;2-&gt;3--ex:m=2,list1-&gt;1</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t  head1=cur;</span><br><span class=\"line\">          cur=cur-&gt;next;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\thead2=cur;</span><br><span class=\"line\">\t\tcur=cur-&gt;next;</span><br><span class=\"line\">\t\tpre=head2;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=m;i&lt;n;i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t   pre-&gt;next=cur-&gt;next;</span><br><span class=\"line\">\t\t   cur-&gt;next=head1-&gt;next;</span><br><span class=\"line\">\t\t   head1-&gt;next=cur;</span><br><span class=\"line\">\t\t   cur=pre-&gt;next;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\tLinklist *list1=(Linklist*)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t\tLinklist *result11=list1;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i;</span><br><span class=\"line\">\t\tlist1-&gt;num=<span class=\"number\">4</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"4 \"</span>);</span><br><span class=\"line\">       <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>; i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">\t  &#123;</span><br><span class=\"line\">\t\t\t\t\t\t     </span><br><span class=\"line\">\t\t\tlist1-&gt;next = (Linklist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t\t\tlist1 = list1-&gt;next;</span><br><span class=\"line\">\t\t    list1-&gt;num = i*<span class=\"number\">2</span>;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,i*<span class=\"number\">2</span>);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t   <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">\t   Linklist *rr=(Linklist *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(Linklist));</span><br><span class=\"line\">\t   Linklist **resull=&amp;rr;</span><br><span class=\"line\">\t   <span class=\"keyword\">int</span> rere=reverselinklist(result11,<span class=\"number\">1</span>,<span class=\"number\">9</span>,resull);</span><br><span class=\"line\">\t   <span class=\"keyword\">if</span>(rere==<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;result11!=<span class=\"literal\">NULL</span> ;i++,result11=result11-&gt;next)</span><br><span class=\"line\">\t\t\t\t       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,result11-&gt;num); </span><br><span class=\"line\">\t  \t<span class=\"built_in\">free</span>(list1);</span><br><span class=\"line\">\t   &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">else</span></span><br><span class=\"line\">\t  &#123; </span><br><span class=\"line\">\t    <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;*resull!=<span class=\"literal\">NULL</span> ;i++,*resull= (*resull)-&gt;next)</span><br><span class=\"line\">\t\t\t\t       <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,(*resull)-&gt;num); </span><br><span class=\"line\">\t  \t<span class=\"built_in\">free</span>(*resull);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//leetcode</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li></li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> Given a sorted linked list, delete all duplicates such that each element appear only once.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 1:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 2:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">deleteDuplicates</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmp</span>=<span class=\"title\">second</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(second!=<span class=\"literal\">NULL</span>) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        tmp=second;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first-&gt;val==second-&gt;val)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            first-&gt;next=second;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first-&gt;val==tmp-&gt;val)</span><br><span class=\"line\">        first-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//accepted</p>\n<h4 id=\"node\"><a href=\"#node\" class=\"headerlink\" title=\"node\"></a>node</h4><ul>\n<li>:</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> Given a sorted linked list, delete all duplicates such that each element appear only once.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 1:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Example 2:</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\">Output: 1-&gt;2-&gt;3</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     struct ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> &#123;</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> val;</span><br><span class=\"line\">      <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">next</span>;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">deleteDuplicates</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> numsame=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmphead</span>=<span class=\"title\">headnode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(second!=<span class=\"literal\">NULL</span>) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first-&gt;val==second-&gt;val)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">               numsame++;</span><br><span class=\"line\">               first=first-&gt;next;</span><br><span class=\"line\">               second=second-&gt;next;</span><br><span class=\"line\">               </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(first-&gt;val !=second-&gt;val &amp;&amp; numsame==<span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            tmphead-&gt;next=first;</span><br><span class=\"line\">            tmphead=tmphead-&gt;next;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            first=first-&gt;next;</span><br><span class=\"line\">            second=second-&gt;next;</span><br><span class=\"line\">            numsame=<span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(numsame==<span class=\"number\">0</span>)tmphead-&gt;next=first;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> tmphead-&gt;next =<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">list1</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span> *)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">tmp</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">freelist1</span>=<span class=\"title\">list1</span>;</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;<span class=\"number\">9</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t list1-&gt;val=<span class=\"number\">20</span>-i;</span><br><span class=\"line\">\t\t list1-&gt;next=(struct ListNode *)<span class=\"built_in\">malloc</span>(<span class=\"keyword\">sizeof</span>(struct ListNode));</span><br><span class=\"line\">\t\t list1=list1-&gt;next;</span><br><span class=\"line\">\t\t <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d \"</span>,<span class=\"number\">20</span>-i);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   list1-&gt;val=<span class=\"number\">12</span>;</span><br><span class=\"line\">   tmp=deleteDuplicates(tmp);</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;tmp!=<span class=\"literal\">NULL</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d  \"</span>,tmp-&gt;val);</span><br><span class=\"line\">\t\t   tmp=tmp-&gt;next;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">free</span>(freelist1);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">=</span><br><span class=\"line\"><span class=\"number\">4</span>,<span class=\"number\">4</span>,<span class=\"number\">4</span>;<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span> <span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6.4</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span></span><br></pre></td></tr></table></figure>"},{"title":"leetcode_linklist3","date":"2018-06-07T15:33:03.000Z","_content":"### leetcode_linklist3\ncontinue..\n#### \nGiven a linked list, rotate the list to the right by k places, where k is non-negative.\n<!--more-->\nExample 1:\n\nInput: 1->2->3->4->5->NULL, k = 2\nOutput: 4->5->1->2->3->NULL\nExplanation:\nrotate 1 steps to the right: 5->1->2->3->4->NULL\nrotate 2 steps to the right: 4->5->1->2->3->NULL\n\nExample 2:\n\nInput: 0->1->2->NULL, k = 4\nOutput: 2->0->1->NULL\nExplanation:\nrotate 1 steps to the right: 2->0->1->NULL\nrotate 2 steps to the right: 1->2->0->NULL\nrotate 3 steps to the right: 0->1->2->NULL\nrotate 4 steps to the right: 2->0->1->NULL\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* rotateRight(struct ListNode* head, int k) {\n    if(head==NULL)\n        return NULL;\n    if(head->next==NULL)\n        return head;\n    struct ListNode *headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    struct ListNode *sumhead=head;\n    //compute len of list\n    int sum=0;\n    while(sumhead->next!=NULL)\n    {\n        sum++;\n        sumhead=sumhead->next;\n    }\n    sum++;\n    //compare k and len,or just compute the rota num\n    int num=k%sum;\n    int i=0;\n    struct ListNode *dealheadf=head;\n    for(i=1;i<sum-num;i++)\n    {\n        dealheadf=dealheadf->next;\n    }\n    \n    sumhead->next=headnode->next;\n    headnode->next=dealheadf->next;\n    dealheadf->next=NULL;\n   \n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);\n    return  head;\n}\n```\n\n\n\n\n\n#### n\nGiven a linked list, remove the n-th node from the end of list and return its head.\n\nExample:\n\nGiven linked list: 1->2->3->4->5, and n = 2.\n\nAfter removing the second node from the end, the linked list becomes 1->2->3->5.\n\nNote:\n\nGiven n will always be valid.\n\nFollow up:\n\nCould you do this in one pass?\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* removeNthFromEnd(struct ListNode* head, int n) {\n     if(head==NULL)//\n         return head;\n     if(head->next==NULL&&n>=1)\n         return NULL;\n     \n     int sum=0;\n     struct ListNode *sumhead=head;\n     while(sumhead!=NULL)\n     {\n         sum++;\n         sumhead=sumhead->next;\n     }\n     int remove=sum-n;\n     struct ListNode *removenode=head;\n     while(remove>1)\n     {\n         removenode=removenode->next;\n         remove--;\n     }\n     struct ListNode *rmnode;\n    if(remove==1)\n    {\n     struct ListNode *rmnode;\n     rmnode=removenode->next;\n     removenode->next=removenode->next->next;\n     rmnode->next=NULL;\n     free(rmnode);\n    }\n    else//\n    {\n        rmnode=removenode;\n        head=head->next;\n        rmnode->next=NULL;\n        free(rmnode);\n        \n    }\n     return head;\n    \n}\n```\n//else \n\n#### \nGiven a linked list, swap every two adjacent nodes and return its head.\n\nExample:\n\nGiven 1->2->3->4, you should return the list as 2->1->4->3.\n\nNote:\n\n    Your algorithm should use only constant extra space.\n    You may not modify the values in the list's nodes, only nodes itself may be changed.\n\n\n\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* swapPairs(struct ListNode* head) {\n    if(head==NULL)\n        return head;\n    if(head->next==NULL)\n        return head;\n    struct ListNode *headNode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    struct ListNode *second=head->next;\n    struct ListNode *first=head;\n    struct ListNode *curhead=headNode;\n    while(1)\n    {\n        if(first==NULL)break;\n        second=first->next;\n        if(second!=NULL)\n       {\n          first->next=second->next==NULL?NULL:second->next;\n          second->next=first;\n          curhead->next=second;\n          curhead=first;\n          first=first->next==NULL?NULL:first->next;\n        }\n        else break;\n    }\n    head=headNode->next;\n    headNode->next=NULL;\n    free(headNode);\n    return head;\n     \n}\n```\n\n#### k\n\nGiven a linked list, reverse the nodes of a linked list k at a time and return its modified list.\n\nk is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of k then left-out nodes in the end should remain as it is.\n\nExample:\n\nGiven this linked list: 1->2->3->4->5\n\nFor k = 2, you should return: 2->1->4->3->5\n\nFor k = 3, you should return: 3->2->1->4->5\n\nNote:\n\n    Only constant extra memory is allowed.\n    You may not alter the values in the list's nodes, only nodes itself may be changed.\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n/*\n\n*/\n```c\nstruct ListNode* reverseKGroup(struct ListNode* head, int k) {\n    if(head==NULL)\n        return head;\n    struct ListNode* headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    int len=0;\n    struct ListNode  *lenhead=head,*curhead=headnode,*cur=head,*tmp=NULL;\n    while(lenhead!=NULL)//\n    {\n        len++;\n        lenhead=lenhead->next;\n    }\n    int numofreverse=len/k;//reverse\n    int i=0;\n    int j=0;\n    for(i=1;i<=numofreverse;i++)\n    {\n        j=k;\n        while(j>1)//reverse k\n        {\n            tmp=curhead->next;\n            curhead->next=cur->next;\n            cur->next=cur->next->next;\n            curhead->next->next=tmp;\n            j--;\n        }\n        curhead=cur;\n        cur=cur->next;\n    }\n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);\n    return head;   \n}\n```\n#### \n  \n+ \n+ \n+ \n+ LRU cache,\n+ \n\n+ \n  + \n  + \n  + \n  + \n+ \n  + \n  + ","source":"_posts/leetcode-linklist3.md","raw":"---\ntitle: leetcode_linklist3\ndate: 2018-06-07 23:33:03\ntags: leetcode_linklist\ncategories: leetcode\n---\n### leetcode_linklist3\ncontinue..\n#### \nGiven a linked list, rotate the list to the right by k places, where k is non-negative.\n<!--more-->\nExample 1:\n\nInput: 1->2->3->4->5->NULL, k = 2\nOutput: 4->5->1->2->3->NULL\nExplanation:\nrotate 1 steps to the right: 5->1->2->3->4->NULL\nrotate 2 steps to the right: 4->5->1->2->3->NULL\n\nExample 2:\n\nInput: 0->1->2->NULL, k = 4\nOutput: 2->0->1->NULL\nExplanation:\nrotate 1 steps to the right: 2->0->1->NULL\nrotate 2 steps to the right: 1->2->0->NULL\nrotate 3 steps to the right: 0->1->2->NULL\nrotate 4 steps to the right: 2->0->1->NULL\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* rotateRight(struct ListNode* head, int k) {\n    if(head==NULL)\n        return NULL;\n    if(head->next==NULL)\n        return head;\n    struct ListNode *headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    struct ListNode *sumhead=head;\n    //compute len of list\n    int sum=0;\n    while(sumhead->next!=NULL)\n    {\n        sum++;\n        sumhead=sumhead->next;\n    }\n    sum++;\n    //compare k and len,or just compute the rota num\n    int num=k%sum;\n    int i=0;\n    struct ListNode *dealheadf=head;\n    for(i=1;i<sum-num;i++)\n    {\n        dealheadf=dealheadf->next;\n    }\n    \n    sumhead->next=headnode->next;\n    headnode->next=dealheadf->next;\n    dealheadf->next=NULL;\n   \n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);\n    return  head;\n}\n```\n\n\n\n\n\n#### n\nGiven a linked list, remove the n-th node from the end of list and return its head.\n\nExample:\n\nGiven linked list: 1->2->3->4->5, and n = 2.\n\nAfter removing the second node from the end, the linked list becomes 1->2->3->5.\n\nNote:\n\nGiven n will always be valid.\n\nFollow up:\n\nCould you do this in one pass?\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* removeNthFromEnd(struct ListNode* head, int n) {\n     if(head==NULL)//\n         return head;\n     if(head->next==NULL&&n>=1)\n         return NULL;\n     \n     int sum=0;\n     struct ListNode *sumhead=head;\n     while(sumhead!=NULL)\n     {\n         sum++;\n         sumhead=sumhead->next;\n     }\n     int remove=sum-n;\n     struct ListNode *removenode=head;\n     while(remove>1)\n     {\n         removenode=removenode->next;\n         remove--;\n     }\n     struct ListNode *rmnode;\n    if(remove==1)\n    {\n     struct ListNode *rmnode;\n     rmnode=removenode->next;\n     removenode->next=removenode->next->next;\n     rmnode->next=NULL;\n     free(rmnode);\n    }\n    else//\n    {\n        rmnode=removenode;\n        head=head->next;\n        rmnode->next=NULL;\n        free(rmnode);\n        \n    }\n     return head;\n    \n}\n```\n//else \n\n#### \nGiven a linked list, swap every two adjacent nodes and return its head.\n\nExample:\n\nGiven 1->2->3->4, you should return the list as 2->1->4->3.\n\nNote:\n\n    Your algorithm should use only constant extra space.\n    You may not modify the values in the list's nodes, only nodes itself may be changed.\n\n\n\n\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n \n```c\nstruct ListNode* swapPairs(struct ListNode* head) {\n    if(head==NULL)\n        return head;\n    if(head->next==NULL)\n        return head;\n    struct ListNode *headNode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    struct ListNode *second=head->next;\n    struct ListNode *first=head;\n    struct ListNode *curhead=headNode;\n    while(1)\n    {\n        if(first==NULL)break;\n        second=first->next;\n        if(second!=NULL)\n       {\n          first->next=second->next==NULL?NULL:second->next;\n          second->next=first;\n          curhead->next=second;\n          curhead=first;\n          first=first->next==NULL?NULL:first->next;\n        }\n        else break;\n    }\n    head=headNode->next;\n    headNode->next=NULL;\n    free(headNode);\n    return head;\n     \n}\n```\n\n#### k\n\nGiven a linked list, reverse the nodes of a linked list k at a time and return its modified list.\n\nk is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of k then left-out nodes in the end should remain as it is.\n\nExample:\n\nGiven this linked list: 1->2->3->4->5\n\nFor k = 2, you should return: 2->1->4->3->5\n\nFor k = 3, you should return: 3->2->1->4->5\n\nNote:\n\n    Only constant extra memory is allowed.\n    You may not alter the values in the list's nodes, only nodes itself may be changed.\n/**\n * Definition for singly-linked list.\n * struct ListNode {\n *     int val;\n *     struct ListNode *next;\n * };\n */\n/*\n\n*/\n```c\nstruct ListNode* reverseKGroup(struct ListNode* head, int k) {\n    if(head==NULL)\n        return head;\n    struct ListNode* headnode=(struct ListNode*)malloc(sizeof(struct ListNode));\n    headnode->next=head;\n    int len=0;\n    struct ListNode  *lenhead=head,*curhead=headnode,*cur=head,*tmp=NULL;\n    while(lenhead!=NULL)//\n    {\n        len++;\n        lenhead=lenhead->next;\n    }\n    int numofreverse=len/k;//reverse\n    int i=0;\n    int j=0;\n    for(i=1;i<=numofreverse;i++)\n    {\n        j=k;\n        while(j>1)//reverse k\n        {\n            tmp=curhead->next;\n            curhead->next=cur->next;\n            cur->next=cur->next->next;\n            curhead->next->next=tmp;\n            j--;\n        }\n        curhead=cur;\n        cur=cur->next;\n    }\n    head=headnode->next;\n    headnode->next=NULL;\n    free(headnode);\n    return head;   \n}\n```\n#### \n  \n+ \n+ \n+ \n+ LRU cache,\n+ \n\n+ \n  + \n  + \n  + \n  + \n+ \n  + \n  + ","slug":"leetcode-linklist3","published":1,"updated":"2018-06-07T15:35:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpr002a00jxxd4xas0d","content":"<h3 id=\"leetcode-linklist3\"><a href=\"#leetcode-linklist3\" class=\"headerlink\" title=\"leetcode_linklist3\"></a>leetcode_linklist3</h3><p>continue..</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Given a linked list, rotate the list to the right by k places, where k is non-negative.<br><a id=\"more\"></a><br>Example 1:</p>\n<p>Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, k = 2<br>Output: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULL<br>Explanation:<br>rotate 1 steps to the right: 5-&gt;1-&gt;2-&gt;3-&gt;4-&gt;NULL<br>rotate 2 steps to the right: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULL</p>\n<p>Example 2:</p>\n<p>Input: 0-&gt;1-&gt;2-&gt;NULL, k = 4<br>Output: 2-&gt;0-&gt;1-&gt;NULL<br>Explanation:<br>rotate 1 steps to the right: 2-&gt;0-&gt;1-&gt;NULL<br>rotate 2 steps to the right: 1-&gt;2-&gt;0-&gt;NULL<br>rotate 3 steps to the right: 0-&gt;1-&gt;2-&gt;NULL<br>rotate 4 steps to the right: 2-&gt;0-&gt;1-&gt;NULL<br>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">rotateRight</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">sumhead</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"comment\">//compute len of list</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(sumhead-&gt;next!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        sum++;</span><br><span class=\"line\">        sumhead=sumhead-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    sum++;</span><br><span class=\"line\">    <span class=\"comment\">//compare k and len,or just compute the rota num</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num=k%sum;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">dealheadf</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;sum-num;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        dealheadf=dealheadf-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    sumhead-&gt;next=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=dealheadf-&gt;next;</span><br><span class=\"line\">    dealheadf-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>  head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"n\"><a href=\"#n\" class=\"headerlink\" title=\"n\"></a>n</h4><p>Given a linked list, remove the n-th node from the end of list and return its head.</p>\n<p>Example:</p>\n<p>Given linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5, and n = 2.</p>\n<p>After removing the second node from the end, the linked list becomes 1-&gt;2-&gt;3-&gt;5.</p>\n<p>Note:</p>\n<p>Given n will always be valid.</p>\n<p>Follow up:</p>\n<p>Could you do this in one pass?</p>\n<p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">removeNthFromEnd</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">         <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>&amp;&amp;n&gt;=<span class=\"number\">1</span>)</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">sumhead</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">     <span class=\"keyword\">while</span>(sumhead!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">         sum++;</span><br><span class=\"line\">         sumhead=sumhead-&gt;next;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> remove=sum-n;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">removenode</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">     <span class=\"keyword\">while</span>(remove&gt;<span class=\"number\">1</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">         removenode=removenode-&gt;next;</span><br><span class=\"line\">         remove--;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">rmnode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(remove==<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">rmnode</span>;</span></span><br><span class=\"line\">     rmnode=removenode-&gt;next;</span><br><span class=\"line\">     removenode-&gt;next=removenode-&gt;next-&gt;next;</span><br><span class=\"line\">     rmnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"built_in\">free</span>(rmnode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span><span class=\"comment\">//</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rmnode=removenode;</span><br><span class=\"line\">        head=head-&gt;next;</span><br><span class=\"line\">        rmnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(rmnode);</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//else </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Given a linked list, swap every two adjacent nodes and return its head.</p>\n<p>Example:</p>\n<p>Given 1-&gt;2-&gt;3-&gt;4, you should return the list as 2-&gt;1-&gt;4-&gt;3.</p>\n<p>Note:</p>\n<pre><code>Your algorithm should use only constant extra space.\nYou may not modify the values in the list&apos;s nodes, only nodes itself may be changed.\n</code></pre><p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">swapPairs</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headNode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">curhead</span>=<span class=\"title\">headNode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first==<span class=\"literal\">NULL</span>)<span class=\"keyword\">break</span>;</span><br><span class=\"line\">        second=first-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(second!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">          first-&gt;next=second-&gt;next==<span class=\"literal\">NULL</span>?<span class=\"literal\">NULL</span>:second-&gt;next;</span><br><span class=\"line\">          second-&gt;next=first;</span><br><span class=\"line\">          curhead-&gt;next=second;</span><br><span class=\"line\">          curhead=first;</span><br><span class=\"line\">          first=first-&gt;next==<span class=\"literal\">NULL</span>?<span class=\"literal\">NULL</span>:first-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    head=headNode-&gt;next;</span><br><span class=\"line\">    headNode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headNode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">     </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h4><p>Given a linked list, reverse the nodes of a linked list k at a time and return its modified list.</p>\n<p>k is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of k then left-out nodes in the end should remain as it is.</p>\n<p>Example:</p>\n<p>Given this linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5</p>\n<p>For k = 2, you should return: 2-&gt;1-&gt;4-&gt;3-&gt;5</p>\n<p>For k = 3, you should return: 3-&gt;2-&gt;1-&gt;4-&gt;5</p>\n<p>Note:</p>\n<pre><code>Only constant extra memory is allowed.\nYou may not alter the values in the list&apos;s nodes, only nodes itself may be changed.\n</code></pre><p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br><em>/<br>/</em><br><br>*/<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">reverseKGroup</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>* <span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> len=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">lenhead</span>=<span class=\"title\">head</span>,*<span class=\"title\">curhead</span>=<span class=\"title\">headnode</span>,*<span class=\"title\">cur</span>=<span class=\"title\">head</span>,*<span class=\"title\">tmp</span>=<span class=\"title\">NULL</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(lenhead!=<span class=\"literal\">NULL</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        len++;</span><br><span class=\"line\">        lenhead=lenhead-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> numofreverse=len/k;<span class=\"comment\">//reverse</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;=numofreverse;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        j=k;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(j&gt;<span class=\"number\">1</span>)<span class=\"comment\">//reverse k</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            tmp=curhead-&gt;next;</span><br><span class=\"line\">            curhead-&gt;next=cur-&gt;next;</span><br><span class=\"line\">            cur-&gt;next=cur-&gt;next-&gt;next;</span><br><span class=\"line\">            curhead-&gt;next-&gt;next=tmp;</span><br><span class=\"line\">            j--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        curhead=cur;</span><br><span class=\"line\">        cur=cur-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li>LRU cache,</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"leetcode-linklist3\"><a href=\"#leetcode-linklist3\" class=\"headerlink\" title=\"leetcode_linklist3\"></a>leetcode_linklist3</h3><p>continue..</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Given a linked list, rotate the list to the right by k places, where k is non-negative.<br>","more":"<br>Example 1:</p>\n<p>Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, k = 2<br>Output: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULL<br>Explanation:<br>rotate 1 steps to the right: 5-&gt;1-&gt;2-&gt;3-&gt;4-&gt;NULL<br>rotate 2 steps to the right: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULL</p>\n<p>Example 2:</p>\n<p>Input: 0-&gt;1-&gt;2-&gt;NULL, k = 4<br>Output: 2-&gt;0-&gt;1-&gt;NULL<br>Explanation:<br>rotate 1 steps to the right: 2-&gt;0-&gt;1-&gt;NULL<br>rotate 2 steps to the right: 1-&gt;2-&gt;0-&gt;NULL<br>rotate 3 steps to the right: 0-&gt;1-&gt;2-&gt;NULL<br>rotate 4 steps to the right: 2-&gt;0-&gt;1-&gt;NULL<br>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">rotateRight</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">sumhead</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"comment\">//compute len of list</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(sumhead-&gt;next!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        sum++;</span><br><span class=\"line\">        sumhead=sumhead-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    sum++;</span><br><span class=\"line\">    <span class=\"comment\">//compare k and len,or just compute the rota num</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> num=k%sum;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">dealheadf</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;sum-num;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        dealheadf=dealheadf-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    sumhead-&gt;next=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=dealheadf-&gt;next;</span><br><span class=\"line\">    dealheadf-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>  head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"n\"><a href=\"#n\" class=\"headerlink\" title=\"n\"></a>n</h4><p>Given a linked list, remove the n-th node from the end of list and return its head.</p>\n<p>Example:</p>\n<p>Given linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5, and n = 2.</p>\n<p>After removing the second node from the end, the linked list becomes 1-&gt;2-&gt;3-&gt;5.</p>\n<p>Note:</p>\n<p>Given n will always be valid.</p>\n<p>Follow up:</p>\n<p>Could you do this in one pass?</p>\n<p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">removeNthFromEnd</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">         <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>&amp;&amp;n&gt;=<span class=\"number\">1</span>)</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">sumhead</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">     <span class=\"keyword\">while</span>(sumhead!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">         sum++;</span><br><span class=\"line\">         sumhead=sumhead-&gt;next;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> remove=sum-n;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">removenode</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">     <span class=\"keyword\">while</span>(remove&gt;<span class=\"number\">1</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">         removenode=removenode-&gt;next;</span><br><span class=\"line\">         remove--;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">rmnode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(remove==<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">rmnode</span>;</span></span><br><span class=\"line\">     rmnode=removenode-&gt;next;</span><br><span class=\"line\">     removenode-&gt;next=removenode-&gt;next-&gt;next;</span><br><span class=\"line\">     rmnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">     <span class=\"built_in\">free</span>(rmnode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span><span class=\"comment\">//</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        rmnode=removenode;</span><br><span class=\"line\">        head=head-&gt;next;</span><br><span class=\"line\">        rmnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        <span class=\"built_in\">free</span>(rmnode);</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>//else </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Given a linked list, swap every two adjacent nodes and return its head.</p>\n<p>Example:</p>\n<p>Given 1-&gt;2-&gt;3-&gt;4, you should return the list as 2-&gt;1-&gt;4-&gt;3.</p>\n<p>Note:</p>\n<pre><code>Your algorithm should use only constant extra space.\nYou may not modify the values in the list&apos;s nodes, only nodes itself may be changed.\n</code></pre><p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br>*/</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">swapPairs</span><span class=\"params\">(struct ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head-&gt;next==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">headNode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">second</span>=<span class=\"title\">head</span>-&gt;<span class=\"title\">next</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">first</span>=<span class=\"title\">head</span>;</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span> *<span class=\"title\">curhead</span>=<span class=\"title\">headNode</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(first==<span class=\"literal\">NULL</span>)<span class=\"keyword\">break</span>;</span><br><span class=\"line\">        second=first-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(second!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">          first-&gt;next=second-&gt;next==<span class=\"literal\">NULL</span>?<span class=\"literal\">NULL</span>:second-&gt;next;</span><br><span class=\"line\">          second-&gt;next=first;</span><br><span class=\"line\">          curhead-&gt;next=second;</span><br><span class=\"line\">          curhead=first;</span><br><span class=\"line\">          first=first-&gt;next==<span class=\"literal\">NULL</span>?<span class=\"literal\">NULL</span>:first-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    head=headNode-&gt;next;</span><br><span class=\"line\">    headNode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headNode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">     </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h4><p>Given a linked list, reverse the nodes of a linked list k at a time and return its modified list.</p>\n<p>k is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of k then left-out nodes in the end should remain as it is.</p>\n<p>Example:</p>\n<p>Given this linked list: 1-&gt;2-&gt;3-&gt;4-&gt;5</p>\n<p>For k = 2, you should return: 2-&gt;1-&gt;4-&gt;3-&gt;5</p>\n<p>For k = 3, you should return: 3-&gt;2-&gt;1-&gt;4-&gt;5</p>\n<p>Note:</p>\n<pre><code>Only constant extra memory is allowed.\nYou may not alter the values in the list&apos;s nodes, only nodes itself may be changed.\n</code></pre><p>/**</p>\n<ul>\n<li>Definition for singly-linked list.</li>\n<li>struct ListNode {</li>\n<li>int val;</li>\n<li>struct ListNode *next;</li>\n<li>};<br><em>/<br>/</em><br><br>*/<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">struct ListNode* <span class=\"title\">reverseKGroup</span><span class=\"params\">(struct ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(head==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>* <span class=\"title\">headnode</span>=(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>*)<span class=\"title\">malloc</span>(<span class=\"title\">sizeof</span>(<span class=\"title\">struct</span> <span class=\"title\">ListNode</span>));</span></span><br><span class=\"line\">    headnode-&gt;next=head;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> len=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ListNode</span>  *<span class=\"title\">lenhead</span>=<span class=\"title\">head</span>,*<span class=\"title\">curhead</span>=<span class=\"title\">headnode</span>,*<span class=\"title\">cur</span>=<span class=\"title\">head</span>,*<span class=\"title\">tmp</span>=<span class=\"title\">NULL</span>;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(lenhead!=<span class=\"literal\">NULL</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        len++;</span><br><span class=\"line\">        lenhead=lenhead-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> numofreverse=len/k;<span class=\"comment\">//reverse</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i=<span class=\"number\">1</span>;i&lt;=numofreverse;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        j=k;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(j&gt;<span class=\"number\">1</span>)<span class=\"comment\">//reverse k</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            tmp=curhead-&gt;next;</span><br><span class=\"line\">            curhead-&gt;next=cur-&gt;next;</span><br><span class=\"line\">            cur-&gt;next=cur-&gt;next-&gt;next;</span><br><span class=\"line\">            curhead-&gt;next-&gt;next=tmp;</span><br><span class=\"line\">            j--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        curhead=cur;</span><br><span class=\"line\">        cur=cur-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    head=headnode-&gt;next;</span><br><span class=\"line\">    headnode-&gt;next=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    <span class=\"built_in\">free</span>(headnode);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li>LRU cache,</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>"},{"title":"leetcode_string","date":"2018-06-24T09:48:05.000Z","_content":"### leetcode_string\n#### \n+ ,\n\n```cpp\nint strStr(char s[],char p[])\n{\n\t\tif(s[0]=='\\0'||p[0]=='\\0')\n\t\t\t\tcout<<\"p or s is null\"<<endl;\n\t\tint k=0,j=0,i=0;\n\t\tfor(i=0,j=0;s[i]!='\\0'&&s[k]!='\\0';)\n\t\t{\n\t\t     if(p[j]=='\\0')\n\t\t\t\t   break;\t \n\t\t\t if(s[k]==p[j])\n\t\t\t {\n\t\t\t\t\t k++;\n\t\t\t\t\t j++;\n\t\t\t }\n\t\t\t else //\n\t\t\t {\n\t\t\t\t\t i++;\n\t\t\t\t\t k=i;\n\t\t\t\t\t j=0;\n\t\t\t }\n\t\t}\n        if(p[j]=='\\0')\n\t\t\t\treturn i;\n        else \n\t\t\t\treturn -1;\n}```\n#### kmp\nkmp<!--more-->()\n```cpp\nint nextfunc(char p[],int next[])\n{\n   next[0]=-1;\n   next[1]=0;\n   int j=1;\n   int k=0;\n   while(p[j]!='\\0')\n   {\n\t\t   if(k==0||p[j]==p[k])\n\t\t   {\n\t\t\t\t   ++j;\n\t\t\t\t   ++k;\n\t\t\t\t   next[j]=k;\n\t\t   }\n\t\t   else\n\t\t\t\t   k=next[k];\n   }\n   return 0;\n}\n\nint kmp(char s[],char p[])\n{\n   int i=0;\n   int j=0;\n   int next[100];\n   nextfunc(p,next);\n   for (i=0;s[i]!='\\0'&&p[j]!='\\0';i++)\n   {\n\t\t   //if(j==-1)j=0;\n\t\t   if(s[i]==p[j])\n\t\t   {\n\t\t     j++;\n\t\t\t continue;\n\t\t   }\n\t\t   while(s[i]!=p[j]&&j>=0)j=next[j];\n\t\t   j++;\n   }\n  if(p[j]=='\\0')\n\t\t return i-j;\n  else \n\t\t return -1;\n} \n```\n\n```cpp\nint main ()\n{\n\t\tchar a[19]={'a','b','c','a','b','c','a','s','s','f','r','e','r'};\n\t\tchar b[10]={'a','b','c','a','s'};\n\t\tint pos=strStr(a,b);\n\t\tcout<<pos<<endl;\n\t\tint pos2=kmp(a,b);\n\t\tcout<<pos2<<endl;\n\t\treturn 0;\n}\n```\n#### \n##### \n+ \n+ \n  +  1.\n  +  2.\n\n##### (atoi)\n+ int\n+ :\n  + ASCII0-9033x8fe\n  + 0\n\n##### \n+ \"111\"+\"101\"=\"1100\"\n+ \n  + 1. 1\n  + 2.\n\n##### \n+ \n##### \n+ \n+ \n##### \n+ \n+  =~\n\n##### strtod()\n+ :\"1.0\"\n+ \n\n##### \n+ \n##### count and say\n+ \n1 11 21 1211 111221,...\n1,1111,1,21  \n+ n\n+ \n\n##### Anagrams:\n+ eattea\n\n##### \n\n##### \n","source":"_posts/leetcode-string.md","raw":"---\ntitle: leetcode_string\ndate: 2018-06-24 17:48:05\ntags: leetcode_string\ncategories: leetcode\n---\n### leetcode_string\n#### \n+ ,\n\n```cpp\nint strStr(char s[],char p[])\n{\n\t\tif(s[0]=='\\0'||p[0]=='\\0')\n\t\t\t\tcout<<\"p or s is null\"<<endl;\n\t\tint k=0,j=0,i=0;\n\t\tfor(i=0,j=0;s[i]!='\\0'&&s[k]!='\\0';)\n\t\t{\n\t\t     if(p[j]=='\\0')\n\t\t\t\t   break;\t \n\t\t\t if(s[k]==p[j])\n\t\t\t {\n\t\t\t\t\t k++;\n\t\t\t\t\t j++;\n\t\t\t }\n\t\t\t else //\n\t\t\t {\n\t\t\t\t\t i++;\n\t\t\t\t\t k=i;\n\t\t\t\t\t j=0;\n\t\t\t }\n\t\t}\n        if(p[j]=='\\0')\n\t\t\t\treturn i;\n        else \n\t\t\t\treturn -1;\n}```\n#### kmp\nkmp<!--more-->()\n```cpp\nint nextfunc(char p[],int next[])\n{\n   next[0]=-1;\n   next[1]=0;\n   int j=1;\n   int k=0;\n   while(p[j]!='\\0')\n   {\n\t\t   if(k==0||p[j]==p[k])\n\t\t   {\n\t\t\t\t   ++j;\n\t\t\t\t   ++k;\n\t\t\t\t   next[j]=k;\n\t\t   }\n\t\t   else\n\t\t\t\t   k=next[k];\n   }\n   return 0;\n}\n\nint kmp(char s[],char p[])\n{\n   int i=0;\n   int j=0;\n   int next[100];\n   nextfunc(p,next);\n   for (i=0;s[i]!='\\0'&&p[j]!='\\0';i++)\n   {\n\t\t   //if(j==-1)j=0;\n\t\t   if(s[i]==p[j])\n\t\t   {\n\t\t     j++;\n\t\t\t continue;\n\t\t   }\n\t\t   while(s[i]!=p[j]&&j>=0)j=next[j];\n\t\t   j++;\n   }\n  if(p[j]=='\\0')\n\t\t return i-j;\n  else \n\t\t return -1;\n} \n```\n\n```cpp\nint main ()\n{\n\t\tchar a[19]={'a','b','c','a','b','c','a','s','s','f','r','e','r'};\n\t\tchar b[10]={'a','b','c','a','s'};\n\t\tint pos=strStr(a,b);\n\t\tcout<<pos<<endl;\n\t\tint pos2=kmp(a,b);\n\t\tcout<<pos2<<endl;\n\t\treturn 0;\n}\n```\n#### \n##### \n+ \n+ \n  +  1.\n  +  2.\n\n##### (atoi)\n+ int\n+ :\n  + ASCII0-9033x8fe\n  + 0\n\n##### \n+ \"111\"+\"101\"=\"1100\"\n+ \n  + 1. 1\n  + 2.\n\n##### \n+ \n##### \n+ \n+ \n##### \n+ \n+  =~\n\n##### strtod()\n+ :\"1.0\"\n+ \n\n##### \n+ \n##### count and say\n+ \n1 11 21 1211 111221,...\n1,1111,1,21  \n+ n\n+ \n\n##### Anagrams:\n+ eattea\n\n##### \n\n##### \n","slug":"leetcode-string","published":1,"updated":"2018-06-24T09:50:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpu002e00jx87bt03e9","content":"<h3 id=\"leetcode-string\"><a href=\"#leetcode-string\" class=\"headerlink\" title=\"leetcode_string\"></a>leetcode_string</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">strStr</span><span class=\"params\">(<span class=\"keyword\">char</span> s[],<span class=\"keyword\">char</span> p[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(s[<span class=\"number\">0</span>]==<span class=\"string\">'\\0'</span>||p[<span class=\"number\">0</span>]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p or s is null\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> k=<span class=\"number\">0</span>,j=<span class=\"number\">0</span>,i=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>,j=<span class=\"number\">0</span>;s[i]!=<span class=\"string\">'\\0'</span>&amp;&amp;s[k]!=<span class=\"string\">'\\0'</span>;)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t     <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t   <span class=\"keyword\">break</span>;\t </span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span>(s[k]==p[j])</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t\t k++;</span><br><span class=\"line\">\t\t\t\t\t j++;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span> <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t\t i++;</span><br><span class=\"line\">\t\t\t\t\t k=i;</span><br><span class=\"line\">\t\t\t\t\t j=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> i;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"kmp\"><a href=\"#kmp\" class=\"headerlink\" title=\"kmp\"></a>kmp</h4><p>kmp<a id=\"more\"></a>()<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">nextfunc</span><span class=\"params\">(<span class=\"keyword\">char</span> p[],<span class=\"keyword\">int</span> next[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   next[<span class=\"number\">0</span>]=<span class=\"number\">-1</span>;</span><br><span class=\"line\">   next[<span class=\"number\">1</span>]=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> j=<span class=\"number\">1</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> k=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(p[j]!=<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>||p[j]==p[k])</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t\t   ++j;</span><br><span class=\"line\">\t\t\t\t   ++k;</span><br><span class=\"line\">\t\t\t\t   next[j]=k;</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\t   k=next[k];</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">kmp</span><span class=\"params\">(<span class=\"keyword\">char</span> s[],<span class=\"keyword\">char</span> p[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> next[<span class=\"number\">100</span>];</span><br><span class=\"line\">   nextfunc(p,next);</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;s[i]!=<span class=\"string\">'\\0'</span>&amp;&amp;p[j]!=<span class=\"string\">'\\0'</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"comment\">//if(j==-1)j=0;</span></span><br><span class=\"line\">\t\t   <span class=\"keyword\">if</span>(s[i]==p[j])</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t     j++;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">while</span>(s[i]!=p[j]&amp;&amp;j&gt;=<span class=\"number\">0</span>)j=next[j];</span><br><span class=\"line\">\t\t   j++;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> i-j;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span> a[<span class=\"number\">19</span>]=&#123;<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'s'</span>,<span class=\"string\">'s'</span>,<span class=\"string\">'f'</span>,<span class=\"string\">'r'</span>,<span class=\"string\">'e'</span>,<span class=\"string\">'r'</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span> b[<span class=\"number\">10</span>]=&#123;<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'s'</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> pos=strStr(a,b);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;pos&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> pos2=kmp(a,b);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;pos2&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li></li>\n<li><ul>\n<li>1.</li>\n<li>2.</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"-atoi\"><a href=\"#-atoi\" class=\"headerlink\" title=\"(atoi)\"></a>(atoi)</h5><ul>\n<li>int</li>\n<li>:<ul>\n<li>ASCII0-9033x8fe</li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>111+101=1100</li>\n<li><ul>\n<li><ol>\n<li>1</li>\n</ol>\n</li>\n<li>2.</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li> =~</li>\n</ul>\n<h5 id=\"strtod-\"><a href=\"#strtod-\" class=\"headerlink\" title=\"strtod()\"></a>strtod()</h5><ul>\n<li>:1.0</li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><h5 id=\"count-and-say\"><a href=\"#count-and-say\" class=\"headerlink\" title=\"count and say\"></a>count and say</h5></li>\n<li><br>1 11 21 1211 111221,<br>1,1111,1,21  </li>\n<li>n</li>\n<li></li>\n</ul>\n<h5 id=\"Anagrams\"><a href=\"#Anagrams\" class=\"headerlink\" title=\"Anagrams:\"></a>Anagrams:</h5><ul>\n<li>eattea</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>","site":{"data":{}},"excerpt":"<h3 id=\"leetcode-string\"><a href=\"#leetcode-string\" class=\"headerlink\" title=\"leetcode_string\"></a>leetcode_string</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>,</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">strStr</span><span class=\"params\">(<span class=\"keyword\">char</span> s[],<span class=\"keyword\">char</span> p[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(s[<span class=\"number\">0</span>]==<span class=\"string\">'\\0'</span>||p[<span class=\"number\">0</span>]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"p or s is null\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> k=<span class=\"number\">0</span>,j=<span class=\"number\">0</span>,i=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>,j=<span class=\"number\">0</span>;s[i]!=<span class=\"string\">'\\0'</span>&amp;&amp;s[k]!=<span class=\"string\">'\\0'</span>;)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t     <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t   <span class=\"keyword\">break</span>;\t </span><br><span class=\"line\">\t\t\t <span class=\"keyword\">if</span>(s[k]==p[j])</span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t\t k++;</span><br><span class=\"line\">\t\t\t\t\t j++;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">else</span> <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t &#123;</span><br><span class=\"line\">\t\t\t\t\t i++;</span><br><span class=\"line\">\t\t\t\t\t k=i;</span><br><span class=\"line\">\t\t\t\t\t j=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t &#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> i;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"kmp\"><a href=\"#kmp\" class=\"headerlink\" title=\"kmp\"></a>kmp</h4><p>kmp","more":"()<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">nextfunc</span><span class=\"params\">(<span class=\"keyword\">char</span> p[],<span class=\"keyword\">int</span> next[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   next[<span class=\"number\">0</span>]=<span class=\"number\">-1</span>;</span><br><span class=\"line\">   next[<span class=\"number\">1</span>]=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> j=<span class=\"number\">1</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> k=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">while</span>(p[j]!=<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>||p[j]==p[k])</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t\t\t   ++j;</span><br><span class=\"line\">\t\t\t\t   ++k;</span><br><span class=\"line\">\t\t\t\t   next[j]=k;</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t\t   k=next[k];</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">kmp</span><span class=\"params\">(<span class=\"keyword\">char</span> s[],<span class=\"keyword\">char</span> p[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> j=<span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> next[<span class=\"number\">100</span>];</span><br><span class=\"line\">   nextfunc(p,next);</span><br><span class=\"line\">   <span class=\"keyword\">for</span> (i=<span class=\"number\">0</span>;s[i]!=<span class=\"string\">'\\0'</span>&amp;&amp;p[j]!=<span class=\"string\">'\\0'</span>;i++)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">\t\t   <span class=\"comment\">//if(j==-1)j=0;</span></span><br><span class=\"line\">\t\t   <span class=\"keyword\">if</span>(s[i]==p[j])</span><br><span class=\"line\">\t\t   &#123;</span><br><span class=\"line\">\t\t     j++;</span><br><span class=\"line\">\t\t\t <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t   &#125;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">while</span>(s[i]!=p[j]&amp;&amp;j&gt;=<span class=\"number\">0</span>)j=next[j];</span><br><span class=\"line\">\t\t   j++;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(p[j]==<span class=\"string\">'\\0'</span>)</span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> i-j;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span> a[<span class=\"number\">19</span>]=&#123;<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'s'</span>,<span class=\"string\">'s'</span>,<span class=\"string\">'f'</span>,<span class=\"string\">'r'</span>,<span class=\"string\">'e'</span>,<span class=\"string\">'r'</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">char</span> b[<span class=\"number\">10</span>]=&#123;<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'a'</span>,<span class=\"string\">'s'</span>&#125;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> pos=strStr(a,b);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;pos&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> pos2=kmp(a,b);</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;pos2&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li></li>\n<li><ul>\n<li>1.</li>\n<li>2.</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"-atoi\"><a href=\"#-atoi\" class=\"headerlink\" title=\"(atoi)\"></a>(atoi)</h5><ul>\n<li>int</li>\n<li>:<ul>\n<li>ASCII0-9033x8fe</li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>111+101=1100</li>\n<li><ul>\n<li><ol>\n<li>1</li>\n</ol>\n</li>\n<li>2.</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li></li>\n<li> =~</li>\n</ul>\n<h5 id=\"strtod-\"><a href=\"#strtod-\" class=\"headerlink\" title=\"strtod()\"></a>strtod()</h5><ul>\n<li>:1.0</li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li><h5 id=\"count-and-say\"><a href=\"#count-and-say\" class=\"headerlink\" title=\"count and say\"></a>count and say</h5></li>\n<li><br>1 11 21 1211 111221,<br>1,1111,1,21  </li>\n<li>n</li>\n<li></li>\n</ul>\n<h5 id=\"Anagrams\"><a href=\"#Anagrams\" class=\"headerlink\" title=\"Anagrams:\"></a>Anagrams:</h5><ul>\n<li>eattea</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>"},{"title":"tcpip_ARP","date":"2018-05-27T16:19:57.000Z","_content":"### ARP \n#### ARP\n+ ARPARPARPipmac\n+ ipipmac  \n  pc-->()--->--->  <!--more-->\n  -->--->-->....->\n+ pcip  \n  mac  \n  mac  \n  wifimac\n+ mac\n  arparpmacip\"\"\n+ tcpip14.2\n#### ARP\n+   \nping  \nstation  ---ARP request---->   AP  ARP    \nstation  <---ARP response ---  AP  ARP ,  \nstationAPmacAPMACmacmacAPAP\n+ AP()stationarp requeststationmacAP192.168.0.4staton,macstationarpstationmac\n+ arp  \n  1.ping  \n  2.tcpip  \n  3.arp\n#### ARPARP\n+ pingmacmac?)\n+ macmacmacwARP,\n+ tcpip4.6\n+ ARPippingip\n#### ARP\n+   ()\nmac(6) mac(6) (2)(0x0806)   \n28byte arp(2)|(2)|(1)|(1)|op(rarp 2)|mac(6)|ip(4)|mac(6)|ip(4)  \n+ mac1,10x0800,ipoparp12rarp3rarp4\n+ arp60mac14=4646-28=18\n+ arpwireshark,Omnipeek - Savvius,tcpdump,  \n tcpdump : sudo tcpdump -vv arp  \n ```c\n tcpdump: listening on wlp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes\n21:51:21.134575 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.101 tell 192.168.0.1, length 28 //ap ask me\n21:51:21.135404 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.110 tell 192.168.0.1, length 28\n21:51:21.135413 ARP, Ethernet (len 6), IPv4 (len 4), Reply 192.168.0.110 is-at 48:5a:b6:6e:c9:5f (oui Unknown), length 28// i reply ap\n21:51:32.081916 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.106 tell 192.168.0.1, length 28 //ask other\n```\n\n```c \n22:01:27.149947 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.107 tell 192.168.0.1, length 28\n\t0x0000:  0001 0800 0604 0001 206b e70f 1b42 c0a8  .........k...B..\n\t0x0010:  0001 0000 0000 0000 c0a8 006b            ...........k\n    \n    22:04:17.114593 ARP, Ethernet (len 6), IPv4 (len 4), Reply 192.168.0.110 is-at 48:5a:b6:6e:c9:5f (oui Unknown), length 28\n\t0x0000:  0001 0800 0604 0002 485a b66e c95f c0a8  ........HZ.n._..\n\t0x0010:  006e 206b e70f 1b42 c0a8 0001            .n.k...B....\n```\n\n#### ARP\n+ ARParp:  \n```\narp -a\n? (192.168.0.101) at 4c:32:75:3a:09:b3 [ether] on wlp2s0\n? (192.168.0.1) at 20:6b:e7:0f:1b:42 [ether] on wlp2s0\n? (192.168.0.108) at 94:d0:29:9d:74:dd [ether] on wlp2s0\n? (192.168.0.107) at 94:65:2d:ab:88:8b [ether] on wlp2s0\n```\n```\narp \nAddress                  HWtype  HWaddress           Flags Mask            Iface\n192.168.0.101            ether   4c:32:75:3a:09:b3   C                     wlp2s0\n192.168.0.1              ether   20:6b:e7:0f:1b:42   C                     wlp2s0\n```\n```c\nip neigh\n192.168.0.101 dev wlp2s0 lladdr 4c:32:75:3a:09:b3 STALE\n192.168.0.1 dev wlp2s0 lladdr 20:6b:e7:0f:1b:42 STALE\n192.168.0.108 dev wlp2s0 lladdr 94:d0:29:9d:74:dd STALE\n192.168.0.107 dev wlp2s0 lladdr 94:65:2d:ab:88:8b STALE\n192.168.0.104 dev wlp2s0 lladdr e4:9a:dc:b0:a5:36 STALE\n```\n+ arping  \nhttp://man.linuxde.net/arping\n+ arp \nman arp arp~\n#### ARP\n+ arp  \n+ arp\nhttp://www.jb51.net/LINUXjishu/65693.html\nLinuxARPsysctl -w net.ipv4.neigh.ethX=Y\n#### ARP\n+ PF_PACKETARP\n+ PF_PACKET\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>\n```\n\n```cpp\n//\nvoid GetEthInfor(char *name , char *MAC_addr , struct in_addr * IP_addr);\n//arp\nstruct ARP_PACKET\n{\n       //\n unsigned char dest_mac[6]; //6\n unsigned char sorce_mac[6];//6\n unsigned short type;       //2\n  //arp\n unsigned short hw_type;   //2     0x0001 mac\n unsigned short pro_type;  //2    0x0806 IPV4\n unsigned char hw_len;     //1  \n unsigned char pro_len;    //1\n unsigned short op;        //2           0x0001ARP0x0002ARP\n unsigned char from_mac[6];//6\n unsigned char from_ip[4]; //4\n unsigned char to_mac[6];  //6\n unsigned char to_ip[4];   //4\n unsigned char padding[18];//1846\n};\n//\nint main()\n{\n int i = 0;\n int fd = 0;\n int num=0;\n unsigned char MAC_ADDR[6];\n struct in_addr IP_ADDR;///netinet/in.h32IPv4.\n struct ARP_PACKET arp_pk={0};\n struct sockaddr_ll eth_info;/////linux/if_packet.h \n //MACIP\n GetEthInfor(\"wlp2s0\",MAC_ADDR,&IP_ADDR);\n   /*printf(\"The MAC_addr is:\");\n for(i =0 ;i<6;i++)\n    printf(\"%4X\",MAC_ADDR[i]); \n printf(\"\\n\");\n    printf(\"the IP is:%s\\n\",inet_ntoa(IP_ADDR));*/\n      \n    //ARP\n for(i=0;i<6;i++)                 //mac\n {\n  arp_pk.dest_mac[i]=0XFF;      \n }\n  \n for(i=0;i<6;i++)                 //mac\n {\n  arp_pk.sorce_mac[i]=MAC_ADDR[i];\n }\n   arp_pk.type = htons(0x0806);    //\n   arp_pk.hw_type = htons(0x0001); //0x0001MAC\n   arp_pk.pro_type = htons(0x0800);//0x0800IP\n   arp_pk.hw_len = 6;              //\n   arp_pk.pro_len = 4;             //\n   arp_pk.op = htons(0x0001);      //0x0001ARP\n\n   for(i=0;i<6;i++)                 //mac\n   {\n  arp_pk.from_mac[i]=MAC_ADDR[i];\n   }\n   in_addr_t ipaddr=inet_network(inet_ntoa(IP_ADDR));\n   for(i=3;i>=0;i--)                 //IP\n   {\n  arp_pk.from_ip[i]=(unsigned char)ipaddr&0xFF;\n   ipaddr=ipaddr>>8;\n  printf(\"-%d-\",arp_pk.from_ip[i]);\n   }\n /* arp_pk.from_ip[0]=192;\n  arp_pk.from_ip[1]=168;\n  arp_pk.from_ip[2]=199;\n  arp_pk.from_ip[3]=145;*/\n  \n   for(i=0;i<6;i++)                 //mac\n   {\n    arp_pk.to_mac[i]=0X00;\n   }\n  \n   arp_pk.to_ip[0]=0X0B;        //MACIP\n   arp_pk.to_ip[1]=0X40;\n   arp_pk.to_ip[2]=0X39;\n   arp_pk.to_ip[3]=0X0A;\n \n //sockaddr_ll eth_info\n    eth_info.sll_family = PF_PACKET;\n eth_info.sll_ifindex = if_nametoindex(\"wlp2s0\");//\n //printf(\"number is:%d\\n\",eth_info.sll_family);\n \n //\n fd = socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL));  //\n if(fd<0)\n {\n  printf(\"socket SOCK_RAW failed!\\n\");\n  exit(1);\n }\n\n \n\n //ARP\n num = sendto(fd , &arp_pk , sizeof(struct ARP_PACKET) , 0 ,(struct sockaddr*)(&eth_info),sizeof(eth_info));\n if(num<0)\n {\n  printf(\"sendto failed!\\n\");\n  exit(1);\n }\n        //ARP\n num = recvfrom(fd , &arp_pk , sizeof(struct ARP_PACKET) ,0,NULL,0);\n\n if(num<0)\n {\n  printf(\"rcvfrom failed!\\n\");\n  exit(1);\n }\n else\n {\n  printf(\"I receive %d bytes!\\n\",num);\n  printf(\"the mac  is:\");\n  for(i=0;i<6;i++)\n  {\n   printf(\"%4X \",arp_pk.from_mac[i]);\n  }\n  printf(\"op:%d\\n\",arp_pk.op);\n for(i=0;i<4;i++)\n  {\n   printf(\"%d. \",arp_pk.to_ip[i]);\n  }\n  printf(\"\\n\");\n }\n\n close(fd);\n return 0;\n}\n\nvoid GetEthInfor(char *name ,  char *MAC_addr , struct in_addr * IP_addr)\n{\n struct ifreq  eth;  //\n///net/if.h,\n   int fd;             //\n int temp=0;         //\n int i=0;            //\n \n strncpy(eth.ifr_name,name,sizeof(struct ifreq)-1);\n// fd = socket(AF_INET,SOCK_DGRAM,0);\n // fd=socket(AF_INET,SOCK_STREAM,0); \n    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));\nif(fd<0)\n {\n   printf(\"socket failed!\\n\");\n   exit(1);\n }\n //MAC\n   temp = ioctl(fd,SIOCGIFHWADDR,&eth);\n if(temp<0)\n {\n  printf(\"ioctl--get hardware addr failed!\\n\");\n  exit(1);\n        }\n strncpy(MAC_addr,eth.ifr_hwaddr.sa_data,6);\n printf(\"The MAC_addr is:\");\n for(i =0 ;i<6;i++)\n  printf(\"%4X\",(unsigned char)eth.ifr_hwaddr.sa_data[i]); \n printf(\"\\n\");\n       \n        //IP\n   temp = ioctl(fd,SIOCGIFADDR,&eth);\n if(temp<0)\n {\n  printf(\"ioctl--get hardware addr failed!\\n\");\n  exit(1);\n        }\n memcpy(IP_addr ,&(((struct sockaddr_in *)(&eth.ifr_addr))->sin_addr),4);\n //\n  printf(\"got ipaddr:%s\\n\",inet_ntoa(*IP_addr));\n/*i=0;\nprintf(\"get the MAC_ADDR:\\n\");\nfor(i;i<6;i++)\n  printf(\"%.2X:\",MAC_addr[i]&0xFF);*/\n   close(fd);\n}\n//arp\n//arplinux\n/*eg:\ntypedef struct _tagARP_PACKET{    \n    struct ether_header  eh;    ///net/ethernet.h\n    struct ether_arp arp;    \n}ARP_PACKET_OBJ, *ARP_PACKET_HANDLE; /netinet/if_ether.h;/net/if_arp.h\n*/\n\n/*sockaddr_ll eth_info,\n:ioctlstruct ifreq*/\n/*  struct sockaddr_ll{\n    unsigned short sll_family; // AF_PACKET \n    unsigned short sll_protocol; //  \n    int sll_ifindex; // \n    unsigned short sll_hatype; //  \n    unsigned char sll_pkttype; //  \n    unsigned char sll_halen; //  \n    unsigned char sll_addr[8]; //  \n};\neg:\n*     struct sockaddr_ll peer_addr;  \n*    memset(&peer_addr, 0, sizeof(peer_addr));    \n        peer_addr.sll_family = AF_PACKET;    \n        struct ifreq req;  \n    bzero(&req, sizeof(struct ifreq));  \n        strcpy(req.ifr_name, \"eth0\");    \n        if(ioctl(sockfd, SIOCGIFINDEX, &req) != 0)  \n        perror(\"ioctl()\");    \n        peer_addr.sll_ifindex = req.ifr_ifindex;    \n        peer_addr.sll_protocol = htons(ETH_P_ARP);  \n\n*/\n/*man packet\n * AF_PACKET linux.\n *  2\n          SOCK_DGRAM----\n          SOCK_RAW------ \n          * SOCK_RAW,MAC\n          * MAClinux/if_ether.hethhdr\n          * SOCK_DGRAMMAC\n          * \n   :IP ,ARP,RARP\n   * \n   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)\n  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)\n    2)IEEE\n     3IANA\n      ETH_P_ALL\n      0x88b50x88b6 \n      */\n   /*read writeUDP*/\n```\n\nip\n```cpp\n/*proc*/\nvoid GetGateWayIP(uint8 *ip_addr)\n{\n      char inf[100];\n      FILE *file_fd;\n      uint8 high=0,low=0,value;\n      int i;\n      file_fd = fopen(\"/proc/net/route\",\"r\");\n      if(file_fd==NULL)\n      {\n            printf(\"can not open /proc/net/route\\n\");\n      }\n      else\n     {\n             while(!feof(file_fd))\n             {\n                     memset(inf,0,sizeof(inf));\n                     fgets(inf,100,file_fd);\n                     if(inf[5]=='0'&&inf[6]=='0'&&inf[7]=='0'&&inf[8]=='0'&&inf[9]=='0'&&inf[10]=='0'&&inf[11]=='0'&&inf[12]=='0')\n                     {\n                              for(i=20;i>=14;i-=2)\n                              {\n                                         if(inf[i]>=65)\n                                                 high = inf[i]-55;\n                                         else\n                                                 high = inf[i]-48;\n                                         if(inf[i+1]>=65)\n                                                 low = inf[i+1]-55;\n                                         else\n                                                 low = inf[i+1]-48;\n                                        value = high*16+low;\n                                       ip_addr[10-i/2] = value;\n                              }\n                              break;\n                       }\n              }\n      }\n}```\n#### ARP\n+ ARP\n  \nwifistaip,ip\n+ pf_packet  \n1AmacB,A,B  \n   Bmacapap  \n2ABipAP ,AB ARPBarpping\n+ \nhttp://www.freebuf.com/articles/system/5157.html\nemm,can also make your own program,  \n+ arp   \nA,Barp   \nA ,BAParpmacapap    \narpBBAARPAP ,ARPmacapip\nAPAAipmac   \nABAPB ,APBAB,B  \necho 1 >> /proc/sys/net/ipv4/ip_forwardroot  \n\n","source":"_posts/tcpip-ARP.md","raw":"---\ntitle: tcpip_ARP\ndate: 2018-05-28 00:19:57\ntags: tcpip_mac\ncategories: tcpip\n---\n### ARP \n#### ARP\n+ ARPARPARPipmac\n+ ipipmac  \n  pc-->()--->--->  <!--more-->\n  -->--->-->....->\n+ pcip  \n  mac  \n  mac  \n  wifimac\n+ mac\n  arparpmacip\"\"\n+ tcpip14.2\n#### ARP\n+   \nping  \nstation  ---ARP request---->   AP  ARP    \nstation  <---ARP response ---  AP  ARP ,  \nstationAPmacAPMACmacmacAPAP\n+ AP()stationarp requeststationmacAP192.168.0.4staton,macstationarpstationmac\n+ arp  \n  1.ping  \n  2.tcpip  \n  3.arp\n#### ARPARP\n+ pingmacmac?)\n+ macmacmacwARP,\n+ tcpip4.6\n+ ARPippingip\n#### ARP\n+   ()\nmac(6) mac(6) (2)(0x0806)   \n28byte arp(2)|(2)|(1)|(1)|op(rarp 2)|mac(6)|ip(4)|mac(6)|ip(4)  \n+ mac1,10x0800,ipoparp12rarp3rarp4\n+ arp60mac14=4646-28=18\n+ arpwireshark,Omnipeek - Savvius,tcpdump,  \n tcpdump : sudo tcpdump -vv arp  \n ```c\n tcpdump: listening on wlp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes\n21:51:21.134575 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.101 tell 192.168.0.1, length 28 //ap ask me\n21:51:21.135404 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.110 tell 192.168.0.1, length 28\n21:51:21.135413 ARP, Ethernet (len 6), IPv4 (len 4), Reply 192.168.0.110 is-at 48:5a:b6:6e:c9:5f (oui Unknown), length 28// i reply ap\n21:51:32.081916 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.106 tell 192.168.0.1, length 28 //ask other\n```\n\n```c \n22:01:27.149947 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.0.107 tell 192.168.0.1, length 28\n\t0x0000:  0001 0800 0604 0001 206b e70f 1b42 c0a8  .........k...B..\n\t0x0010:  0001 0000 0000 0000 c0a8 006b            ...........k\n    \n    22:04:17.114593 ARP, Ethernet (len 6), IPv4 (len 4), Reply 192.168.0.110 is-at 48:5a:b6:6e:c9:5f (oui Unknown), length 28\n\t0x0000:  0001 0800 0604 0002 485a b66e c95f c0a8  ........HZ.n._..\n\t0x0010:  006e 206b e70f 1b42 c0a8 0001            .n.k...B....\n```\n\n#### ARP\n+ ARParp:  \n```\narp -a\n? (192.168.0.101) at 4c:32:75:3a:09:b3 [ether] on wlp2s0\n? (192.168.0.1) at 20:6b:e7:0f:1b:42 [ether] on wlp2s0\n? (192.168.0.108) at 94:d0:29:9d:74:dd [ether] on wlp2s0\n? (192.168.0.107) at 94:65:2d:ab:88:8b [ether] on wlp2s0\n```\n```\narp \nAddress                  HWtype  HWaddress           Flags Mask            Iface\n192.168.0.101            ether   4c:32:75:3a:09:b3   C                     wlp2s0\n192.168.0.1              ether   20:6b:e7:0f:1b:42   C                     wlp2s0\n```\n```c\nip neigh\n192.168.0.101 dev wlp2s0 lladdr 4c:32:75:3a:09:b3 STALE\n192.168.0.1 dev wlp2s0 lladdr 20:6b:e7:0f:1b:42 STALE\n192.168.0.108 dev wlp2s0 lladdr 94:d0:29:9d:74:dd STALE\n192.168.0.107 dev wlp2s0 lladdr 94:65:2d:ab:88:8b STALE\n192.168.0.104 dev wlp2s0 lladdr e4:9a:dc:b0:a5:36 STALE\n```\n+ arping  \nhttp://man.linuxde.net/arping\n+ arp \nman arp arp~\n#### ARP\n+ arp  \n+ arp\nhttp://www.jb51.net/LINUXjishu/65693.html\nLinuxARPsysctl -w net.ipv4.neigh.ethX=Y\n#### ARP\n+ PF_PACKETARP\n+ PF_PACKET\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>\n```\n\n```cpp\n//\nvoid GetEthInfor(char *name , char *MAC_addr , struct in_addr * IP_addr);\n//arp\nstruct ARP_PACKET\n{\n       //\n unsigned char dest_mac[6]; //6\n unsigned char sorce_mac[6];//6\n unsigned short type;       //2\n  //arp\n unsigned short hw_type;   //2     0x0001 mac\n unsigned short pro_type;  //2    0x0806 IPV4\n unsigned char hw_len;     //1  \n unsigned char pro_len;    //1\n unsigned short op;        //2           0x0001ARP0x0002ARP\n unsigned char from_mac[6];//6\n unsigned char from_ip[4]; //4\n unsigned char to_mac[6];  //6\n unsigned char to_ip[4];   //4\n unsigned char padding[18];//1846\n};\n//\nint main()\n{\n int i = 0;\n int fd = 0;\n int num=0;\n unsigned char MAC_ADDR[6];\n struct in_addr IP_ADDR;///netinet/in.h32IPv4.\n struct ARP_PACKET arp_pk={0};\n struct sockaddr_ll eth_info;/////linux/if_packet.h \n //MACIP\n GetEthInfor(\"wlp2s0\",MAC_ADDR,&IP_ADDR);\n   /*printf(\"The MAC_addr is:\");\n for(i =0 ;i<6;i++)\n    printf(\"%4X\",MAC_ADDR[i]); \n printf(\"\\n\");\n    printf(\"the IP is:%s\\n\",inet_ntoa(IP_ADDR));*/\n      \n    //ARP\n for(i=0;i<6;i++)                 //mac\n {\n  arp_pk.dest_mac[i]=0XFF;      \n }\n  \n for(i=0;i<6;i++)                 //mac\n {\n  arp_pk.sorce_mac[i]=MAC_ADDR[i];\n }\n   arp_pk.type = htons(0x0806);    //\n   arp_pk.hw_type = htons(0x0001); //0x0001MAC\n   arp_pk.pro_type = htons(0x0800);//0x0800IP\n   arp_pk.hw_len = 6;              //\n   arp_pk.pro_len = 4;             //\n   arp_pk.op = htons(0x0001);      //0x0001ARP\n\n   for(i=0;i<6;i++)                 //mac\n   {\n  arp_pk.from_mac[i]=MAC_ADDR[i];\n   }\n   in_addr_t ipaddr=inet_network(inet_ntoa(IP_ADDR));\n   for(i=3;i>=0;i--)                 //IP\n   {\n  arp_pk.from_ip[i]=(unsigned char)ipaddr&0xFF;\n   ipaddr=ipaddr>>8;\n  printf(\"-%d-\",arp_pk.from_ip[i]);\n   }\n /* arp_pk.from_ip[0]=192;\n  arp_pk.from_ip[1]=168;\n  arp_pk.from_ip[2]=199;\n  arp_pk.from_ip[3]=145;*/\n  \n   for(i=0;i<6;i++)                 //mac\n   {\n    arp_pk.to_mac[i]=0X00;\n   }\n  \n   arp_pk.to_ip[0]=0X0B;        //MACIP\n   arp_pk.to_ip[1]=0X40;\n   arp_pk.to_ip[2]=0X39;\n   arp_pk.to_ip[3]=0X0A;\n \n //sockaddr_ll eth_info\n    eth_info.sll_family = PF_PACKET;\n eth_info.sll_ifindex = if_nametoindex(\"wlp2s0\");//\n //printf(\"number is:%d\\n\",eth_info.sll_family);\n \n //\n fd = socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL));  //\n if(fd<0)\n {\n  printf(\"socket SOCK_RAW failed!\\n\");\n  exit(1);\n }\n\n \n\n //ARP\n num = sendto(fd , &arp_pk , sizeof(struct ARP_PACKET) , 0 ,(struct sockaddr*)(&eth_info),sizeof(eth_info));\n if(num<0)\n {\n  printf(\"sendto failed!\\n\");\n  exit(1);\n }\n        //ARP\n num = recvfrom(fd , &arp_pk , sizeof(struct ARP_PACKET) ,0,NULL,0);\n\n if(num<0)\n {\n  printf(\"rcvfrom failed!\\n\");\n  exit(1);\n }\n else\n {\n  printf(\"I receive %d bytes!\\n\",num);\n  printf(\"the mac  is:\");\n  for(i=0;i<6;i++)\n  {\n   printf(\"%4X \",arp_pk.from_mac[i]);\n  }\n  printf(\"op:%d\\n\",arp_pk.op);\n for(i=0;i<4;i++)\n  {\n   printf(\"%d. \",arp_pk.to_ip[i]);\n  }\n  printf(\"\\n\");\n }\n\n close(fd);\n return 0;\n}\n\nvoid GetEthInfor(char *name ,  char *MAC_addr , struct in_addr * IP_addr)\n{\n struct ifreq  eth;  //\n///net/if.h,\n   int fd;             //\n int temp=0;         //\n int i=0;            //\n \n strncpy(eth.ifr_name,name,sizeof(struct ifreq)-1);\n// fd = socket(AF_INET,SOCK_DGRAM,0);\n // fd=socket(AF_INET,SOCK_STREAM,0); \n    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));\nif(fd<0)\n {\n   printf(\"socket failed!\\n\");\n   exit(1);\n }\n //MAC\n   temp = ioctl(fd,SIOCGIFHWADDR,&eth);\n if(temp<0)\n {\n  printf(\"ioctl--get hardware addr failed!\\n\");\n  exit(1);\n        }\n strncpy(MAC_addr,eth.ifr_hwaddr.sa_data,6);\n printf(\"The MAC_addr is:\");\n for(i =0 ;i<6;i++)\n  printf(\"%4X\",(unsigned char)eth.ifr_hwaddr.sa_data[i]); \n printf(\"\\n\");\n       \n        //IP\n   temp = ioctl(fd,SIOCGIFADDR,&eth);\n if(temp<0)\n {\n  printf(\"ioctl--get hardware addr failed!\\n\");\n  exit(1);\n        }\n memcpy(IP_addr ,&(((struct sockaddr_in *)(&eth.ifr_addr))->sin_addr),4);\n //\n  printf(\"got ipaddr:%s\\n\",inet_ntoa(*IP_addr));\n/*i=0;\nprintf(\"get the MAC_ADDR:\\n\");\nfor(i;i<6;i++)\n  printf(\"%.2X:\",MAC_addr[i]&0xFF);*/\n   close(fd);\n}\n//arp\n//arplinux\n/*eg:\ntypedef struct _tagARP_PACKET{    \n    struct ether_header  eh;    ///net/ethernet.h\n    struct ether_arp arp;    \n}ARP_PACKET_OBJ, *ARP_PACKET_HANDLE; /netinet/if_ether.h;/net/if_arp.h\n*/\n\n/*sockaddr_ll eth_info,\n:ioctlstruct ifreq*/\n/*  struct sockaddr_ll{\n    unsigned short sll_family; // AF_PACKET \n    unsigned short sll_protocol; //  \n    int sll_ifindex; // \n    unsigned short sll_hatype; //  \n    unsigned char sll_pkttype; //  \n    unsigned char sll_halen; //  \n    unsigned char sll_addr[8]; //  \n};\neg:\n*     struct sockaddr_ll peer_addr;  \n*    memset(&peer_addr, 0, sizeof(peer_addr));    \n        peer_addr.sll_family = AF_PACKET;    \n        struct ifreq req;  \n    bzero(&req, sizeof(struct ifreq));  \n        strcpy(req.ifr_name, \"eth0\");    \n        if(ioctl(sockfd, SIOCGIFINDEX, &req) != 0)  \n        perror(\"ioctl()\");    \n        peer_addr.sll_ifindex = req.ifr_ifindex;    \n        peer_addr.sll_protocol = htons(ETH_P_ARP);  \n\n*/\n/*man packet\n * AF_PACKET linux.\n *  2\n          SOCK_DGRAM----\n          SOCK_RAW------ \n          * SOCK_RAW,MAC\n          * MAClinux/if_ether.hethhdr\n          * SOCK_DGRAMMAC\n          * \n   :IP ,ARP,RARP\n   * \n   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)\n  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)\n    2)IEEE\n     3IANA\n      ETH_P_ALL\n      0x88b50x88b6 \n      */\n   /*read writeUDP*/\n```\n\nip\n```cpp\n/*proc*/\nvoid GetGateWayIP(uint8 *ip_addr)\n{\n      char inf[100];\n      FILE *file_fd;\n      uint8 high=0,low=0,value;\n      int i;\n      file_fd = fopen(\"/proc/net/route\",\"r\");\n      if(file_fd==NULL)\n      {\n            printf(\"can not open /proc/net/route\\n\");\n      }\n      else\n     {\n             while(!feof(file_fd))\n             {\n                     memset(inf,0,sizeof(inf));\n                     fgets(inf,100,file_fd);\n                     if(inf[5]=='0'&&inf[6]=='0'&&inf[7]=='0'&&inf[8]=='0'&&inf[9]=='0'&&inf[10]=='0'&&inf[11]=='0'&&inf[12]=='0')\n                     {\n                              for(i=20;i>=14;i-=2)\n                              {\n                                         if(inf[i]>=65)\n                                                 high = inf[i]-55;\n                                         else\n                                                 high = inf[i]-48;\n                                         if(inf[i+1]>=65)\n                                                 low = inf[i+1]-55;\n                                         else\n                                                 low = inf[i+1]-48;\n                                        value = high*16+low;\n                                       ip_addr[10-i/2] = value;\n                              }\n                              break;\n                       }\n              }\n      }\n}```\n#### ARP\n+ ARP\n  \nwifistaip,ip\n+ pf_packet  \n1AmacB,A,B  \n   Bmacapap  \n2ABipAP ,AB ARPBarpping\n+ \nhttp://www.freebuf.com/articles/system/5157.html\nemm,can also make your own program,  \n+ arp   \nA,Barp   \nA ,BAParpmacapap    \narpBBAARPAP ,ARPmacapip\nAPAAipmac   \nABAPB ,APBAB,B  \necho 1 >> /proc/sys/net/ipv4/ip_forwardroot  \n\n","slug":"tcpip-ARP","published":1,"updated":"2018-05-30T16:08:56.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpw002h00jx342mpmrp","content":"<h3 id=\"ARP-\"><a href=\"#ARP-\" class=\"headerlink\" title=\"ARP \"></a>ARP </h3><h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARPARPARPipmac</li>\n<li>ipipmac<br>pc&gt;()&gt;&gt;  <a id=\"more\"></a><br>&gt;&gt;&gt;.-&gt;</li>\n<li>pcip<br>mac<br>mac<br>wifimac</li>\n<li>mac<br>arparpmacip</li>\n<li>tcpip14.2<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li><br>ping<br>station  ARP request-&gt;   AP  ARP<br>station  &lt;ARP response   AP  ARP ,<br>stationAPmacAPMACmacmacAPAP</li>\n<li>AP()stationarp requeststationmacAP192.168.0.4staton,macstationarpstationmac</li>\n<li>arp<br>1.ping<br>2.tcpip<br>3.arp<h4 id=\"ARPARP\"><a href=\"#ARPARP\" class=\"headerlink\" title=\"ARPARP\"></a>ARPARP</h4></li>\n<li>pingmacmac?)</li>\n<li>macmacmacwARP,</li>\n<li>tcpip4.6</li>\n<li>ARPippingip<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>  ()<br>mac(6) mac(6) (2)(0x0806)<br>28byte arp(2)|(2)|(1)|(1)|op(rarp 2)|mac(6)|ip(4)|mac(6)|ip(4)  </li>\n<li>mac1,10x0800,ipoparp12rarp3rarp4</li>\n<li>arp60mac14=4646-28=18</li>\n<li>arpwireshark,Omnipeek - Savvius,tcpdump,<br>tcpdump : sudo tcpdump -vv arp  <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> tcpdump: listening on wlp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.134575</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.101</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span> <span class=\"comment\">//ap ask me</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.135404</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.135413</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Reply <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> is-at <span class=\"number\">48</span>:<span class=\"number\">5</span>a:b6:<span class=\"number\">6</span>e:c9:<span class=\"number\">5f</span> (oui Unknown), length <span class=\"number\">28</span><span class=\"comment\">// i reply ap</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">32.081916</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.106</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span> <span class=\"comment\">//ask other</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">01</span>:<span class=\"number\">27.149947</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.107</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span></span><br><span class=\"line\">\t<span class=\"number\">0x0000</span>:  <span class=\"number\">0001</span> <span class=\"number\">0800</span> <span class=\"number\">0604</span> <span class=\"number\">0001</span> <span class=\"number\">206b</span> e70f <span class=\"number\">1b</span>42 c0a8  .........k...B..</span><br><span class=\"line\">\t<span class=\"number\">0x0010</span>:  <span class=\"number\">0001</span> <span class=\"number\">0000</span> <span class=\"number\">0000</span> <span class=\"number\">0000</span> c0a8 <span class=\"number\">006b</span>            ...........k</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"number\">22</span>:<span class=\"number\">04</span>:<span class=\"number\">17.114593</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Reply <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> is-at <span class=\"number\">48</span>:<span class=\"number\">5</span>a:b6:<span class=\"number\">6</span>e:c9:<span class=\"number\">5f</span> (oui Unknown), length <span class=\"number\">28</span></span><br><span class=\"line\">\t<span class=\"number\">0x0000</span>:  <span class=\"number\">0001</span> <span class=\"number\">0800</span> <span class=\"number\">0604</span> <span class=\"number\">0002</span> <span class=\"number\">485</span>a b66e c95f c0a8  ........HZ.n._..</span><br><span class=\"line\">\t<span class=\"number\">0x0010</span>:  <span class=\"number\">006</span>e <span class=\"number\">206b</span> e70f <span class=\"number\">1b</span>42 c0a8 <span class=\"number\">0001</span>            .n.k...B....</span><br></pre></td></tr></table></figure>\n<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARParp:  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">arp</span> <span class=\"selector-tag\">-a</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.101</span>) <span class=\"selector-tag\">at</span> 4<span class=\"selector-tag\">c</span><span class=\"selector-pseudo\">:32</span><span class=\"selector-pseudo\">:75</span><span class=\"selector-pseudo\">:3a</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:b3</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span>) <span class=\"selector-tag\">at</span> 20<span class=\"selector-pseudo\">:6b</span><span class=\"selector-pseudo\">:e7</span><span class=\"selector-pseudo\">:0f</span><span class=\"selector-pseudo\">:1b</span><span class=\"selector-pseudo\">:42</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.108</span>) <span class=\"selector-tag\">at</span> 94<span class=\"selector-pseudo\">:d0</span><span class=\"selector-pseudo\">:29</span><span class=\"selector-pseudo\">:9d</span><span class=\"selector-pseudo\">:74</span><span class=\"selector-pseudo\">:dd</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.107</span>) <span class=\"selector-tag\">at</span> 94<span class=\"selector-pseudo\">:65</span><span class=\"selector-pseudo\">:2d</span><span class=\"selector-pseudo\">:ab</span><span class=\"selector-pseudo\">:88</span><span class=\"selector-pseudo\">:8b</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">arp</span> </span><br><span class=\"line\"><span class=\"selector-tag\">Address</span>                  <span class=\"selector-tag\">HWtype</span>  <span class=\"selector-tag\">HWaddress</span>           <span class=\"selector-tag\">Flags</span> <span class=\"selector-tag\">Mask</span>            <span class=\"selector-tag\">Iface</span></span><br><span class=\"line\">192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.101</span>            <span class=\"selector-tag\">ether</span>   4<span class=\"selector-tag\">c</span><span class=\"selector-pseudo\">:32</span><span class=\"selector-pseudo\">:75</span><span class=\"selector-pseudo\">:3a</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:b3</span>   <span class=\"selector-tag\">C</span>                     <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span>              <span class=\"selector-tag\">ether</span>   20<span class=\"selector-pseudo\">:6b</span><span class=\"selector-pseudo\">:e7</span><span class=\"selector-pseudo\">:0f</span><span class=\"selector-pseudo\">:1b</span><span class=\"selector-pseudo\">:42</span>   <span class=\"selector-tag\">C</span>                     <span class=\"selector-tag\">wlp2s0</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip neigh</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.101</span> dev wlp2s0 lladdr <span class=\"number\">4</span>c:<span class=\"number\">32</span>:<span class=\"number\">75</span>:<span class=\"number\">3</span>a:<span class=\"number\">09</span>:b3 STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span> dev wlp2s0 lladdr <span class=\"number\">20</span>:<span class=\"number\">6b</span>:e7:<span class=\"number\">0f</span>:<span class=\"number\">1b</span>:<span class=\"number\">42</span> STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.108</span> dev wlp2s0 lladdr <span class=\"number\">94</span>:d0:<span class=\"number\">29</span>:<span class=\"number\">9</span>d:<span class=\"number\">74</span>:dd STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.107</span> dev wlp2s0 lladdr <span class=\"number\">94</span>:<span class=\"number\">65</span>:<span class=\"number\">2</span>d:ab:<span class=\"number\">88</span>:<span class=\"number\">8b</span> STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.104</span> dev wlp2s0 lladdr e4:<span class=\"number\">9</span>a:dc:b0:a5:<span class=\"number\">36</span> STALE</span><br></pre></td></tr></table></figure>\n<ul>\n<li>arping<br><a href=\"http://man.linuxde.net/arping\" target=\"_blank\" rel=\"noopener\">http://man.linuxde.net/arping</a></li>\n<li>arp <br>man arp arp~<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>arp  </li>\n<li>arp<br><a href=\"http://www.jb51.net/LINUXjishu/65693.html\" target=\"_blank\" rel=\"noopener\">http://www.jb51.net/LINUXjishu/65693.html</a><br>LinuxARPsysctl -w net.ipv4.neigh.ethX=Y<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>PF_PACKETARP</li>\n<li>PF_PACKET<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name , <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//arp</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ARP_PACKET</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">       <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> dest_mac[<span class=\"number\">6</span>]; <span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> sorce_mac[<span class=\"number\">6</span>];<span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> type;       <span class=\"comment\">//2</span></span><br><span class=\"line\">  <span class=\"comment\">//arp</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> hw_type;   <span class=\"comment\">//2     0x0001 mac</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> pro_type;  <span class=\"comment\">//2    0x0806 IPV4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> hw_len;     <span class=\"comment\">//1  </span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> pro_len;    <span class=\"comment\">//1</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> op;        <span class=\"comment\">//2           0x0001ARP0x0002ARP</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> from_mac[<span class=\"number\">6</span>];<span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> from_ip[<span class=\"number\">4</span>]; <span class=\"comment\">//4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> to_mac[<span class=\"number\">6</span>];  <span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> to_ip[<span class=\"number\">4</span>];   <span class=\"comment\">//4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> padding[<span class=\"number\">18</span>];<span class=\"comment\">//1846</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> fd = <span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> num=<span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> MAC_ADDR[<span class=\"number\">6</span>];</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">in_addr</span> <span class=\"title\">IP_ADDR</span>;</span><span class=\"comment\">///netinet/in.h32IPv4.</span></span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ARP_PACKET</span> <span class=\"title\">arp_pk</span>=&#123;</span><span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_ll</span> <span class=\"title\">eth_info</span>;</span><span class=\"comment\">/////linux/if_packet.h </span></span><br><span class=\"line\"> <span class=\"comment\">//MACIP</span></span><br><span class=\"line\"> GetEthInfor(<span class=\"string\">\"wlp2s0\"</span>,MAC_ADDR,&amp;IP_ADDR);</span><br><span class=\"line\">   <span class=\"comment\">/*printf(\"The MAC_addr is:\");</span></span><br><span class=\"line\"><span class=\"comment\"> for(i =0 ;i&lt;6;i++)</span></span><br><span class=\"line\"><span class=\"comment\">    printf(\"%4X\",MAC_ADDR[i]); </span></span><br><span class=\"line\"><span class=\"comment\"> printf(\"\\n\");</span></span><br><span class=\"line\"><span class=\"comment\">    printf(\"the IP is:%s\\n\",inet_ntoa(IP_ADDR));*/</span></span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  arp_pk.dest_mac[i]=<span class=\"number\">0XFF</span>;      </span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  arp_pk.sorce_mac[i]=MAC_ADDR[i];</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">   arp_pk.type = htons(<span class=\"number\">0x0806</span>);    <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.hw_type = htons(<span class=\"number\">0x0001</span>); <span class=\"comment\">//0x0001MAC</span></span><br><span class=\"line\">   arp_pk.pro_type = htons(<span class=\"number\">0x0800</span>);<span class=\"comment\">//0x0800IP</span></span><br><span class=\"line\">   arp_pk.hw_len = <span class=\"number\">6</span>;              <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.pro_len = <span class=\"number\">4</span>;             <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.op = htons(<span class=\"number\">0x0001</span>);      <span class=\"comment\">//0x0001ARP</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">  arp_pk.from_mac[i]=MAC_ADDR[i];</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">in_addr_t</span> ipaddr=inet_network(inet_ntoa(IP_ADDR));</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">3</span>;i&gt;=<span class=\"number\">0</span>;i--)                 <span class=\"comment\">//IP</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">  arp_pk.from_ip[i]=(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)ipaddr&amp;<span class=\"number\">0xFF</span>;</span><br><span class=\"line\">   ipaddr=ipaddr&gt;&gt;<span class=\"number\">8</span>;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"-%d-\"</span>,arp_pk.from_ip[i]);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> <span class=\"comment\">/* arp_pk.from_ip[0]=192;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[1]=168;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[2]=199;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[3]=145;*/</span></span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">    arp_pk.to_mac[i]=<span class=\"number\">0X00</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">0</span>]=<span class=\"number\">0X0B</span>;        <span class=\"comment\">//MACIP</span></span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">1</span>]=<span class=\"number\">0X40</span>;</span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">2</span>]=<span class=\"number\">0X39</span>;</span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">3</span>]=<span class=\"number\">0X0A</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//sockaddr_ll eth_info</span></span><br><span class=\"line\">    eth_info.sll_family = PF_PACKET;</span><br><span class=\"line\"> eth_info.sll_ifindex = if_nametoindex(<span class=\"string\">\"wlp2s0\"</span>);<span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"comment\">//printf(\"number is:%d\\n\",eth_info.sll_family);</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\"> fd = socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL));  <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket SOCK_RAW failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> num = sendto(fd , &amp;arp_pk , <span class=\"keyword\">sizeof</span>(struct ARP_PACKET) , <span class=\"number\">0</span> ,(struct sockaddr*)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info));</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"sendto failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> num = recvfrom(fd , &amp;arp_pk , <span class=\"keyword\">sizeof</span>(struct ARP_PACKET) ,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"rcvfrom failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"keyword\">else</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"I receive %d bytes!\\n\"</span>,num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"the mac  is:\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X \"</span>,arp_pk.from_mac[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"op:%d\\n\"</span>,arp_pk.op);</span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">4</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d. \"</span>,arp_pk.to_ip[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> close(fd);</span><br><span class=\"line\"> <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name ,  <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span>  <span class=\"title\">eth</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">///net/if.h,</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> fd;             <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">int</span> temp=<span class=\"number\">0</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;            <span class=\"comment\">//</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"built_in\">strncpy</span>(eth.ifr_name,name,<span class=\"keyword\">sizeof</span>(struct ifreq)<span class=\"number\">-1</span>);</span><br><span class=\"line\"><span class=\"comment\">// fd = socket(AF_INET,SOCK_DGRAM,0);</span></span><br><span class=\"line\"> <span class=\"comment\">// fd=socket(AF_INET,SOCK_STREAM,0); </span></span><br><span class=\"line\">    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));</span><br><span class=\"line\"><span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket failed!\\n\"</span>);</span><br><span class=\"line\">   <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"comment\">//MAC</span></span><br><span class=\"line\">   temp = ioctl(fd,SIOCGIFHWADDR,&amp;eth);</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> <span class=\"built_in\">strncpy</span>(MAC_addr,eth.ifr_hwaddr.sa_data,<span class=\"number\">6</span>);</span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"The MAC_addr is:\"</span>);</span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i =<span class=\"number\">0</span> ;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X\"</span>,(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)eth.ifr_hwaddr.sa_data[i]); </span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//IP</span></span><br><span class=\"line\">   temp = ioctl(fd,SIOCGIFADDR,&amp;eth);</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> <span class=\"built_in\">memcpy</span>(IP_addr ,&amp;(((struct sockaddr_in *)(&amp;eth.ifr_addr))-&gt;sin_addr),<span class=\"number\">4</span>);</span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"got ipaddr:%s\\n\"</span>,inet_ntoa(*IP_addr));</span><br><span class=\"line\"><span class=\"comment\">/*i=0;</span></span><br><span class=\"line\"><span class=\"comment\">printf(\"get the MAC_ADDR:\\n\");</span></span><br><span class=\"line\"><span class=\"comment\">for(i;i&lt;6;i++)</span></span><br><span class=\"line\"><span class=\"comment\">  printf(\"%.2X:\",MAC_addr[i]&amp;0xFF);*/</span></span><br><span class=\"line\">   close(fd);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//arp</span></span><br><span class=\"line\"><span class=\"comment\">//arplinux</span></span><br><span class=\"line\"><span class=\"comment\">/*eg:</span></span><br><span class=\"line\"><span class=\"comment\">typedef struct _tagARP_PACKET&#123;    </span></span><br><span class=\"line\"><span class=\"comment\">    struct ether_header  eh;    ///net/ethernet.h</span></span><br><span class=\"line\"><span class=\"comment\">    struct ether_arp arp;    </span></span><br><span class=\"line\"><span class=\"comment\">&#125;ARP_PACKET_OBJ, *ARP_PACKET_HANDLE; /netinet/if_ether.h;/net/if_arp.h</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*sockaddr_ll eth_info,</span></span><br><span class=\"line\"><span class=\"comment\">:ioctlstruct ifreq*/</span></span><br><span class=\"line\"><span class=\"comment\">/*  struct sockaddr_ll&#123;</span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_family; // AF_PACKET </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_protocol; //  </span></span><br><span class=\"line\"><span class=\"comment\">    int sll_ifindex; // </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_hatype; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_pkttype; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_halen; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_addr[8]; //  </span></span><br><span class=\"line\"><span class=\"comment\">&#125;;</span></span><br><span class=\"line\"><span class=\"comment\">eg:</span></span><br><span class=\"line\"><span class=\"comment\">*     struct sockaddr_ll peer_addr;  </span></span><br><span class=\"line\"><span class=\"comment\">*    memset(&amp;peer_addr, 0, sizeof(peer_addr));    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_family = AF_PACKET;    </span></span><br><span class=\"line\"><span class=\"comment\">        struct ifreq req;  </span></span><br><span class=\"line\"><span class=\"comment\">    bzero(&amp;req, sizeof(struct ifreq));  </span></span><br><span class=\"line\"><span class=\"comment\">        strcpy(req.ifr_name, \"eth0\");    </span></span><br><span class=\"line\"><span class=\"comment\">        if(ioctl(sockfd, SIOCGIFINDEX, &amp;req) != 0)  </span></span><br><span class=\"line\"><span class=\"comment\">        perror(\"ioctl()\");    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_ifindex = req.ifr_ifindex;    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_protocol = htons(ETH_P_ARP);  </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">/*man packet</span></span><br><span class=\"line\"><span class=\"comment\"> * AF_PACKET linux.</span></span><br><span class=\"line\"><span class=\"comment\"> *  2</span></span><br><span class=\"line\"><span class=\"comment\">          SOCK_DGRAM----</span></span><br><span class=\"line\"><span class=\"comment\">          SOCK_RAW------ </span></span><br><span class=\"line\"><span class=\"comment\">          * SOCK_RAW,MAC</span></span><br><span class=\"line\"><span class=\"comment\">          * MAClinux/if_ether.hethhdr</span></span><br><span class=\"line\"><span class=\"comment\">          * SOCK_DGRAMMAC</span></span><br><span class=\"line\"><span class=\"comment\">          * </span></span><br><span class=\"line\"><span class=\"comment\">   :IP ,ARP,RARP</span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)</span></span><br><span class=\"line\"><span class=\"comment\">  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)</span></span><br><span class=\"line\"><span class=\"comment\">    2)IEEE</span></span><br><span class=\"line\"><span class=\"comment\">     3IANA</span></span><br><span class=\"line\"><span class=\"comment\">      ETH_P_ALL</span></span><br><span class=\"line\"><span class=\"comment\">      0x88b50x88b6 </span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">   <span class=\"comment\">/*read writeUDP*/</span></span><br></pre></td></tr></table></figure>\n<p>ip<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*proc*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetGateWayIP</span><span class=\"params\">(uint8 *ip_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">char</span> inf[<span class=\"number\">100</span>];</span><br><span class=\"line\">      FILE *file_fd;</span><br><span class=\"line\">      uint8 high=<span class=\"number\">0</span>,low=<span class=\"number\">0</span>,value;</span><br><span class=\"line\">      <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">      file_fd = fopen(<span class=\"string\">\"/proc/net/route\"</span>,<span class=\"string\">\"r\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(file_fd==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"can not open /proc/net/route\\n\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">             <span class=\"keyword\">while</span>(!feof(file_fd))</span><br><span class=\"line\">             &#123;</span><br><span class=\"line\">                     <span class=\"built_in\">memset</span>(inf,<span class=\"number\">0</span>,<span class=\"keyword\">sizeof</span>(inf));</span><br><span class=\"line\">                     fgets(inf,<span class=\"number\">100</span>,file_fd);</span><br><span class=\"line\">                     <span class=\"keyword\">if</span>(inf[<span class=\"number\">5</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">6</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">7</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">8</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">9</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">10</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">11</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">12</span>]==<span class=\"string\">'0'</span>)</span><br><span class=\"line\">                     &#123;</span><br><span class=\"line\">                              <span class=\"keyword\">for</span>(i=<span class=\"number\">20</span>;i&gt;=<span class=\"number\">14</span>;i-=<span class=\"number\">2</span>)</span><br><span class=\"line\">                              &#123;</span><br><span class=\"line\">                                         <span class=\"keyword\">if</span>(inf[i]&gt;=<span class=\"number\">65</span>)</span><br><span class=\"line\">                                                 high = inf[i]<span class=\"number\">-55</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">else</span></span><br><span class=\"line\">                                                 high = inf[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">if</span>(inf[i+<span class=\"number\">1</span>]&gt;=<span class=\"number\">65</span>)</span><br><span class=\"line\">                                                 low = inf[i+<span class=\"number\">1</span>]<span class=\"number\">-55</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">else</span></span><br><span class=\"line\">                                                 low = inf[i+<span class=\"number\">1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">                                        value = high*<span class=\"number\">16</span>+low;</span><br><span class=\"line\">                                       ip_addr[<span class=\"number\">10</span>-i/<span class=\"number\">2</span>] = value;</span><br><span class=\"line\">                              &#125;</span><br><span class=\"line\">                              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                       &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARP<br><br>wifistaip,ip</li>\n<li>pf_packet<br>1AmacB,A,B<br> Bmacapap<br>2ABipAP ,AB ARPBarpping</li>\n<li><br><a href=\"http://www.freebuf.com/articles/system/5157.html\" target=\"_blank\" rel=\"noopener\">http://www.freebuf.com/articles/system/5157.html</a><br>emm,can also make your own program,  </li>\n<li>arp<br>A,Barp<br>A ,BAParpmacapap<br>arpBBAARPAP ,ARPmacapip<br>APAAipmac<br>ABAPB ,APBAB,B<br>echo 1 &gt;&gt; /proc/sys/net/ipv4/ip_forwardroot<br></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"ARP-\"><a href=\"#ARP-\" class=\"headerlink\" title=\"ARP \"></a>ARP </h3><h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARPARPARPipmac</li>\n<li>ipipmac<br>pc&gt;()&gt;&gt;","more":"<br>&gt;&gt;&gt;.-&gt;</li>\n<li>pcip<br>mac<br>mac<br>wifimac</li>\n<li>mac<br>arparpmacip</li>\n<li>tcpip14.2<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li><br>ping<br>station  ARP request-&gt;   AP  ARP<br>station  &lt;ARP response   AP  ARP ,<br>stationAPmacAPMACmacmacAPAP</li>\n<li>AP()stationarp requeststationmacAP192.168.0.4staton,macstationarpstationmac</li>\n<li>arp<br>1.ping<br>2.tcpip<br>3.arp<h4 id=\"ARPARP\"><a href=\"#ARPARP\" class=\"headerlink\" title=\"ARPARP\"></a>ARPARP</h4></li>\n<li>pingmacmac?)</li>\n<li>macmacmacwARP,</li>\n<li>tcpip4.6</li>\n<li>ARPippingip<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>  ()<br>mac(6) mac(6) (2)(0x0806)<br>28byte arp(2)|(2)|(1)|(1)|op(rarp 2)|mac(6)|ip(4)|mac(6)|ip(4)  </li>\n<li>mac1,10x0800,ipoparp12rarp3rarp4</li>\n<li>arp60mac14=4646-28=18</li>\n<li>arpwireshark,Omnipeek - Savvius,tcpdump,<br>tcpdump : sudo tcpdump -vv arp  <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> tcpdump: listening on wlp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.134575</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.101</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span> <span class=\"comment\">//ap ask me</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.135404</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">21.135413</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Reply <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> is-at <span class=\"number\">48</span>:<span class=\"number\">5</span>a:b6:<span class=\"number\">6</span>e:c9:<span class=\"number\">5f</span> (oui Unknown), length <span class=\"number\">28</span><span class=\"comment\">// i reply ap</span></span><br><span class=\"line\"><span class=\"number\">21</span>:<span class=\"number\">51</span>:<span class=\"number\">32.081916</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.106</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span> <span class=\"comment\">//ask other</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">01</span>:<span class=\"number\">27.149947</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Request who-has <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.107</span> tell <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>, length <span class=\"number\">28</span></span><br><span class=\"line\">\t<span class=\"number\">0x0000</span>:  <span class=\"number\">0001</span> <span class=\"number\">0800</span> <span class=\"number\">0604</span> <span class=\"number\">0001</span> <span class=\"number\">206b</span> e70f <span class=\"number\">1b</span>42 c0a8  .........k...B..</span><br><span class=\"line\">\t<span class=\"number\">0x0010</span>:  <span class=\"number\">0001</span> <span class=\"number\">0000</span> <span class=\"number\">0000</span> <span class=\"number\">0000</span> c0a8 <span class=\"number\">006b</span>            ...........k</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"number\">22</span>:<span class=\"number\">04</span>:<span class=\"number\">17.114593</span> ARP, Ethernet (len <span class=\"number\">6</span>), IPv4 (len <span class=\"number\">4</span>), Reply <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.110</span> is-at <span class=\"number\">48</span>:<span class=\"number\">5</span>a:b6:<span class=\"number\">6</span>e:c9:<span class=\"number\">5f</span> (oui Unknown), length <span class=\"number\">28</span></span><br><span class=\"line\">\t<span class=\"number\">0x0000</span>:  <span class=\"number\">0001</span> <span class=\"number\">0800</span> <span class=\"number\">0604</span> <span class=\"number\">0002</span> <span class=\"number\">485</span>a b66e c95f c0a8  ........HZ.n._..</span><br><span class=\"line\">\t<span class=\"number\">0x0010</span>:  <span class=\"number\">006</span>e <span class=\"number\">206b</span> e70f <span class=\"number\">1b</span>42 c0a8 <span class=\"number\">0001</span>            .n.k...B....</span><br></pre></td></tr></table></figure>\n<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARParp:  <figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">arp</span> <span class=\"selector-tag\">-a</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.101</span>) <span class=\"selector-tag\">at</span> 4<span class=\"selector-tag\">c</span><span class=\"selector-pseudo\">:32</span><span class=\"selector-pseudo\">:75</span><span class=\"selector-pseudo\">:3a</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:b3</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span>) <span class=\"selector-tag\">at</span> 20<span class=\"selector-pseudo\">:6b</span><span class=\"selector-pseudo\">:e7</span><span class=\"selector-pseudo\">:0f</span><span class=\"selector-pseudo\">:1b</span><span class=\"selector-pseudo\">:42</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.108</span>) <span class=\"selector-tag\">at</span> 94<span class=\"selector-pseudo\">:d0</span><span class=\"selector-pseudo\">:29</span><span class=\"selector-pseudo\">:9d</span><span class=\"selector-pseudo\">:74</span><span class=\"selector-pseudo\">:dd</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">? (192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.107</span>) <span class=\"selector-tag\">at</span> 94<span class=\"selector-pseudo\">:65</span><span class=\"selector-pseudo\">:2d</span><span class=\"selector-pseudo\">:ab</span><span class=\"selector-pseudo\">:88</span><span class=\"selector-pseudo\">:8b</span> <span class=\"selector-attr\">[ether]</span> <span class=\"selector-tag\">on</span> <span class=\"selector-tag\">wlp2s0</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">arp</span> </span><br><span class=\"line\"><span class=\"selector-tag\">Address</span>                  <span class=\"selector-tag\">HWtype</span>  <span class=\"selector-tag\">HWaddress</span>           <span class=\"selector-tag\">Flags</span> <span class=\"selector-tag\">Mask</span>            <span class=\"selector-tag\">Iface</span></span><br><span class=\"line\">192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.101</span>            <span class=\"selector-tag\">ether</span>   4<span class=\"selector-tag\">c</span><span class=\"selector-pseudo\">:32</span><span class=\"selector-pseudo\">:75</span><span class=\"selector-pseudo\">:3a</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:b3</span>   <span class=\"selector-tag\">C</span>                     <span class=\"selector-tag\">wlp2s0</span></span><br><span class=\"line\">192<span class=\"selector-class\">.168</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span>              <span class=\"selector-tag\">ether</span>   20<span class=\"selector-pseudo\">:6b</span><span class=\"selector-pseudo\">:e7</span><span class=\"selector-pseudo\">:0f</span><span class=\"selector-pseudo\">:1b</span><span class=\"selector-pseudo\">:42</span>   <span class=\"selector-tag\">C</span>                     <span class=\"selector-tag\">wlp2s0</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip neigh</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.101</span> dev wlp2s0 lladdr <span class=\"number\">4</span>c:<span class=\"number\">32</span>:<span class=\"number\">75</span>:<span class=\"number\">3</span>a:<span class=\"number\">09</span>:b3 STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span> dev wlp2s0 lladdr <span class=\"number\">20</span>:<span class=\"number\">6b</span>:e7:<span class=\"number\">0f</span>:<span class=\"number\">1b</span>:<span class=\"number\">42</span> STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.108</span> dev wlp2s0 lladdr <span class=\"number\">94</span>:d0:<span class=\"number\">29</span>:<span class=\"number\">9</span>d:<span class=\"number\">74</span>:dd STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.107</span> dev wlp2s0 lladdr <span class=\"number\">94</span>:<span class=\"number\">65</span>:<span class=\"number\">2</span>d:ab:<span class=\"number\">88</span>:<span class=\"number\">8b</span> STALE</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.104</span> dev wlp2s0 lladdr e4:<span class=\"number\">9</span>a:dc:b0:a5:<span class=\"number\">36</span> STALE</span><br></pre></td></tr></table></figure>\n<ul>\n<li>arping<br><a href=\"http://man.linuxde.net/arping\" target=\"_blank\" rel=\"noopener\">http://man.linuxde.net/arping</a></li>\n<li>arp <br>man arp arp~<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>arp  </li>\n<li>arp<br><a href=\"http://www.jb51.net/LINUXjishu/65693.html\" target=\"_blank\" rel=\"noopener\">http://www.jb51.net/LINUXjishu/65693.html</a><br>LinuxARPsysctl -w net.ipv4.neigh.ethX=Y<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4></li>\n<li>PF_PACKETARP</li>\n<li>PF_PACKET<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name , <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//arp</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ARP_PACKET</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">       <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> dest_mac[<span class=\"number\">6</span>]; <span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> sorce_mac[<span class=\"number\">6</span>];<span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> type;       <span class=\"comment\">//2</span></span><br><span class=\"line\">  <span class=\"comment\">//arp</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> hw_type;   <span class=\"comment\">//2     0x0001 mac</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> pro_type;  <span class=\"comment\">//2    0x0806 IPV4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> hw_len;     <span class=\"comment\">//1  </span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> pro_len;    <span class=\"comment\">//1</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> op;        <span class=\"comment\">//2           0x0001ARP0x0002ARP</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> from_mac[<span class=\"number\">6</span>];<span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> from_ip[<span class=\"number\">4</span>]; <span class=\"comment\">//4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> to_mac[<span class=\"number\">6</span>];  <span class=\"comment\">//6</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> to_ip[<span class=\"number\">4</span>];   <span class=\"comment\">//4</span></span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> padding[<span class=\"number\">18</span>];<span class=\"comment\">//1846</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> fd = <span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">int</span> num=<span class=\"number\">0</span>;</span><br><span class=\"line\"> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> MAC_ADDR[<span class=\"number\">6</span>];</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">in_addr</span> <span class=\"title\">IP_ADDR</span>;</span><span class=\"comment\">///netinet/in.h32IPv4.</span></span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ARP_PACKET</span> <span class=\"title\">arp_pk</span>=&#123;</span><span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_ll</span> <span class=\"title\">eth_info</span>;</span><span class=\"comment\">/////linux/if_packet.h </span></span><br><span class=\"line\"> <span class=\"comment\">//MACIP</span></span><br><span class=\"line\"> GetEthInfor(<span class=\"string\">\"wlp2s0\"</span>,MAC_ADDR,&amp;IP_ADDR);</span><br><span class=\"line\">   <span class=\"comment\">/*printf(\"The MAC_addr is:\");</span></span><br><span class=\"line\"><span class=\"comment\"> for(i =0 ;i&lt;6;i++)</span></span><br><span class=\"line\"><span class=\"comment\">    printf(\"%4X\",MAC_ADDR[i]); </span></span><br><span class=\"line\"><span class=\"comment\"> printf(\"\\n\");</span></span><br><span class=\"line\"><span class=\"comment\">    printf(\"the IP is:%s\\n\",inet_ntoa(IP_ADDR));*/</span></span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  arp_pk.dest_mac[i]=<span class=\"number\">0XFF</span>;      </span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  arp_pk.sorce_mac[i]=MAC_ADDR[i];</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">   arp_pk.type = htons(<span class=\"number\">0x0806</span>);    <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.hw_type = htons(<span class=\"number\">0x0001</span>); <span class=\"comment\">//0x0001MAC</span></span><br><span class=\"line\">   arp_pk.pro_type = htons(<span class=\"number\">0x0800</span>);<span class=\"comment\">//0x0800IP</span></span><br><span class=\"line\">   arp_pk.hw_len = <span class=\"number\">6</span>;              <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.pro_len = <span class=\"number\">4</span>;             <span class=\"comment\">//</span></span><br><span class=\"line\">   arp_pk.op = htons(<span class=\"number\">0x0001</span>);      <span class=\"comment\">//0x0001ARP</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">  arp_pk.from_mac[i]=MAC_ADDR[i];</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">in_addr_t</span> ipaddr=inet_network(inet_ntoa(IP_ADDR));</span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">3</span>;i&gt;=<span class=\"number\">0</span>;i--)                 <span class=\"comment\">//IP</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">  arp_pk.from_ip[i]=(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)ipaddr&amp;<span class=\"number\">0xFF</span>;</span><br><span class=\"line\">   ipaddr=ipaddr&gt;&gt;<span class=\"number\">8</span>;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"-%d-\"</span>,arp_pk.from_ip[i]);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> <span class=\"comment\">/* arp_pk.from_ip[0]=192;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[1]=168;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[2]=199;</span></span><br><span class=\"line\"><span class=\"comment\">  arp_pk.from_ip[3]=145;*/</span></span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)                 <span class=\"comment\">//mac</span></span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">    arp_pk.to_mac[i]=<span class=\"number\">0X00</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">0</span>]=<span class=\"number\">0X0B</span>;        <span class=\"comment\">//MACIP</span></span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">1</span>]=<span class=\"number\">0X40</span>;</span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">2</span>]=<span class=\"number\">0X39</span>;</span><br><span class=\"line\">   arp_pk.to_ip[<span class=\"number\">3</span>]=<span class=\"number\">0X0A</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//sockaddr_ll eth_info</span></span><br><span class=\"line\">    eth_info.sll_family = PF_PACKET;</span><br><span class=\"line\"> eth_info.sll_ifindex = if_nametoindex(<span class=\"string\">\"wlp2s0\"</span>);<span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"comment\">//printf(\"number is:%d\\n\",eth_info.sll_family);</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\"> fd = socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL));  <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket SOCK_RAW failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> num = sendto(fd , &amp;arp_pk , <span class=\"keyword\">sizeof</span>(struct ARP_PACKET) , <span class=\"number\">0</span> ,(struct sockaddr*)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info));</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"sendto failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">        <span class=\"comment\">//ARP</span></span><br><span class=\"line\"> num = recvfrom(fd , &amp;arp_pk , <span class=\"keyword\">sizeof</span>(struct ARP_PACKET) ,<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"rcvfrom failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"keyword\">else</span></span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"I receive %d bytes!\\n\"</span>,num);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"the mac  is:\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X \"</span>,arp_pk.from_mac[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"op:%d\\n\"</span>,arp_pk.op);</span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">4</span>;i++)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d. \"</span>,arp_pk.to_ip[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> close(fd);</span><br><span class=\"line\"> <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name ,  <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span>  <span class=\"title\">eth</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">///net/if.h,</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> fd;             <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">int</span> temp=<span class=\"number\">0</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\"> <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;            <span class=\"comment\">//</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"built_in\">strncpy</span>(eth.ifr_name,name,<span class=\"keyword\">sizeof</span>(struct ifreq)<span class=\"number\">-1</span>);</span><br><span class=\"line\"><span class=\"comment\">// fd = socket(AF_INET,SOCK_DGRAM,0);</span></span><br><span class=\"line\"> <span class=\"comment\">// fd=socket(AF_INET,SOCK_STREAM,0); </span></span><br><span class=\"line\">    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));</span><br><span class=\"line\"><span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket failed!\\n\"</span>);</span><br><span class=\"line\">   <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"comment\">//MAC</span></span><br><span class=\"line\">   temp = ioctl(fd,SIOCGIFHWADDR,&amp;eth);</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> <span class=\"built_in\">strncpy</span>(MAC_addr,eth.ifr_hwaddr.sa_data,<span class=\"number\">6</span>);</span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"The MAC_addr is:\"</span>);</span><br><span class=\"line\"> <span class=\"keyword\">for</span>(i =<span class=\"number\">0</span> ;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X\"</span>,(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)eth.ifr_hwaddr.sa_data[i]); </span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//IP</span></span><br><span class=\"line\">   temp = ioctl(fd,SIOCGIFADDR,&amp;eth);</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> <span class=\"built_in\">memcpy</span>(IP_addr ,&amp;(((struct sockaddr_in *)(&amp;eth.ifr_addr))-&gt;sin_addr),<span class=\"number\">4</span>);</span><br><span class=\"line\"> <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"got ipaddr:%s\\n\"</span>,inet_ntoa(*IP_addr));</span><br><span class=\"line\"><span class=\"comment\">/*i=0;</span></span><br><span class=\"line\"><span class=\"comment\">printf(\"get the MAC_ADDR:\\n\");</span></span><br><span class=\"line\"><span class=\"comment\">for(i;i&lt;6;i++)</span></span><br><span class=\"line\"><span class=\"comment\">  printf(\"%.2X:\",MAC_addr[i]&amp;0xFF);*/</span></span><br><span class=\"line\">   close(fd);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//arp</span></span><br><span class=\"line\"><span class=\"comment\">//arplinux</span></span><br><span class=\"line\"><span class=\"comment\">/*eg:</span></span><br><span class=\"line\"><span class=\"comment\">typedef struct _tagARP_PACKET&#123;    </span></span><br><span class=\"line\"><span class=\"comment\">    struct ether_header  eh;    ///net/ethernet.h</span></span><br><span class=\"line\"><span class=\"comment\">    struct ether_arp arp;    </span></span><br><span class=\"line\"><span class=\"comment\">&#125;ARP_PACKET_OBJ, *ARP_PACKET_HANDLE; /netinet/if_ether.h;/net/if_arp.h</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*sockaddr_ll eth_info,</span></span><br><span class=\"line\"><span class=\"comment\">:ioctlstruct ifreq*/</span></span><br><span class=\"line\"><span class=\"comment\">/*  struct sockaddr_ll&#123;</span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_family; // AF_PACKET </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_protocol; //  </span></span><br><span class=\"line\"><span class=\"comment\">    int sll_ifindex; // </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned short sll_hatype; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_pkttype; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_halen; //  </span></span><br><span class=\"line\"><span class=\"comment\">    unsigned char sll_addr[8]; //  </span></span><br><span class=\"line\"><span class=\"comment\">&#125;;</span></span><br><span class=\"line\"><span class=\"comment\">eg:</span></span><br><span class=\"line\"><span class=\"comment\">*     struct sockaddr_ll peer_addr;  </span></span><br><span class=\"line\"><span class=\"comment\">*    memset(&amp;peer_addr, 0, sizeof(peer_addr));    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_family = AF_PACKET;    </span></span><br><span class=\"line\"><span class=\"comment\">        struct ifreq req;  </span></span><br><span class=\"line\"><span class=\"comment\">    bzero(&amp;req, sizeof(struct ifreq));  </span></span><br><span class=\"line\"><span class=\"comment\">        strcpy(req.ifr_name, \"eth0\");    </span></span><br><span class=\"line\"><span class=\"comment\">        if(ioctl(sockfd, SIOCGIFINDEX, &amp;req) != 0)  </span></span><br><span class=\"line\"><span class=\"comment\">        perror(\"ioctl()\");    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_ifindex = req.ifr_ifindex;    </span></span><br><span class=\"line\"><span class=\"comment\">        peer_addr.sll_protocol = htons(ETH_P_ARP);  </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">/*man packet</span></span><br><span class=\"line\"><span class=\"comment\"> * AF_PACKET linux.</span></span><br><span class=\"line\"><span class=\"comment\"> *  2</span></span><br><span class=\"line\"><span class=\"comment\">          SOCK_DGRAM----</span></span><br><span class=\"line\"><span class=\"comment\">          SOCK_RAW------ </span></span><br><span class=\"line\"><span class=\"comment\">          * SOCK_RAW,MAC</span></span><br><span class=\"line\"><span class=\"comment\">          * MAClinux/if_ether.hethhdr</span></span><br><span class=\"line\"><span class=\"comment\">          * SOCK_DGRAMMAC</span></span><br><span class=\"line\"><span class=\"comment\">          * </span></span><br><span class=\"line\"><span class=\"comment\">   :IP ,ARP,RARP</span></span><br><span class=\"line\"><span class=\"comment\">   * </span></span><br><span class=\"line\"><span class=\"comment\">   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)</span></span><br><span class=\"line\"><span class=\"comment\">  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)</span></span><br><span class=\"line\"><span class=\"comment\">    2)IEEE</span></span><br><span class=\"line\"><span class=\"comment\">     3IANA</span></span><br><span class=\"line\"><span class=\"comment\">      ETH_P_ALL</span></span><br><span class=\"line\"><span class=\"comment\">      0x88b50x88b6 </span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">   <span class=\"comment\">/*read writeUDP*/</span></span><br></pre></td></tr></table></figure>\n<p>ip<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*proc*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetGateWayIP</span><span class=\"params\">(uint8 *ip_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">char</span> inf[<span class=\"number\">100</span>];</span><br><span class=\"line\">      FILE *file_fd;</span><br><span class=\"line\">      uint8 high=<span class=\"number\">0</span>,low=<span class=\"number\">0</span>,value;</span><br><span class=\"line\">      <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">      file_fd = fopen(<span class=\"string\">\"/proc/net/route\"</span>,<span class=\"string\">\"r\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(file_fd==<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"can not open /proc/net/route\\n\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">             <span class=\"keyword\">while</span>(!feof(file_fd))</span><br><span class=\"line\">             &#123;</span><br><span class=\"line\">                     <span class=\"built_in\">memset</span>(inf,<span class=\"number\">0</span>,<span class=\"keyword\">sizeof</span>(inf));</span><br><span class=\"line\">                     fgets(inf,<span class=\"number\">100</span>,file_fd);</span><br><span class=\"line\">                     <span class=\"keyword\">if</span>(inf[<span class=\"number\">5</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">6</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">7</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">8</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">9</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">10</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">11</span>]==<span class=\"string\">'0'</span>&amp;&amp;inf[<span class=\"number\">12</span>]==<span class=\"string\">'0'</span>)</span><br><span class=\"line\">                     &#123;</span><br><span class=\"line\">                              <span class=\"keyword\">for</span>(i=<span class=\"number\">20</span>;i&gt;=<span class=\"number\">14</span>;i-=<span class=\"number\">2</span>)</span><br><span class=\"line\">                              &#123;</span><br><span class=\"line\">                                         <span class=\"keyword\">if</span>(inf[i]&gt;=<span class=\"number\">65</span>)</span><br><span class=\"line\">                                                 high = inf[i]<span class=\"number\">-55</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">else</span></span><br><span class=\"line\">                                                 high = inf[i]<span class=\"number\">-48</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">if</span>(inf[i+<span class=\"number\">1</span>]&gt;=<span class=\"number\">65</span>)</span><br><span class=\"line\">                                                 low = inf[i+<span class=\"number\">1</span>]<span class=\"number\">-55</span>;</span><br><span class=\"line\">                                         <span class=\"keyword\">else</span></span><br><span class=\"line\">                                                 low = inf[i+<span class=\"number\">1</span>]<span class=\"number\">-48</span>;</span><br><span class=\"line\">                                        value = high*<span class=\"number\">16</span>+low;</span><br><span class=\"line\">                                       ip_addr[<span class=\"number\">10</span>-i/<span class=\"number\">2</span>] = value;</span><br><span class=\"line\">                              &#125;</span><br><span class=\"line\">                              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                       &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ARP\"><a href=\"#ARP\" class=\"headerlink\" title=\"ARP\"></a>ARP</h4><ul>\n<li>ARP<br><br>wifistaip,ip</li>\n<li>pf_packet<br>1AmacB,A,B<br> Bmacapap<br>2ABipAP ,AB ARPBarpping</li>\n<li><br><a href=\"http://www.freebuf.com/articles/system/5157.html\" target=\"_blank\" rel=\"noopener\">http://www.freebuf.com/articles/system/5157.html</a><br>emm,can also make your own program,  </li>\n<li>arp<br>A,Barp<br>A ,BAParpmacapap<br>arpBBAARPAP ,ARPmacapip<br>APAAipmac<br>ABAPB ,APBAB,B<br>echo 1 &gt;&gt; /proc/sys/net/ipv4/ip_forwardroot<br></li>\n</ul>"},{"title":"tcpip_IP","date":"2018-06-03T11:31:27.000Z","_content":"\n### IP \n#### IP--\n##### ??ip?\n 1.   <!--more-->\n   \n   \n 2.   \n A,BAPAPAPD;  \n A B,Bip,Bmacarp,B:    \n  ipA,mac A IP:B,mac:B  \nAip,macarp;  \nip:A,macA  ,ip:mac(arp  \n  \nip:mac:ip:ip.mac,D  \n(ipip  \n\n 3.   \n---192.168.0.4QQQQ192.168.0.4-----ipip\n 4. ttl1,--1\n 5. macmacipmac\n \n#### \nip\n##### \nipwifi  \n32  \n * -->   \n * ip-->CIDR)  \n * -->NAT  \n\n\n##### ?\n---macwifi,)    \n + ip?  \n macmacipemm  \n \n + A 192.168.0.0192.168.0.3,B10.170.3.0,10.170.3.2,wifi,ABARPBBAarpipping~-->IP?\n+ .1?\n\n+ \n\n\n##### IP\n+ ip\n+ 0-7bit---24-31\n+ 32bit4bit1111*4bytes=60bytes,ip60ip20\n+ 3-2\n+ ip162^16=65535mtu=65535mtu,ip\n+ \n+ ip:016bitrfc1071\n\n#### :\np2p.ip\n+ AB  \nA<-->()<--><--><-->B  \n()\n+ AB?  \nbt,  \nA<-->(NAPT)<--><-->B\nABB?\nNATNAT\n#### --NATNAT\n\nhttps://blog.csdn.net/u012908515/article/details/53518062  \nhttps://blog.csdn.net/ustcgy/article/details/5655050  \nrfc nat  \nhttps://tools.ietf.org/html/rfc1631  \nhttps://tools.ietf.org/html/rfc2663\nrfcp2p  \nhttps://tools.ietf.org/html/rfc5694\n##### NAT\n+ NATipv4ipip,\n+ p2p;\n#### NAT\n+ NAT:IPIP\n+ NATIPIP,IP\n+ NAPT:IP\nAB?NAPT,IP  \n+ NAPTconeNATsymmetric NAT\n1. cone NATA\n192.168.4.5:4323-->server:222.33.22.334:80\nip:122.332.43.32:1234-->server:22...122.332.43.32:1234  \n21234  \n//ip   \n:  \n222.33.22.334:80-->122.332.43.321234122.332.43.321234192.168.4.5ipip+\n+ NATfull cone( restricted cone) port restricted cone)  \n   * BNATB,A(\n   * BABB\n   * \n2. NAT(symmetric nat):\nsession1123421235  \nhttps://blog.csdn.net/u012908515/article/details/53518062\n\n##### ipv6NAT\nipv6p2pnat\n##### p2p\nnapt12?  \n:  \n+ full cone21ip1\n+ cone211ip2122ip+\n + 11natA212nat1212  \n + A1221\n + 21nat2nat12A12 \n + UDP1UDP2,,A2,21UDP1.12IP NAT 1 12,NAT 221.UDP,12,A..NAT,\"\",,A.\n + 312NAT\n + 1AA11,2122\n + 41NAT\n + udp\n + tcptcp\n+ cone,\n+ p2p1,2,3,4bt;cs\n+ p2pbt):natip,ipBT?    \n+ rs btnat???1510+m/s,\n##### Cbitterrot~)\n https://linux.cn/thread-5529-1-1.html\n p2pcssocket","source":"_posts/tcpip-IP.md","raw":"---\ntitle: tcpip_IP\ndate: 2018-06-03 19:31:27\ntags: tcpip_ip\ncategories: tcpip\n---\n\n### IP \n#### IP--\n##### ??ip?\n 1.   <!--more-->\n   \n   \n 2.   \n A,BAPAPAPD;  \n A B,Bip,Bmacarp,B:    \n  ipA,mac A IP:B,mac:B  \nAip,macarp;  \nip:A,macA  ,ip:mac(arp  \n  \nip:mac:ip:ip.mac,D  \n(ipip  \n\n 3.   \n---192.168.0.4QQQQ192.168.0.4-----ipip\n 4. ttl1,--1\n 5. macmacipmac\n \n#### \nip\n##### \nipwifi  \n32  \n * -->   \n * ip-->CIDR)  \n * -->NAT  \n\n\n##### ?\n---macwifi,)    \n + ip?  \n macmacipemm  \n \n + A 192.168.0.0192.168.0.3,B10.170.3.0,10.170.3.2,wifi,ABARPBBAarpipping~-->IP?\n+ .1?\n\n+ \n\n\n##### IP\n+ ip\n+ 0-7bit---24-31\n+ 32bit4bit1111*4bytes=60bytes,ip60ip20\n+ 3-2\n+ ip162^16=65535mtu=65535mtu,ip\n+ \n+ ip:016bitrfc1071\n\n#### :\np2p.ip\n+ AB  \nA<-->()<--><--><-->B  \n()\n+ AB?  \nbt,  \nA<-->(NAPT)<--><-->B\nABB?\nNATNAT\n#### --NATNAT\n\nhttps://blog.csdn.net/u012908515/article/details/53518062  \nhttps://blog.csdn.net/ustcgy/article/details/5655050  \nrfc nat  \nhttps://tools.ietf.org/html/rfc1631  \nhttps://tools.ietf.org/html/rfc2663\nrfcp2p  \nhttps://tools.ietf.org/html/rfc5694\n##### NAT\n+ NATipv4ipip,\n+ p2p;\n#### NAT\n+ NAT:IPIP\n+ NATIPIP,IP\n+ NAPT:IP\nAB?NAPT,IP  \n+ NAPTconeNATsymmetric NAT\n1. cone NATA\n192.168.4.5:4323-->server:222.33.22.334:80\nip:122.332.43.32:1234-->server:22...122.332.43.32:1234  \n21234  \n//ip   \n:  \n222.33.22.334:80-->122.332.43.321234122.332.43.321234192.168.4.5ipip+\n+ NATfull cone( restricted cone) port restricted cone)  \n   * BNATB,A(\n   * BABB\n   * \n2. NAT(symmetric nat):\nsession1123421235  \nhttps://blog.csdn.net/u012908515/article/details/53518062\n\n##### ipv6NAT\nipv6p2pnat\n##### p2p\nnapt12?  \n:  \n+ full cone21ip1\n+ cone211ip2122ip+\n + 11natA212nat1212  \n + A1221\n + 21nat2nat12A12 \n + UDP1UDP2,,A2,21UDP1.12IP NAT 1 12,NAT 221.UDP,12,A..NAT,\"\",,A.\n + 312NAT\n + 1AA11,2122\n + 41NAT\n + udp\n + tcptcp\n+ cone,\n+ p2p1,2,3,4bt;cs\n+ p2pbt):natip,ipBT?    \n+ rs btnat???1510+m/s,\n##### Cbitterrot~)\n https://linux.cn/thread-5529-1-1.html\n p2pcssocket","slug":"tcpip-IP","published":1,"updated":"2018-06-10T02:58:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghpy002k00jx2emw48mv","content":"<h3 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h3><h4 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h4><h5 id=\"--ip\"><a href=\"#--ip\" class=\"headerlink\" title=\"??ip?\"></a>??ip?</h5><ol>\n<li><p>  <a id=\"more\"></a><br></p>\n</li>\n<li><p><br>A,BAPAPAPD;<br>A B,Bip,Bmacarp,B:<br>ipA,mac A IP:B,mac:B<br>Aip,macarp;<br>ip:A,macA  ,ip:mac(arp<br><br>ip:mac:ip:ip.mac,D<br>(ipip  </p>\n</li>\n<li><p><br>192.168.0.4QQQQ192.168.0.4ipip</p>\n</li>\n<li>ttl1,1</li>\n<li>macmacipmac</li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ip</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>ipwifi<br>32  </p>\n<ul>\n<li>&gt;   </li>\n<li>ip&gt;CIDR)  </li>\n<li>&gt;NAT  </li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"?\"></a>?</h5><p>macwifi,)    </p>\n<ul>\n<li>ip?<br>macmacipemm<br></li>\n<li>A 192.168.0.0192.168.0.3,B10.170.3.0,10.170.3.2,wifi,ABARPBBAarpipping~&gt;IP?<ul>\n<li>.1?<br></li>\n<li><br></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h5><ul>\n<li>ip</li>\n<li>0-7bit24-31</li>\n<li>32bit4bit1111*4bytes=60bytes,ip60ip20</li>\n<li>3-2</li>\n<li>ip162^16=65535mtu=65535mtu,ip</li>\n<li></li>\n<li>ip:016bitrfc1071</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>p2p.ip</p>\n<ul>\n<li>AB<br>A<-->()<--><--><-->B<br>()</--></--></--></--></li>\n<li>AB?<br>bt,<br>A<-->(NAPT)<--><-->B<br>ABB?<br>NATNAT<h4 id=\"NATNAT\"><a href=\"#NATNAT\" class=\"headerlink\" title=\"NATNAT\"></a>NATNAT</h4><br><a href=\"https://blog.csdn.net/u012908515/article/details/53518062\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/u012908515/article/details/53518062</a><br><a href=\"https://blog.csdn.net/ustcgy/article/details/5655050\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/ustcgy/article/details/5655050</a><br>rfc nat<br><a href=\"https://tools.ietf.org/html/rfc1631\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc1631</a><br><a href=\"https://tools.ietf.org/html/rfc2663\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc2663</a><br>rfcp2p<br><a href=\"https://tools.ietf.org/html/rfc5694\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc5694</a><h5 id=\"NAT\"><a href=\"#NAT\" class=\"headerlink\" title=\"NAT\"></a>NAT</h5></--></--></--></li>\n<li>NATipv4ipip,</li>\n<li>p2p;<h4 id=\"NAT\"><a href=\"#NAT\" class=\"headerlink\" title=\"NAT\"></a>NAT</h4></li>\n<li>NAT:IPIP</li>\n<li>NATIPIP,IP</li>\n<li>NAPT:IP<br>AB?NAPT,IP  </li>\n<li>NAPTconeNATsymmetric NAT</li>\n</ul>\n<ol>\n<li>cone NATA<br>192.168.4.5:4323&gt;server:222.33.22.334:80<br>ip:122.332.43.32:1234&gt;server:22122.332.43.32:1234<br>21234<br>//ip<br>:<br>222.33.22.334:80&gt;122.332.43.321234122.332.43.321234192.168.4.5ipip+</li>\n</ol>\n<ul>\n<li>NATfull cone( restricted cone) port restricted cone)  <ul>\n<li>BNATB,A(</li>\n<li>BABB</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>NAT(symmetric nat):<br>session1123421235<br><a href=\"https://blog.csdn.net/u012908515/article/details/53518062\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/u012908515/article/details/53518062</a></li>\n</ol>\n<h5 id=\"ipv6NAT\"><a href=\"#ipv6NAT\" class=\"headerlink\" title=\"ipv6NAT\"></a>ipv6NAT</h5><p>ipv6p2pnat</p>\n<h5 id=\"p2p\"><a href=\"#p2p\" class=\"headerlink\" title=\"p2p\"></a>p2p</h5><p>napt12?<br>:  </p>\n<ul>\n<li>full cone21ip1</li>\n<li>cone211ip2122ip+<ul>\n<li>11natA212nat1212  </li>\n<li>A1221</li>\n<li>21nat2nat12A12 </li>\n<li>UDP1UDP2,,A2,21UDP1.12IP NAT 1 12,NAT 221.UDP,12,A..NAT,,,A.</li>\n<li>312NAT</li>\n<li>1AA11,2122</li>\n<li>41NAT</li>\n<li>udp</li>\n<li>tcptcp</li>\n</ul>\n</li>\n<li>cone,</li>\n<li>p2p1,2,3,4bt;cs</li>\n<li>p2pbt):natip,ipBT?    </li>\n<li>rs btnat???1510+m/s,<h5 id=\"Cbitterrot\"><a href=\"#Cbitterrot\" class=\"headerlink\" title=\"Cbitterrot~)\"></a>Cbitterrot~)</h5><a href=\"https://linux.cn/thread-5529-1-1.html\" target=\"_blank\" rel=\"noopener\">https://linux.cn/thread-5529-1-1.html</a><br>p2pcssocket</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"IP-\"><a href=\"#IP-\" class=\"headerlink\" title=\"IP \"></a>IP </h3><h4 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h4><h5 id=\"--ip\"><a href=\"#--ip\" class=\"headerlink\" title=\"??ip?\"></a>??ip?</h5><ol>\n<li><p>","more":"<br></p>\n</li>\n<li><p><br>A,BAPAPAPD;<br>A B,Bip,Bmacarp,B:<br>ipA,mac A IP:B,mac:B<br>Aip,macarp;<br>ip:A,macA  ,ip:mac(arp<br><br>ip:mac:ip:ip.mac,D<br>(ipip  </p>\n</li>\n<li><p><br>192.168.0.4QQQQ192.168.0.4ipip</p>\n</li>\n<li>ttl1,1</li>\n<li>macmacipmac</li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ip</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>ipwifi<br>32  </p>\n<ul>\n<li>&gt;   </li>\n<li>ip&gt;CIDR)  </li>\n<li>&gt;NAT  </li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"?\"></a>?</h5><p>macwifi,)    </p>\n<ul>\n<li>ip?<br>macmacipemm<br></li>\n<li>A 192.168.0.0192.168.0.3,B10.170.3.0,10.170.3.2,wifi,ABARPBBAarpipping~&gt;IP?<ul>\n<li>.1?<br></li>\n<li><br></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h5><ul>\n<li>ip</li>\n<li>0-7bit24-31</li>\n<li>32bit4bit1111*4bytes=60bytes,ip60ip20</li>\n<li>3-2</li>\n<li>ip162^16=65535mtu=65535mtu,ip</li>\n<li></li>\n<li>ip:016bitrfc1071</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>p2p.ip</p>\n<ul>\n<li>AB<br>A<-->()<--><--><-->B<br>()</--></--></--></--></li>\n<li>AB?<br>bt,<br>A<-->(NAPT)<--><-->B<br>ABB?<br>NATNAT<h4 id=\"NATNAT\"><a href=\"#NATNAT\" class=\"headerlink\" title=\"NATNAT\"></a>NATNAT</h4><br><a href=\"https://blog.csdn.net/u012908515/article/details/53518062\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/u012908515/article/details/53518062</a><br><a href=\"https://blog.csdn.net/ustcgy/article/details/5655050\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/ustcgy/article/details/5655050</a><br>rfc nat<br><a href=\"https://tools.ietf.org/html/rfc1631\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc1631</a><br><a href=\"https://tools.ietf.org/html/rfc2663\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc2663</a><br>rfcp2p<br><a href=\"https://tools.ietf.org/html/rfc5694\" target=\"_blank\" rel=\"noopener\">https://tools.ietf.org/html/rfc5694</a><h5 id=\"NAT\"><a href=\"#NAT\" class=\"headerlink\" title=\"NAT\"></a>NAT</h5></--></--></--></li>\n<li>NATipv4ipip,</li>\n<li>p2p;<h4 id=\"NAT\"><a href=\"#NAT\" class=\"headerlink\" title=\"NAT\"></a>NAT</h4></li>\n<li>NAT:IPIP</li>\n<li>NATIPIP,IP</li>\n<li>NAPT:IP<br>AB?NAPT,IP  </li>\n<li>NAPTconeNATsymmetric NAT</li>\n</ul>\n<ol>\n<li>cone NATA<br>192.168.4.5:4323&gt;server:222.33.22.334:80<br>ip:122.332.43.32:1234&gt;server:22122.332.43.32:1234<br>21234<br>//ip<br>:<br>222.33.22.334:80&gt;122.332.43.321234122.332.43.321234192.168.4.5ipip+</li>\n</ol>\n<ul>\n<li>NATfull cone( restricted cone) port restricted cone)  <ul>\n<li>BNATB,A(</li>\n<li>BABB</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>NAT(symmetric nat):<br>session1123421235<br><a href=\"https://blog.csdn.net/u012908515/article/details/53518062\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/u012908515/article/details/53518062</a></li>\n</ol>\n<h5 id=\"ipv6NAT\"><a href=\"#ipv6NAT\" class=\"headerlink\" title=\"ipv6NAT\"></a>ipv6NAT</h5><p>ipv6p2pnat</p>\n<h5 id=\"p2p\"><a href=\"#p2p\" class=\"headerlink\" title=\"p2p\"></a>p2p</h5><p>napt12?<br>:  </p>\n<ul>\n<li>full cone21ip1</li>\n<li>cone211ip2122ip+<ul>\n<li>11natA212nat1212  </li>\n<li>A1221</li>\n<li>21nat2nat12A12 </li>\n<li>UDP1UDP2,,A2,21UDP1.12IP NAT 1 12,NAT 221.UDP,12,A..NAT,,,A.</li>\n<li>312NAT</li>\n<li>1AA11,2122</li>\n<li>41NAT</li>\n<li>udp</li>\n<li>tcptcp</li>\n</ul>\n</li>\n<li>cone,</li>\n<li>p2p1,2,3,4bt;cs</li>\n<li>p2pbt):natip,ipBT?    </li>\n<li>rs btnat???1510+m/s,<h5 id=\"Cbitterrot\"><a href=\"#Cbitterrot\" class=\"headerlink\" title=\"Cbitterrot~)\"></a>Cbitterrot~)</h5><a href=\"https://linux.cn/thread-5529-1-1.html\" target=\"_blank\" rel=\"noopener\">https://linux.cn/thread-5529-1-1.html</a><br>p2pcssocket</li>\n</ul>"},{"title":"tcpip_MAC","date":"2018-06-03T04:29:48.000Z","_content":"### mac  \n#### mac \nmacmacmac  <!--more-->\n  \nmac(arp),  \n   \nmac80x  \nmtk\n#### mac \n (),macppp  \n -->:wifimacmacmacmac()arpmac;\n ...  \n \n#### mac,mtu,msdu,mpdu  \nmac--ip(ip+/arp/...mac  \nmac\n+ EthernetII:  dest addr+src addr+type+data+fcs\n+ Ethernet 802.2:dest addr+srcaddr+len+ llc+data+fcs\n+ Ethernet 802.3:dest addr+src addr+len+data+fcs \n+ Ethernet SNAP:dest addr+src addr+len+llc+snap+data+fcs\nhttps://blog.csdn.net/xiao628945/article/details/8006022\n802.11n\n+ 802.11+msdu()+fcs(crc)  \n802.11wifi,802.11subtypehttps://blog.csdn.net/suiyuan19840208/article/details/17200745spec:  \nhttps://blog.csdn.net/robertsong2004/article/details/42805803   \nip??  \nfull mac driverFull MacDriverAuthAssocDrivercommandFirmwareAPFirmwareAssoc ResponsereportDriverEventresultAIDassocIEDrivercfg80211supplicantEAPOLEAPOL DataAssoc ResponseIE  soft mac(Soft Macmac80211WiFiMac80211mac80211cfg80211nl80211(netlink)wpa_supplicantEAPOLEAPOLDataSupplicantDHCP)\npcethernetII802.11802.11ehternetIIwifiPF_PACKETethernetIIethernetII  \ntcpdump  \n//to do\n\n\nmacmtu:\nmacmac[46-1500]+mac,mtumac1500    \nmsdu mpdu:\nhttps://blog.csdn.net/zhengnice/article/details/51923132\nmsdumpduspec416\n\n##### mac\ndest addr,src addr ,proto type; 14byte\n\n#### mac  \nwifi  \n  \n\n+ \n+ : ()wifibeaconwifi(wifimacmac  \n+ balalal\n##### \n#### mac\nwifistation  \nAB,CD;  \n+ A,BC,A,BPF_PACKETmacarp  \n+ A,Bwifi,wifibeacon,\n+ A,B\n+ _AC,BD,macmacmac---mac?arpipap_\n+ 802.11n,ac//\n+ \n\n#### openwrt\n\nspec:Wireless LAN Medium Access Control\n(MAC)\nand Physical Layer (PHY) Specifications","source":"_posts/tcpip-MAC.md","raw":"---\ntitle: tcpip_MAC\ndate: 2018-06-03 12:29:48\ntags: tcpip_mac\ncategories: tcpip\n---\n### mac  \n#### mac \nmacmacmac  <!--more-->\n  \nmac(arp),  \n   \nmac80x  \nmtk\n#### mac \n (),macppp  \n -->:wifimacmacmacmac()arpmac;\n ...  \n \n#### mac,mtu,msdu,mpdu  \nmac--ip(ip+/arp/...mac  \nmac\n+ EthernetII:  dest addr+src addr+type+data+fcs\n+ Ethernet 802.2:dest addr+srcaddr+len+ llc+data+fcs\n+ Ethernet 802.3:dest addr+src addr+len+data+fcs \n+ Ethernet SNAP:dest addr+src addr+len+llc+snap+data+fcs\nhttps://blog.csdn.net/xiao628945/article/details/8006022\n802.11n\n+ 802.11+msdu()+fcs(crc)  \n802.11wifi,802.11subtypehttps://blog.csdn.net/suiyuan19840208/article/details/17200745spec:  \nhttps://blog.csdn.net/robertsong2004/article/details/42805803   \nip??  \nfull mac driverFull MacDriverAuthAssocDrivercommandFirmwareAPFirmwareAssoc ResponsereportDriverEventresultAIDassocIEDrivercfg80211supplicantEAPOLEAPOL DataAssoc ResponseIE  soft mac(Soft Macmac80211WiFiMac80211mac80211cfg80211nl80211(netlink)wpa_supplicantEAPOLEAPOLDataSupplicantDHCP)\npcethernetII802.11802.11ehternetIIwifiPF_PACKETethernetIIethernetII  \ntcpdump  \n//to do\n\n\nmacmtu:\nmacmac[46-1500]+mac,mtumac1500    \nmsdu mpdu:\nhttps://blog.csdn.net/zhengnice/article/details/51923132\nmsdumpduspec416\n\n##### mac\ndest addr,src addr ,proto type; 14byte\n\n#### mac  \nwifi  \n  \n\n+ \n+ : ()wifibeaconwifi(wifimacmac  \n+ balalal\n##### \n#### mac\nwifistation  \nAB,CD;  \n+ A,BC,A,BPF_PACKETmacarp  \n+ A,Bwifi,wifibeacon,\n+ A,B\n+ _AC,BD,macmacmac---mac?arpipap_\n+ 802.11n,ac//\n+ \n\n#### openwrt\n\nspec:Wireless LAN Medium Access Control\n(MAC)\nand Physical Layer (PHY) Specifications","slug":"tcpip-MAC","published":1,"updated":"2018-06-03T04:32:12.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghq1002o00jxt0dcy99q","content":"<h3 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h3><h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p>macmacmac  <a id=\"more\"></a><br><br>mac(arp),<br><br>mac80x<br>mtk</p>\n<h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p> (),macppp<br> &gt;:wifimacmacmacmac()arpmac;<br> <br> </p>\n<h4 id=\"mac-mtu-msdu-mpdu\"><a href=\"#mac-mtu-msdu-mpdu\" class=\"headerlink\" title=\"mac,mtu,msdu,mpdu\"></a>mac,mtu,msdu,mpdu</h4><p>macip(ip+/arp/mac<br>mac</p>\n<ul>\n<li>EthernetII:  dest addr+src addr+type+data+fcs</li>\n<li>Ethernet 802.2:dest addr+srcaddr+len+ llc+data+fcs</li>\n<li>Ethernet 802.3:dest addr+src addr+len+data+fcs </li>\n<li>Ethernet SNAP:dest addr+src addr+len+llc+snap+data+fcs<br><a href=\"https://blog.csdn.net/xiao628945/article/details/8006022\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/xiao628945/article/details/8006022</a><br>802.11n</li>\n<li>802.11+msdu()+fcs(crc)<br>802.11wifi,802.11subtype<a href=\"https://blog.csdn.net/suiyuan19840208/article/details/17200745spec:\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/suiyuan19840208/article/details/17200745spec:</a><br><a href=\"https://blog.csdn.net/robertsong2004/article/details/42805803\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/robertsong2004/article/details/42805803</a><br>ip??<br>full mac driverFull MacDriverAuthAssocDrivercommandFirmwareAPFirmwareAssoc ResponsereportDriverEventresultAIDassocIEDrivercfg80211supplicantEAPOLEAPOL DataAssoc ResponseIE  soft mac(Soft Macmac80211WiFiMac80211mac80211cfg80211nl80211(netlink)wpa_supplicantEAPOLEAPOLDataSupplicantDHCP)<br>pcethernetII802.11802.11ehternetIIwifiPF_PACKETethernetIIethernetII<br>tcpdump<br>//to do</li>\n</ul>\n<p>macmtu:<br>macmac[46-1500]+mac,mtumac1500<br>msdu mpdu:<br><a href=\"https://blog.csdn.net/zhengnice/article/details/51923132\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zhengnice/article/details/51923132</a><br>msdumpduspec416</p>\n<h5 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h5><p>dest addr,src addr ,proto type; 14byte<br></p>\n<h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p>wifi<br><br></p>\n<ul>\n<li></li>\n<li>: ()wifibeaconwifi(wifimacmac  </li>\n<li>balalal<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4>wifistation<br>AB,CD;  </li>\n<li>A,BC,A,BPF_PACKETmacarp  </li>\n<li>A,Bwifi,wifibeacon,</li>\n<li>A,B</li>\n<li><em>AC,BD,macmacmacmac?arpipap</em></li>\n<li>802.11n,ac//</li>\n<li></li>\n</ul>\n<h4 id=\"openwrt\"><a href=\"#openwrt\" class=\"headerlink\" title=\"openwrt\"></a>openwrt</h4><p><br>spec:Wireless LAN Medium Access Control<br>(MAC)<br>and Physical Layer (PHY) Specifications</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h3><h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p>macmacmac","more":"<br><br>mac(arp),<br><br>mac80x<br>mtk</p>\n<h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p> (),macppp<br> &gt;:wifimacmacmacmac()arpmac;<br> <br> </p>\n<h4 id=\"mac-mtu-msdu-mpdu\"><a href=\"#mac-mtu-msdu-mpdu\" class=\"headerlink\" title=\"mac,mtu,msdu,mpdu\"></a>mac,mtu,msdu,mpdu</h4><p>macip(ip+/arp/mac<br>mac</p>\n<ul>\n<li>EthernetII:  dest addr+src addr+type+data+fcs</li>\n<li>Ethernet 802.2:dest addr+srcaddr+len+ llc+data+fcs</li>\n<li>Ethernet 802.3:dest addr+src addr+len+data+fcs </li>\n<li>Ethernet SNAP:dest addr+src addr+len+llc+snap+data+fcs<br><a href=\"https://blog.csdn.net/xiao628945/article/details/8006022\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/xiao628945/article/details/8006022</a><br>802.11n</li>\n<li>802.11+msdu()+fcs(crc)<br>802.11wifi,802.11subtype<a href=\"https://blog.csdn.net/suiyuan19840208/article/details/17200745spec:\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/suiyuan19840208/article/details/17200745spec:</a><br><a href=\"https://blog.csdn.net/robertsong2004/article/details/42805803\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/robertsong2004/article/details/42805803</a><br>ip??<br>full mac driverFull MacDriverAuthAssocDrivercommandFirmwareAPFirmwareAssoc ResponsereportDriverEventresultAIDassocIEDrivercfg80211supplicantEAPOLEAPOL DataAssoc ResponseIE  soft mac(Soft Macmac80211WiFiMac80211mac80211cfg80211nl80211(netlink)wpa_supplicantEAPOLEAPOLDataSupplicantDHCP)<br>pcethernetII802.11802.11ehternetIIwifiPF_PACKETethernetIIethernetII<br>tcpdump<br>//to do</li>\n</ul>\n<p>macmtu:<br>macmac[46-1500]+mac,mtumac1500<br>msdu mpdu:<br><a href=\"https://blog.csdn.net/zhengnice/article/details/51923132\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zhengnice/article/details/51923132</a><br>msdumpduspec416</p>\n<h5 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h5><p>dest addr,src addr ,proto type; 14byte<br></p>\n<h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4><p>wifi<br><br></p>\n<ul>\n<li></li>\n<li>: ()wifibeaconwifi(wifimacmac  </li>\n<li>balalal<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h4 id=\"mac\"><a href=\"#mac\" class=\"headerlink\" title=\"mac\"></a>mac</h4>wifistation<br>AB,CD;  </li>\n<li>A,BC,A,BPF_PACKETmacarp  </li>\n<li>A,Bwifi,wifibeacon,</li>\n<li>A,B</li>\n<li><em>AC,BD,macmacmacmac?arpipap</em></li>\n<li>802.11n,ac//</li>\n<li></li>\n</ul>\n<h4 id=\"openwrt\"><a href=\"#openwrt\" class=\"headerlink\" title=\"openwrt\"></a>openwrt</h4><p><br>spec:Wireless LAN Medium Access Control<br>(MAC)<br>and Physical Layer (PHY) Specifications</p>"},{"title":"tcpip_PF_PACKET","date":"2018-05-27T12:28:40.000Z","_content":"{% asset_img pf_packet.jpg it just picture %}\n### PF_PACKET\n### PF_PACKET\nlinux(mac)\n<!-- more -->\n### PF_PACKET\n+   \n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>```\n\n```cpp\n//\nvoid GetEthInfor(char *name ,  char *MAC_addr , struct in_addr * IP_addr)//macip\n{\n   struct ifreq  eth;  //\n   ///net/if.h,\n   int fd;             //\n   int temp=0;         //\n   int i=0;            //\n   strncpy(eth.ifr_name,name,sizeof(struct ifreq)-1);\n  // fd = socket(AF_INET,SOCK_DGRAM,0);\n  // fd=socket(AF_INET,SOCK_STREAM,0); \n    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));\n    if(fd<0)\n    {\n       printf(\"socket failed!\\n\");\n       exit(1);\n    }\n        //MAC\n     temp = ioctl(fd,SIOCGIFHWADDR,&eth);\n     if(temp<0)\n     {\n        printf(\"ioctl--get hardware addr failed!\\n\");\n        exit(1);\n     }\n      strncpy(MAC_addr,eth.ifr_hwaddr.sa_data,6);\n      printf(\"The MAC_addr is:\");\n      for(i =0 ;i<6;i++)\n          printf(\"%4X\",(unsigned char)eth.ifr_hwaddr.sa_data[i]); \n      printf(\"\\n\");\n       \n        //IP\n      temp = ioctl(fd,SIOCGIFADDR,&eth);\n      if(temp<0)\n      {\n         printf(\"ioctl--get hardware addr failed!\\n\");\n         exit(1);\n      }\n      memcpy(IP_addr ,&(((struct sockaddr_in *)(&eth.ifr_addr))->sin_addr),4);\n      //\n      printf(\"got ipaddr:%s\\n\",inet_ntoa(*IP_addr)); \n      close(fd);\n}\n//int,fd\nint Get_IfaceIndex(int fd, const char* interfaceName)\n{\nstruct ifreq ifr;\nif (interfaceName == NULL)\n{\n   return -1;\n}\nmemset(&ifr, 0, sizeof(ifr));\nstrcpy(ifr.ifr_name, interfaceName);\nif (ioctl(fd, SIOCGIFINDEX, &ifr) == -1)\n{\n   printf(\"RED ioctl error\\n\");\n   return -1;\n}\nreturn ifr.ifr_ifindex;\n}\nint set_Iface_promisc(int fd, int dev_id)//fdindex\n{\nstruct packet_mreq mr;\nmemset(&mr,0,sizeof(mr));\nmr.mr_ifindex = dev_id;\nmr.mr_type = PACKET_MR_PROMISC;\nif(setsockopt(fd, SOL_PACKET, PACKET_ADD_MEMBERSHIP,&mr,sizeof(mr))==-1)//PACKET_DROP_MEMBERSHIP\n{\n   fprintf(stderr,\"GREEN set promisc failed! \\n\");\n   return -1;\n}\nreturn 0;\n}```\n\n```cpp\nint main ()\n{\n\t unsigned char MAC_ADDR[6];\n     struct in_addr IP_ADDR;///netinet/in.h32IPv4.\n\t //MACIP\n    GetEthInfor(\"wlp2s0\",MAC_ADDR,&IP_ADDR);\n    int fd;\n     fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ARP));\n    int index=Get_IfaceIndex(fd,\"enp1s0\");\n    printf(\"index:%d\\n\",index);\n    return 0;\n   }\n```\n\n### PF_PACKET\n  \nman packet\n * AF_PACKET linux.\n *  \n          SOCK_DGRAM----\n          SOCK_RAW------ \n          * SOCK_RAW,MAC\n          * MAClinux/if_ether.hethhdr\n          * SOCK_DGRAMMAC\n          * \n + :IP ,ARP,RARP\n   *   \n   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)\n  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)  \n  2)  IEEE  \n  3IANA  \n      ETH_P_ALL\n      0x88b50x88b6   \n(socket_typeSOCK_RAWSOCK_DGRAMsockaddr_llprotocolIEEE 802.3<linux/if_ether.h>protocolhtons(ETH_P_ALL)protocolPACKET)\n+ \n```cpp\n  int readnum = recvfrom(rawsock, buffer,2048,0, (struct sockaddr*)(&eth_info),&leneth_info);\n  int readnum = read(rawsock, buffer,2048);\n  int readnum = recvfrom(rawsock, buffer,2048,0, NULL,NULL);```\n        \n+ \n```c\n#include <stdio.h>\n#include <unistd.h>\n#include <sys/socket.h>\n#include <sys/types.h>\n#include <linux/if_ether.h>\n#include <linux/in.h>\n#include <stdlib.h>\n#include <linux/if_packet.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>\n#define BUFFER_MAX 2048```\n\n```c\nint main(int argc, char *argv[])\n{\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n    }\n    return 0;\n   }```\n  \n+ \n```c\nint main(int argc, char *argv[])\n{\n struct sockaddr_ll eth_info;///linux/if_packet.h \n  eth_info.sll_family = PF_PACKET;  //PF_PACKETsys/types.h\n  eth_info.sll_ifindex = if_nametoindex(\"lo\");////net/if.h\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n if(bind(rawsock,(struct sockaddr *)(&eth_info),sizeof(eth_info))==-1)//\n{\n       printf(\"error: bind!!\\n\");\n        exit(0);\n}\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n    }\n    return 0;\n   }```\n  \n+ mac\n```c\nint main(int argc, char *argv[])\n{\n    int rawsock;\n    char buffer[BUFFER_MAX];\n    char *ethhead;\n    char *iphead;\n    char *tcphead;\n    char *udphead;\n    char *icmphead;\n    char *pHead;\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n         if(readnum < 42)\n        {\n            printf(\"error: Header is incomplete!!!\\n\");\n            continue;\n        }\n      //  for(j;j<readnum;j++)\n      //     printf(\"%.2X:\",buffer[j]&0xFF);\n        ethhead = (char *)buffer;\n        pHead = ethhead;\n        int ethernetmask = 0XFF;\n        framecount++;\n        printf(\"------------------Analysis   Packet [%d]---------------------\\n\",framecount);\n       // printf(\"all:-----%s\\n\",ethhead);\n        printf(\"MAC:\");\n        \n        int i = 6;\n        for(; i <=11; i++)\n        {\n            printf(\"%.2X:\",pHead[i]&ethernetmask);\n        }\n        printf(\"---->\");\n        for(i = 0; i <=5; i++)\n        {\n            printf(\"%.2X:\",pHead[i]&ethernetmask);\n        }\n        printf(\"\\n\");\n        printf(\"proto: %.2x:\",pHead[12]&ethernetmask);\n        printf(\"proto2: %.2x:\\n\",pHead[13]&ethernetmask);        \n        iphead = ethhead + 14;\n        pHead = iphead + 14;\n        printf(\"IP:\");\n        for(i = 0; i <=3; i++)\n        {\n            printf(\"%d\",pHead[i]&ethernetmask);\n            if(i != 3)\n            printf(\".\");\n        }\n        printf(\"---->\");\n        for(i = 10; i <=13; i++)\n        {\n            printf(\"%d\",pHead[i]&ethernetmask);\n            if(i != 13)\n            printf(\".\");\n        }\n        printf(\"\\n\");\n        int prototype = (iphead + 9)[0];\n     //   printf(\"Protocol: %.2X:\",prototype);\n        //int prototype = (iphead + 9)[0];\n        pHead = iphead + 20;\n        printf(\"Protocol: \");\n        switch(prototype)\n        {\n            case IPPROTO_ICMP:\n                printf(\"ICMP\\n\");\n                break;\n            case IPPROTO_IGMP:\n                printf(\"IGMP\\n\");\n                break;\n            case IPPROTO_IPIP:\n                printf(\"IP\\n\");\n                break;\n            case IPPROTO_TCP :\n                printf(\"TCP | source port: %u | \",(pHead[0]<<8)&0XFF00 | pHead[1]&0XFF);\n                printf(\"dest port: %u\\n\", (pHead[2]<<8)&0XFF00 | pHead[3]&0XFF);\n                break;\n            case IPPROTO_UDP :\n                printf(\"UDP | source port: %u | \",(pHead[0]<<8)&0XFF00 | pHead[1]&0XFF);\n                printf(\"dest port: %u\\n\", (pHead[2]<<8)&0XFF00 | pHead[3]&0XFF);\n                break;\n            case IPPROTO_RAW :\n                printf(\"RAW\\n\");\n                break;\n            default:\n                printf(\"Unkown\\n\");\n        }\n      printf(\"-------------------------end-----------------------\\n\");\n    }\n    return 0;\n   }```\nstruct iphdr\n   \n```cpp\n struct iphdr ip;\n ip = (struct iphdr *)(buffer + sizeof(struct ethhdr));\n ```\n\n\n### PF_PACKET \n+   \n```cpp\nnum = sendto(rawsock, buffer,2048 , 0 ,(struct sockaddr*)(&eth_info),sizeof(eth_info));\n if(num<0)\n {\n  printf(\"sendto failed!\\n\");\n  exit(1);\n }\n printf(\"success:%d\\n\",num);```","source":"_posts/tcpip-PF-PACKET.md","raw":"---\ntitle: tcpip_PF_PACKET\ndate: 2018-05-27 20:28:40\ntags: PF_PACKET\ncategories: tcpip\n---\n{% asset_img pf_packet.jpg it just picture %}\n### PF_PACKET\n### PF_PACKET\nlinux(mac)\n<!-- more -->\n### PF_PACKET\n+   \n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <sys/types.h>\n#include <sys/socket.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>```\n\n```cpp\n//\nvoid GetEthInfor(char *name ,  char *MAC_addr , struct in_addr * IP_addr)//macip\n{\n   struct ifreq  eth;  //\n   ///net/if.h,\n   int fd;             //\n   int temp=0;         //\n   int i=0;            //\n   strncpy(eth.ifr_name,name,sizeof(struct ifreq)-1);\n  // fd = socket(AF_INET,SOCK_DGRAM,0);\n  // fd=socket(AF_INET,SOCK_STREAM,0); \n    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));\n    if(fd<0)\n    {\n       printf(\"socket failed!\\n\");\n       exit(1);\n    }\n        //MAC\n     temp = ioctl(fd,SIOCGIFHWADDR,&eth);\n     if(temp<0)\n     {\n        printf(\"ioctl--get hardware addr failed!\\n\");\n        exit(1);\n     }\n      strncpy(MAC_addr,eth.ifr_hwaddr.sa_data,6);\n      printf(\"The MAC_addr is:\");\n      for(i =0 ;i<6;i++)\n          printf(\"%4X\",(unsigned char)eth.ifr_hwaddr.sa_data[i]); \n      printf(\"\\n\");\n       \n        //IP\n      temp = ioctl(fd,SIOCGIFADDR,&eth);\n      if(temp<0)\n      {\n         printf(\"ioctl--get hardware addr failed!\\n\");\n         exit(1);\n      }\n      memcpy(IP_addr ,&(((struct sockaddr_in *)(&eth.ifr_addr))->sin_addr),4);\n      //\n      printf(\"got ipaddr:%s\\n\",inet_ntoa(*IP_addr)); \n      close(fd);\n}\n//int,fd\nint Get_IfaceIndex(int fd, const char* interfaceName)\n{\nstruct ifreq ifr;\nif (interfaceName == NULL)\n{\n   return -1;\n}\nmemset(&ifr, 0, sizeof(ifr));\nstrcpy(ifr.ifr_name, interfaceName);\nif (ioctl(fd, SIOCGIFINDEX, &ifr) == -1)\n{\n   printf(\"RED ioctl error\\n\");\n   return -1;\n}\nreturn ifr.ifr_ifindex;\n}\nint set_Iface_promisc(int fd, int dev_id)//fdindex\n{\nstruct packet_mreq mr;\nmemset(&mr,0,sizeof(mr));\nmr.mr_ifindex = dev_id;\nmr.mr_type = PACKET_MR_PROMISC;\nif(setsockopt(fd, SOL_PACKET, PACKET_ADD_MEMBERSHIP,&mr,sizeof(mr))==-1)//PACKET_DROP_MEMBERSHIP\n{\n   fprintf(stderr,\"GREEN set promisc failed! \\n\");\n   return -1;\n}\nreturn 0;\n}```\n\n```cpp\nint main ()\n{\n\t unsigned char MAC_ADDR[6];\n     struct in_addr IP_ADDR;///netinet/in.h32IPv4.\n\t //MACIP\n    GetEthInfor(\"wlp2s0\",MAC_ADDR,&IP_ADDR);\n    int fd;\n     fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ARP));\n    int index=Get_IfaceIndex(fd,\"enp1s0\");\n    printf(\"index:%d\\n\",index);\n    return 0;\n   }\n```\n\n### PF_PACKET\n  \nman packet\n * AF_PACKET linux.\n *  \n          SOCK_DGRAM----\n          SOCK_RAW------ \n          * SOCK_RAW,MAC\n          * MAClinux/if_ether.hethhdr\n          * SOCK_DGRAMMAC\n          * \n + :IP ,ARP,RARP\n   *   \n   1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)\n  IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)  \n  2)  IEEE  \n  3IANA  \n      ETH_P_ALL\n      0x88b50x88b6   \n(socket_typeSOCK_RAWSOCK_DGRAMsockaddr_llprotocolIEEE 802.3<linux/if_ether.h>protocolhtons(ETH_P_ALL)protocolPACKET)\n+ \n```cpp\n  int readnum = recvfrom(rawsock, buffer,2048,0, (struct sockaddr*)(&eth_info),&leneth_info);\n  int readnum = read(rawsock, buffer,2048);\n  int readnum = recvfrom(rawsock, buffer,2048,0, NULL,NULL);```\n        \n+ \n```c\n#include <stdio.h>\n#include <unistd.h>\n#include <sys/socket.h>\n#include <sys/types.h>\n#include <linux/if_ether.h>\n#include <linux/in.h>\n#include <stdlib.h>\n#include <linux/if_packet.h>\n#include <netinet/in.h>\n#include <arpa/inet.h>\n#include <netdb.h>\n#include <linux/if.h>\n#include <sys/ioctl.h>\n#include <linux/if_packet.h>\n#include <linux/if_ether.h>\n#define BUFFER_MAX 2048```\n\n```c\nint main(int argc, char *argv[])\n{\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n    }\n    return 0;\n   }```\n  \n+ \n```c\nint main(int argc, char *argv[])\n{\n struct sockaddr_ll eth_info;///linux/if_packet.h \n  eth_info.sll_family = PF_PACKET;  //PF_PACKETsys/types.h\n  eth_info.sll_ifindex = if_nametoindex(\"lo\");////net/if.h\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n if(bind(rawsock,(struct sockaddr *)(&eth_info),sizeof(eth_info))==-1)//\n{\n       printf(\"error: bind!!\\n\");\n        exit(0);\n}\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n    }\n    return 0;\n   }```\n  \n+ mac\n```c\nint main(int argc, char *argv[])\n{\n    int rawsock;\n    char buffer[BUFFER_MAX];\n    char *ethhead;\n    char *iphead;\n    char *tcphead;\n    char *udphead;\n    char *icmphead;\n    char *pHead;\n if((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)\n   {\n        printf(\"error: create raw socket!!!\\n\");\n        exit(0);\n    }\n  while(1)\n   {\n        int readnum = read(rawsock, buffer,2048);// can read packet\n        //printf(\"recv buffer:%s\\n\",buffer);\n         if(readnum < 42)\n        {\n            printf(\"error: Header is incomplete!!!\\n\");\n            continue;\n        }\n      //  for(j;j<readnum;j++)\n      //     printf(\"%.2X:\",buffer[j]&0xFF);\n        ethhead = (char *)buffer;\n        pHead = ethhead;\n        int ethernetmask = 0XFF;\n        framecount++;\n        printf(\"------------------Analysis   Packet [%d]---------------------\\n\",framecount);\n       // printf(\"all:-----%s\\n\",ethhead);\n        printf(\"MAC:\");\n        \n        int i = 6;\n        for(; i <=11; i++)\n        {\n            printf(\"%.2X:\",pHead[i]&ethernetmask);\n        }\n        printf(\"---->\");\n        for(i = 0; i <=5; i++)\n        {\n            printf(\"%.2X:\",pHead[i]&ethernetmask);\n        }\n        printf(\"\\n\");\n        printf(\"proto: %.2x:\",pHead[12]&ethernetmask);\n        printf(\"proto2: %.2x:\\n\",pHead[13]&ethernetmask);        \n        iphead = ethhead + 14;\n        pHead = iphead + 14;\n        printf(\"IP:\");\n        for(i = 0; i <=3; i++)\n        {\n            printf(\"%d\",pHead[i]&ethernetmask);\n            if(i != 3)\n            printf(\".\");\n        }\n        printf(\"---->\");\n        for(i = 10; i <=13; i++)\n        {\n            printf(\"%d\",pHead[i]&ethernetmask);\n            if(i != 13)\n            printf(\".\");\n        }\n        printf(\"\\n\");\n        int prototype = (iphead + 9)[0];\n     //   printf(\"Protocol: %.2X:\",prototype);\n        //int prototype = (iphead + 9)[0];\n        pHead = iphead + 20;\n        printf(\"Protocol: \");\n        switch(prototype)\n        {\n            case IPPROTO_ICMP:\n                printf(\"ICMP\\n\");\n                break;\n            case IPPROTO_IGMP:\n                printf(\"IGMP\\n\");\n                break;\n            case IPPROTO_IPIP:\n                printf(\"IP\\n\");\n                break;\n            case IPPROTO_TCP :\n                printf(\"TCP | source port: %u | \",(pHead[0]<<8)&0XFF00 | pHead[1]&0XFF);\n                printf(\"dest port: %u\\n\", (pHead[2]<<8)&0XFF00 | pHead[3]&0XFF);\n                break;\n            case IPPROTO_UDP :\n                printf(\"UDP | source port: %u | \",(pHead[0]<<8)&0XFF00 | pHead[1]&0XFF);\n                printf(\"dest port: %u\\n\", (pHead[2]<<8)&0XFF00 | pHead[3]&0XFF);\n                break;\n            case IPPROTO_RAW :\n                printf(\"RAW\\n\");\n                break;\n            default:\n                printf(\"Unkown\\n\");\n        }\n      printf(\"-------------------------end-----------------------\\n\");\n    }\n    return 0;\n   }```\nstruct iphdr\n   \n```cpp\n struct iphdr ip;\n ip = (struct iphdr *)(buffer + sizeof(struct ethhdr));\n ```\n\n\n### PF_PACKET \n+   \n```cpp\nnum = sendto(rawsock, buffer,2048 , 0 ,(struct sockaddr*)(&eth_info),sizeof(eth_info));\n if(num<0)\n {\n  printf(\"sendto failed!\\n\");\n  exit(1);\n }\n printf(\"success:%d\\n\",num);```","slug":"tcpip-PF-PACKET","published":1,"updated":"2018-05-27T12:37:02.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghq5002r00jx9hqmzuq0","content":"<img src=\"/2018/05/27/tcpip-PF-PACKET/pf_packet.jpg\" title=\"it just picture\">\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><p>linux(mac)<br><a id=\"more\"></a></p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><ul>\n<li>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name ,  <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span><span class=\"comment\">//macip</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span>  <span class=\"title\">eth</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"comment\">///net/if.h,</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> fd;             <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> temp=<span class=\"number\">0</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;            <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"built_in\">strncpy</span>(eth.ifr_name,name,<span class=\"keyword\">sizeof</span>(struct ifreq)<span class=\"number\">-1</span>);</span><br><span class=\"line\">  <span class=\"comment\">// fd = socket(AF_INET,SOCK_DGRAM,0);</span></span><br><span class=\"line\">  <span class=\"comment\">// fd=socket(AF_INET,SOCK_STREAM,0); </span></span><br><span class=\"line\">    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket failed!\\n\"</span>);</span><br><span class=\"line\">       <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">        <span class=\"comment\">//MAC</span></span><br><span class=\"line\">     temp = ioctl(fd,SIOCGIFHWADDR,&amp;eth);</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">      <span class=\"built_in\">strncpy</span>(MAC_addr,eth.ifr_hwaddr.sa_data,<span class=\"number\">6</span>);</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"The MAC_addr is:\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span>(i =<span class=\"number\">0</span> ;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X\"</span>,(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)eth.ifr_hwaddr.sa_data[i]); </span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//IP</span></span><br><span class=\"line\">      temp = ioctl(fd,SIOCGIFADDR,&amp;eth);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">         <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">         <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">memcpy</span>(IP_addr ,&amp;(((struct sockaddr_in *)(&amp;eth.ifr_addr))-&gt;sin_addr),<span class=\"number\">4</span>);</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"got ipaddr:%s\\n\"</span>,inet_ntoa(*IP_addr)); </span><br><span class=\"line\">      close(fd);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//int,fd</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">Get_IfaceIndex</span><span class=\"params\">(<span class=\"keyword\">int</span> fd, <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* interfaceName)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span> <span class=\"title\">ifr</span>;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (interfaceName == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">memset</span>(&amp;ifr, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(ifr));</span><br><span class=\"line\"><span class=\"built_in\">strcpy</span>(ifr.ifr_name, interfaceName);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (ioctl(fd, SIOCGIFINDEX, &amp;ifr) == <span class=\"number\">-1</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"RED ioctl error\\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> ifr.ifr_ifindex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">set_Iface_promisc</span><span class=\"params\">(<span class=\"keyword\">int</span> fd, <span class=\"keyword\">int</span> dev_id)</span><span class=\"comment\">//fdindex</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">packet_mreq</span> <span class=\"title\">mr</span>;</span></span><br><span class=\"line\"><span class=\"built_in\">memset</span>(&amp;mr,<span class=\"number\">0</span>,<span class=\"keyword\">sizeof</span>(mr));</span><br><span class=\"line\">mr.mr_ifindex = dev_id;</span><br><span class=\"line\">mr.mr_type = PACKET_MR_PROMISC;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(setsockopt(fd, SOL_PACKET, PACKET_ADD_MEMBERSHIP,&amp;mr,<span class=\"keyword\">sizeof</span>(mr))==<span class=\"number\">-1</span>)<span class=\"comment\">//PACKET_DROP_MEMBERSHIP</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"built_in\">fprintf</span>(<span class=\"built_in\">stderr</span>,<span class=\"string\">\"GREEN set promisc failed! \\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> MAC_ADDR[<span class=\"number\">6</span>];</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">in_addr</span> <span class=\"title\">IP_ADDR</span>;</span><span class=\"comment\">///netinet/in.h32IPv4.</span></span><br><span class=\"line\">\t <span class=\"comment\">//MACIP</span></span><br><span class=\"line\">    GetEthInfor(<span class=\"string\">\"wlp2s0\"</span>,MAC_ADDR,&amp;IP_ADDR);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> fd;</span><br><span class=\"line\">     fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ARP));</span><br><span class=\"line\">    <span class=\"keyword\">int</span> index=Get_IfaceIndex(fd,<span class=\"string\">\"enp1s0\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"index:%d\\n\"</span>,index);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><p><br>man packet</p>\n<ul>\n<li>AF_PACKET linux.</li>\n<li> <pre><code>SOCK_DGRAM----\nSOCK_RAW------ \n* SOCK_RAW,MAC\n* MAClinux/if_ether.hethhdr\n* SOCK_DGRAMMAC\n* \n</code></pre></li>\n</ul>\n<ul>\n<li>:IP ,ARP,RARP<ul>\n<li><br>1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)<br>IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)<br>2)  IEEE<br>3IANA<br> ETH_P_ALL<br> 0x88b50x88b6<br>(socket_typeSOCK_RAWSOCK_DGRAMsockaddr_llprotocolIEEE 802.3&lt;linux/if_ether.h&gt;protocolhtons(ETH_P_ALL)protocolPACKET)</li>\n</ul>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> readnum = recvfrom(rawsock, buffer,<span class=\"number\">2048</span>,<span class=\"number\">0</span>, (struct sockaddr*)(&amp;eth_info),&amp;leneth_info);</span><br><span class=\"line\"><span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> readnum = recvfrom(rawsock, buffer,<span class=\"number\">2048</span>,<span class=\"number\">0</span>, <span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> BUFFER_MAX 2048</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_ll</span> <span class=\"title\">eth_info</span>;</span><span class=\"comment\">///linux/if_packet.h </span></span><br><span class=\"line\">  eth_info.sll_family = PF_PACKET;  <span class=\"comment\">//PF_PACKETsys/types.h</span></span><br><span class=\"line\">  eth_info.sll_ifindex = if_nametoindex(<span class=\"string\">\"lo\"</span>);<span class=\"comment\">////net/if.h</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(bind(rawsock,(struct sockaddr *)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info))==<span class=\"number\">-1</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: bind!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>mac<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> rawsock;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> buffer[BUFFER_MAX];</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *ethhead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *iphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *tcphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *udphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *icmphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *pHead;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span>(readnum &lt; <span class=\"number\">42</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: Header is incomplete!!!\\n\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  for(j;j&lt;readnum;j++)</span></span><br><span class=\"line\">      <span class=\"comment\">//     printf(\"%.2X:\",buffer[j]&amp;0xFF);</span></span><br><span class=\"line\">        ethhead = (<span class=\"keyword\">char</span> *)buffer;</span><br><span class=\"line\">        pHead = ethhead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> ethernetmask = <span class=\"number\">0XFF</span>;</span><br><span class=\"line\">        framecount++;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"------------------Analysis   Packet [%d]---------------------\\n\"</span>,framecount);</span><br><span class=\"line\">       <span class=\"comment\">// printf(\"all:-----%s\\n\",ethhead);</span></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"MAC:\"</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">6</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(; i &lt;=<span class=\"number\">11</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2X:\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"----&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt;=<span class=\"number\">5</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2X:\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"proto: %.2x:\"</span>,pHead[<span class=\"number\">12</span>]&amp;ethernetmask);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"proto2: %.2x:\\n\"</span>,pHead[<span class=\"number\">13</span>]&amp;ethernetmask);        </span><br><span class=\"line\">        iphead = ethhead + <span class=\"number\">14</span>;</span><br><span class=\"line\">        pHead = iphead + <span class=\"number\">14</span>;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"IP:\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt;=<span class=\"number\">3</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i != <span class=\"number\">3</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\".\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"----&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">10</span>; i &lt;=<span class=\"number\">13</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i != <span class=\"number\">13</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\".\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> prototype = (iphead + <span class=\"number\">9</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">     <span class=\"comment\">//   printf(\"Protocol: %.2X:\",prototype);</span></span><br><span class=\"line\">        <span class=\"comment\">//int prototype = (iphead + 9)[0];</span></span><br><span class=\"line\">        pHead = iphead + <span class=\"number\">20</span>;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Protocol: \"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">switch</span>(prototype)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_ICMP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"ICMP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_IGMP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"IGMP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_IPIP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"IP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_TCP :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"TCP | source port: %u | \"</span>,(pHead[<span class=\"number\">0</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">1</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"dest port: %u\\n\"</span>, (pHead[<span class=\"number\">2</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">3</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_UDP :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"UDP | source port: %u | \"</span>,(pHead[<span class=\"number\">0</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">1</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"dest port: %u\\n\"</span>, (pHead[<span class=\"number\">2</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">3</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_RAW :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"RAW\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"Unkown\\n\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"-------------------------end-----------------------\\n\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>struct iphdr<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">iphdr</span> <span class=\"title\">ip</span>;</span></span><br><span class=\"line\">ip = (struct iphdr *)(buffer + <span class=\"keyword\">sizeof</span>(struct ethhdr));</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><ul>\n<li>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num = sendto(rawsock, buffer,<span class=\"number\">2048</span> , <span class=\"number\">0</span> ,(struct sockaddr*)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info));</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"sendto failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"success:%d\\n\"</span>,num);</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"<img src=\"/2018/05/27/tcpip-PF-PACKET/pf_packet.jpg\" title=\"it just picture\">\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><p>linux(mac)<br>","more":"</p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><ul>\n<li>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">GetEthInfor</span><span class=\"params\">(<span class=\"keyword\">char</span> *name ,  <span class=\"keyword\">char</span> *MAC_addr , struct in_addr * IP_addr)</span><span class=\"comment\">//macip</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">   <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span>  <span class=\"title\">eth</span>;</span>  <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"comment\">///net/if.h,</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> fd;             <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> temp=<span class=\"number\">0</span>;         <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;            <span class=\"comment\">//</span></span><br><span class=\"line\">   <span class=\"built_in\">strncpy</span>(eth.ifr_name,name,<span class=\"keyword\">sizeof</span>(struct ifreq)<span class=\"number\">-1</span>);</span><br><span class=\"line\">  <span class=\"comment\">// fd = socket(AF_INET,SOCK_DGRAM,0);</span></span><br><span class=\"line\">  <span class=\"comment\">// fd=socket(AF_INET,SOCK_STREAM,0); </span></span><br><span class=\"line\">    fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ALL));</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(fd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"socket failed!\\n\"</span>);</span><br><span class=\"line\">       <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">        <span class=\"comment\">//MAC</span></span><br><span class=\"line\">     temp = ioctl(fd,SIOCGIFHWADDR,&amp;eth);</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">      <span class=\"built_in\">strncpy</span>(MAC_addr,eth.ifr_hwaddr.sa_data,<span class=\"number\">6</span>);</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"The MAC_addr is:\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span>(i =<span class=\"number\">0</span> ;i&lt;<span class=\"number\">6</span>;i++)</span><br><span class=\"line\">          <span class=\"built_in\">printf</span>(<span class=\"string\">\"%4X\"</span>,(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span>)eth.ifr_hwaddr.sa_data[i]); </span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//IP</span></span><br><span class=\"line\">      temp = ioctl(fd,SIOCGIFADDR,&amp;eth);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(temp&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">         <span class=\"built_in\">printf</span>(<span class=\"string\">\"ioctl--get hardware addr failed!\\n\"</span>);</span><br><span class=\"line\">         <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">memcpy</span>(IP_addr ,&amp;(((struct sockaddr_in *)(&amp;eth.ifr_addr))-&gt;sin_addr),<span class=\"number\">4</span>);</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"got ipaddr:%s\\n\"</span>,inet_ntoa(*IP_addr)); </span><br><span class=\"line\">      close(fd);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//int,fd</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">Get_IfaceIndex</span><span class=\"params\">(<span class=\"keyword\">int</span> fd, <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* interfaceName)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ifreq</span> <span class=\"title\">ifr</span>;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (interfaceName == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">memset</span>(&amp;ifr, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(ifr));</span><br><span class=\"line\"><span class=\"built_in\">strcpy</span>(ifr.ifr_name, interfaceName);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (ioctl(fd, SIOCGIFINDEX, &amp;ifr) == <span class=\"number\">-1</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"built_in\">printf</span>(<span class=\"string\">\"RED ioctl error\\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> ifr.ifr_ifindex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">set_Iface_promisc</span><span class=\"params\">(<span class=\"keyword\">int</span> fd, <span class=\"keyword\">int</span> dev_id)</span><span class=\"comment\">//fdindex</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">packet_mreq</span> <span class=\"title\">mr</span>;</span></span><br><span class=\"line\"><span class=\"built_in\">memset</span>(&amp;mr,<span class=\"number\">0</span>,<span class=\"keyword\">sizeof</span>(mr));</span><br><span class=\"line\">mr.mr_ifindex = dev_id;</span><br><span class=\"line\">mr.mr_type = PACKET_MR_PROMISC;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(setsockopt(fd, SOL_PACKET, PACKET_ADD_MEMBERSHIP,&amp;mr,<span class=\"keyword\">sizeof</span>(mr))==<span class=\"number\">-1</span>)<span class=\"comment\">//PACKET_DROP_MEMBERSHIP</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   <span class=\"built_in\">fprintf</span>(<span class=\"built_in\">stderr</span>,<span class=\"string\">\"GREEN set promisc failed! \\n\"</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span> <span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> MAC_ADDR[<span class=\"number\">6</span>];</span><br><span class=\"line\">     <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">in_addr</span> <span class=\"title\">IP_ADDR</span>;</span><span class=\"comment\">///netinet/in.h32IPv4.</span></span><br><span class=\"line\">\t <span class=\"comment\">//MACIP</span></span><br><span class=\"line\">    GetEthInfor(<span class=\"string\">\"wlp2s0\"</span>,MAC_ADDR,&amp;IP_ADDR);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> fd;</span><br><span class=\"line\">     fd=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ARP));</span><br><span class=\"line\">    <span class=\"keyword\">int</span> index=Get_IfaceIndex(fd,<span class=\"string\">\"enp1s0\"</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">\"index:%d\\n\"</span>,index);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><p><br>man packet</p>\n<ul>\n<li>AF_PACKET linux.</li>\n<li> <pre><code>SOCK_DGRAM----\nSOCK_RAW------ \n* SOCK_RAW,MAC\n* MAClinux/if_ether.hethhdr\n* SOCK_DGRAMMAC\n* \n</code></pre></li>\n</ul>\n<ul>\n<li>:IP ,ARP,RARP<ul>\n<li><br>1Linux/if_ether.h ETH_P_IP(0x8000)arpETH_P_ARP(0x0806)<br>IEEE 802.1Q VLAN tagsETH_P_8021Q(0x8100)<br>2)  IEEE<br>3IANA<br> ETH_P_ALL<br> 0x88b50x88b6<br>(socket_typeSOCK_RAWSOCK_DGRAMsockaddr_llprotocolIEEE 802.3&lt;linux/if_ether.h&gt;protocolhtons(ETH_P_ALL)protocolPACKET)</li>\n</ul>\n<ul>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> readnum = recvfrom(rawsock, buffer,<span class=\"number\">2048</span>,<span class=\"number\">0</span>, (struct sockaddr*)(&amp;eth_info),&amp;leneth_info);</span><br><span class=\"line\"><span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> readnum = recvfrom(rawsock, buffer,<span class=\"number\">2048</span>,<span class=\"number\">0</span>, <span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/socket.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/types.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netinet/in.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;arpa/inet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;netdb.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;sys/ioctl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_packet.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;linux/if_ether.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> BUFFER_MAX 2048</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_ll</span> <span class=\"title\">eth_info</span>;</span><span class=\"comment\">///linux/if_packet.h </span></span><br><span class=\"line\">  eth_info.sll_family = PF_PACKET;  <span class=\"comment\">//PF_PACKETsys/types.h</span></span><br><span class=\"line\">  eth_info.sll_ifindex = if_nametoindex(<span class=\"string\">\"lo\"</span>);<span class=\"comment\">////net/if.h</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(bind(rawsock,(struct sockaddr *)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info))==<span class=\"number\">-1</span>)<span class=\"comment\">//</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">       <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: bind!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>mac<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc, <span class=\"keyword\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> rawsock;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> buffer[BUFFER_MAX];</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *ethhead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *iphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *tcphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *udphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *icmphead;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> *pHead;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>((rawsock=socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: create raw socket!!!\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">exit</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">   &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> readnum = read(rawsock, buffer,<span class=\"number\">2048</span>);<span class=\"comment\">// can read packet</span></span><br><span class=\"line\">        <span class=\"comment\">//printf(\"recv buffer:%s\\n\",buffer);</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span>(readnum &lt; <span class=\"number\">42</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"error: Header is incomplete!!!\\n\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"comment\">//  for(j;j&lt;readnum;j++)</span></span><br><span class=\"line\">      <span class=\"comment\">//     printf(\"%.2X:\",buffer[j]&amp;0xFF);</span></span><br><span class=\"line\">        ethhead = (<span class=\"keyword\">char</span> *)buffer;</span><br><span class=\"line\">        pHead = ethhead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> ethernetmask = <span class=\"number\">0XFF</span>;</span><br><span class=\"line\">        framecount++;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"------------------Analysis   Packet [%d]---------------------\\n\"</span>,framecount);</span><br><span class=\"line\">       <span class=\"comment\">// printf(\"all:-----%s\\n\",ethhead);</span></span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"MAC:\"</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">6</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(; i &lt;=<span class=\"number\">11</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2X:\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"----&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt;=<span class=\"number\">5</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%.2X:\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"proto: %.2x:\"</span>,pHead[<span class=\"number\">12</span>]&amp;ethernetmask);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"proto2: %.2x:\\n\"</span>,pHead[<span class=\"number\">13</span>]&amp;ethernetmask);        </span><br><span class=\"line\">        iphead = ethhead + <span class=\"number\">14</span>;</span><br><span class=\"line\">        pHead = iphead + <span class=\"number\">14</span>;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"IP:\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt;=<span class=\"number\">3</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i != <span class=\"number\">3</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\".\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"----&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">10</span>; i &lt;=<span class=\"number\">13</span>; i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\"</span>,pHead[i]&amp;ethernetmask);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i != <span class=\"number\">13</span>)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">\".\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> prototype = (iphead + <span class=\"number\">9</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">     <span class=\"comment\">//   printf(\"Protocol: %.2X:\",prototype);</span></span><br><span class=\"line\">        <span class=\"comment\">//int prototype = (iphead + 9)[0];</span></span><br><span class=\"line\">        pHead = iphead + <span class=\"number\">20</span>;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">\"Protocol: \"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">switch</span>(prototype)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_ICMP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"ICMP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_IGMP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"IGMP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_IPIP:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"IP\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_TCP :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"TCP | source port: %u | \"</span>,(pHead[<span class=\"number\">0</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">1</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"dest port: %u\\n\"</span>, (pHead[<span class=\"number\">2</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">3</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_UDP :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"UDP | source port: %u | \"</span>,(pHead[<span class=\"number\">0</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">1</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"dest port: %u\\n\"</span>, (pHead[<span class=\"number\">2</span>]&lt;&lt;<span class=\"number\">8</span>)&amp;<span class=\"number\">0XFF00</span> | pHead[<span class=\"number\">3</span>]&amp;<span class=\"number\">0XFF</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> IPPROTO_RAW :</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"RAW\\n\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">\"Unkown\\n\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"built_in\">printf</span>(<span class=\"string\">\"-------------------------end-----------------------\\n\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>struct iphdr<br><br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">iphdr</span> <span class=\"title\">ip</span>;</span></span><br><span class=\"line\">ip = (struct iphdr *)(buffer + <span class=\"keyword\">sizeof</span>(struct ethhdr));</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h3 id=\"PF-PACKET\"><a href=\"#PF-PACKET\" class=\"headerlink\" title=\"PF_PACKET\"></a>PF_PACKET</h3><ul>\n<li>  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num = sendto(rawsock, buffer,<span class=\"number\">2048</span> , <span class=\"number\">0</span> ,(struct sockaddr*)(&amp;eth_info),<span class=\"keyword\">sizeof</span>(eth_info));</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(num&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">\"sendto failed!\\n\"</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exit</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> <span class=\"built_in\">printf</span>(<span class=\"string\">\"success:%d\\n\"</span>,num);</span><br></pre></td></tr></table></figure></li>\n</ul>"},{"title":"tcpip_mtu","date":"2018-05-20T14:27:55.000Z","_content":"# MTU \nMTUMTUMAC\n### \n#### MTU(Maximum Transmission Unit):  \n   * \n   * macIPtcphttpipipmacmac  <!-- more -->\n   MTU1500Btcpip3008Bio3028B,3028B>1500Bmac),:  \n    ipMTU-IP1500-20=1480;\n      3008B 33008=1480,1480,48  \n MTUMAC  \n \n#### 2MTU:  \n* ->->  \n* ->->  \n* MTU(RFC1191)\n\n#### 3  \n(RFC1191)\n* MTU,ICMP  \n* MTU?  \nping -c 3 -s 1474 -M do 192.168.0.1  \nPING 192.168.0.1 (192.168.0.1) 1474(1502) bytes of data.  \nping: local error: Message too long, mtu=1500\n\n\n#### 4 MTU:  \nref https://www.zhihu.com/question/31460305/answer/183766816  \n    \n* /CSMA/D\n* AbitBBbitAbitAslot time57.6s10Mbps57.6s576bit576bits576bit72864  \n\n1518?  \n* IPtotal lengthbyteIP packet65535 byteEthernet Frame65535 +14 + 4 = 65553 byte10Mbps50ms\n* TCP218byteTCP payload = 218 - Ethernet Header - IP Header - TCP Header = 218 - 18 - 20 - 20 = 160 byte= 160 / 218 = 73%1518= 1460 / 1518 = 96%.\n* 1518 byte ! IP packet  1500 byteMTU\n\n  \n* Hub10Mbps1000M10000MNFSMTU\n* MTU> 9000Jumbo Frame MTU15001508QinQ1512802.1q Mpls label1500 IP packet\n* >MTU\ntraceroute\n* MTUVLANMTU90001500MTU15009000150090001500\n* MRUMTUMRUMTU = MRU900015009000 > MRUMTUMTU\n### \nMTU  \n ifconfig eth0 mtu 1460  \nmtu:  \nnetstat -i\n","source":"_posts/tcpip-mtu.md","raw":"---\ntitle: tcpip_mtu\ndate: 2018-05-20 22:27:55\ntags: tcpip_mac\ncategories: tcpip\n---\n# MTU \nMTUMTUMAC\n### \n#### MTU(Maximum Transmission Unit):  \n   * \n   * macIPtcphttpipipmacmac  <!-- more -->\n   MTU1500Btcpip3008Bio3028B,3028B>1500Bmac),:  \n    ipMTU-IP1500-20=1480;\n      3008B 33008=1480,1480,48  \n MTUMAC  \n \n#### 2MTU:  \n* ->->  \n* ->->  \n* MTU(RFC1191)\n\n#### 3  \n(RFC1191)\n* MTU,ICMP  \n* MTU?  \nping -c 3 -s 1474 -M do 192.168.0.1  \nPING 192.168.0.1 (192.168.0.1) 1474(1502) bytes of data.  \nping: local error: Message too long, mtu=1500\n\n\n#### 4 MTU:  \nref https://www.zhihu.com/question/31460305/answer/183766816  \n    \n* /CSMA/D\n* AbitBBbitAbitAslot time57.6s10Mbps57.6s576bit576bits576bit72864  \n\n1518?  \n* IPtotal lengthbyteIP packet65535 byteEthernet Frame65535 +14 + 4 = 65553 byte10Mbps50ms\n* TCP218byteTCP payload = 218 - Ethernet Header - IP Header - TCP Header = 218 - 18 - 20 - 20 = 160 byte= 160 / 218 = 73%1518= 1460 / 1518 = 96%.\n* 1518 byte ! IP packet  1500 byteMTU\n\n  \n* Hub10Mbps1000M10000MNFSMTU\n* MTU> 9000Jumbo Frame MTU15001508QinQ1512802.1q Mpls label1500 IP packet\n* >MTU\ntraceroute\n* MTUVLANMTU90001500MTU15009000150090001500\n* MRUMTUMRUMTU = MRU900015009000 > MRUMTUMTU\n### \nMTU  \n ifconfig eth0 mtu 1460  \nmtu:  \nnetstat -i\n","slug":"tcpip-mtu","published":1,"updated":"2018-05-20T14:40:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghqb002v00jxqym5i3hs","content":"<h1 id=\"MTU\"><a href=\"#MTU\" class=\"headerlink\" title=\"MTU\"></a>MTU</h1><p>MTUMTUMAC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"MTU-Maximum-Transmission-Unit-\"><a href=\"#MTU-Maximum-Transmission-Unit-\" class=\"headerlink\" title=\"MTU(Maximum Transmission Unit):\"></a>MTU(Maximum Transmission Unit):</h4><ul>\n<li></li>\n<li>macIPtcphttpipipmacmac  <a id=\"more\"></a><br>MTU1500Btcpip3008Bio3028B,3028B&gt;1500Bmac),:<br>ipMTU-IP1500-20=1480;<br> 3008B 33008=1480,1480,48<br>MTUMAC  </li>\n</ul>\n<h4 id=\"2MTU\"><a href=\"#2MTU\" class=\"headerlink\" title=\"2MTU:\"></a>2MTU:</h4><ul>\n<li>-&gt;-&gt;  </li>\n<li>-&gt;-&gt;  </li>\n<li>MTU(RFC1191)</li>\n</ul>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><p>(RFC1191)</p>\n<ul>\n<li>MTU,ICMP  </li>\n<li>MTU?<br>ping -c 3 -s 1474 -M do 192.168.0.1<br>PING 192.168.0.1 (192.168.0.1) 1474(1502) bytes of data.<br>ping: local error: Message too long, mtu=1500<br></li>\n</ul>\n<h4 id=\"4-MTU\"><a href=\"#4-MTU\" class=\"headerlink\" title=\"4 MTU:\"></a>4 MTU:</h4><p>ref <a href=\"https://www.zhihu.com/question/31460305/answer/183766816\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/31460305/answer/183766816</a><br>    </p>\n<ul>\n<li>/CSMA/D</li>\n<li>AbitBBbitAbitAslot time57.6s10Mbps57.6s576bit576bits576bit72864  </li>\n</ul>\n<p>1518?  </p>\n<ul>\n<li>IPtotal lengthbyteIP packet65535 byteEthernet Frame65535 +14 + 4 = 65553 byte10Mbps50ms</li>\n<li>TCP218byteTCP payload = 218 - Ethernet Header - IP Header - TCP Header = 218 - 18 - 20 - 20 = 160 byte= 160 / 218 = 73%1518= 1460 / 1518 = 96%.</li>\n<li>1518 byte ! IP packet  1500 byteMTU</li>\n</ul>\n<p>  </p>\n<ul>\n<li>Hub10Mbps1000M10000MNFSMTU</li>\n<li>MTU&gt; 9000Jumbo Frame MTU15001508QinQ1512802.1q Mpls label1500 IP packet</li>\n<li>&gt;MTU<br>traceroute</li>\n<li>MTUVLANMTU90001500MTU15009000150090001500</li>\n<li>MRUMTUMRUMTU = MRU900015009000 &gt; MRUMTUMTU<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>MTU<br>ifconfig eth0 mtu 1460<br>mtu:<br>netstat -i</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"MTU\"><a href=\"#MTU\" class=\"headerlink\" title=\"MTU\"></a>MTU</h1><p>MTUMTUMAC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"MTU-Maximum-Transmission-Unit-\"><a href=\"#MTU-Maximum-Transmission-Unit-\" class=\"headerlink\" title=\"MTU(Maximum Transmission Unit):\"></a>MTU(Maximum Transmission Unit):</h4><ul>\n<li></li>\n<li>macIPtcphttpipipmacmac","more":"<br>MTU1500Btcpip3008Bio3028B,3028B&gt;1500Bmac),:<br>ipMTU-IP1500-20=1480;<br> 3008B 33008=1480,1480,48<br>MTUMAC  </li>\n</ul>\n<h4 id=\"2MTU\"><a href=\"#2MTU\" class=\"headerlink\" title=\"2MTU:\"></a>2MTU:</h4><ul>\n<li>-&gt;-&gt;  </li>\n<li>-&gt;-&gt;  </li>\n<li>MTU(RFC1191)</li>\n</ul>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><p>(RFC1191)</p>\n<ul>\n<li>MTU,ICMP  </li>\n<li>MTU?<br>ping -c 3 -s 1474 -M do 192.168.0.1<br>PING 192.168.0.1 (192.168.0.1) 1474(1502) bytes of data.<br>ping: local error: Message too long, mtu=1500<br></li>\n</ul>\n<h4 id=\"4-MTU\"><a href=\"#4-MTU\" class=\"headerlink\" title=\"4 MTU:\"></a>4 MTU:</h4><p>ref <a href=\"https://www.zhihu.com/question/31460305/answer/183766816\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/31460305/answer/183766816</a><br>    </p>\n<ul>\n<li>/CSMA/D</li>\n<li>AbitBBbitAbitAslot time57.6s10Mbps57.6s576bit576bits576bit72864  </li>\n</ul>\n<p>1518?  </p>\n<ul>\n<li>IPtotal lengthbyteIP packet65535 byteEthernet Frame65535 +14 + 4 = 65553 byte10Mbps50ms</li>\n<li>TCP218byteTCP payload = 218 - Ethernet Header - IP Header - TCP Header = 218 - 18 - 20 - 20 = 160 byte= 160 / 218 = 73%1518= 1460 / 1518 = 96%.</li>\n<li>1518 byte ! IP packet  1500 byteMTU</li>\n</ul>\n<p>  </p>\n<ul>\n<li>Hub10Mbps1000M10000MNFSMTU</li>\n<li>MTU&gt; 9000Jumbo Frame MTU15001508QinQ1512802.1q Mpls label1500 IP packet</li>\n<li>&gt;MTU<br>traceroute</li>\n<li>MTUVLANMTU90001500MTU15009000150090001500</li>\n<li>MRUMTUMRUMTU = MRU900015009000 &gt; MRUMTUMTU<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>MTU<br>ifconfig eth0 mtu 1460<br>mtu:<br>netstat -i</li>\n</ul>"},{"title":"tcpip_pingtraceroute","date":"2018-06-24T14:42:49.000Z","_content":"### ping and traceroute\n#### ping\npingICMP\n+ ping icmptype0/8,code0\n+ ICMP<!--more-->\n\n```cpp\n(0/8       code(0)        --4B\nunixpid)      --4B\n           \n ```\n\n+   \nicmpICMP\n\n```cpp\n(0/8       code(0)        --4B\nunixpid)      --4B\n           struct timeval tv;         --8B\n```\n\n16Byte,ip\n+ ping\n+ ping\n\n```cpp\nint addr_conv(char *address,struct in_addr *inaddr)\n{\n\tstruct hostent *he;\n\tif(inet_aton(address,inaddr)==1)\n\t\treturn (1);\n\the=gethostbyname(address);\n\tif(he!=NULL)\n\t{\n\t\t*inaddr=*((struct in_addr *)he->h_addr_list[0]);\n\t\treturn (1);\n\t}\n\treturn 0;\n}\nvoid send_icmp(int sockfd,sockaddr_in send_addr);\nvoid recv_icmp(int sockfd,sockaddr_in send_addr);\nint main(int argc,char **argv)\n{\n    int sockfd;\n\tsockfd=socket(AF_INET,SOCK_RAW,IPPROTO_ICMP);\n    if(sockfd<0)\n \t{\n\t\tcout<<\"creat socket error\"<<endl;\n\t\treturn 1;\n\t}\n\tsockaddr_in send_addr;\n\tbzero(&send_addr,sizeof(send_addr));\n\tsend_addr.sin_family=AF_INET;\n\taddr_conv(argv[1],&send_addr.sin_addr);\n//send_addr.sin_addr.s_addr=inet_addr(\"192.168.0.110\");\n\tfor(int i=0;i<3;i++)\n \t{\n\t\tsend_icmp(sockfd,send_addr);\n\t\trecv_icmp(sockfd,send_addr);\n\t\tsleep(1);\n\t}\n\treturn 0;\n}\nunsigned short checksum(unsigned short *addr,int len)\n{\n\tint nleft=len;\n\tint sum=0;\n\tunsigned short *w=addr;\n\tunsigned short answer=0;\n\twhile(nleft>1)\n\t{\n\t\tsum+=*w++;\n\t\tnleft-=2;\n\t}\n\tif(nleft==1)\n\t{\n\t\t*(unsigned char *)(&answer)=*(unsigned char *)w;\n\t\tsum+=answer;\n\t}\n\tsum=(sum>>16)+(sum&0xffff);\n\tsum+=(sum>>16);\n\tanswer=~sum;\n\t//answer=(unsigned short)sum&0xffff;\n\treturn answer;\n}\nvoid send_icmp(int sockfd,sockaddr_in send_addr)\n{\n\tstatic short int seq=10;\n\tchar  buf[8+8];\n\tstruct icmphdr *icmp=(struct icmphdr *)buf;\n\t//icmp\n\ticmp->type=ICMP_ECHO;//\n\ticmp->code=0;//\n\ticmp->checksum=0;//\n\ticmp->un.echo.id=getpid();//pidping\n\ticmp->un.echo.sequence=seq++;//\n\t//icmp()//\n\tstruct timeval tv;\n\t//tv=(struct timeval*)icmp->icmp_data;\n\tgettimeofday(&tv,NULL);\n\tmemcpy(buf+8,&tv,sizeof(tv));\n\tint buflen=sizeof(struct icmphdr)+sizeof(struct timeval);\n\t//\n\ticmp->checksum=checksum((unsigned short *)buf,buflen);\n\t//icmp\n\tint len=sendto(sockfd,buf,buflen,0,(struct sockaddr *)&send_addr,sizeof(send_addr));\n\tif(len<0)\n\t\tcout<<\"send icmp error\"<<endl;\n\telse cout<<\"senmd ok\"<<endl;\n}\nvoid recv_icmp(int sockfd,sockaddr_in send_addr)\n{\n\tchar buf[256];\n\tstruct icmphdr *icmp;\n\tstruct ip *ip;\n\tint ipheadlen;\n\tint icmplen;\n\t//icmp\n\tfor(;;)\n\t{\n\t\tint n=recvfrom(sockfd,buf,sizeof(buf),0,NULL,NULL);\n\t\tif(n<0)\n\t\t{\n\t\t\tcout<<\"recv error\"<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tip=(struct ip *)buf;\t\n\t\tipheadlen=ip->ip_hl<<2;\n\t\ticmplen=n-ipheadlen;\n\t\tif(icmplen<16)\n\t\t\tcontinue;\n\t\ticmp=(struct icmphdr *)(buf+ipheadlen);\n\t\tif(icmp->type==ICMP_ECHOREPLY&&icmp->un.echo.id==getpid())\n\t\t\tbreak;\n\t}\n\t//\n\tstruct timeval recv_tv;\n\tgettimeofday(&recv_tv,NULL);\n\tstruct timeval send_tv;\n\tmemcpy(&send_tv,icmp+1,sizeof(send_tv));\n\trecv_tv.tv_sec-=send_tv.tv_sec;\n\trecv_tv.tv_usec+=recv_tv.tv_sec*1000000L;\n\tlong interval=recv_tv.tv_usec-send_tv.tv_usec;\n\t//\n\tcout<<icmplen<< \" bytes fromfdfd \"<<inet_ntoa(send_addr.sin_addr);\n\tcout<<\" icmp_seq=\"<<icmp->un.echo.sequence<<\" bytes=\"<<icmplen<<\" ttl=\"<<(int)ip->ip_ttl;\n\tcout<<\" time=\"<<(float)interval/1000.0<<\"ms\"<<endl;\n}\n```\n\n+ ip   \nipip4bit,ip15x32bit=6020403code,len.ptr379ip\nwindowsping -r ip\n+ ip\n\n#### traceroute\n##### traceroute\n+ ttl,ttl1\n+ icmpttl01icmpip\n+   \ntraceroutettl1ipttl1icmp  \nttl2  \n?  \ntracerouteudpudp30000)udpicmptracerouteicmp\n\n##### traceroute\n\n```\ntraceroute www.baidu.com\ntraceroute to www.baidu.com (119.75.216.20), 30 hops max, 60 byte packets//ttl306020ip\n 1  192.168.0.1 (192.168.0.1)  2.762 ms  3.485 ms  3.477 ms/1,ttl2.762,3.485,3.477\n 2  192.168.1.1 (192.168.1.1)  3.466 ms  3.453 ms  3.443 ms\n 3  101.232.192.1 (101.232.192.1)  6.807 ms  6.813 ms  7.412 ms\n 4  10.144.11.37 (10.144.11.37)  7.405 ms  7.393 ms  7.381 ms\n 5  10.144.14.138 (10.144.14.138)  7.369 ms  7.362 ms  7.340 ms\n 6  * * 14.197.242.145 (14.197.242.145)  10.329 ms\n 7  14.197.218.173 (14.197.218.173)  7.240 ms 14.197.248.253 (14.197.248.253)  6.855 ms  7.212 ms\n 8  14.197.240.249 (14.197.240.249)  44.799 ms 14.197.252.189 (14.197.252.189)  42.107 ms 14.197.253.145 (14.197.253.145)  50.051 ms\n 9  14.197.252.54 (14.197.252.54)  49.394 ms  49.414 ms 14.197.248.94 (14.197.248.94)  49.406 ms\n10  14.197.149.178 (14.197.149.178)  49.406 ms  49.383 ms 14.197.178.102 (14.197.178.102)  49.382 ms\n11  182.61.253.119 (182.61.253.119)  49.912 ms 182.61.253.117 (182.61.253.117)  50.916 ms 182.61.253.119 (182.61.253.119)  50.554 ms\n12  182.61.253.126 (182.61.253.126)  47.975 ms *  50.625 ms//5s*\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *\n21  * * *\n22  * * *\n23  * * *\n24  * * *\n25  * * *\n26  * * *\n27  * * *\n28  * * *\n29  * * *\n30  * * *\n```\n\ntcpdump\n\n```\ntraceroute www.baidu.com(119.75.213.61)\n192.168.0.110.39650 > 119.75.213.61.33434: [udp sum ok] UDP, length 32\n20:21:58.009075 IP (tos 0x0, ttl 1, id 5354, offset 0, flags [none], proto UDP (17), length 60)//ttl=1\n192.168.0.1 > 192.168.0.110: ICMP time exceeded in-transit, length 68//icmp\n\tIP (tos 0x0, ttl 1, id 941, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.48912 > 119.75.213.61.33435: [udp sum ok] UDP, length 32\n20:21:58.009114 IP (tos 0x0, ttl 1, id 5355, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.43061 > 119.75.213.61.33436: [udp sum ok] UDP, length 32\n20:21:58.009148 IP (tos 0x0, ttl 2, id 5356, offset 0, flags [none], proto UDP (17), length 60)//ttl=2\n 192.168.1.1 > 192.168.0.110: ICMP time exceeded in-transit, length 68\n\tIP (tos 0x0, ttl 1, id 942, offset 0, flags [none], proto UDP (17), length 60)\n//2\n    192.168.0.110.52554 > 119.75.213.61.33437: [udp sum ok] UDP, length 32\n20:21:58.009189 IP (tos 0x0, ttl 2, id 5357, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.51967 > 119.75.213.61.33438: [udp sum ok] UDP, length 32\n20:21:58.009243 IP (tos 0x0, ttl 2, id 5358, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.45922 > 119.75.213.61.33439: [udp sum ok] UDP, length 32\n20:21:58.009281 IP (tos 0x0, ttl 3, id 5359, offset 0, flags [none], proto UDP (17), length 60)//ttl==3\n    192.168.0.110.34392 > 119.75.213.61.33440: [udp sum ok] UDP, length 32  \n    101.232.192.1 > 192.168.0.110: ICMP time exceeded in-transit, length 60\n\tIP (tos 0x0, id 945, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.57724 > 119.75.216.20.33440: UDP, length 32\n//icmpc\n20:21:59.304604 IP (tos 0x0, ttl 59, id 0, offset 0, flags [DF], proto UDP (17), length 161)\n```\n\n:\n+ ucp55050 :33443ttl1\n+ ttlicmp\n+ icmp\n11  code 0/1    \nip)+ip8\n+ \n\n##### ip\n+ ip\n+ ip\n+ \n+ icmp\n+ ip\n+ ip  \nip9ip:  \ncode(1) len(1) ptr(1) ip1(4) ip2(4)....\n+ eg: traceroute -g 192.168.23.1 www.baidu.com\n\n##### traceroute\n+ linux traceroute\n+ dpttlicmp","source":"_posts/tcpip-pingtraceroute.md","raw":"---\ntitle: tcpip_pingtraceroute\ndate: 2018-06-24 22:42:49\ntags: tcpip_ip\ncategories: tcpip\n---\n### ping and traceroute\n#### ping\npingICMP\n+ ping icmptype0/8,code0\n+ ICMP<!--more-->\n\n```cpp\n(0/8       code(0)        --4B\nunixpid)      --4B\n           \n ```\n\n+   \nicmpICMP\n\n```cpp\n(0/8       code(0)        --4B\nunixpid)      --4B\n           struct timeval tv;         --8B\n```\n\n16Byte,ip\n+ ping\n+ ping\n\n```cpp\nint addr_conv(char *address,struct in_addr *inaddr)\n{\n\tstruct hostent *he;\n\tif(inet_aton(address,inaddr)==1)\n\t\treturn (1);\n\the=gethostbyname(address);\n\tif(he!=NULL)\n\t{\n\t\t*inaddr=*((struct in_addr *)he->h_addr_list[0]);\n\t\treturn (1);\n\t}\n\treturn 0;\n}\nvoid send_icmp(int sockfd,sockaddr_in send_addr);\nvoid recv_icmp(int sockfd,sockaddr_in send_addr);\nint main(int argc,char **argv)\n{\n    int sockfd;\n\tsockfd=socket(AF_INET,SOCK_RAW,IPPROTO_ICMP);\n    if(sockfd<0)\n \t{\n\t\tcout<<\"creat socket error\"<<endl;\n\t\treturn 1;\n\t}\n\tsockaddr_in send_addr;\n\tbzero(&send_addr,sizeof(send_addr));\n\tsend_addr.sin_family=AF_INET;\n\taddr_conv(argv[1],&send_addr.sin_addr);\n//send_addr.sin_addr.s_addr=inet_addr(\"192.168.0.110\");\n\tfor(int i=0;i<3;i++)\n \t{\n\t\tsend_icmp(sockfd,send_addr);\n\t\trecv_icmp(sockfd,send_addr);\n\t\tsleep(1);\n\t}\n\treturn 0;\n}\nunsigned short checksum(unsigned short *addr,int len)\n{\n\tint nleft=len;\n\tint sum=0;\n\tunsigned short *w=addr;\n\tunsigned short answer=0;\n\twhile(nleft>1)\n\t{\n\t\tsum+=*w++;\n\t\tnleft-=2;\n\t}\n\tif(nleft==1)\n\t{\n\t\t*(unsigned char *)(&answer)=*(unsigned char *)w;\n\t\tsum+=answer;\n\t}\n\tsum=(sum>>16)+(sum&0xffff);\n\tsum+=(sum>>16);\n\tanswer=~sum;\n\t//answer=(unsigned short)sum&0xffff;\n\treturn answer;\n}\nvoid send_icmp(int sockfd,sockaddr_in send_addr)\n{\n\tstatic short int seq=10;\n\tchar  buf[8+8];\n\tstruct icmphdr *icmp=(struct icmphdr *)buf;\n\t//icmp\n\ticmp->type=ICMP_ECHO;//\n\ticmp->code=0;//\n\ticmp->checksum=0;//\n\ticmp->un.echo.id=getpid();//pidping\n\ticmp->un.echo.sequence=seq++;//\n\t//icmp()//\n\tstruct timeval tv;\n\t//tv=(struct timeval*)icmp->icmp_data;\n\tgettimeofday(&tv,NULL);\n\tmemcpy(buf+8,&tv,sizeof(tv));\n\tint buflen=sizeof(struct icmphdr)+sizeof(struct timeval);\n\t//\n\ticmp->checksum=checksum((unsigned short *)buf,buflen);\n\t//icmp\n\tint len=sendto(sockfd,buf,buflen,0,(struct sockaddr *)&send_addr,sizeof(send_addr));\n\tif(len<0)\n\t\tcout<<\"send icmp error\"<<endl;\n\telse cout<<\"senmd ok\"<<endl;\n}\nvoid recv_icmp(int sockfd,sockaddr_in send_addr)\n{\n\tchar buf[256];\n\tstruct icmphdr *icmp;\n\tstruct ip *ip;\n\tint ipheadlen;\n\tint icmplen;\n\t//icmp\n\tfor(;;)\n\t{\n\t\tint n=recvfrom(sockfd,buf,sizeof(buf),0,NULL,NULL);\n\t\tif(n<0)\n\t\t{\n\t\t\tcout<<\"recv error\"<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tip=(struct ip *)buf;\t\n\t\tipheadlen=ip->ip_hl<<2;\n\t\ticmplen=n-ipheadlen;\n\t\tif(icmplen<16)\n\t\t\tcontinue;\n\t\ticmp=(struct icmphdr *)(buf+ipheadlen);\n\t\tif(icmp->type==ICMP_ECHOREPLY&&icmp->un.echo.id==getpid())\n\t\t\tbreak;\n\t}\n\t//\n\tstruct timeval recv_tv;\n\tgettimeofday(&recv_tv,NULL);\n\tstruct timeval send_tv;\n\tmemcpy(&send_tv,icmp+1,sizeof(send_tv));\n\trecv_tv.tv_sec-=send_tv.tv_sec;\n\trecv_tv.tv_usec+=recv_tv.tv_sec*1000000L;\n\tlong interval=recv_tv.tv_usec-send_tv.tv_usec;\n\t//\n\tcout<<icmplen<< \" bytes fromfdfd \"<<inet_ntoa(send_addr.sin_addr);\n\tcout<<\" icmp_seq=\"<<icmp->un.echo.sequence<<\" bytes=\"<<icmplen<<\" ttl=\"<<(int)ip->ip_ttl;\n\tcout<<\" time=\"<<(float)interval/1000.0<<\"ms\"<<endl;\n}\n```\n\n+ ip   \nipip4bit,ip15x32bit=6020403code,len.ptr379ip\nwindowsping -r ip\n+ ip\n\n#### traceroute\n##### traceroute\n+ ttl,ttl1\n+ icmpttl01icmpip\n+   \ntraceroutettl1ipttl1icmp  \nttl2  \n?  \ntracerouteudpudp30000)udpicmptracerouteicmp\n\n##### traceroute\n\n```\ntraceroute www.baidu.com\ntraceroute to www.baidu.com (119.75.216.20), 30 hops max, 60 byte packets//ttl306020ip\n 1  192.168.0.1 (192.168.0.1)  2.762 ms  3.485 ms  3.477 ms/1,ttl2.762,3.485,3.477\n 2  192.168.1.1 (192.168.1.1)  3.466 ms  3.453 ms  3.443 ms\n 3  101.232.192.1 (101.232.192.1)  6.807 ms  6.813 ms  7.412 ms\n 4  10.144.11.37 (10.144.11.37)  7.405 ms  7.393 ms  7.381 ms\n 5  10.144.14.138 (10.144.14.138)  7.369 ms  7.362 ms  7.340 ms\n 6  * * 14.197.242.145 (14.197.242.145)  10.329 ms\n 7  14.197.218.173 (14.197.218.173)  7.240 ms 14.197.248.253 (14.197.248.253)  6.855 ms  7.212 ms\n 8  14.197.240.249 (14.197.240.249)  44.799 ms 14.197.252.189 (14.197.252.189)  42.107 ms 14.197.253.145 (14.197.253.145)  50.051 ms\n 9  14.197.252.54 (14.197.252.54)  49.394 ms  49.414 ms 14.197.248.94 (14.197.248.94)  49.406 ms\n10  14.197.149.178 (14.197.149.178)  49.406 ms  49.383 ms 14.197.178.102 (14.197.178.102)  49.382 ms\n11  182.61.253.119 (182.61.253.119)  49.912 ms 182.61.253.117 (182.61.253.117)  50.916 ms 182.61.253.119 (182.61.253.119)  50.554 ms\n12  182.61.253.126 (182.61.253.126)  47.975 ms *  50.625 ms//5s*\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *\n21  * * *\n22  * * *\n23  * * *\n24  * * *\n25  * * *\n26  * * *\n27  * * *\n28  * * *\n29  * * *\n30  * * *\n```\n\ntcpdump\n\n```\ntraceroute www.baidu.com(119.75.213.61)\n192.168.0.110.39650 > 119.75.213.61.33434: [udp sum ok] UDP, length 32\n20:21:58.009075 IP (tos 0x0, ttl 1, id 5354, offset 0, flags [none], proto UDP (17), length 60)//ttl=1\n192.168.0.1 > 192.168.0.110: ICMP time exceeded in-transit, length 68//icmp\n\tIP (tos 0x0, ttl 1, id 941, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.48912 > 119.75.213.61.33435: [udp sum ok] UDP, length 32\n20:21:58.009114 IP (tos 0x0, ttl 1, id 5355, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.43061 > 119.75.213.61.33436: [udp sum ok] UDP, length 32\n20:21:58.009148 IP (tos 0x0, ttl 2, id 5356, offset 0, flags [none], proto UDP (17), length 60)//ttl=2\n 192.168.1.1 > 192.168.0.110: ICMP time exceeded in-transit, length 68\n\tIP (tos 0x0, ttl 1, id 942, offset 0, flags [none], proto UDP (17), length 60)\n//2\n    192.168.0.110.52554 > 119.75.213.61.33437: [udp sum ok] UDP, length 32\n20:21:58.009189 IP (tos 0x0, ttl 2, id 5357, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.51967 > 119.75.213.61.33438: [udp sum ok] UDP, length 32\n20:21:58.009243 IP (tos 0x0, ttl 2, id 5358, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.45922 > 119.75.213.61.33439: [udp sum ok] UDP, length 32\n20:21:58.009281 IP (tos 0x0, ttl 3, id 5359, offset 0, flags [none], proto UDP (17), length 60)//ttl==3\n    192.168.0.110.34392 > 119.75.213.61.33440: [udp sum ok] UDP, length 32  \n    101.232.192.1 > 192.168.0.110: ICMP time exceeded in-transit, length 60\n\tIP (tos 0x0, id 945, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.0.110.57724 > 119.75.216.20.33440: UDP, length 32\n//icmpc\n20:21:59.304604 IP (tos 0x0, ttl 59, id 0, offset 0, flags [DF], proto UDP (17), length 161)\n```\n\n:\n+ ucp55050 :33443ttl1\n+ ttlicmp\n+ icmp\n11  code 0/1    \nip)+ip8\n+ \n\n##### ip\n+ ip\n+ ip\n+ \n+ icmp\n+ ip\n+ ip  \nip9ip:  \ncode(1) len(1) ptr(1) ip1(4) ip2(4)....\n+ eg: traceroute -g 192.168.23.1 www.baidu.com\n\n##### traceroute\n+ linux traceroute\n+ dpttlicmp","slug":"tcpip-pingtraceroute","published":1,"updated":"2018-06-24T14:55:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghqd002x00jxqxine49w","content":"<h3 id=\"ping-and-traceroute\"><a href=\"#ping-and-traceroute\" class=\"headerlink\" title=\"ping and traceroute\"></a>ping and traceroute</h3><h4 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h4><p>pingICMP</p>\n<ul>\n<li>ping icmptype0/8,code0</li>\n<li>ICMP<a id=\"more\"></a></li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">0</span>/<span class=\"number\">8</span>       code(<span class=\"number\">0</span>)        -<span class=\"number\">-4B</span></span><br><span class=\"line\">unixpid)      -<span class=\"number\">-4B</span></span><br><span class=\"line\">           </span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>icmpICMP</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">0</span>/<span class=\"number\">8</span>       code(<span class=\"number\">0</span>)        -<span class=\"number\">-4B</span></span><br><span class=\"line\">unixpid)      -<span class=\"number\">-4B</span></span><br><span class=\"line\">           <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">tv</span>;</span>         -<span class=\"number\">-8B</span></span><br></pre></td></tr></table></figure>\n<p>16Byte,ip</p>\n<ul>\n<li>ping</li>\n<li>ping</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">addr_conv</span><span class=\"params\">(<span class=\"keyword\">char</span> *address,struct in_addr *inaddr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">hostent</span> *<span class=\"title\">he</span>;</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(inet_aton(address,inaddr)==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\">\the=gethostbyname(address);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(he!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t*inaddr=*((struct in_addr *)he-&gt;h_addr_list[<span class=\"number\">0</span>]);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">recv_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> **argv)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sockfd;</span><br><span class=\"line\">\tsockfd=socket(AF_INET,SOCK_RAW,IPPROTO_ICMP);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(sockfd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> \t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"creat socket error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tsockaddr_in send_addr;</span><br><span class=\"line\">\tbzero(&amp;send_addr,<span class=\"keyword\">sizeof</span>(send_addr));</span><br><span class=\"line\">\tsend_addr.sin_family=AF_INET;</span><br><span class=\"line\">\taddr_conv(argv[<span class=\"number\">1</span>],&amp;send_addr.sin_addr);</span><br><span class=\"line\"><span class=\"comment\">//send_addr.sin_addr.s_addr=inet_addr(\"192.168.0.110\");</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">3</span>;i++)</span><br><span class=\"line\"> \t&#123;</span><br><span class=\"line\">\t\tsend_icmp(sockfd,send_addr);</span><br><span class=\"line\">\t\trecv_icmp(sockfd,send_addr);</span><br><span class=\"line\">\t\tsleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> <span class=\"title\">checksum</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *addr,<span class=\"keyword\">int</span> len)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> nleft=len;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *w=addr;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> answer=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(nleft&gt;<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tsum+=*w++;</span><br><span class=\"line\">\t\tnleft-=<span class=\"number\">2</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(nleft==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t*(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> *)(&amp;answer)=*(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> *)w;</span><br><span class=\"line\">\t\tsum+=answer;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tsum=(sum&gt;&gt;<span class=\"number\">16</span>)+(sum&amp;<span class=\"number\">0xffff</span>);</span><br><span class=\"line\">\tsum+=(sum&gt;&gt;<span class=\"number\">16</span>);</span><br><span class=\"line\">\tanswer=~sum;</span><br><span class=\"line\">\t<span class=\"comment\">//answer=(unsigned short)sum&amp;0xffff;</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> answer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">short</span> <span class=\"keyword\">int</span> seq=<span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span>  buf[<span class=\"number\">8</span>+<span class=\"number\">8</span>];</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">icmphdr</span> *<span class=\"title\">icmp</span>=(<span class=\"title\">struct</span> <span class=\"title\">icmphdr</span> *)<span class=\"title\">buf</span>;</span></span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\ticmp-&gt;type=ICMP_ECHO;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;code=<span class=\"number\">0</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;checksum=<span class=\"number\">0</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;un.echo.id=getpid();<span class=\"comment\">//pidping</span></span><br><span class=\"line\">\ticmp-&gt;un.echo.sequence=seq++;<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"comment\">//icmp()//</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">tv</span>;</span></span><br><span class=\"line\">\t<span class=\"comment\">//tv=(struct timeval*)icmp-&gt;icmp_data;</span></span><br><span class=\"line\">\tgettimeofday(&amp;tv,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"built_in\">memcpy</span>(buf+<span class=\"number\">8</span>,&amp;tv,<span class=\"keyword\">sizeof</span>(tv));</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> buflen=<span class=\"keyword\">sizeof</span>(struct icmphdr)+<span class=\"keyword\">sizeof</span>(struct timeval);</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;checksum=checksum((<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *)buf,buflen);</span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> len=sendto(sockfd,buf,buflen,<span class=\"number\">0</span>,(struct sockaddr *)&amp;send_addr,<span class=\"keyword\">sizeof</span>(send_addr));</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(len&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"send icmp error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> <span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"senmd ok\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">recv_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> buf[<span class=\"number\">256</span>];</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">icmphdr</span> *<span class=\"title\">icmp</span>;</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ip</span> *<span class=\"title\">ip</span>;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> ipheadlen;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> icmplen;</span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(;;)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> n=recvfrom(sockfd,buf,<span class=\"keyword\">sizeof</span>(buf),<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"recv error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tip=(struct ip *)buf;\t</span><br><span class=\"line\">\t\tipheadlen=ip-&gt;ip_hl&lt;&lt;<span class=\"number\">2</span>;</span><br><span class=\"line\">\t\ticmplen=n-ipheadlen;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(icmplen&lt;<span class=\"number\">16</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\ticmp=(struct icmphdr *)(buf+ipheadlen);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(icmp-&gt;type==ICMP_ECHOREPLY&amp;&amp;icmp-&gt;un.echo.id==getpid())</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">recv_tv</span>;</span></span><br><span class=\"line\">\tgettimeofday(&amp;recv_tv,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">send_tv</span>;</span></span><br><span class=\"line\">\t<span class=\"built_in\">memcpy</span>(&amp;send_tv,icmp+<span class=\"number\">1</span>,<span class=\"keyword\">sizeof</span>(send_tv));</span><br><span class=\"line\">\trecv_tv.tv_sec-=send_tv.tv_sec;</span><br><span class=\"line\">\trecv_tv.tv_usec+=recv_tv.tv_sec*<span class=\"number\">1000000L</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">long</span> interval=recv_tv.tv_usec-send_tv.tv_usec;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;icmplen&lt;&lt; <span class=\"string\">\" bytes fromfdfd \"</span>&lt;&lt;inet_ntoa(send_addr.sin_addr);</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\" icmp_seq=\"</span>&lt;&lt;icmp-&gt;un.echo.sequence&lt;&lt;<span class=\"string\">\" bytes=\"</span>&lt;&lt;icmplen&lt;&lt;<span class=\"string\">\" ttl=\"</span>&lt;&lt;(<span class=\"keyword\">int</span>)ip-&gt;ip_ttl;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\" time=\"</span>&lt;&lt;(<span class=\"keyword\">float</span>)interval/<span class=\"number\">1000.0</span>&lt;&lt;<span class=\"string\">\"ms\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ip <br>ipip4bit,ip15x32bit=6020403code,len.ptr379ip<br>windowsping -r ip</li>\n<li>ip</li>\n</ul>\n<h4 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h4><h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><ul>\n<li>ttl,ttl1</li>\n<li>icmpttl01icmpip</li>\n<li><br>traceroutettl1ipttl1icmp<br>ttl2<br>?<br>tracerouteudpudp30000)udpicmptracerouteicmp</li>\n</ul>\n<h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute www.baidu.com</span><br><span class=\"line\">traceroute to www.baidu.com (<span class=\"number\">119.75</span><span class=\"number\">.216</span><span class=\"number\">.20</span>), <span class=\"number\">30</span> hops max, <span class=\"number\">60</span> byte packets<span class=\"comment\">//ttl306020ip</span></span><br><span class=\"line\"> <span class=\"number\">1</span>  <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span> (<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>)  <span class=\"number\">2.762</span> ms  <span class=\"number\">3.485</span> ms  <span class=\"number\">3.477</span> ms/<span class=\"number\">1</span>,ttl<span class=\"number\">2.762</span>,<span class=\"number\">3.485</span>,<span class=\"number\">3.477</span></span><br><span class=\"line\"> <span class=\"number\">2</span>  <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span> (<span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span>)  <span class=\"number\">3.466</span> ms  <span class=\"number\">3.453</span> ms  <span class=\"number\">3.443</span> ms</span><br><span class=\"line\"> <span class=\"number\">3</span>  <span class=\"number\">101.232</span><span class=\"number\">.192</span><span class=\"number\">.1</span> (<span class=\"number\">101.232</span><span class=\"number\">.192</span><span class=\"number\">.1</span>)  <span class=\"number\">6.807</span> ms  <span class=\"number\">6.813</span> ms  <span class=\"number\">7.412</span> ms</span><br><span class=\"line\"> <span class=\"number\">4</span>  <span class=\"number\">10.144</span><span class=\"number\">.11</span><span class=\"number\">.37</span> (<span class=\"number\">10.144</span><span class=\"number\">.11</span><span class=\"number\">.37</span>)  <span class=\"number\">7.405</span> ms  <span class=\"number\">7.393</span> ms  <span class=\"number\">7.381</span> ms</span><br><span class=\"line\"> <span class=\"number\">5</span>  <span class=\"number\">10.144</span><span class=\"number\">.14</span><span class=\"number\">.138</span> (<span class=\"number\">10.144</span><span class=\"number\">.14</span><span class=\"number\">.138</span>)  <span class=\"number\">7.369</span> ms  <span class=\"number\">7.362</span> ms  <span class=\"number\">7.340</span> ms</span><br><span class=\"line\"> <span class=\"number\">6</span>  * * <span class=\"number\">14.197</span><span class=\"number\">.242</span><span class=\"number\">.145</span> (<span class=\"number\">14.197</span><span class=\"number\">.242</span><span class=\"number\">.145</span>)  <span class=\"number\">10.329</span> ms</span><br><span class=\"line\"> <span class=\"number\">7</span>  <span class=\"number\">14.197</span><span class=\"number\">.218</span><span class=\"number\">.173</span> (<span class=\"number\">14.197</span><span class=\"number\">.218</span><span class=\"number\">.173</span>)  <span class=\"number\">7.240</span> ms <span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.253</span> (<span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.253</span>)  <span class=\"number\">6.855</span> ms  <span class=\"number\">7.212</span> ms</span><br><span class=\"line\"> <span class=\"number\">8</span>  <span class=\"number\">14.197</span><span class=\"number\">.240</span><span class=\"number\">.249</span> (<span class=\"number\">14.197</span><span class=\"number\">.240</span><span class=\"number\">.249</span>)  <span class=\"number\">44.799</span> ms <span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.189</span> (<span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.189</span>)  <span class=\"number\">42.107</span> ms <span class=\"number\">14.197</span><span class=\"number\">.253</span><span class=\"number\">.145</span> (<span class=\"number\">14.197</span><span class=\"number\">.253</span><span class=\"number\">.145</span>)  <span class=\"number\">50.051</span> ms</span><br><span class=\"line\"> <span class=\"number\">9</span>  <span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.54</span> (<span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.54</span>)  <span class=\"number\">49.394</span> ms  <span class=\"number\">49.414</span> ms <span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.94</span> (<span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.94</span>)  <span class=\"number\">49.406</span> ms</span><br><span class=\"line\"><span class=\"number\">10</span>  <span class=\"number\">14.197</span><span class=\"number\">.149</span><span class=\"number\">.178</span> (<span class=\"number\">14.197</span><span class=\"number\">.149</span><span class=\"number\">.178</span>)  <span class=\"number\">49.406</span> ms  <span class=\"number\">49.383</span> ms <span class=\"number\">14.197</span><span class=\"number\">.178</span><span class=\"number\">.102</span> (<span class=\"number\">14.197</span><span class=\"number\">.178</span><span class=\"number\">.102</span>)  <span class=\"number\">49.382</span> ms</span><br><span class=\"line\"><span class=\"number\">11</span>  <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span>)  <span class=\"number\">49.912</span> ms <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.117</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.117</span>)  <span class=\"number\">50.916</span> ms <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span>)  <span class=\"number\">50.554</span> ms</span><br><span class=\"line\"><span class=\"number\">12</span>  <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.126</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.126</span>)  <span class=\"number\">47.975</span> ms *  <span class=\"number\">50.625</span> ms<span class=\"comment\">//5s*</span></span><br><span class=\"line\"><span class=\"number\">13</span>  * * *</span><br><span class=\"line\"><span class=\"number\">14</span>  * * *</span><br><span class=\"line\"><span class=\"number\">15</span>  * * *</span><br><span class=\"line\"><span class=\"number\">16</span>  * * *</span><br><span class=\"line\"><span class=\"number\">17</span>  * * *</span><br><span class=\"line\"><span class=\"number\">18</span>  * * *</span><br><span class=\"line\"><span class=\"number\">19</span>  * * *</span><br><span class=\"line\"><span class=\"number\">20</span>  * * *</span><br><span class=\"line\"><span class=\"number\">21</span>  * * *</span><br><span class=\"line\"><span class=\"number\">22</span>  * * *</span><br><span class=\"line\"><span class=\"number\">23</span>  * * *</span><br><span class=\"line\"><span class=\"number\">24</span>  * * *</span><br><span class=\"line\"><span class=\"number\">25</span>  * * *</span><br><span class=\"line\"><span class=\"number\">26</span>  * * *</span><br><span class=\"line\"><span class=\"number\">27</span>  * * *</span><br><span class=\"line\"><span class=\"number\">28</span>  * * *</span><br><span class=\"line\"><span class=\"number\">29</span>  * * *</span><br><span class=\"line\"><span class=\"number\">30</span>  * * *</span><br></pre></td></tr></table></figure>\n<p>tcpdump</p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute www.baidu.com(<span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span>)</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.39650</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33434</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009075</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">5354</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">68</span>//icmp</span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">941</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.48912</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33435</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009114</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">5355</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.43061</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33436</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009148</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5356</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl=<span class=\"number\">2</span></span><br><span class=\"line\"> <span class=\"number\">192.168</span><span class=\"meta\">.1</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">68</span></span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">942</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">//<span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.52554</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33437</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009189</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5357</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.51967</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33438</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009243</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5358</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.45922</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33439</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009281</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">3</span>, id <span class=\"number\">5359</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl==<span class=\"number\">3</span></span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.34392</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33440</span>: [udp sum ok] UDP, length <span class=\"number\">32</span>  </span><br><span class=\"line\">    <span class=\"number\">101.232</span><span class=\"meta\">.192</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">60</span></span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, id <span class=\"number\">945</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.57724</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.216</span><span class=\"meta\">.20</span><span class=\"meta\">.33440</span>: UDP, length <span class=\"number\">32</span></span><br><span class=\"line\">//icmpc</span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">59.304604</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">59</span>, id <span class=\"number\">0</span>, offset <span class=\"number\">0</span>, flags [DF], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">161</span>)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>ucp55050 :33443ttl1</li>\n<li>ttlicmp</li>\n<li>icmp<br>11  code 0/1  <br>ip)+ip8</li>\n<li></li>\n</ul>\n<h5 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h5><ul>\n<li>ip</li>\n<li>ip</li>\n<li></li>\n<li>icmp</li>\n<li>ip</li>\n<li>ip<br>ip9ip:<br>code(1) len(1) ptr(1) ip1(4) ip2(4).</li>\n<li>eg: traceroute -g 192.168.23.1 <a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">www.baidu.com</a></li>\n</ul>\n<h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><ul>\n<li>linux traceroute</li>\n<li>dpttlicmp</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"ping-and-traceroute\"><a href=\"#ping-and-traceroute\" class=\"headerlink\" title=\"ping and traceroute\"></a>ping and traceroute</h3><h4 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h4><p>pingICMP</p>\n<ul>\n<li>ping icmptype0/8,code0</li>\n<li>ICMP","more":"</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">0</span>/<span class=\"number\">8</span>       code(<span class=\"number\">0</span>)        -<span class=\"number\">-4B</span></span><br><span class=\"line\">unixpid)      -<span class=\"number\">-4B</span></span><br><span class=\"line\">           </span><br></pre></td></tr></table></figure>\n<ul>\n<li><br>icmpICMP</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">0</span>/<span class=\"number\">8</span>       code(<span class=\"number\">0</span>)        -<span class=\"number\">-4B</span></span><br><span class=\"line\">unixpid)      -<span class=\"number\">-4B</span></span><br><span class=\"line\">           <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">tv</span>;</span>         -<span class=\"number\">-8B</span></span><br></pre></td></tr></table></figure>\n<p>16Byte,ip</p>\n<ul>\n<li>ping</li>\n<li>ping</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">addr_conv</span><span class=\"params\">(<span class=\"keyword\">char</span> *address,struct in_addr *inaddr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">hostent</span> *<span class=\"title\">he</span>;</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(inet_aton(address,inaddr)==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\">\the=gethostbyname(address);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(he!=<span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t*inaddr=*((struct in_addr *)he-&gt;h_addr_list[<span class=\"number\">0</span>]);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> (<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">recv_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">int</span> argc,<span class=\"keyword\">char</span> **argv)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sockfd;</span><br><span class=\"line\">\tsockfd=socket(AF_INET,SOCK_RAW,IPPROTO_ICMP);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(sockfd&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\"> \t&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"creat socket error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tsockaddr_in send_addr;</span><br><span class=\"line\">\tbzero(&amp;send_addr,<span class=\"keyword\">sizeof</span>(send_addr));</span><br><span class=\"line\">\tsend_addr.sin_family=AF_INET;</span><br><span class=\"line\">\taddr_conv(argv[<span class=\"number\">1</span>],&amp;send_addr.sin_addr);</span><br><span class=\"line\"><span class=\"comment\">//send_addr.sin_addr.s_addr=inet_addr(\"192.168.0.110\");</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">3</span>;i++)</span><br><span class=\"line\"> \t&#123;</span><br><span class=\"line\">\t\tsend_icmp(sockfd,send_addr);</span><br><span class=\"line\">\t\trecv_icmp(sockfd,send_addr);</span><br><span class=\"line\">\t\tsleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> <span class=\"title\">checksum</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *addr,<span class=\"keyword\">int</span> len)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> nleft=len;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *w=addr;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> answer=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(nleft&gt;<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tsum+=*w++;</span><br><span class=\"line\">\t\tnleft-=<span class=\"number\">2</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(nleft==<span class=\"number\">1</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t*(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> *)(&amp;answer)=*(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> *)w;</span><br><span class=\"line\">\t\tsum+=answer;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tsum=(sum&gt;&gt;<span class=\"number\">16</span>)+(sum&amp;<span class=\"number\">0xffff</span>);</span><br><span class=\"line\">\tsum+=(sum&gt;&gt;<span class=\"number\">16</span>);</span><br><span class=\"line\">\tanswer=~sum;</span><br><span class=\"line\">\t<span class=\"comment\">//answer=(unsigned short)sum&amp;0xffff;</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> answer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">short</span> <span class=\"keyword\">int</span> seq=<span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span>  buf[<span class=\"number\">8</span>+<span class=\"number\">8</span>];</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">icmphdr</span> *<span class=\"title\">icmp</span>=(<span class=\"title\">struct</span> <span class=\"title\">icmphdr</span> *)<span class=\"title\">buf</span>;</span></span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\ticmp-&gt;type=ICMP_ECHO;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;code=<span class=\"number\">0</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;checksum=<span class=\"number\">0</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;un.echo.id=getpid();<span class=\"comment\">//pidping</span></span><br><span class=\"line\">\ticmp-&gt;un.echo.sequence=seq++;<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"comment\">//icmp()//</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">tv</span>;</span></span><br><span class=\"line\">\t<span class=\"comment\">//tv=(struct timeval*)icmp-&gt;icmp_data;</span></span><br><span class=\"line\">\tgettimeofday(&amp;tv,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"built_in\">memcpy</span>(buf+<span class=\"number\">8</span>,&amp;tv,<span class=\"keyword\">sizeof</span>(tv));</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> buflen=<span class=\"keyword\">sizeof</span>(struct icmphdr)+<span class=\"keyword\">sizeof</span>(struct timeval);</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\ticmp-&gt;checksum=checksum((<span class=\"keyword\">unsigned</span> <span class=\"keyword\">short</span> *)buf,buflen);</span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> len=sendto(sockfd,buf,buflen,<span class=\"number\">0</span>,(struct sockaddr *)&amp;send_addr,<span class=\"keyword\">sizeof</span>(send_addr));</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(len&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"send icmp error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> <span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"senmd ok\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">recv_icmp</span><span class=\"params\">(<span class=\"keyword\">int</span> sockfd,sockaddr_in send_addr)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">char</span> buf[<span class=\"number\">256</span>];</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">icmphdr</span> *<span class=\"title\">icmp</span>;</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ip</span> *<span class=\"title\">ip</span>;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> ipheadlen;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> icmplen;</span><br><span class=\"line\">\t<span class=\"comment\">//icmp</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(;;)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> n=recvfrom(sockfd,buf,<span class=\"keyword\">sizeof</span>(buf),<span class=\"number\">0</span>,<span class=\"literal\">NULL</span>,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\"recv error\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tip=(struct ip *)buf;\t</span><br><span class=\"line\">\t\tipheadlen=ip-&gt;ip_hl&lt;&lt;<span class=\"number\">2</span>;</span><br><span class=\"line\">\t\ticmplen=n-ipheadlen;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(icmplen&lt;<span class=\"number\">16</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">\t\ticmp=(struct icmphdr *)(buf+ipheadlen);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(icmp-&gt;type==ICMP_ECHOREPLY&amp;&amp;icmp-&gt;un.echo.id==getpid())</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">recv_tv</span>;</span></span><br><span class=\"line\">\tgettimeofday(&amp;recv_tv,<span class=\"literal\">NULL</span>);</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">timeval</span> <span class=\"title\">send_tv</span>;</span></span><br><span class=\"line\">\t<span class=\"built_in\">memcpy</span>(&amp;send_tv,icmp+<span class=\"number\">1</span>,<span class=\"keyword\">sizeof</span>(send_tv));</span><br><span class=\"line\">\trecv_tv.tv_sec-=send_tv.tv_sec;</span><br><span class=\"line\">\trecv_tv.tv_usec+=recv_tv.tv_sec*<span class=\"number\">1000000L</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">long</span> interval=recv_tv.tv_usec-send_tv.tv_usec;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;icmplen&lt;&lt; <span class=\"string\">\" bytes fromfdfd \"</span>&lt;&lt;inet_ntoa(send_addr.sin_addr);</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\" icmp_seq=\"</span>&lt;&lt;icmp-&gt;un.echo.sequence&lt;&lt;<span class=\"string\">\" bytes=\"</span>&lt;&lt;icmplen&lt;&lt;<span class=\"string\">\" ttl=\"</span>&lt;&lt;(<span class=\"keyword\">int</span>)ip-&gt;ip_ttl;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span>&lt;&lt;<span class=\"string\">\" time=\"</span>&lt;&lt;(<span class=\"keyword\">float</span>)interval/<span class=\"number\">1000.0</span>&lt;&lt;<span class=\"string\">\"ms\"</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ip <br>ipip4bit,ip15x32bit=6020403code,len.ptr379ip<br>windowsping -r ip</li>\n<li>ip</li>\n</ul>\n<h4 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h4><h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><ul>\n<li>ttl,ttl1</li>\n<li>icmpttl01icmpip</li>\n<li><br>traceroutettl1ipttl1icmp<br>ttl2<br>?<br>tracerouteudpudp30000)udpicmptracerouteicmp</li>\n</ul>\n<h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute www.baidu.com</span><br><span class=\"line\">traceroute to www.baidu.com (<span class=\"number\">119.75</span><span class=\"number\">.216</span><span class=\"number\">.20</span>), <span class=\"number\">30</span> hops max, <span class=\"number\">60</span> byte packets<span class=\"comment\">//ttl306020ip</span></span><br><span class=\"line\"> <span class=\"number\">1</span>  <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span> (<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>)  <span class=\"number\">2.762</span> ms  <span class=\"number\">3.485</span> ms  <span class=\"number\">3.477</span> ms/<span class=\"number\">1</span>,ttl<span class=\"number\">2.762</span>,<span class=\"number\">3.485</span>,<span class=\"number\">3.477</span></span><br><span class=\"line\"> <span class=\"number\">2</span>  <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span> (<span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.1</span>)  <span class=\"number\">3.466</span> ms  <span class=\"number\">3.453</span> ms  <span class=\"number\">3.443</span> ms</span><br><span class=\"line\"> <span class=\"number\">3</span>  <span class=\"number\">101.232</span><span class=\"number\">.192</span><span class=\"number\">.1</span> (<span class=\"number\">101.232</span><span class=\"number\">.192</span><span class=\"number\">.1</span>)  <span class=\"number\">6.807</span> ms  <span class=\"number\">6.813</span> ms  <span class=\"number\">7.412</span> ms</span><br><span class=\"line\"> <span class=\"number\">4</span>  <span class=\"number\">10.144</span><span class=\"number\">.11</span><span class=\"number\">.37</span> (<span class=\"number\">10.144</span><span class=\"number\">.11</span><span class=\"number\">.37</span>)  <span class=\"number\">7.405</span> ms  <span class=\"number\">7.393</span> ms  <span class=\"number\">7.381</span> ms</span><br><span class=\"line\"> <span class=\"number\">5</span>  <span class=\"number\">10.144</span><span class=\"number\">.14</span><span class=\"number\">.138</span> (<span class=\"number\">10.144</span><span class=\"number\">.14</span><span class=\"number\">.138</span>)  <span class=\"number\">7.369</span> ms  <span class=\"number\">7.362</span> ms  <span class=\"number\">7.340</span> ms</span><br><span class=\"line\"> <span class=\"number\">6</span>  * * <span class=\"number\">14.197</span><span class=\"number\">.242</span><span class=\"number\">.145</span> (<span class=\"number\">14.197</span><span class=\"number\">.242</span><span class=\"number\">.145</span>)  <span class=\"number\">10.329</span> ms</span><br><span class=\"line\"> <span class=\"number\">7</span>  <span class=\"number\">14.197</span><span class=\"number\">.218</span><span class=\"number\">.173</span> (<span class=\"number\">14.197</span><span class=\"number\">.218</span><span class=\"number\">.173</span>)  <span class=\"number\">7.240</span> ms <span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.253</span> (<span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.253</span>)  <span class=\"number\">6.855</span> ms  <span class=\"number\">7.212</span> ms</span><br><span class=\"line\"> <span class=\"number\">8</span>  <span class=\"number\">14.197</span><span class=\"number\">.240</span><span class=\"number\">.249</span> (<span class=\"number\">14.197</span><span class=\"number\">.240</span><span class=\"number\">.249</span>)  <span class=\"number\">44.799</span> ms <span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.189</span> (<span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.189</span>)  <span class=\"number\">42.107</span> ms <span class=\"number\">14.197</span><span class=\"number\">.253</span><span class=\"number\">.145</span> (<span class=\"number\">14.197</span><span class=\"number\">.253</span><span class=\"number\">.145</span>)  <span class=\"number\">50.051</span> ms</span><br><span class=\"line\"> <span class=\"number\">9</span>  <span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.54</span> (<span class=\"number\">14.197</span><span class=\"number\">.252</span><span class=\"number\">.54</span>)  <span class=\"number\">49.394</span> ms  <span class=\"number\">49.414</span> ms <span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.94</span> (<span class=\"number\">14.197</span><span class=\"number\">.248</span><span class=\"number\">.94</span>)  <span class=\"number\">49.406</span> ms</span><br><span class=\"line\"><span class=\"number\">10</span>  <span class=\"number\">14.197</span><span class=\"number\">.149</span><span class=\"number\">.178</span> (<span class=\"number\">14.197</span><span class=\"number\">.149</span><span class=\"number\">.178</span>)  <span class=\"number\">49.406</span> ms  <span class=\"number\">49.383</span> ms <span class=\"number\">14.197</span><span class=\"number\">.178</span><span class=\"number\">.102</span> (<span class=\"number\">14.197</span><span class=\"number\">.178</span><span class=\"number\">.102</span>)  <span class=\"number\">49.382</span> ms</span><br><span class=\"line\"><span class=\"number\">11</span>  <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span>)  <span class=\"number\">49.912</span> ms <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.117</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.117</span>)  <span class=\"number\">50.916</span> ms <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.119</span>)  <span class=\"number\">50.554</span> ms</span><br><span class=\"line\"><span class=\"number\">12</span>  <span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.126</span> (<span class=\"number\">182.61</span><span class=\"number\">.253</span><span class=\"number\">.126</span>)  <span class=\"number\">47.975</span> ms *  <span class=\"number\">50.625</span> ms<span class=\"comment\">//5s*</span></span><br><span class=\"line\"><span class=\"number\">13</span>  * * *</span><br><span class=\"line\"><span class=\"number\">14</span>  * * *</span><br><span class=\"line\"><span class=\"number\">15</span>  * * *</span><br><span class=\"line\"><span class=\"number\">16</span>  * * *</span><br><span class=\"line\"><span class=\"number\">17</span>  * * *</span><br><span class=\"line\"><span class=\"number\">18</span>  * * *</span><br><span class=\"line\"><span class=\"number\">19</span>  * * *</span><br><span class=\"line\"><span class=\"number\">20</span>  * * *</span><br><span class=\"line\"><span class=\"number\">21</span>  * * *</span><br><span class=\"line\"><span class=\"number\">22</span>  * * *</span><br><span class=\"line\"><span class=\"number\">23</span>  * * *</span><br><span class=\"line\"><span class=\"number\">24</span>  * * *</span><br><span class=\"line\"><span class=\"number\">25</span>  * * *</span><br><span class=\"line\"><span class=\"number\">26</span>  * * *</span><br><span class=\"line\"><span class=\"number\">27</span>  * * *</span><br><span class=\"line\"><span class=\"number\">28</span>  * * *</span><br><span class=\"line\"><span class=\"number\">29</span>  * * *</span><br><span class=\"line\"><span class=\"number\">30</span>  * * *</span><br></pre></td></tr></table></figure>\n<p>tcpdump</p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute www.baidu.com(<span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span>)</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.39650</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33434</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009075</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">5354</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">68</span>//icmp</span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">941</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.48912</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33435</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009114</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">5355</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.43061</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33436</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009148</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5356</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl=<span class=\"number\">2</span></span><br><span class=\"line\"> <span class=\"number\">192.168</span><span class=\"meta\">.1</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">68</span></span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">1</span>, id <span class=\"number\">942</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">//<span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.52554</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33437</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009189</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5357</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.51967</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33438</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009243</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">2</span>, id <span class=\"number\">5358</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.45922</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33439</span>: [udp sum ok] UDP, length <span class=\"number\">32</span></span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">58.009281</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">3</span>, id <span class=\"number\">5359</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)//ttl==<span class=\"number\">3</span></span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.34392</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.213</span><span class=\"meta\">.61</span><span class=\"meta\">.33440</span>: [udp sum ok] UDP, length <span class=\"number\">32</span>  </span><br><span class=\"line\">    <span class=\"number\">101.232</span><span class=\"meta\">.192</span><span class=\"meta\">.1</span> &gt; <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span>: ICMP time exceeded <span class=\"keyword\">in</span>-transit, length <span class=\"number\">60</span></span><br><span class=\"line\">\t<span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, id <span class=\"number\">945</span>, offset <span class=\"number\">0</span>, flags [none], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">60</span>)</span><br><span class=\"line\">    <span class=\"number\">192.168</span><span class=\"meta\">.0</span><span class=\"meta\">.110</span><span class=\"meta\">.57724</span> &gt; <span class=\"number\">119.75</span><span class=\"meta\">.216</span><span class=\"meta\">.20</span><span class=\"meta\">.33440</span>: UDP, length <span class=\"number\">32</span></span><br><span class=\"line\">//icmpc</span><br><span class=\"line\"><span class=\"number\">20</span>:<span class=\"number\">21</span>:<span class=\"number\">59.304604</span> <span class=\"built_in\">IP</span> (tos <span class=\"number\">0x0</span>, ttl <span class=\"number\">59</span>, id <span class=\"number\">0</span>, offset <span class=\"number\">0</span>, flags [DF], proto UDP (<span class=\"number\">17</span>), length <span class=\"number\">161</span>)</span><br></pre></td></tr></table></figure>\n<p>:</p>\n<ul>\n<li>ucp55050 :33443ttl1</li>\n<li>ttlicmp</li>\n<li>icmp<br>11  code 0/1  <br>ip)+ip8</li>\n<li></li>\n</ul>\n<h5 id=\"ip\"><a href=\"#ip\" class=\"headerlink\" title=\"ip\"></a>ip</h5><ul>\n<li>ip</li>\n<li>ip</li>\n<li></li>\n<li>icmp</li>\n<li>ip</li>\n<li>ip<br>ip9ip:<br>code(1) len(1) ptr(1) ip1(4) ip2(4).</li>\n<li>eg: traceroute -g 192.168.23.1 <a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">www.baidu.com</a></li>\n</ul>\n<h5 id=\"traceroute\"><a href=\"#traceroute\" class=\"headerlink\" title=\"traceroute\"></a>traceroute</h5><ul>\n<li>linux traceroute</li>\n<li>dpttlicmp</li>\n</ul>"},{"title":"tcpip_routeicmp","date":"2018-06-10T08:59:04.000Z","_content":"### IPICMP\n#### IP\n+ ipiprip,ospf\n+   \n+   \n+ Ip\n+ <!--more-->\n  + ip);\n  + ip\n  + \n  + wlan0,eth0\n+ ip\n+ \n\n```\nernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.42.0.0       *               255.255.255.0   U     600    0        0 wlp2s0\nlink-local      *               255.255.0.0     U     1000   0        0 wlp2s0```\n\n\n```\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         192.168.0.1     0.0.0.0         UG    600    0        0 wlp2s0\nlink-local      *               255.255.0.0     U     1000   0        0 wlp2s0\n192.168.0.0     *               255.255.255.0   U     600    0        0 wlp2s0\n```\n```\nDestination \t\nGateway \t* \nGenmask \t\nFlags \t\n  \tU  \n  \tH  \n  \tG  \n  \tR  \n  \tD  ,(\n  \tM  (\n  \t!  \nMetric \tlinux \nRef \tlinux \nUse \t\nIface \t```\n\n##### \n+ ip\n+ \n+ \n+ \n+ \n\n##### rfc950\n+ 30B30C\n+ -->-->-->10-->11\n+ 11,10\n+ ip\nA,B,C:  \n140.252.1.1,255.255.255.0,ip140.252.4.5,B(1,4),\n\n#####  \n##### ifconfig\n+ ifconfig -a\n```\nwlp2s0    Link encap:Ethernet  HWaddr 48:5a:b6:6e:c9:5f  \n          inet addr:192.168.0.110  Bcast:192.168.0.255  Mask:255.255.255.0\n          inet6 addr: fe80::d713:7c0f:b40c:c085/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:7032 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4297 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:3668623 (3.6 MB)  TX bytes:703812 (703.8 KB)\n```\n##### netstat\n+ shell\n+ netstat -in\n```\nKernel Interface table\nIface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\nenp1s0     1500 0         0      0      0 0             0      0      0      0 BMU\nlo        65536 0      1404      0      0 0          1404      0      0      0 LRU\nwlp2s0     1500 0      7257      0      0 0          4311      0      0      0 BMRU\n```\n\n```\nnetstat -rn\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\n0.0.0.0         192.168.0.1     0.0.0.0         UG        0 0          0 wlp2s0\n169.254.0.0     0.0.0.0         255.255.0.0     U         0 0          0 wlp2s0\n192.168.0.0     0.0.0.0         255.255.255.0   U         0 0          0 wlp2s0\n```\n##### \n+ ifconfigroute\n##### \n+ ipfordwarding:\n+ echo 1 >> /proc/sys/net/ipv4/ip_forwardroot\n#### ICMPrfc792\n##### Icmp\n+ ICMPIP(20+ICMP\n+ IP\n```\n    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Version|  IHL  |Type of Service|          Total Length         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Identification        |Flags|      Fragment Offset    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Time to Live |    Protocol   |         Header Checksum       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Source Address                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Destination Address                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Options                    |    Padding    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n```\noptionspadding\n+ ICMPtype+codeICMPor\n```\n   0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |     Type      |     Code      |          Checksum             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |       different type and code has different content           |\n   |                                                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n```\n+ ipipicmp,\n(8816\n+ +ICMP\n+ icmp\n + icmp\n + \n + \n + ip\n + \n + icmp\n+ ##### ICMP\n + \n + \n + \n + icmp\n + icmp\n + icmp\n + ping \n + \n + \n+ ipicmp\n+ ping\n+ icmp  \nR1R1R2(R2)lanlanR2,R1ICMPR2\n+ ?ICMP\nrfc1256,\n+ icmpip\n+  icmpIPtelnetNTP\n+ icmpudp\n+ pingping\n####  \n##### \n123\n+   \n+ \n+ \n\n##### \nRIP ,OSPF(,BGP\n\n##### \ninternet(AS)NSFNETinternet\n+ IGPRIP,OSPF\n+ EGP,BGP\n+ unixrouted,gated\n\n##### RIPrfc1058\n+ ripudp520,\n+ \n  + \n  + 16\n  + ,Dijkstra\n  + 30s\n  + \n  + 3min60s\n+ :\n+ rip15\n \n##### OSPFrfc1247\n+ \n+ ipudp.tcp,\n+ \n+ \n+ ipip\n+ ip\n+ ****\n+ ****\n+ ipip\n+ \n\n##### BGPrfc1268\n+ \n + \n + \n + \n+ keepalive30s\n##### CIDRrfc1518,1519\n","source":"_posts/tcpip-routeicmp.md","raw":"---\ntitle: tcpip_routeicmp\ndate: 2018-06-10 16:59:04\ntags: tcpip_ip\ncategories: tcpip\n---\n### IPICMP\n#### IP\n+ ipiprip,ospf\n+   \n+   \n+ Ip\n+ <!--more-->\n  + ip);\n  + ip\n  + \n  + wlan0,eth0\n+ ip\n+ \n\n```\nernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n10.42.0.0       *               255.255.255.0   U     600    0        0 wlp2s0\nlink-local      *               255.255.0.0     U     1000   0        0 wlp2s0```\n\n\n```\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         192.168.0.1     0.0.0.0         UG    600    0        0 wlp2s0\nlink-local      *               255.255.0.0     U     1000   0        0 wlp2s0\n192.168.0.0     *               255.255.255.0   U     600    0        0 wlp2s0\n```\n```\nDestination \t\nGateway \t* \nGenmask \t\nFlags \t\n  \tU  \n  \tH  \n  \tG  \n  \tR  \n  \tD  ,(\n  \tM  (\n  \t!  \nMetric \tlinux \nRef \tlinux \nUse \t\nIface \t```\n\n##### \n+ ip\n+ \n+ \n+ \n+ \n\n##### rfc950\n+ 30B30C\n+ -->-->-->10-->11\n+ 11,10\n+ ip\nA,B,C:  \n140.252.1.1,255.255.255.0,ip140.252.4.5,B(1,4),\n\n#####  \n##### ifconfig\n+ ifconfig -a\n```\nwlp2s0    Link encap:Ethernet  HWaddr 48:5a:b6:6e:c9:5f  \n          inet addr:192.168.0.110  Bcast:192.168.0.255  Mask:255.255.255.0\n          inet6 addr: fe80::d713:7c0f:b40c:c085/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:7032 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4297 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:3668623 (3.6 MB)  TX bytes:703812 (703.8 KB)\n```\n##### netstat\n+ shell\n+ netstat -in\n```\nKernel Interface table\nIface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\nenp1s0     1500 0         0      0      0 0             0      0      0      0 BMU\nlo        65536 0      1404      0      0 0          1404      0      0      0 LRU\nwlp2s0     1500 0      7257      0      0 0          4311      0      0      0 BMRU\n```\n\n```\nnetstat -rn\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\n0.0.0.0         192.168.0.1     0.0.0.0         UG        0 0          0 wlp2s0\n169.254.0.0     0.0.0.0         255.255.0.0     U         0 0          0 wlp2s0\n192.168.0.0     0.0.0.0         255.255.255.0   U         0 0          0 wlp2s0\n```\n##### \n+ ifconfigroute\n##### \n+ ipfordwarding:\n+ echo 1 >> /proc/sys/net/ipv4/ip_forwardroot\n#### ICMPrfc792\n##### Icmp\n+ ICMPIP(20+ICMP\n+ IP\n```\n    0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |Version|  IHL  |Type of Service|          Total Length         |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |         Identification        |Flags|      Fragment Offset    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |  Time to Live |    Protocol   |         Header Checksum       |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                       Source Address                          |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Destination Address                        |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |                    Options                    |    Padding    |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n```\noptionspadding\n+ ICMPtype+codeICMPor\n```\n   0                   1                   2                   3\n    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |     Type      |     Code      |          Checksum             |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n   |       different type and code has different content           |\n   |                                                               |\n   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n```\n+ ipipicmp,\n(8816\n+ +ICMP\n+ icmp\n + icmp\n + \n + \n + ip\n + \n + icmp\n+ ##### ICMP\n + \n + \n + \n + icmp\n + icmp\n + icmp\n + ping \n + \n + \n+ ipicmp\n+ ping\n+ icmp  \nR1R1R2(R2)lanlanR2,R1ICMPR2\n+ ?ICMP\nrfc1256,\n+ icmpip\n+  icmpIPtelnetNTP\n+ icmpudp\n+ pingping\n####  \n##### \n123\n+   \n+ \n+ \n\n##### \nRIP ,OSPF(,BGP\n\n##### \ninternet(AS)NSFNETinternet\n+ IGPRIP,OSPF\n+ EGP,BGP\n+ unixrouted,gated\n\n##### RIPrfc1058\n+ ripudp520,\n+ \n  + \n  + 16\n  + ,Dijkstra\n  + 30s\n  + \n  + 3min60s\n+ :\n+ rip15\n \n##### OSPFrfc1247\n+ \n+ ipudp.tcp,\n+ \n+ \n+ ipip\n+ ip\n+ ****\n+ ****\n+ ipip\n+ \n\n##### BGPrfc1268\n+ \n + \n + \n + \n+ keepalive30s\n##### CIDRrfc1518,1519\n","slug":"tcpip-routeicmp","published":1,"updated":"2018-06-17T15:24:04.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghqg003100jxx5ft0rzq","content":"<h3 id=\"IPICMP\"><a href=\"#IPICMP\" class=\"headerlink\" title=\"IPICMP\"></a>IPICMP</h3><h4 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h4><ul>\n<li>ipiprip,ospf</li>\n<li>  </li>\n<li>  </li>\n<li>Ip</li>\n<li><a id=\"more\"></a><ul>\n<li>ip);</li>\n<li>ip</li>\n<li></li>\n<li>wlan0,eth0</li>\n</ul>\n</li>\n<li>ip</li>\n<li><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\"><span class=\"number\">10.42</span><span class=\"number\">.0</span><span class=\"number\">.0</span>       *               <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U     <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\">link-local      *               <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U     <span class=\"number\">1000</span>   <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\"><span class=\"section\">default</span>         <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         UG    <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\">link-local      *               <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U     <span class=\"number\">1000</span>   <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     *               <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U     <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Destination \t</span><br><span class=\"line\">Gateway \t* </span><br><span class=\"line\">Genmask \t</span><br><span class=\"line\">Flags \t</span><br><span class=\"line\">  \tU  </span><br><span class=\"line\">  \tH  </span><br><span class=\"line\">  \tG  </span><br><span class=\"line\">  \tR  </span><br><span class=\"line\">  \tD  ,(</span><br><span class=\"line\">  \tM  (</span><br><span class=\"line\">  \t!  </span><br><span class=\"line\">Metric \tlinux </span><br><span class=\"line\">Ref \tlinux </span><br><span class=\"line\"><span class=\"keyword\">Use</span> \t</span><br><span class=\"line\">Iface \t</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>ip</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"rfc950\"><a href=\"#rfc950\" class=\"headerlink\" title=\"rfc950\"></a>rfc950</h5><ul>\n<li>30B30C</li>\n<li>&gt;&gt;&gt;10&gt;11</li>\n<li>11,10</li>\n<li>ip<br>A,B,C:<br>140.252.1.1,255.255.255.0,ip140.252.4.5,B(1,4),</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"ifconfig\"><a href=\"#ifconfig\" class=\"headerlink\" title=\"ifconfig\"></a>ifconfig</h5><ul>\n<li>ifconfig -a<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">wlp2s0</span>    <span class=\"selector-tag\">Link</span> <span class=\"selector-tag\">encap</span><span class=\"selector-pseudo\">:Ethernet</span>  <span class=\"selector-tag\">HWaddr</span> <span class=\"selector-tag\">48</span><span class=\"selector-pseudo\">:5a</span><span class=\"selector-pseudo\">:b6</span><span class=\"selector-pseudo\">:6e</span><span class=\"selector-pseudo\">:c9</span><span class=\"selector-pseudo\">:5f</span>  </span><br><span class=\"line\">          <span class=\"selector-tag\">inet</span> <span class=\"selector-tag\">addr</span><span class=\"selector-pseudo\">:192.168.0.110</span>  <span class=\"selector-tag\">Bcast</span><span class=\"selector-pseudo\">:192.168.0.255</span>  <span class=\"selector-tag\">Mask</span><span class=\"selector-pseudo\">:255.255.255.0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">inet6</span> <span class=\"selector-tag\">addr</span>: <span class=\"selector-tag\">fe80</span><span class=\"selector-pseudo\">::d713</span><span class=\"selector-pseudo\">:7c0f</span><span class=\"selector-pseudo\">:b40c</span><span class=\"selector-pseudo\">:c085</span>/<span class=\"selector-tag\">64</span> <span class=\"selector-tag\">Scope</span><span class=\"selector-pseudo\">:Link</span></span><br><span class=\"line\">          <span class=\"selector-tag\">UP</span> <span class=\"selector-tag\">BROADCAST</span> <span class=\"selector-tag\">RUNNING</span> <span class=\"selector-tag\">MULTICAST</span>  <span class=\"selector-tag\">MTU</span><span class=\"selector-pseudo\">:1500</span>  <span class=\"selector-tag\">Metric</span><span class=\"selector-pseudo\">:1</span></span><br><span class=\"line\">          <span class=\"selector-tag\">RX</span> <span class=\"selector-tag\">packets</span><span class=\"selector-pseudo\">:7032</span> <span class=\"selector-tag\">errors</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">dropped</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">overruns</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">frame</span><span class=\"selector-pseudo\">:0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">TX</span> <span class=\"selector-tag\">packets</span><span class=\"selector-pseudo\">:4297</span> <span class=\"selector-tag\">errors</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">dropped</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">overruns</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">carrier</span><span class=\"selector-pseudo\">:0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">collisions</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">txqueuelen</span><span class=\"selector-pseudo\">:1000</span> </span><br><span class=\"line\">          <span class=\"selector-tag\">RX</span> <span class=\"selector-tag\">bytes</span><span class=\"selector-pseudo\">:3668623</span> (<span class=\"number\">3.6</span> MB)  <span class=\"selector-tag\">TX</span> <span class=\"selector-tag\">bytes</span><span class=\"selector-pseudo\">:703812</span> (<span class=\"number\">703.8</span> KB)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h5><ul>\n<li>shell</li>\n<li>netstat -in<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Kernel Interface table</span><br><span class=\"line\">Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg</span><br><span class=\"line\">enp1s0     <span class=\"number\">1500</span> <span class=\"number\">0</span>         <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>             <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> BMU</span><br><span class=\"line\">lo        <span class=\"number\">65536</span> <span class=\"number\">0</span>      <span class=\"number\">1404</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">1404</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> LRU</span><br><span class=\"line\">wlp2s0     <span class=\"number\">1500</span> <span class=\"number\">0</span>      <span class=\"number\">7257</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">4311</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> BMRU</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -rn</span><br><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class=\"line\"><span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         UG        <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">169.254</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U         <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U         <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>ifconfigroute<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li>ipfordwarding:</li>\n<li>echo 1 &gt;&gt; /proc/sys/net/ipv4/ip_forwardroot<h4 id=\"ICMPrfc792\"><a href=\"#ICMPrfc792\" class=\"headerlink\" title=\"ICMPrfc792\"></a>ICMPrfc792</h4><h5 id=\"Icmp\"><a href=\"#Icmp\" class=\"headerlink\" title=\"Icmp\"></a>Icmp</h5></li>\n<li>ICMPIP(20+ICMP</li>\n<li>IP<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"code\"> 0                   1                   2                   3</span></span><br><span class=\"line\"><span class=\"code\"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span></span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|Version|  IHL  |Type of Service|          Total Length         |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|         Identification        |Flags|      Fragment Offset    |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|  Time to Live |    Protocol   |         Header Checksum       |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                       Source Address                          |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                    Destination Address                        |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                    Options                    |    Padding    |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>optionspadding</p>\n<ul>\n<li><p>ICMPtype+codeICMPor</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>                   <span class=\"number\">1</span>                   <span class=\"number\">2</span>                   <span class=\"number\">3</span></span><br><span class=\"line\"> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span></span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class=\"line\">|     Type      |     Code      |          Checksum             |</span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class=\"line\">|       different type and code has different content           |</span><br><span class=\"line\">|                                                               |</span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ipipicmp,<br>(8816</p>\n</li>\n<li>+ICMP</li>\n<li>icmp<ul>\n<li>icmp</li>\n<li></li>\n<li></li>\n<li>ip</li>\n<li></li>\n<li>icmp</li>\n</ul>\n</li>\n<li><h5 id=\"ICMP\"><a href=\"#ICMP\" class=\"headerlink\" title=\"ICMP\"></a>ICMP</h5><ul>\n<li></li>\n<li></li>\n<li></li>\n<li>icmp</li>\n<li>icmp</li>\n<li>icmp</li>\n<li>ping </li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>ipicmp</li>\n<li>ping</li>\n<li>icmp<br>R1R1R2(R2)lanlanR2,R1ICMPR2</li>\n<li>?ICMP<br>rfc1256,</li>\n<li>icmpip</li>\n<li>icmpIPtelnetNTP</li>\n<li>icmpudp</li>\n<li>pingping<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>123</li>\n<li>  </li>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>RIP ,OSPF(,BGP</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>internet(AS)NSFNETinternet</p>\n<ul>\n<li>IGPRIP,OSPF</li>\n<li>EGP,BGP</li>\n<li>unixrouted,gated</li>\n</ul>\n<h5 id=\"RIPrfc1058\"><a href=\"#RIPrfc1058\" class=\"headerlink\" title=\"RIPrfc1058\"></a>RIPrfc1058</h5><ul>\n<li>ripudp520,</li>\n<li><ul>\n<li></li>\n<li>16</li>\n<li>,Dijkstra</li>\n<li>30s</li>\n<li></li>\n<li>3min60s</li>\n</ul>\n</li>\n<li>:</li>\n<li>rip15</li>\n</ul>\n<h5 id=\"OSPFrfc1247\"><a href=\"#OSPFrfc1247\" class=\"headerlink\" title=\"OSPFrfc1247\"></a>OSPFrfc1247</h5><ul>\n<li></li>\n<li>ipudp.tcp,</li>\n<li></li>\n<li></li>\n<li>ipip</li>\n<li>ip</li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li>ipip</li>\n<li></li>\n</ul>\n<h5 id=\"BGPrfc1268\"><a href=\"#BGPrfc1268\" class=\"headerlink\" title=\"BGPrfc1268\"></a>BGPrfc1268</h5><ul>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>keepalive30s<h5 id=\"CIDRrfc1518-1519\"><a href=\"#CIDRrfc1518-1519\" class=\"headerlink\" title=\"CIDRrfc1518,1519\"></a>CIDRrfc1518,1519</h5></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h3 id=\"IPICMP\"><a href=\"#IPICMP\" class=\"headerlink\" title=\"IPICMP\"></a>IPICMP</h3><h4 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h4><ul>\n<li>ipiprip,ospf</li>\n<li>  </li>\n<li>  </li>\n<li>Ip</li>\n<li>","more":"<ul>\n<li>ip);</li>\n<li>ip</li>\n<li></li>\n<li>wlan0,eth0</li>\n</ul>\n</li>\n<li>ip</li>\n<li><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\"><span class=\"number\">10.42</span><span class=\"number\">.0</span><span class=\"number\">.0</span>       *               <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U     <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\">link-local      *               <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U     <span class=\"number\">1000</span>   <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\"><span class=\"section\">default</span>         <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         UG    <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\">link-local      *               <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U     <span class=\"number\">1000</span>   <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     *               <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U     <span class=\"number\">600</span>    <span class=\"number\">0</span>        <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Destination \t</span><br><span class=\"line\">Gateway \t* </span><br><span class=\"line\">Genmask \t</span><br><span class=\"line\">Flags \t</span><br><span class=\"line\">  \tU  </span><br><span class=\"line\">  \tH  </span><br><span class=\"line\">  \tG  </span><br><span class=\"line\">  \tR  </span><br><span class=\"line\">  \tD  ,(</span><br><span class=\"line\">  \tM  (</span><br><span class=\"line\">  \t!  </span><br><span class=\"line\">Metric \tlinux </span><br><span class=\"line\">Ref \tlinux </span><br><span class=\"line\"><span class=\"keyword\">Use</span> \t</span><br><span class=\"line\">Iface \t</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>ip</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"rfc950\"><a href=\"#rfc950\" class=\"headerlink\" title=\"rfc950\"></a>rfc950</h5><ul>\n<li>30B30C</li>\n<li>&gt;&gt;&gt;10&gt;11</li>\n<li>11,10</li>\n<li>ip<br>A,B,C:<br>140.252.1.1,255.255.255.0,ip140.252.4.5,B(1,4),</li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><h5 id=\"ifconfig\"><a href=\"#ifconfig\" class=\"headerlink\" title=\"ifconfig\"></a>ifconfig</h5><ul>\n<li>ifconfig -a<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">wlp2s0</span>    <span class=\"selector-tag\">Link</span> <span class=\"selector-tag\">encap</span><span class=\"selector-pseudo\">:Ethernet</span>  <span class=\"selector-tag\">HWaddr</span> <span class=\"selector-tag\">48</span><span class=\"selector-pseudo\">:5a</span><span class=\"selector-pseudo\">:b6</span><span class=\"selector-pseudo\">:6e</span><span class=\"selector-pseudo\">:c9</span><span class=\"selector-pseudo\">:5f</span>  </span><br><span class=\"line\">          <span class=\"selector-tag\">inet</span> <span class=\"selector-tag\">addr</span><span class=\"selector-pseudo\">:192.168.0.110</span>  <span class=\"selector-tag\">Bcast</span><span class=\"selector-pseudo\">:192.168.0.255</span>  <span class=\"selector-tag\">Mask</span><span class=\"selector-pseudo\">:255.255.255.0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">inet6</span> <span class=\"selector-tag\">addr</span>: <span class=\"selector-tag\">fe80</span><span class=\"selector-pseudo\">::d713</span><span class=\"selector-pseudo\">:7c0f</span><span class=\"selector-pseudo\">:b40c</span><span class=\"selector-pseudo\">:c085</span>/<span class=\"selector-tag\">64</span> <span class=\"selector-tag\">Scope</span><span class=\"selector-pseudo\">:Link</span></span><br><span class=\"line\">          <span class=\"selector-tag\">UP</span> <span class=\"selector-tag\">BROADCAST</span> <span class=\"selector-tag\">RUNNING</span> <span class=\"selector-tag\">MULTICAST</span>  <span class=\"selector-tag\">MTU</span><span class=\"selector-pseudo\">:1500</span>  <span class=\"selector-tag\">Metric</span><span class=\"selector-pseudo\">:1</span></span><br><span class=\"line\">          <span class=\"selector-tag\">RX</span> <span class=\"selector-tag\">packets</span><span class=\"selector-pseudo\">:7032</span> <span class=\"selector-tag\">errors</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">dropped</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">overruns</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">frame</span><span class=\"selector-pseudo\">:0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">TX</span> <span class=\"selector-tag\">packets</span><span class=\"selector-pseudo\">:4297</span> <span class=\"selector-tag\">errors</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">dropped</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">overruns</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">carrier</span><span class=\"selector-pseudo\">:0</span></span><br><span class=\"line\">          <span class=\"selector-tag\">collisions</span><span class=\"selector-pseudo\">:0</span> <span class=\"selector-tag\">txqueuelen</span><span class=\"selector-pseudo\">:1000</span> </span><br><span class=\"line\">          <span class=\"selector-tag\">RX</span> <span class=\"selector-tag\">bytes</span><span class=\"selector-pseudo\">:3668623</span> (<span class=\"number\">3.6</span> MB)  <span class=\"selector-tag\">TX</span> <span class=\"selector-tag\">bytes</span><span class=\"selector-pseudo\">:703812</span> (<span class=\"number\">703.8</span> KB)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h5><ul>\n<li>shell</li>\n<li>netstat -in<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Kernel Interface table</span><br><span class=\"line\">Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg</span><br><span class=\"line\">enp1s0     <span class=\"number\">1500</span> <span class=\"number\">0</span>         <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>             <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> BMU</span><br><span class=\"line\">lo        <span class=\"number\">65536</span> <span class=\"number\">0</span>      <span class=\"number\">1404</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">1404</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> LRU</span><br><span class=\"line\">wlp2s0     <span class=\"number\">1500</span> <span class=\"number\">0</span>      <span class=\"number\">7257</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">4311</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span>      <span class=\"number\">0</span> BMRU</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -rn</span><br><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface</span><br><span class=\"line\"><span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         UG        <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">169.254</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">255.255</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     U         <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span>     <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>         <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span>   U         <span class=\"number\">0</span> <span class=\"number\">0</span>          <span class=\"number\">0</span> wlp2s0</span><br></pre></td></tr></table></figure>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul>\n<li>ifconfigroute<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5></li>\n<li>ipfordwarding:</li>\n<li>echo 1 &gt;&gt; /proc/sys/net/ipv4/ip_forwardroot<h4 id=\"ICMPrfc792\"><a href=\"#ICMPrfc792\" class=\"headerlink\" title=\"ICMPrfc792\"></a>ICMPrfc792</h4><h5 id=\"Icmp\"><a href=\"#Icmp\" class=\"headerlink\" title=\"Icmp\"></a>Icmp</h5></li>\n<li>ICMPIP(20+ICMP</li>\n<li>IP<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"code\"> 0                   1                   2                   3</span></span><br><span class=\"line\"><span class=\"code\"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span></span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|Version|  IHL  |Type of Service|          Total Length         |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|         Identification        |Flags|      Fragment Offset    |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|  Time to Live |    Protocol   |         Header Checksum       |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                       Source Address                          |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                    Destination Address                        |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br><span class=\"line\">|                    Options                    |    Padding    |</span><br><span class=\"line\"><span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-<span class=\"code\">+-+</span>-+</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>optionspadding</p>\n<ul>\n<li><p>ICMPtype+codeICMPor</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>                   <span class=\"number\">1</span>                   <span class=\"number\">2</span>                   <span class=\"number\">3</span></span><br><span class=\"line\"> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span></span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class=\"line\">|     Type      |     Code      |          Checksum             |</span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class=\"line\">|       different type and code has different content           |</span><br><span class=\"line\">|                                                               |</span><br><span class=\"line\">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ipipicmp,<br>(8816</p>\n</li>\n<li>+ICMP</li>\n<li>icmp<ul>\n<li>icmp</li>\n<li></li>\n<li></li>\n<li>ip</li>\n<li></li>\n<li>icmp</li>\n</ul>\n</li>\n<li><h5 id=\"ICMP\"><a href=\"#ICMP\" class=\"headerlink\" title=\"ICMP\"></a>ICMP</h5><ul>\n<li></li>\n<li></li>\n<li></li>\n<li>icmp</li>\n<li>icmp</li>\n<li>icmp</li>\n<li>ping </li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>ipicmp</li>\n<li>ping</li>\n<li>icmp<br>R1R1R2(R2)lanlanR2,R1ICMPR2</li>\n<li>?ICMP<br>rfc1256,</li>\n<li>icmpip</li>\n<li>icmpIPtelnetNTP</li>\n<li>icmpudp</li>\n<li>pingping<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>123</li>\n<li>  </li>\n<li></li>\n<li></li>\n</ul>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>RIP ,OSPF(,BGP</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>internet(AS)NSFNETinternet</p>\n<ul>\n<li>IGPRIP,OSPF</li>\n<li>EGP,BGP</li>\n<li>unixrouted,gated</li>\n</ul>\n<h5 id=\"RIPrfc1058\"><a href=\"#RIPrfc1058\" class=\"headerlink\" title=\"RIPrfc1058\"></a>RIPrfc1058</h5><ul>\n<li>ripudp520,</li>\n<li><ul>\n<li></li>\n<li>16</li>\n<li>,Dijkstra</li>\n<li>30s</li>\n<li></li>\n<li>3min60s</li>\n</ul>\n</li>\n<li>:</li>\n<li>rip15</li>\n</ul>\n<h5 id=\"OSPFrfc1247\"><a href=\"#OSPFrfc1247\" class=\"headerlink\" title=\"OSPFrfc1247\"></a>OSPFrfc1247</h5><ul>\n<li></li>\n<li>ipudp.tcp,</li>\n<li></li>\n<li></li>\n<li>ipip</li>\n<li>ip</li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li>ipip</li>\n<li></li>\n</ul>\n<h5 id=\"BGPrfc1268\"><a href=\"#BGPrfc1268\" class=\"headerlink\" title=\"BGPrfc1268\"></a>BGPrfc1268</h5><ul>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>keepalive30s<h5 id=\"CIDRrfc1518-1519\"><a href=\"#CIDRrfc1518-1519\" class=\"headerlink\" title=\"CIDRrfc1518,1519\"></a>CIDRrfc1518,1519</h5></li>\n</ul>"},{"title":"test_article_picture","date":"2018-05-20T07:46:24.000Z","_content":"##this is a test of picture with test again in 2019\n{% asset_img example.jpg This is an example image %}\nend\n","source":"_posts/test-article-picture.md","raw":"---\ntitle: test_article_picture\ndate: 2018-05-20 15:46:24\ntags: test\n---\n##this is a test of picture with test again in 2019\n{% asset_img example.jpg This is an example image %}\nend\n","slug":"test-article-picture","published":1,"updated":"2019-10-08T09:18:54.218Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck819ghqi003300jx15yu233p","content":"<p>##this is a test of picture with test again in 2019<br><img src=\"/2018/05/20/test-article-picture/example.jpg\" title=\"This is an example image\"><br>end</p>\n","site":{"data":{}},"excerpt":"","more":"<p>##this is a test of picture with test again in 2019<br><img src=\"/2018/05/20/test-article-picture/example.jpg\" title=\"This is an example image\"><br>end</p>\n"}],"PostAsset":[{"_id":"source/_posts/tcpip-PF-PACKET/pf_packet.jpg","slug":"pf_packet.jpg","post":"ck819ghq5002r00jx9hqmzuq0","modified":0,"renderable":0},{"_id":"source/_posts/test-article-picture/example.jpg","slug":"example.jpg","post":"ck819ghqi003300jx15yu233p","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/buildlinklist.png","slug":"buildlinklist.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/delete.png","slug":"delete.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/headbuild.png","slug":"headbuild.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/headnode.png","slug":"headnode.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/insert.png","slug":"insert.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/linklist.png","slug":"linklist.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/mergerecycle.png","slug":"mergerecycle.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/sigrecyclelink.png","slug":"sigrecyclelink.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0},{"_id":"source/_posts/DS-linklist/tailbuile.png","slug":"tailbuile.png","post":"ck819ghmq000000jxn48kg6w7","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ck819ghmq000000jxn48kg6w7","category_id":"ck819ghn6000400jxns1ky9f6","_id":"ck819ghnx000f00jxlajrv2ls"},{"post_id":"ck819ghnp000d00jxkirsmowg","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819gho9000l00jx53epik9b"},{"post_id":"ck819ghn0000200jxd4m4al0f","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819ghod000q00jx3353wbl7"},{"post_id":"ck819ghnt000e00jx91ly60o6","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819ghog000t00jxiks9lq5d"},{"post_id":"ck819gho0000i00jxvcqqcn0r","category_id":"ck819ghn6000400jxns1ky9f6","_id":"ck819ghoj000x00jx5pekyubm"},{"post_id":"ck819ghn8000600jxn6h81wl8","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819ghol001000jx11qy1xx7"},{"post_id":"ck819ghnf000800jxn8xnhtc5","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819ghoo001400jxha9kq2ky"},{"post_id":"ck819ghnj000900jxtfqf7pyh","category_id":"ck819ghnn000a00jxpppfqvfe","_id":"ck819ghoq001700jxsffeksln"},{"post_id":"ck819gho3000k00jx2t0udgsx","category_id":"ck819ghom001100jxaons7kxw","_id":"ck819ghov001d00jx7p903v3f"},{"post_id":"ck819ghor001a00jx9mi93vu9","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghp0001j00jxflr047pt"},{"post_id":"ck819ghoc000p00jxgrpes8hw","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghp2001m00jx9vn1yxwh"},{"post_id":"ck819ghou001c00jxma3nwerh","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghp7001q00jxhiy6n15w"},{"post_id":"ck819ghow001g00jxz9m6muxm","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpc001t00jx6j7eydnl"},{"post_id":"ck819ghof000s00jx5ev84zq5","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpg001w00jxcp9nuoht"},{"post_id":"ck819ghoy001i00jxqfxh62gy","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpj002000jxs8xolinv"},{"post_id":"ck819ghp1001l00jxs0qsyw37","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpn002400jxev67ydx4"},{"post_id":"ck819ghoi000w00jx4kszh5o0","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpq002800jx2wfqo1wd"},{"post_id":"ck819ghp4001p00jx1ptjofww","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpt002b00jxgp3xet1y"},{"post_id":"ck819ghok000z00jxp3j1qiuj","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpv002f00jxggzideeo"},{"post_id":"ck819ghpe001v00jxpd751tnk","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpx002i00jxpea7keae"},{"post_id":"ck819ghon001300jxqz9l2sek","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghpz002l00jxlcxpi4dh"},{"post_id":"ck819ghop001600jxbimrk4ms","category_id":"ck819ghoq001800jxcjcfzofh","_id":"ck819ghq3002p00jxddpvd2un"},{"post_id":"ck819ghpl002300jxs5qtt0kb","category_id":"ck819ghpt002d00jxtwfb4v0u","_id":"ck819ghq9002t00jxbh6nvbby"},{"post_id":"ck819ghpo002700jx7xdcs7ek","category_id":"ck819ghpt002d00jxtwfb4v0u","_id":"ck819ghqf002z00jxwkmzt4fj"},{"post_id":"ck819ghpr002a00jxxd4xas0d","category_id":"ck819ghpt002d00jxtwfb4v0u","_id":"ck819ghql003500jx312v6np4"},{"post_id":"ck819ghpu002e00jx87bt03e9","category_id":"ck819ghpt002d00jxtwfb4v0u","_id":"ck819ghqo003800jxhptkr5o6"},{"post_id":"ck819ghpw002h00jx342mpmrp","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqq003d00jxu16gsd7b"},{"post_id":"ck819ghpy002k00jx2emw48mv","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqs003h00jxec2x6tj3"},{"post_id":"ck819ghq1002o00jxt0dcy99q","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqu003l00jxc0yisbkh"},{"post_id":"ck819ghq5002r00jx9hqmzuq0","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqw003p00jx2sphhrww"},{"post_id":"ck819ghqb002v00jxqym5i3hs","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqx003t00jxm16dcifj"},{"post_id":"ck819ghqd002x00jxqxine49w","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghqz003w00jxmf4or9pw"},{"post_id":"ck819ghqg003100jxx5ft0rzq","category_id":"ck819ghqk003400jxof1g5qgs","_id":"ck819ghr0003z00jxpg6zxgs8"}],"PostTag":[{"post_id":"ck819ghmq000000jxn48kg6w7","tag_id":"ck819ghn8000500jxanilv49w","_id":"ck819ghnp000c00jxcatd4n88"},{"post_id":"ck819ghn0000200jxd4m4al0f","tag_id":"ck819ghnn000b00jx7omc6s54","_id":"ck819gho2000j00jxulqzfsi0"},{"post_id":"ck819gho0000i00jxvcqqcn0r","tag_id":"ck819ghn8000500jxanilv49w","_id":"ck819ghob000o00jxrwl6ph1e"},{"post_id":"ck819ghn8000600jxn6h81wl8","tag_id":"ck819ghny000h00jx6rzsvwhh","_id":"ck819ghoe000r00jxlq0acfrq"},{"post_id":"ck819ghnf000800jxn8xnhtc5","tag_id":"ck819ghny000h00jx6rzsvwhh","_id":"ck819ghok000y00jxydiztsqh"},{"post_id":"ck819ghnj000900jxtfqf7pyh","tag_id":"ck819ghnn000b00jx7omc6s54","_id":"ck819ghoo001500jxq2253pcj"},{"post_id":"ck819ghnp000d00jxkirsmowg","tag_id":"ck819ghny000h00jx6rzsvwhh","_id":"ck819ghot001b00jxf4bfq8ez"},{"post_id":"ck819ghnt000e00jx91ly60o6","tag_id":"ck819ghor001900jxfj2q8qqj","_id":"ck819ghoy001h00jxsasxa5pr"},{"post_id":"ck819gho3000k00jx2t0udgsx","tag_id":"ck819ghow001f00jxjylers53","_id":"ck819ghp4001o00jxb3a98qb3"},{"post_id":"ck819ghoc000p00jxgrpes8hw","tag_id":"ck819ghp3001n00jxwkymtvlr","_id":"ck819ghpg001x00jxyjtu1p9o"},{"post_id":"ck819ghpe001v00jxpd751tnk","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghpl002200jxrcoxx3uk"},{"post_id":"ck819ghof000s00jx5ev84zq5","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghpn002500jx65z1ie0t"},{"post_id":"ck819ghoi000w00jx4kszh5o0","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghpt002c00jxd9zsgbeh"},{"post_id":"ck819ghok000z00jxp3j1qiuj","tag_id":"ck819ghpq002900jxjsnn5mbp","_id":"ck819ghpy002j00jx28ttcv2k"},{"post_id":"ck819ghon001300jxqz9l2sek","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghq4002q00jxsfxlb7kc"},{"post_id":"ck819ghop001600jxbimrk4ms","tag_id":"ck819ghp3001n00jxwkymtvlr","_id":"ck819ghqd002w00jxvh7beipq"},{"post_id":"ck819ghor001a00jx9mi93vu9","tag_id":"ck819ghp3001n00jxwkymtvlr","_id":"ck819ghqi003200jxxm3d0nmg"},{"post_id":"ck819ghou001c00jxma3nwerh","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghqn003700jx0h9w4qqi"},{"post_id":"ck819ghow001g00jxz9m6muxm","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghqq003b00jx9mx2hlyn"},{"post_id":"ck819ghoy001i00jxqfxh62gy","tag_id":"ck819ghpe001u00jx4ps50vcj","_id":"ck819ghqs003f00jxdrf1g1r2"},{"post_id":"ck819ghp1001l00jxs0qsyw37","tag_id":"ck819ghpq002900jxjsnn5mbp","_id":"ck819ghqt003j00jxu4szpk0i"},{"post_id":"ck819ghp4001p00jx1ptjofww","tag_id":"ck819ghpq002900jxjsnn5mbp","_id":"ck819ghqv003n00jx2yyirwb9"},{"post_id":"ck819ghpl002300jxs5qtt0kb","tag_id":"ck819ghqu003m00jxnb6hmm3b","_id":"ck819ghqx003r00jx8wzom2ig"},{"post_id":"ck819ghpo002700jx7xdcs7ek","tag_id":"ck819ghqu003m00jxnb6hmm3b","_id":"ck819ghqz003v00jxxqw5gz9v"},{"post_id":"ck819ghpr002a00jxxd4xas0d","tag_id":"ck819ghqu003m00jxnb6hmm3b","_id":"ck819ghr0003y00jxtnpci39d"},{"post_id":"ck819ghpu002e00jx87bt03e9","tag_id":"ck819ghqz003x00jxzny8h73c","_id":"ck819ghr1004100jx0gnkcsap"},{"post_id":"ck819ghpw002h00jx342mpmrp","tag_id":"ck819ghr0004000jx23rn9bno","_id":"ck819ghr2004300jxhaqu3e5c"},{"post_id":"ck819ghpy002k00jx2emw48mv","tag_id":"ck819ghr1004200jxg8z2e2c6","_id":"ck819ghr3004500jx08s1lgaw"},{"post_id":"ck819ghq1002o00jxt0dcy99q","tag_id":"ck819ghr0004000jx23rn9bno","_id":"ck819ghr6004700jxavy057jj"},{"post_id":"ck819ghq5002r00jx9hqmzuq0","tag_id":"ck819ghr4004600jx9zx0cri3","_id":"ck819ghr7004900jx18ojebt2"},{"post_id":"ck819ghqb002v00jxqym5i3hs","tag_id":"ck819ghr0004000jx23rn9bno","_id":"ck819ghr9004b00jxz6feu3bd"},{"post_id":"ck819ghqd002x00jxqxine49w","tag_id":"ck819ghr1004200jxg8z2e2c6","_id":"ck819ghra004d00jxn9munjvq"},{"post_id":"ck819ghqg003100jxx5ft0rzq","tag_id":"ck819ghr1004200jxg8z2e2c6","_id":"ck819ghra004f00jxehnxvdvh"},{"post_id":"ck819ghqi003300jx15yu233p","tag_id":"ck819ghra004e00jxdd32yefd","_id":"ck819ghrb004g00jxygatju1o"}],"Tag":[{"name":"","_id":"ck819ghn8000500jxanilv49w"},{"name":"android_coding","_id":"ck819ghnn000b00jx7omc6s54"},{"name":"android_make","_id":"ck819ghny000h00jx6rzsvwhh"},{"name":"android_activity","_id":"ck819ghor001900jxfj2q8qqj"},{"name":"","_id":"ck819ghow001f00jxjylers53"},{"name":"cpp_memory","_id":"ck819ghp3001n00jxwkymtvlr"},{"name":"cpp_class","_id":"ck819ghpe001u00jx4ps50vcj"},{"name":"cpp_keyword","_id":"ck819ghpq002900jxjsnn5mbp"},{"name":"leetcode_linklist","_id":"ck819ghqu003m00jxnb6hmm3b"},{"name":"leetcode_string","_id":"ck819ghqz003x00jxzny8h73c"},{"name":"tcpip_mac","_id":"ck819ghr0004000jx23rn9bno"},{"name":"tcpip_ip","_id":"ck819ghr1004200jxg8z2e2c6"},{"name":"PF_PACKET","_id":"ck819ghr4004600jx9zx0cri3"},{"name":"test","_id":"ck819ghra004e00jxdd32yefd"}]}}